{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/md5.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/style-loader/index.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/css-loader/index.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/styles.css\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/css-loader/index.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/styles.css\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/css-loader/lib/css-base.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/style-loader/lib/addStyles.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/style-loader/lib/urls.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/constants.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/mathml.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/configuration.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/textcache.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/listeners.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/serviceprovider.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/latex.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/stringmanager.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/util.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/image.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/accessibility.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/parser.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/editorlistener.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/contentmanager.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/customeditors.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/jsvariables.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/event.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/node_modules/uuid/dist/esm-browser/rng.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/popupmessage.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/node_modules/uuid/dist/esm-browser/regex.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/node_modules/uuid/dist/esm-browser/stringify.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/node_modules/uuid/dist/esm-browser/validate.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/node_modules/uuid/dist/esm-browser/v4.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/telemetry.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/integrationmodel.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/general/close_icon.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/hover/close_icon_h.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/general/fulls_icon.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/hover/fulls_icon_h.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/general/min_icon.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/hover/min_icon_h.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/general/mins_icon.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/hover/mins_icon_h.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/modal.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/general/max_icon.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/raw-loader/dist/cjs.js!/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/styles/icons/hover/max_icon_h.svg\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/polyfills.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/core.src.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/backwardslib.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/plugin.src.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/node_modules/@wiris/mathtype-html-integration-devkit/src/test.js\",\"/var/www/html/spider-php/thirdparty/client/ckeditor/plugins/ckeditor_wiris/global.js\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"md5\",\"HxOverrides\",\"__name__\",\"dateStr\",\"date\",\"getMonth\",\"getDate\",\"h\",\"getHours\",\"mi\",\"getMinutes\",\"getSeconds\",\"getFullYear\",\"strDate\",\"length\",\"k\",\"split\",\"Date\",\"setTime\",\"setUTCHours\",\"setUTCMinutes\",\"setUTCSeconds\",\"y\",\"cca\",\"index\",\"x\",\"charCodeAt\",\"substr\",\"pos\",\"len\",\"remove\",\"a\",\"obj\",\"splice\",\"iter\",\"cur\",\"arr\",\"hasNext\",\"this\",\"next\",\"IntIter\",\"min\",\"max\",\"__class__\",\"Std\",\"v\",\"js\",\"Boot\",\"__instanceof\",\"string\",\"__string_rec\",\"parseInt\",\"isNaN\",\"parseFloat\",\"random\",\"Math\",\"floor\",\"com\",\"wiris\",\"JsPluginTools\",\"tryReady\",\"main\",\"ev\",\"getInstance\",\"haxe\",\"Timer\",\"delay\",\"$bind\",\"instance\",\"bypassEncapsulation\",\"window\",\"md5encode\",\"content\",\"Md5\",\"encode\",\"doLoad\",\"ready\",\"Lib\",\"document\",\"readyState\",\"Log\",\"trace\",\"infos\",\"__trace\",\"clear\",\"__clear_trace\",\"doEncode\",\"str\",\"str2blks\",\"b\",\"olda\",\"oldb\",\"oldc\",\"oldd\",\"ff\",\"gg\",\"hh\",\"ii\",\"addme\",\"rhex\",\"cmn\",\"bitXOR\",\"bitOR\",\"bitAND\",\"q\",\"rol\",\"num\",\"cnt\",\"nblk\",\"blks\",\"Array\",\"_g1\",\"_g\",\"j\",\"charAt\",\"lsw\",\"time_ms\",\"me\",\"id\",\"setInterval\",\"run\",\"f\",\"stop\",\"measure\",\"t0\",\"stamp\",\"getTime\",\"clearInterval\",\"$_\",\"method\",\"apply\",\"scope\",\"arguments\",\"__unhtml\",\"join\",\"msg\",\"fileName\",\"lineNumber\",\"getElementById\",\"innerHTML\",\"console\",\"log\",\"isClass\",\"isEnum\",\"e\",\"__ename__\",\"getClass\",\"_typeof\",\"__enum__\",\"i1\",\"tostr\",\"toString\",\"s2\",\"hasp\",\"substring\",\"String\",\"__interfLoop\",\"cc\",\"cl\",\"intf\",\"__interfaces__\",\"__super__\",\"Int\",\"ceil\",\"Float\",\"Bool\",\"Dynamic\",\"Class\",\"Enum\",\"__cast\",\"debug\",\"alert\",\"eval\",\"code\",\"setErrorHandler\",\"onerror\",\"indexOf\",\"NaN\",\"Number\",\"NEGATIVE_INFINITY\",\"POSITIVE_INFINITY\",\"isFinite\",\"Boolean\",\"Void\",\"url\",\"line\",\"options\",\"hmr\",\"transform\",\"insertInto\",\"undefined\",\"locals\",\"push\",\"useSourceMap\",\"list\",\"map\",\"item\",\"cssMapping\",\"btoa\",\"sourceMapping\",\"sourceMap\",\"unescape\",\"encodeURIComponent\",\"JSON\",\"stringify\",\"toComment\",\"sourceURLs\",\"sources\",\"source\",\"sourceRoot\",\"concat\",\"cssWithMappingToString\",\"mediaQuery\",\"alreadyImportedModules\",\"stylesInDom\",\"isOldIE\",\"fn\",\"memo\",\"memoize\",\"all\",\"atob\",\"getElement\",\"target\",\"parent\",\"styleTarget\",\"querySelector\",\"HTMLIFrameElement\",\"contentDocument\",\"head\",\"singleton\",\"singletonCounter\",\"stylesInsertedAtTop\",\"fixUrls\",\"addStylesToDom\",\"styles\",\"domStyle\",\"refs\",\"parts\",\"addStyle\",\"listToStyles\",\"newStyles\",\"base\",\"part\",\"css\",\"media\",\"insertStyleElement\",\"style\",\"Error\",\"lastStyleElementInsertedAtTop\",\"insertAt\",\"nextSibling\",\"insertBefore\",\"appendChild\",\"firstChild\",\"before\",\"removeStyleElement\",\"parentNode\",\"removeChild\",\"idx\",\"createStyleElement\",\"createElement\",\"attrs\",\"type\",\"nonce\",\"nc\",\"getNonce\",\"addAttrs\",\"el\",\"keys\",\"forEach\",\"setAttribute\",\"update\",\"result\",\"default\",\"styleIndex\",\"applyToSingletonTag\",\"URL\",\"createObjectURL\",\"revokeObjectURL\",\"Blob\",\"link\",\"rel\",\"createLinkElement\",\"autoFixUrls\",\"convertToAbsoluteUrls\",\"blob\",\"oldSrc\",\"href\",\"styleSheet\",\"cssText\",\"createTextNode\",\"newObj\",\"DEBUG\",\"newList\",\"mayRemove\",\"replaceText\",\"textStore\",\"replacement\",\"filter\",\"cssNode\",\"childNodes\",\"location\",\"baseUrl\",\"protocol\",\"host\",\"currentDir\",\"pathname\",\"replace\",\"fullMatch\",\"origUrl\",\"newUrl\",\"unquotedOrigUrl\",\"trim\",\"$1\",\"test\",\"Constants\",\"tagOpener\",\"tagCloser\",\"doubleQuote\",\"realDoubleQuote\",\"ltElement\",\"gtElement\",\"ampElement\",\"ampersand\",\"quote\",\"MathML\",\"att\",\"atts\",\"regex\",\"expression\",\"RegExp\",\"reversed\",\"reverse\",\"input\",\"safeXmlCharactersEntities\",\"safeXmlCharacters\",\"safeBadBlackboardCharacters\",\"_wrs_blackboard\",\"safeGoodBlackboardCharacters\",\"xmlCharacters\",\"returnValue\",\"currentEntity\",\"character\",\"match\",\"mathml\",\"toReturn\",\"codePointAt\",\"end\",\"container\",\"Util\",\"fixedCharCodeAt\",\"textContent\",\"innerText\",\"customEditor\",\"start\",\"annotationEncoding\",\"mathmlWithAnnotation\",\"closeSemanticsIndex\",\"isEmpty\",\"endIndexInline\",\"endIndexNonInline\",\"endIndex\",\"beginMathMLContent\",\"endMathmlContent\",\"lastIndexOf\",\"mathmlContent\",\"mathmlWithoutAnnotation\",\"openAnnotationTag\",\"startAnnotationIndex\",\"differentAnnotationFound\",\"differentAnnotationIndex\",\"endAnnotationIndex\",\"removeSemantics\",\"mathmlWithoutSemantics\",\"startSemantics\",\"startAnnotation\",\"text\",\"characters\",\"mathTagStart\",\"mathTagEnd\",\"mathTagEndline\",\"semanticsTagStart\",\"annotationTagStart\",\"output\",\"mathTagEndIndex\",\"mathTagEndlineIndex\",\"firstTagCloser\",\"semanticsIndex\",\"mmlTagStart\",\"annotationIndex\",\"startIndex\",\"mathML\",\"className\",\"classIndex\",\"classTagEndIndex\",\"firstCloseTagIndex\",\"firstCloseTagInlineIndex\",\"empty\",\"mathTagEndArray\",\"exec\",\"quoteIndex\",\"propertyValue\",\"propertyValueEncoded\",\"htmlEntities\",\"Configuration\",\"properties\",\"assign\",\"updateProperty\",\"set\",\"_properties\",\"TextCache\",\"textcache_classCallCheck\",\"cache\",\"Listeners\",\"listeners_classCallCheck\",\"listeners\",\"listener\",\"eventName\",\"event\",\"cancelled\",\"callback\",\"defaultPrevented\",\"ServiceProvider\",\"add\",\"fire\",\"service\",\"path\",\"servicePaths\",\"serviceName\",\"parameters\",\"configurationURI\",\"createServiceURI\",\"createImageURI\",\"showImageURI\",\"getMathMLURI\",\"serviceURI\",\"URI\",\"serverPath\",\"getServerURL\",\"setServicePath\",\"postVariables\",\"currentPath\",\"httpRequest\",\"createHttpRequest\",\"open\",\"setRequestHeader\",\"send\",\"httpBuildQuery\",\"responseText\",\"response\",\"getVariables\",\"serviceUrl\",\"getServicePath\",\"getUrl\",\"extension\",\"serverExtension\",\"concatenateUrl\",\"server\",\"_listeners\",\"_parameters\",\"_servicePaths\",\"_integrationPath\",\"Latex\",\"data\",\"mml\",\"jsonResponse\",\"parse\",\"getService\",\"latex\",\"status\",\"latexHtmlEntitiesEncoded\",\"mathmlWithSemantics\",\"addAnnotation\",\"populate\",\"includeLatexOnSemantics\",\"latexCache\",\"saveLatex\",\"closeAnnotation\",\"mathTagBegin\",\"openTarget\",\"closeTarget\",\"safeXmlDecode\",\"textNode\",\"caretPosition\",\"latexTags\",\"close\",\"startNode\",\"previousSibling\",\"nodeType\",\"getNextLatexPosition\",\"currentNode\",\"currentPosition\",\"tag\",\"position\",\"nodeValue\",\"node\",\"isPrevious\",\"endNode\",\"endPosition\",\"tagLength\",\"startPosition\",\"_cache\",\"StringManager\",\"stringmanager_classCallCheck\",\"language\",\"slice\",\"strings\",\"warn\",\"translations\",\"eventTarget\",\"createEvent\",\"eventObject\",\"initEvent\",\"dispatchEvent\",\"createEventObject\",\"fireEvent\",\"callBackFunction\",\"addEventListener\",\"attachEvent\",\"removeEventListener\",\"detachEvent\",\"doubleClickHandler\",\"mousedownHandler\",\"mouseupHandler\",\"addEvent\",\"realEvent\",\"element\",\"srcElement\",\"containsClass\",\"currentClasses\",\"newClassName\",\"classes\",\"val\",\"xitpos\",\"valpos\",\"startquote\",\"endquote\",\"newvalue\",\"tagName\",\"attributes\",\"creator\",\"html\",\"attributeName\",\"objectCode\",\"recursiveParamsFix\",\"getAttribute\",\"attributesParsed\",\"nodeName\",\"param\",\"NAME\",\"VALUE\",\"removeAttribute\",\"replaceChild\",\"applet\",\"toLowerCase\",\"specified\",\"createObject\",\"path1\",\"path2\",\"separator\",\"textarea\",\"XMLHttpRequest\",\"ActiveXObject\",\"oc\",\"urlEncode\",\"hash\",\"s1\",\"compareStrings\",\"an\",\"bn\",\"hi\",\"low\",\"ss\",\"kv\",\"decodeURIComponent\",\"clearString\",\"imgCode\",\"convertToXml\",\"convertToSafeXml\",\"imgObject\",\"dataMathML\",\"removeAnnotation\",\"safeXmlEncode\",\"IMG\",\"BR\",\"toUpperCase\",\"getNodeLength\",\"isIframe\",\"forceGetSelection\",\"windowTarget\",\"contentWindow\",\"focus\",\"selection\",\"range\",\"createRange\",\"parentElement\",\"htmlText\",\"getSelectedItem\",\"execCommand\",\"temporalObject\",\"pasteHTML\",\"getSelection\",\"getRangeAt\",\"startContainer\",\"startOffset\",\"endContainer\",\"textNodeValues\",\"getLatexFromTextNode\",\"selectionStart\",\"autoClosed\",\"elements\",\"endString\",\"PLUS\",\"SLASH\",\"NUMBER\",\"LOWER\",\"UPPER\",\"PLUS_URL_SAFE\",\"SLASH_URL_SAFE\",\"b64String\",\"tmp\",\"placeHolders\",\"decode64\",\"bytes\",\"int32\",\"shift\",\"selectionEnd\",\"selectionEndSub\",\"textareaStart\",\"parameter\",\"sep\",\"Image\",\"img\",\"attributesToRemove\",\"attribute\",\"originImg\",\"destImg\",\"customEditorAttributeName\",\"hasAttribute\",\"iterator\",\"originAttribute\",\"uri\",\"ar\",\"base64String\",\"svgString\",\"getMetricsFromSvgString\",\"src\",\"b64ToByteArray\",\"fromCharCode\",\"getMetricsFromBytes\",\"urlToAssArray\",\"width\",\"cw\",\"height\",\"ch\",\"baseline\",\"cb\",\"dpi\",\"verticalAlign\",\"maxWidth\",\"svg\",\"setImgSize\",\"base64\",\"first\",\"last\",\"typ\",\"readBytes\",\"readInt32\",\"readByte\",\"round\",\"Accessibility\",\"containClass\",\"accessibleText\",\"lang\",\"accessibleJsonResponse\",\"Parser\",\"wirisProperties\",\"align\",\"metrics\",\"centerbaseline\",\"mathmlSubstring\",\"createImageSrc\",\"alt\",\"mathMLToAccessible\",\"createShowImageSrc\",\"format\",\"observer\",\"observe\",\"baseParts\",\"pop\",\"initParseSaveMode\",\"initParseEditMode\",\"parseMathmlToLatex\",\"parseMathmlToImg\",\"codeImgTransform\",\"imgList\",\"getElementsByNameFromString\",\"token\",\"carry\",\"mathmlStartToken\",\"mathmlStart\",\"mathmlEnd\",\"latexStartPosition\",\"latexEndPosition\",\"htmlEntitiesDecode\",\"codeEndParsedEditMode\",\"endParseEditMode\",\"endParseSaveMode\",\"decodedLatex\",\"getMathMLFromLatex\",\"dataMd5\",\"dataObject\",\"formula\",\"propertiesToString\",\"version\",\"pattern\",\"patternLength\",\"lastIndex\",\"characterNextPosition\",\"xmlCode\",\"mathmlToImgObject\",\"createObjectCode\",\"getWIRISImageOutput\",\"imageMathmlAtrribute\",\"isMathmlInAttribute\",\"mathMLEntities\",\"MutationObserver\",\"mutationObserver\",\"mutations\",\"mutation\",\"oldValue\",\"Config\",\"attributeOldValue\",\"getPrototypeOf\",\"EditorListener\",\"editorlistener_classCallCheck\",\"isContentChanged\",\"waitingForChanges\",\"_editor\",\"ContentManager\",\"contentManagerAttributes\",\"contentmanager_classCallCheck\",\"editorAttributes\",\"customEditors\",\"environment\",\"editorListener\",\"editor\",\"ua\",\"navigator\",\"userAgent\",\"deviceProperties\",\"isAndroid\",\"isIOS\",\"toolbar\",\"modalDialogInstance\",\"isNewElement\",\"integrationModel\",\"updateTitle\",\"insertEditor\",\"isEditorLoaded\",\"jsEditor\",\"JsEditor\",\"newInstance\",\"contentContainer\",\"rtl\",\"action\",\"getEditorModel\",\"isRTL\",\"direction\",\"addEditorListener\",\"setTimeout\",\"hideKeyboard\",\"formulaDisplayDiv\",\"getElementsByClassName\",\"handleOpenedIosSoftkeyboard\",\"handleClosedIosSoftkeyboard\",\"addEditorAsExternalDependency\",\"script\",\"editorUrl\",\"anchorElement\",\"setHrefToAnchorElement\",\"setProtocolToAnchorElement\",\"getURLFromAnchorElement\",\"stats\",\"getEditorStats\",\"getElementsByTagName\",\"setMathML\",\"focusDisabled\",\"_this\",\"setMathMLWithCallback\",\"setWaitingForChanges\",\"setIsContentChanged\",\"onFocus\",\"isFormulaEmpty\",\"updateFormula\",\"getMathMLWithSemantics\",\"getActiveEditor\",\"addCustomEditorClassAttribute\",\"editors\",\"removeCustomEditorClassAttribute\",\"mathmlEntitiesEncoded\",\"disable\",\"notifyWindowClosed\",\"setEmptyMathML\",\"updateToolbar\",\"_wrs_int_wirisProperties\",\"setToolbar\",\"getToolbar\",\"setTitle\",\"title\",\"setParams\",\"getIsContentChanged\",\"keyboardEvent\",\"repeat\",\"cancelAction\",\"stopPropagation\",\"preventDefault\",\"shiftKey\",\"activeElement\",\"submitButton\",\"cancelButton\",\"removePort\",\"port\",\"hostname\",\"startsWith\",\"includes\",\"platform\",\"CustomEditors\",\"customeditors_classCallCheck\",\"activeEditor\",\"editorName\",\"editorParams\",\"icon\",\"confVariable\",\"tooltip\",\"customEditorName\",\"jsProperties\",\"imageCustomEditorName\",\"imageClassName\",\"CASClassName\",\"Event\",\"event_classCallCheck\",\"getRandomValues\",\"PopUpMessage\",\"popupMessageAttributes\",\"popupmessage_classCallCheck\",\"overlayElement\",\"callbacks\",\"overlayWrapper\",\"message\",\"paragraph\",\"overlay\",\"buttonArea\",\"buttonSubmitArguments\",\"class\",\"submitString\",\"closeButton\",\"createButton\",\"closeAction\",\"buttonCancelArguments\",\"cancelString\",\"display\",\"blur\",\"cancelCallback\",\"closeCallback\",\"rnds8\",\"Uint8Array\",\"esm_browser_regex\",\"esm_browser_validate\",\"uuid\",\"byteToHex\",\"stringify_i\",\"esm_browser_stringify\",\"offset\",\"TypeError\",\"esm_browser_v4\",\"buf\",\"rnds\",\"rng\",\"crypto\",\"msCrypto\",\"TelemetryService\",\"telemetry_classCallCheck\",\"messages\",\"headers\",\"Content-Type\",\"X-Api-Key\",\"Accept-Version\",\"body\",\"composeBody\",\"fetch\",\"endpoint\",\"then\",\"error\",\"sender\",\"session\",\"createUuid\",\"composeUUID\",\"maxAge\",\"duration\",\"_senderId\",\"cookies\",\"cookie\",\"_iteratorNormalCompletion\",\"_didIteratorError\",\"_iteratorError\",\"_step\",\"_iterator\",\"done\",\"_step$value\",\"_slicedToArray\",\"senderIdCookieName\",\"err\",\"composeCookie\",\"senderIdCookieMaxAge\",\"_sessionId\",\"sessionId\",\"page\",\"senderId\",\"os\",\"oscpu\",\"user_agent\",\"domain\",\"deployment\",\"editor_version\",\"WirisPlugin\",\"currentInstance\",\"editorVersion\",\"product_version\",\"backend\",\"serviceProviderProperties\",\"suffix\",\"IntegrationModel\",\"integrationModelProperties\",\"integrationmodel_classCallCheck\",\"configurationService\",\"scriptName\",\"callbackMethodArguments\",\"editorObject\",\"managesLanguage\",\"temporalImageResizing\",\"core\",\"integrationParameters\",\"_this2\",\"getLanguage\",\"newListener\",\"callbackFunction\",\"getServerLanguageFromService\",\"configurationIndex\",\"subsTring\",\"serviceParametersURI\",\"getPath\",\"coreProperties\",\"setCore\",\"Core\",\"addListener\",\"init\",\"setEnvironment\",\"col\",\"setIntegrationModel\",\"editionProperties\",\"openModalDialog\",\"focusElement\",\"editorParameters\",\"util\",\"EditorUtils\",\"beforeUpdateFormula\",\"insertFormula\",\"afterUpdateFormula\",\"_this3\",\"addElementEvents\",\"getCustomEditors\",\"enable\",\"temporalImage\",\"openExistingFormulaEditor\",\"_this4\",\"fixAfterResize\",\"getBrowserLanguage\",\"userLanguage\",\"_this5\",\"addEvents\",\"getMathmlFromTextNode\",\"fillNonLatexNode\",\"close_icon\",\"close_icon_h\",\"fulls_icon\",\"fulls_icon_h\",\"min_icon\",\"min_icon_h\",\"mins_icon\",\"mins_icon_h\",\"ModalDialog\",\"modalDialogAttributes\",\"modal_classCallCheck\",\"iosSoftkeyboardOpened\",\"iosMeasureUnit\",\"iosDivHeight\",\"deviceWidth\",\"outerWidth\",\"deviceHeight\",\"outerHeight\",\"landscape\",\"portrait\",\"isLandscape\",\"isPortrait\",\"isMobile\",\"instanceId\",\"orientation\",\"isDesktop\",\"created\",\"state\",\"previousState\",\"bottom\",\"right\",\"size\",\"websiteBeforeLockParameters\",\"getElementId\",\"titleBar\",\"closeDiv\",\"generalStyle\",\"closeIcon\",\"hoverStyle\",\"closeHoverIcon\",\"stackDiv\",\"minsIcon\",\"minsHoverIcon\",\"maximizeDiv\",\"fullsIcon\",\"fullsHoverIcon\",\"minimizeDiv\",\"minIcon\",\"minHoverIcon\",\"role\",\"wrapper\",\"controls\",\"buttonContainer\",\"createSubmitButton\",\"submitAction\",\"contentManager\",\"popupStrings\",\"popupupProperties\",\"popup\",\"hasChanges\",\"showPopUpMessage\",\"SubmitButton\",\"modal_createClass\",\"recalculateScrollBar\",\"createModalWindowDesktop\",\"createResizeButtons\",\"addListeners\",\"maximize\",\"createModalWindowAndroid\",\"createModalWindowIos\",\"insert\",\"innerWidth\",\"scrollbarWidth\",\"offsetWidth\",\"resizerBR\",\"resizerTL\",\"activateResizeStateBR\",\"activateResizeStateTL\",\"mouseEvent\",\"initializeResizeProperties\",\"leftOption\",\"addClass\",\"resizeDataObject\",\"eventClient\",\"X\",\"Y\",\"initialWidth\",\"initialHeight\",\"leftScale\",\"initialRight\",\"initialBottom\",\"timestamp\",\"toJSON\",\"topic\",\"level\",\"removeClass\",\"restoreWebsiteScale\",\"lockWebsiteScroll\",\"restoreState\",\"setContainerHeight\",\"onOpen\",\"setTemporalImageToNull\",\"saveModalProperties\",\"unlockWebsiteScroll\",\"viewportmeta\",\"contentAttrsToUpdate\",\"contentAttrsValuesToUpdate\",\"setMetaAttrFunc\",\"viewportelement\",\"contentAttrs\",\"contentAttr\",\"attrArray\",\"finalContentMeta\",\"oldAttrs\",\"isAttrToUpdate\",\"attr\",\"bodyStylePosition\",\"bodyStyleOverflow\",\"overflow\",\"htmlStyleOverflow\",\"documentElement\",\"windowScrollX\",\"scrollX\",\"windowScrollY\",\"scrollY\",\"scrollTo\",\"search\",\"stack\",\"orientationChangeAndroidSoftkeyboard\",\"orientationChangeIosSoftkeyboard\",\"minimize\",\"restoreModalProperties\",\"setResizeButtonsVisibility\",\"recalculatePosition\",\"recalculateScale\",\"cursor\",\"removeListeners\",\"left\",\"top\",\"setSize\",\"innerHeight\",\"clientHeight\",\"clientWidth\",\"offsetHeight\",\"setPosition\",\"recalculateSize\",\"visibility\",\"reExpand\",\"startDrag\",\"stopDrag\",\"drag\",\"onWindowResize\",\"onKeyDown\",\"removeEvent\",\"clientX\",\"changedTouches\",\"clientY\",\"dragDataObject\",\"lastDrag\",\"isIE11\",\"limitWindow\",\"getLimitWindow\",\"limitY\",\"minPointer\",\"maxPointer\",\"limitX\",\"dragX\",\"dragY\",\"scaleMultiplier\",\"maxHeight\",\"contStyleBottom\",\"contStyleRight\",\"pageXOffset\",\"offSetToolbarY\",\"offSetToolbarX\",\"minPointerY\",\"maxPointerY\",\"inner\",\"outer\",\"widthOuter\",\"widthInner\",\"sizeModificated\",\"hasScrollBar\",\"getScrollBarWidth\",\"inputField\",\"portraitMode\",\"show\",\"second\",\"configurable\",\"writable\",\"varArgs\",\"to\",\"nextSource\",\"nextKey\",\"core_src_classCallCheck\",\"editMode\",\"modalDialog\",\"addEditor\",\"latexRange\",\"browser\",\"integrationEnvironment\",\"initialized\",\"serviceProviderListener\",\"jsConfiguration\",\"jsonConfiguration\",\"addConfiguration\",\"beforeUpdateEvent\",\"globalListeners\",\"returnObject\",\"getLatexFromMathML\",\"afterUpdateEvent\",\"insertElementOnSelection\",\"nodeDocument\",\"ownerDocument\",\"setStartAfter\",\"collapse\",\"removeAllRanges\",\"addRange\",\"updateTextArea\",\"editorSelection\",\"deleteContents\",\"splitText\",\"placeCaretAfterNode\",\"select\",\"insertNode\",\"getSelectedItemOnTextarea\",\"updateExistingTextOnTextarea\",\"removeImgDataAttributes\",\"clone\",\"selectedItem\",\"latexResult\",\"leftOffset\",\"previousNode\",\"moveToElementText\",\"move\",\"moveEnd\",\"setStart\",\"setEnd\",\"defaultEditorAttributesArray\",\"defaultEditorAttributes\",\"tempAttribute\",\"serverEditorParameters\",\"cliendEditorParameters\",\"setContentManager\",\"setModalDialogInstance\",\"_globalListeners\",\"_initialized\",\"wrs_addPluginListener\",\"jsonListener\",\"pluginListener\",\"addGlobalListener\",\"wrs_initParse\",\"initParse\",\"wrs_endParse\",\"endParse\",\"CKEditor4Integration\",\"_IntegrationModel\",\"_inherits\",\"_super\",\"_createSuper\",\"ckeditorIntegrationModelProperties\",\"plugin_src_classCallCheck\",\"integrationFolderName\",\"plugin_src_createClass\",\"_get\",\"_getPrototypeOf\",\"config\",\"wiriseditorparameters\",\"langCode\",\"plugins\",\"ckeditor_wiris\",\"wirislistenersdisabled\",\"on\",\"params\",\"checkElement\",\"resetDirty\",\"setData\",\"getData\",\"instances\",\"$\",\"dialog\",\"dataValue\",\"wirisImages\",\"newElement\",\"elem\",\"_wrs_int_divIframe\",\"elementMode\",\"CKEDITOR\",\"ELEMENT_MODE_INLINE\",\"dataContainer\",\"classElementIndex\",\"classList\",\"classElement\",\"wirisActive\",\"eventElements\",\"entry\",\"setTarget\",\"customEditorAttr\",\"editable\",\"getNative\",\"addEditorListeners\",\"ui\",\"addButton\",\"label\",\"command\",\"allowedContent\",\"addCommand\",\"async\",\"canUndo\",\"editorFocus\",\"requiredContent\",\"ckeditorIntegrationInstance\",\"openNewFormulaEditor\",\"pluginVersion\",\"wiriscontextpath\",\"mathTypeParameters\",\"Test\",\"testServices\"],\"mappings\":\"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,EAAAA,EAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,QAAAA,OAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,GAAA,EAAAE,GAAA,iBAAAF,GAAAA,GAAAA,EAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,MAAAA,IACzC,EAAAE,GAAA,iBAAAF,EAAA,IAAA,IAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,GAAAA,EAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,EAAAA,EAAAmC,EAAA,ohwCCjFA,IAAIC,IACWA,+BAAAA,KAEd,WACC,IAAIC,YAAc,aAClBA,YAAYC,UAAW,EACvBD,YAAYE,QAAU,SAAUC,GAC9B,IAAIhC,EAAIgC,EAAKC,WAAa,EACtB/B,EAAI8B,EAAKE,UACTC,EAAIH,EAAKI,WACTC,EAAKL,EAAKM,aACVX,EAAIK,EAAKO,aACb,OAAOP,EAAKQ,cAAgB,KAAOxC,EAAI,GAAK,IAAMA,EAAI,GAAKA,GAAK,KAAOE,EAAI,GAAK,IAAMA,EAAI,GAAKA,GAAK,KAAOiC,EAAI,GAAK,IAAMA,EAAI,GAAKA,GAAK,KAAOE,EAAK,GAAK,IAAMA,EAAK,GAAKA,GAAM,KAAOV,EAAI,GAAK,IAAMA,EAAI,GAAKA,IAEhNE,YAAYY,QAAU,SAAUd,GAC9B,OAAQA,EAAEe,QACR,KAAK,EACH,IAAIC,EAAIhB,EAAEiB,MAAM,KACZ1C,EAAI,IAAI2C,KAKZ,OAJA3C,EAAE4C,QAAQ,GACV5C,EAAE6C,YAAYJ,EAAE,IAChBzC,EAAE8C,cAAcL,EAAE,IAClBzC,EAAE+C,cAAcN,EAAE,IACXzC,EACT,KAAK,GACCyC,EAAIhB,EAAEiB,MAAM,KAChB,OAAO,IAAIC,KAAKF,EAAE,GAAIA,EAAE,GAAK,EAAGA,EAAE,GAAI,EAAG,EAAG,GAC9C,KAAK,GACH,IACIO,GADAP,EAAIhB,EAAEiB,MAAM,MACN,GAAGA,MAAM,KACf9B,EAAI6B,EAAE,GAAGC,MAAM,KACnB,OAAO,IAAIC,KAAKK,EAAE,GAAIA,EAAE,GAAK,EAAGA,EAAE,GAAIpC,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACtD,QACE,KAAM,yBAA2Ba,IAGvCE,YAAYsB,IAAM,SAAUxB,EAAGyB,GAC7B,IAAIC,EAAI1B,EAAE2B,WAAWF,GACrB,GAAIC,GAAKA,EACT,OAAOA,GAETxB,YAAY0B,OAAS,SAAU5B,EAAG6B,EAAKC,GACrC,OAAW,MAAPD,GAAsB,GAAPA,GAAmB,MAAPC,GAAeA,EAAM,EAAU,IACnD,MAAPA,IAAaA,EAAM9B,EAAEe,QACrBc,EAAM,GACRA,EAAM7B,EAAEe,OAASc,GACP,IAAGA,EAAM,GACVC,EAAM,IAAGA,EAAM9B,EAAEe,OAASe,EAAMD,GACpC7B,EAAE4B,OAAOC,EAAKC,KAEvB5B,YAAY6B,OAAS,SAAUC,EAAGC,GAGhC,IAFA,IAAIhE,EAAI,EACJC,EAAI8D,EAAEjB,OACH9C,EAAIC,GAAG,CACZ,GAAI8D,EAAE/D,IAAMgE,EAEV,OADAD,EAAEE,OAAOjE,EAAG,IACL,EAETA,IAEF,OAAO,GAETiC,YAAYiC,KAAO,SAAUH,GAC3B,OACEI,IAAK,EAAGC,IAAKL,EAAGM,QAAS,WACvB,OAAOC,KAAKH,IAAMG,KAAKF,IAAItB,QAC1ByB,KAAM,WACP,OAAOD,KAAKF,IAAIE,KAAKH,UAI3B,IAAIK,QAAU,SAAUC,EAAKC,GAC3BJ,KAAKG,IAAMA,EACXH,KAAKI,IAAMA,GAEbF,QAAQtC,UAAW,EACnBsC,QAAQ5C,WACN2C,KAAM,WACJ,OAAOD,KAAKG,OAEZJ,QAAS,WACT,OAAOC,KAAKG,IAAMH,KAAKI,KAEvBC,UAAWH,SAEf,IAAII,IAAM,aACVA,IAAI1C,UAAW,EACf0C,IAAG,GAAS,SAAUC,EAAG3D,GACvB,OAAO4D,GAAGC,KAAKC,aAAaH,EAAG3D,IAEjC0D,IAAIK,OAAS,SAAUlD,GACrB,OAAO+C,GAAGC,KAAKG,aAAanD,EAAG,KAEjC6C,IAAG,IAAU,SAAUnB,GACrB,OAAW,EAAJA,GAETmB,IAAIO,SAAW,SAAU1B,GACvB,IAAIoB,EAAIM,SAAS1B,EAAG,IAEpB,OADS,GAALoB,GAAoC,KAAzB5C,YAAYsB,IAAIE,EAAG,IAAsC,IAAzBxB,YAAYsB,IAAIE,EAAG,KAAWoB,EAAIM,SAAS1B,IACtF2B,MAAMP,GAAW,KACdA,GAETD,IAAIS,WAAa,SAAU5B,GACzB,OAAO4B,WAAW5B,IAEpBmB,IAAIU,OAAS,SAAU7B,GACrB,OAAO8B,KAAKC,MAAMD,KAAKD,SAAW7B,IAEpC,IAAIgC,IAAMA,QACLA,IAAIC,QAAOD,IAAIC,UACfD,IAAIC,MAAMZ,KAAIW,IAAIC,MAAMZ,OAC7BW,IAAIC,MAAMZ,GAAGa,cAAgB,WAC3BrB,KAAKsB,YAEPH,IAAIC,MAAMZ,GAAGa,cAAczD,UAAW,EACtCuD,IAAIC,MAAMZ,GAAGa,cAAcE,KAAO,WAChC,IAAIC,EACJA,EAAKL,IAAIC,MAAMZ,GAAGa,cAAcI,cAChCC,KAAKC,MAAMC,MAAMC,MAAML,EAAIA,EAAGF,UAAW,MAE3CH,IAAIC,MAAMZ,GAAGa,cAAcI,YAAc,WAEvC,OAD2C,MAAvCN,IAAIC,MAAMZ,GAAGa,cAAcS,WAAkBX,IAAIC,MAAMZ,GAAGa,cAAcS,SAAW,IAAIX,IAAIC,MAAMZ,GAAGa,eACjGF,IAAIC,MAAMZ,GAAGa,cAAcS,UAEpCX,IAAIC,MAAMZ,GAAGa,cAAcU,oBAAsB,WAC7B,MAAdC,OAAOb,MAAaa,OAAOb,QACP,MAApBa,OAAOb,IAAIC,QAAeY,OAAOb,IAAIC,UACd,MAAvBY,OAAOb,IAAIC,MAAMZ,KAAYwB,OAAOb,IAAIC,MAAMZ,OACT,MAArCwB,OAAOb,IAAIC,MAAMZ,GAAGa,gBAAuBW,OAAOb,IAAIC,MAAMZ,GAAGa,cAAgBF,IAAIC,MAAMZ,GAAGa,cAAcI,gBAEhHN,IAAIC,MAAMZ,GAAGa,cAAc/D,WACzB2E,UAAW,SAAUC,GACnB,OAAOR,KAAKS,IAAIC,OAAOF,IAEvBG,OAAQ,WACRrC,KAAKsC,OAAQ,EACbnB,IAAIC,MAAMZ,GAAGa,cAAcS,SAAW9B,KACtCmB,IAAIC,MAAMZ,GAAGa,cAAcU,uBAE3BT,SAAU,WACVtB,KAAKsC,OAAQ,EACT9B,GAAG+B,IAAIC,SAASC,aAClBzC,KAAKqC,SACLrC,KAAKsC,OAAQ,GAEVtC,KAAKsC,OAAOZ,KAAKC,MAAMC,MAAMC,MAAM7B,KAAMA,KAAKsB,UAAW,MAE9DjB,UAAWc,IAAIC,MAAMZ,GAAGa,eAE5B,IAAIK,KAAOA,SACXA,KAAKgB,IAAM,aACXhB,KAAKgB,IAAI9E,UAAW,EACpB8D,KAAKgB,IAAIC,MAAQ,SAAUpC,EAAGqC,GAC5BpC,GAAGC,KAAKoC,QAAQtC,EAAGqC,IAErBlB,KAAKgB,IAAII,MAAQ,WACftC,GAAGC,KAAKsC,iBAEVrB,KAAKS,IAAM,aAEXT,KAAKS,IAAIvE,UAAW,EACpB8D,KAAKS,IAAIC,OAAS,SAAU3E,GAC1B,OAAO,IAAIiE,KAAKS,KAAMa,SAASvF,IAEjCiE,KAAKS,IAAI7E,WACP0F,SAAU,SAAUC,GAQlB,IAPA,IAAI9D,EAAIa,KAAKkD,SAASD,GAClBxD,EAAI,WACJ0D,GAAK,UACLpH,GAAK,WACLC,EAAI,UAEJN,EAAI,EACDA,EAAIyD,EAAEX,QAAQ,CACnB,IAAI4E,EAAO3D,EACP4D,EAAOF,EACPG,EAAOvH,EACPwH,EAAOvH,EACJ,EACPyD,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,GAAI,GAAI,WAClCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,WACvCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,GAAI,WACtCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,YACvC+D,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,YACvCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,UACvC+D,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,EAAG,YACrCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,YACvCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,OACxCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,YACxC+D,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,EAAG,YACtCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,UACxCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,YACxCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,GAAI,YACvC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,GAAI,WACvCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,GAAI,IAAK,WACnC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,EAAG,UACtCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,WACxCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,WACvC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,EAAG,WACrCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,GAAI,YACvCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,WACvCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,GAAI,YACtC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,GAAI,YACvCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,UACtCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,GAAI,YACtCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,YACxC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,QACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,YACvCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,GAAI,YACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,UACxC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,YACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,WACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,YACxC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,EAAG,WACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,GAAI,IAAK,WACnCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,WACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,GAAI,UACtC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,WACxCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,GAAI,WACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,WACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,GAAI,GAAI,WAClCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,YACxCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,UACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,EAAG,YACtCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,YACvCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,SACxCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,YACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,EAAG,YACrCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,UACxCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,YACvCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,GAAI,YACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,YACxCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,GAAI,WACtCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,WACvC+D,EAAIO,KAAK4D,MAAMnE,EAAG2D,GAClBD,EAAInD,KAAK4D,MAAMT,EAAGE,GAClBtH,EAAIiE,KAAK4D,MAAM7H,EAAGuH,GAClBtH,EAAIgE,KAAK4D,MAAM5H,EAAGuH,GAClB7H,GAAK,GAEP,OAAOsE,KAAK6D,KAAKpE,GAAKO,KAAK6D,KAAKV,GAAKnD,KAAK6D,KAAK9H,GAAKiE,KAAK6D,KAAK7H,IAE9D2H,GAAI,SAAUlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAK+D,OAAOhI,EAAGiE,KAAKgE,MAAMb,GAAInH,IAAKyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/D8G,GAAI,SAAUjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAK+D,OAAO/D,KAAK+D,OAAOZ,EAAGpH,GAAIC,GAAIyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/D6G,GAAI,SAAUhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAKgE,MAAMhE,KAAKiE,OAAOd,EAAGnH,GAAIgE,KAAKiE,OAAOlI,GAAIC,IAAKyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/E4G,GAAI,SAAU/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAKgE,MAAMhE,KAAKiE,OAAOd,EAAGpH,GAAIiE,KAAKiE,QAAQd,EAAGnH,IAAKyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/EkH,IAAK,SAAUI,EAAGzE,EAAG0D,EAAGhE,EAAG1B,EAAGb,GAC9B,OAAOoD,KAAK4D,MAAM5D,KAAKmE,IAAInE,KAAK4D,MAAM5D,KAAK4D,MAAMnE,EAAGyE,GAAIlE,KAAK4D,MAAMzE,EAAGvC,IAAKa,GAAI0F,IAE/EgB,IAAK,SAAUC,EAAKC,GACpB,OAAOD,GAAOC,EAAMD,IAAQ,GAAKC,GAEjCnB,SAAU,SAAUD,GAIpB,IAHA,IAAIqB,EAA+B,GAAvBrB,EAAIzE,OAAS,GAAK,GAC1B+F,EAAO,IAAIC,MACXC,EAAM,EAAGC,EAAY,GAAPJ,EACXG,EAAMC,GAAI,CAEfH,EADI7I,EAAI+I,KACE,EAGZ,IADA,IAAI/I,EAAI,EACDA,EAAIuH,EAAIzE,QACb+F,EAAK7I,GAAK,IAAMiC,YAAYsB,IAAIgE,EAAKvH,KAAoB,EAAbuH,EAAIzE,OAAa9C,GAAK,EAAI,EACtEA,IAEF6I,EAAK7I,GAAK,IAAM,MAAqB,EAAbuH,EAAIzE,OAAa9C,GAAK,EAAI,EAClD,IAAIC,EAAiB,EAAbsH,EAAIzE,OACRC,EAAW,GAAP6F,EAAY,EAKpB,OAJAC,EAAK9F,GAAS,IAAJ9C,EACV4I,EAAK9F,KAAO9C,IAAM,EAAI,MAAQ,EAC9B4I,EAAK9F,KAAO9C,IAAM,GAAK,MAAQ,GAC/B4I,EAAK9F,KAAO9C,IAAM,GAAK,MAAQ,GACxB4I,GAEPV,KAAM,SAAUO,GAIhB,IAHA,IAAInB,EAAM,GAENyB,EAAK,EACFA,EAAK,GAAG,CACb,IAAIC,EAAID,IACRzB,GAJY,mBAIG2B,OAAOR,GAAW,EAAJO,EAAQ,EAAI,IAJ7B,mBAI2CC,OAAOR,GAAW,EAAJO,EAAQ,IAE/E,OAAO1B,GAEPW,MAAO,SAAUzE,EAAGH,GACpB,IAAI6F,GAAW,MAAJ1F,IAAkB,MAAJH,GAEzB,OADWG,GAAK,KAAOH,GAAK,KAAO6F,GAAO,KAC5B,GAAW,MAANA,GAEnBZ,OAAQ,SAAUxE,EAAG0D,GAGrB,OADY1D,IAAM,EAAI0D,IAAM,IACZ,EAFF,EAAJ1D,EAAS0D,GAInBY,OAAQ,SAAUtE,EAAG0D,GAGrB,OADY1D,IAAM,EAAI0D,IAAM,IACZ,EAFF,EAAJ1D,EAAY,EAAJ0D,GAIlBa,MAAO,SAAUvE,EAAG0D,GAGpB,OADY1D,IAAM,EAAI0D,IAAM,IACZ,GAFF,EAAJ1D,EAAY,EAAJ0D,IAIlB9C,UAAWqB,KAAKS,KAEpBT,KAAKC,MAAQ,SAAUmD,GACrB,IAAIC,EAAK/E,KACTA,KAAKgF,GAAKhD,OAAOiD,YAAY,WAC3BF,EAAGG,OACFJ,IAELpD,KAAKC,MAAM/D,UAAW,EACtB8D,KAAKC,MAAMC,MAAQ,SAAUuD,EAAGL,GAC9B,IAAIlI,EAAI,IAAI8E,KAAKC,MAAMmD,GAKvB,OAJAlI,EAAEsI,IAAM,WACNtI,EAAEwI,OACFD,KAEKvI,GAET8E,KAAKC,MAAM0D,QAAU,SAAUF,EAAG7F,GAChC,IAAIgG,EAAK5D,KAAKC,MAAM4D,QAChB/I,EAAI2I,IAER,OADAzD,KAAKgB,IAAIC,MAAMjB,KAAKC,MAAM4D,QAAUD,EAAK,IAAKhG,GACvC9C,GAETkF,KAAKC,MAAM4D,MAAQ,WACjB,OAAO,IAAI5G,MAAO6G,UAAY,KAEhC9D,KAAKC,MAAMrE,WACT4H,IAAK,aAEHE,KAAM,WACS,MAAXpF,KAAKgF,KACThD,OAAOyD,cAAczF,KAAKgF,IAC1BhF,KAAKgF,GAAK,OAEV3E,UAAWqB,KAAKC,OAEpB,IAAInB,GAAKA,OAuJLkF,GACJ,SAAS7D,MAAM1F,EAAGL,GAAK,IAAIqJ,EAAI,SAAJA,IAAkB,OAAOA,EAAEQ,OAAOC,MAAMT,EAAEU,MAAOC,YAA0C,OAA3BX,EAAEU,MAAQ1J,EAAGgJ,EAAEQ,OAAS7J,EAAUqJ,EAvJ7H3E,GAAGC,KAAO,aACVD,GAAGC,KAAK7C,UAAW,EACnB4C,GAAGC,KAAKsF,SAAW,SAAUtI,GAC3B,OAAOA,EAAEiB,MAAM,KAAKsH,KAAK,SAAStH,MAAM,KAAKsH,KAAK,QAAQtH,MAAM,KAAKsH,KAAK,SAE5ExF,GAAGC,KAAKoC,QAAU,SAAUtC,EAAG7E,GAC7B,IAEIM,EAFAiK,EAAW,MAALvK,EAAYA,EAAEwK,SAAW,IAAMxK,EAAEyK,WAAa,KAAO,GAC/DF,GAAOzF,GAAGC,KAAKG,aAAaL,EAAG,IAEN,oBAAbiC,UAA2E,OAA9CxG,EAAIwG,SAAS4D,eAAe,eAAwBpK,EAAEqK,WAAa7F,GAAGC,KAAKsF,SAASE,GAAO,QAAsC,oBAAZK,SAA0C,MAAfA,QAAQC,KAAaD,QAAQC,IAAIN,IAE5NzF,GAAGC,KAAKsC,cAAgB,WACtB,IAAI/G,EAAIwG,SAAS4D,eAAe,cACvB,MAALpK,IAAWA,EAAEqK,UAAY,KAE/B7F,GAAGC,KAAK+F,QAAU,SAAUrK,GAC1B,OAAOA,EAAEyB,UAEX4C,GAAGC,KAAKgG,OAAS,SAAUC,GACzB,OAAOA,EAAEC,WAEXnG,GAAGC,KAAKmG,SAAW,SAAUzK,GAC3B,OAAOA,EAAEkE,WAEXG,GAAGC,KAAKG,aAAe,SAAUzE,EAAGsB,GAClC,GAAS,MAALtB,EAAW,MAAO,OACtB,GAAIsB,EAAEe,QAAU,EAAG,MAAO,QAC1B,IAAI5B,EAACiK,QAAW1K,GAEhB,OADS,YAALS,IAAoBT,EAAEyB,UAAYzB,EAAEwK,aAAY/J,EAAI,UAChDA,GACN,IAAK,SACH,GAAIT,aAAaqI,MAAO,CACtB,GAAIrI,EAAE2K,SAAU,CACd,GAAgB,GAAZ3K,EAAEqC,OAAa,OAAOrC,EAAE,GAC5B,IAAI8G,EAAM9G,EAAE,GAAK,IACjBsB,GAAK,KAEL,IADA,IAAIgH,EAAM,EAAGC,EAAKvI,EAAEqC,OACbiG,EAAMC,GAAI,CAEHzB,GAAH,IADLvH,EAAI+I,KACW,IAAMjE,GAAGC,KAAKG,aAAazE,EAAET,GAAI+B,GAAgB+C,GAAGC,KAAKG,aAAazE,EAAET,GAAI+B,GAEjG,OAAOwF,EAAM,IAEf,IACIvH,EADAC,EAAIQ,EAAEqC,OAENyE,EAAM,IACVxF,GAAK,KAEL,IADIiH,EAAK,EACFA,EAAK/I,GAAG,CACb,IAAIoL,EAAKrC,IACTzB,IAAQ8D,EAAK,EAAI,IAAM,IAAMvG,GAAGC,KAAKG,aAAazE,EAAE4K,GAAKtJ,GAG3D,OADAwF,GAAO,IAGT,IAAI+D,EACJ,IACEA,EAAQ7K,EAAE8K,SACV,MAAOP,GACP,MAAO,MAET,GAAa,MAATM,GAAiBA,GAAS5K,OAAO6K,SAAU,CAC7C,IAAIC,EAAK/K,EAAE8K,WACX,GAAU,mBAANC,EAAyB,OAAOA,EAEtC,IAAIzI,EAAI,KACJwE,EAAM,MACVxF,GAAK,KACL,IAAI0J,EAA2B,MAApBhL,EAAEoB,eACb,IAAK,IAAIkB,KAAKtC,EAERgL,IAAShL,EAAEoB,eAAekB,IAGrB,aAALA,GAAyB,aAALA,GAAyB,aAALA,GAAyB,kBAALA,GAA8B,kBAALA,IAGvE,GAAdwE,EAAIzE,SAAayE,GAAO,QAC5BA,GAAOxF,EAAIgB,EAAI,MAAQ+B,GAAGC,KAAKG,aAAazE,EAAEsC,GAAIhB,IAIpD,OADAwF,GAAO,MADPxF,EAAIA,EAAE2J,UAAU,IACE,IAEpB,IAAK,WACH,MAAO,aACT,IAAK,SACH,OAAOjL,EACT,QACE,OAAOkL,OAAOlL,KAGpBqE,GAAGC,KAAK6G,aAAe,SAAUC,EAAIC,GACnC,GAAU,MAAND,EAAY,OAAO,EACvB,GAAIA,GAAMC,EAAI,OAAO,EACrB,IAAIC,EAAOF,EAAGG,eACd,GAAY,MAARD,EAEF,IADA,IAAIhD,EAAM,EAAGC,EAAK+C,EAAKjJ,OAChBiG,EAAMC,GAAI,CACf,IACIqC,EAAKU,EADDhD,KAER,GAAIsC,GAAMS,GAAMhH,GAAGC,KAAK6G,aAAaP,EAAIS,GAAK,OAAO,EAGzD,OAAOhH,GAAGC,KAAK6G,aAAaC,EAAGI,UAAWH,IAE5ChH,GAAGC,KAAKC,aAAe,SAAUvE,EAAGqL,GAClC,IACE,GAAIrL,aAAaqL,EACf,OAAIA,GAAMhD,OAA4B,MAAdrI,EAAE2K,SAG5B,GAAItG,GAAGC,KAAK6G,aAAanL,EAAEkE,UAAWmH,GAAK,OAAO,EAClD,MAAOd,GACP,GAAU,MAANc,EAAY,OAAO,EAEzB,OAAQA,GACN,KAAKI,IACH,OAAO3G,KAAK4G,KAAK1L,EAAI,cAAkBA,EACzC,KAAK2L,MACH,MAAqB,iBAAN3L,EACjB,KAAK4L,KACH,OAAa,IAAN5L,IAAoB,IAANA,EACvB,KAAKkL,OACH,MAAqB,iBAANlL,EACjB,KAAK6L,QACH,OAAO,EACT,QACE,OAAS,MAAL7L,IACAqL,GAAMS,OAAuB,MAAd9L,EAAEyB,WACjB4J,GAAMU,MAAuB,MAAf/L,EAAEwK,WACbxK,EAAE2K,UAAYU,MAG3BhH,GAAGC,KAAK0H,OAAS,SAAUhM,EAAGS,GAC5B,GAAI4D,GAAGC,KAAKC,aAAavE,EAAGS,GAAI,OAAOT,EAAQ,KAAM,eAAiBmE,IAAIK,OAAOxE,GAAK,OAASmE,IAAIK,OAAO/D,IAE5G4D,GAAG+B,IAAM,aACT/B,GAAG+B,IAAI3E,UAAW,EAClB4C,GAAG+B,IAAI6F,MAAQ,aAGf5H,GAAG+B,IAAI8F,MAAQ,SAAU9H,GACvB8H,MAAM7H,GAAGC,KAAKG,aAAaL,EAAG,MAEhCC,GAAG+B,IAAI+F,KAAO,SAAUC,MACtB,OAAOD,KAAKC,OAEd/H,GAAG+B,IAAIiG,gBAAkB,SAAUrD,GACjC3E,GAAG+B,IAAIkG,QAAUtD,GAIfX,MAAMlH,UAAUoL,UAAS/K,YAAY6B,OAAS,SAAUC,EAAGtD,GAC7D,IAAIT,EAAI+D,EAAEiJ,QAAQvM,GAClB,OAAU,GAANT,IACJ+D,EAAEE,OAAOjE,EAAG,IACL,KAETuF,KAAKrD,UAAY,QACjBqD,KAAK0H,IAAMC,OAAOD,IAClB1H,KAAK4H,kBAAoBD,OAAOC,kBAChC5H,KAAK6H,kBAAoBF,OAAOE,kBAChC7H,KAAK8H,SAAW,SAAUrN,GACxB,OAAOqN,SAASrN,IAElBuF,KAAKH,MAAQ,SAAUpF,GACrB,OAAOoF,MAAMpF,IAEf2L,OAAO/J,UAAU+C,UAAYgH,OAC7BA,OAAOzJ,UAAW,EAClB4G,MAAMlH,UAAU+C,UAAYmE,MAC5BA,MAAM5G,UAAW,EACjBe,KAAKrB,UAAU+C,UAAY1B,KAC3BA,KAAKf,UAAY,QACjB,IAAIgK,KAAQhK,UAAW,QACnBoK,SAAYpK,UAAW,YACvBkK,MAAQc,OACZd,MAAMlK,UAAY,SAClB,IAAImK,KAAOiB,QACXjB,KAAKpB,WAAa,QAClB,IAAIsB,OAAUrK,UAAW,UACrBsK,QACAe,MAAStC,WAAY,SACF,oBAAZnE,WAAyBhC,GAAG+B,IAAIC,SAAWA,UACjC,oBAAVR,SACTxB,GAAG+B,IAAIP,OAASA,OAChBxB,GAAG+B,IAAIP,OAAOyG,QAAU,SAAUxC,EAAKiD,EAAKC,GAC1C,IAAIhE,EAAI3E,GAAG+B,IAAIkG,QACf,OAAS,MAALtD,GACGA,EAAEc,GAAMiD,EAAM,IAAMC,MAG/BhI,IAAIC,MAAMZ,GAAGa,cAAcE,cACpBiD,MAAMlH,UAAU+C,UApiBxB,GAwiBA,WACC,IAAI1C,YAAc,aAClBA,YAAYC,UAAW,EACvBD,YAAYE,QAAU,SAAUC,GAC9B,IAAIhC,EAAIgC,EAAKC,WAAa,EACtB/B,EAAI8B,EAAKE,UACTC,EAAIH,EAAKI,WACTC,EAAKL,EAAKM,aACVX,EAAIK,EAAKO,aACb,OAAOP,EAAKQ,cAAgB,KAAOxC,EAAI,GAAK,IAAMA,EAAI,GAAKA,GAAK,KAAOE,EAAI,GAAK,IAAMA,EAAI,GAAKA,GAAK,KAAOiC,EAAI,GAAK,IAAMA,EAAI,GAAKA,GAAK,KAAOE,EAAK,GAAK,IAAMA,EAAK,GAAKA,GAAM,KAAOV,EAAI,GAAK,IAAMA,EAAI,GAAKA,IAEhNE,YAAYY,QAAU,SAAUd,GAC9B,OAAQA,EAAEe,QACR,KAAK,EACH,IAAIC,EAAIhB,EAAEiB,MAAM,KACZ1C,EAAI,IAAI2C,KAKZ,OAJA3C,EAAE4C,QAAQ,GACV5C,EAAE6C,YAAYJ,EAAE,IAChBzC,EAAE8C,cAAcL,EAAE,IAClBzC,EAAE+C,cAAcN,EAAE,IACXzC,EACT,KAAK,GACCyC,EAAIhB,EAAEiB,MAAM,KAChB,OAAO,IAAIC,KAAKF,EAAE,GAAIA,EAAE,GAAK,EAAGA,EAAE,GAAI,EAAG,EAAG,GAC9C,KAAK,GACH,IACIO,GADAP,EAAIhB,EAAEiB,MAAM,MACN,GAAGA,MAAM,KACf9B,EAAI6B,EAAE,GAAGC,MAAM,KACnB,OAAO,IAAIC,KAAKK,EAAE,GAAIA,EAAE,GAAK,EAAGA,EAAE,GAAIpC,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACtD,QACE,KAAM,yBAA2Ba,IAGvCE,YAAYsB,IAAM,SAAUxB,EAAGyB,GAC7B,IAAIC,EAAI1B,EAAE2B,WAAWF,GACrB,GAAIC,GAAKA,EACT,OAAOA,GAETxB,YAAY0B,OAAS,SAAU5B,EAAG6B,EAAKC,GACrC,OAAW,MAAPD,GAAsB,GAAPA,GAAmB,MAAPC,GAAeA,EAAM,EAAU,IACnD,MAAPA,IAAaA,EAAM9B,EAAEe,QACrBc,EAAM,GACRA,EAAM7B,EAAEe,OAASc,GACP,IAAGA,EAAM,GACVC,EAAM,IAAGA,EAAM9B,EAAEe,OAASe,EAAMD,GACpC7B,EAAE4B,OAAOC,EAAKC,KAEvB5B,YAAY6B,OAAS,SAAUC,EAAGC,GAGhC,IAFA,IAAIhE,EAAI,EACJC,EAAI8D,EAAEjB,OACH9C,EAAIC,GAAG,CACZ,GAAI8D,EAAE/D,IAAMgE,EAEV,OADAD,EAAEE,OAAOjE,EAAG,IACL,EAETA,IAEF,OAAO,GAETiC,YAAYiC,KAAO,SAAUH,GAC3B,OACEI,IAAK,EAAGC,IAAKL,EAAGM,QAAS,WACvB,OAAOC,KAAKH,IAAMG,KAAKF,IAAItB,QAC1ByB,KAAM,WACP,OAAOD,KAAKF,IAAIE,KAAKH,UAI3B,IAAIK,QAAU,SAAUC,EAAKC,GAC3BJ,KAAKG,IAAMA,EACXH,KAAKI,IAAMA,GAEbF,QAAQtC,UAAW,EACnBsC,QAAQ5C,WACN2C,KAAM,WACJ,OAAOD,KAAKG,OAEZJ,QAAS,WACT,OAAOC,KAAKG,IAAMH,KAAKI,KAEvBC,UAAWH,SAEf,IAAII,IAAM,aACVA,IAAI1C,UAAW,EACf0C,IAAG,GAAS,SAAUC,EAAG3D,GACvB,OAAO4D,GAAGC,KAAKC,aAAaH,EAAG3D,IAEjC0D,IAAIK,OAAS,SAAUlD,GACrB,OAAO+C,GAAGC,KAAKG,aAAanD,EAAG,KAEjC6C,IAAG,IAAU,SAAUnB,GACrB,OAAW,EAAJA,GAETmB,IAAIO,SAAW,SAAU1B,GACvB,IAAIoB,EAAIM,SAAS1B,EAAG,IAEpB,OADS,GAALoB,GAAoC,KAAzB5C,YAAYsB,IAAIE,EAAG,IAAsC,IAAzBxB,YAAYsB,IAAIE,EAAG,KAAWoB,EAAIM,SAAS1B,IACtF2B,MAAMP,GAAW,KACdA,GAETD,IAAIS,WAAa,SAAU5B,GACzB,OAAO4B,WAAW5B,IAEpBmB,IAAIU,OAAS,SAAU7B,GACrB,OAAO8B,KAAKC,MAAMD,KAAKD,SAAW7B,IAEpC,IAAIgC,IAAMA,QACLA,IAAIC,QAAOD,IAAIC,UACfD,IAAIC,MAAMZ,KAAIW,IAAIC,MAAMZ,OAC7BW,IAAIC,MAAMZ,GAAGa,cAAgB,WAC3BrB,KAAKsB,YAEPH,IAAIC,MAAMZ,GAAGa,cAAczD,UAAW,EACtCuD,IAAIC,MAAMZ,GAAGa,cAAcE,KAAO,WAChC,IAAIC,EACJA,EAAKL,IAAIC,MAAMZ,GAAGa,cAAcI,cAChCC,KAAKC,MAAMC,MAAMC,MAAML,EAAIA,EAAGF,UAAW,MAE3CH,IAAIC,MAAMZ,GAAGa,cAAcI,YAAc,WAEvC,OAD2C,MAAvCN,IAAIC,MAAMZ,GAAGa,cAAcS,WAAkBX,IAAIC,MAAMZ,GAAGa,cAAcS,SAAW,IAAIX,IAAIC,MAAMZ,GAAGa,eACjGF,IAAIC,MAAMZ,GAAGa,cAAcS,UAEpCX,IAAIC,MAAMZ,GAAGa,cAAcU,oBAAsB,WAC7B,MAAdC,OAAOb,MAAaa,OAAOb,QACP,MAApBa,OAAOb,IAAIC,QAAeY,OAAOb,IAAIC,UACd,MAAvBY,OAAOb,IAAIC,MAAMZ,KAAYwB,OAAOb,IAAIC,MAAMZ,OACT,MAArCwB,OAAOb,IAAIC,MAAMZ,GAAGa,gBAAuBW,OAAOb,IAAIC,MAAMZ,GAAGa,cAAgBF,IAAIC,MAAMZ,GAAGa,cAAcI,gBAEhHN,IAAIC,MAAMZ,GAAGa,cAAc/D,WACzB2E,UAAW,SAAUC,GACnB,OAAOR,KAAKS,IAAIC,OAAOF,IAEvBG,OAAQ,WACRrC,KAAKsC,OAAQ,EACbnB,IAAIC,MAAMZ,GAAGa,cAAcS,SAAW9B,KACtCmB,IAAIC,MAAMZ,GAAGa,cAAcU,uBAE3BT,SAAU,WACVtB,KAAKsC,OAAQ,EACT9B,GAAG+B,IAAIC,SAASC,aAClBzC,KAAKqC,SACLrC,KAAKsC,OAAQ,GAEVtC,KAAKsC,OAAOZ,KAAKC,MAAMC,MAAMC,MAAM7B,KAAMA,KAAKsB,UAAW,MAE9DjB,UAAWc,IAAIC,MAAMZ,GAAGa,eAE5B,IAAIK,KAAOA,SACXA,KAAKgB,IAAM,aACXhB,KAAKgB,IAAI9E,UAAW,EACpB8D,KAAKgB,IAAIC,MAAQ,SAAUpC,EAAGqC,GAC5BpC,GAAGC,KAAKoC,QAAQtC,EAAGqC,IAErBlB,KAAKgB,IAAII,MAAQ,WACftC,GAAGC,KAAKsC,iBAEVrB,KAAKS,IAAM,aAEXT,KAAKS,IAAIvE,UAAW,EACpB8D,KAAKS,IAAIC,OAAS,SAAU3E,GAC1B,OAAO,IAAIiE,KAAKS,KAAMa,SAASvF,IAEjCiE,KAAKS,IAAI7E,WACP0F,SAAU,SAAUC,GAQlB,IAPA,IAAI9D,EAAIa,KAAKkD,SAASD,GAClBxD,EAAI,WACJ0D,GAAK,UACLpH,GAAK,WACLC,EAAI,UAEJN,EAAI,EACDA,EAAIyD,EAAEX,QAAQ,CACnB,IAAI4E,EAAO3D,EACP4D,EAAOF,EACPG,EAAOvH,EACPwH,EAAOvH,EACJ,EACPyD,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,GAAI,GAAI,WAClCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,WACvCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,GAAI,WACtCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,YACvC+D,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,YACvCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,UACvC+D,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,EAAG,YACrCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,YACvCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,OACxCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,YACxC+D,EAAIO,KAAKwD,GAAG/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,EAAG,YACtCM,EAAIgE,KAAKwD,GAAGxH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,UACxCK,EAAIiE,KAAKwD,GAAGzH,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,YACxCyH,EAAInD,KAAKwD,GAAGL,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,GAAI,YACvC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,GAAI,WACvCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,GAAI,IAAK,WACnC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,EAAG,UACtCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,WACxCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,WACvC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,EAAG,WACrCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,GAAI,YACvCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,WACvCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,GAAI,YACtC+D,EAAIO,KAAKyD,GAAGhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,GAAI,YACvCM,EAAIgE,KAAKyD,GAAGzH,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,UACtCK,EAAIiE,KAAKyD,GAAG1H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,GAAI,YACtCyH,EAAInD,KAAKyD,GAAGN,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,YACxC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,QACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,YACvCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,GAAI,YACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,UACxC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,YACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,WACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,IAAK,YACxC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,EAAG,WACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,GAAI,IAAK,WACnCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,WACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,GAAI,UACtC+D,EAAIO,KAAK0D,GAAGjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAK0D,GAAG1H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,WACxCK,EAAIiE,KAAK0D,GAAG3H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,GAAI,WACvCyH,EAAInD,KAAK0D,GAAGP,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,WACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,GAAI,GAAI,WAClCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,GAAI,YACtCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,YACxCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,UACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,IAAK,EAAG,YACtCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,GAAI,IAAK,YACvCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,IAAK,IAAK,SACxCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,YACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,EAAG,YACrCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,UACxCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,IAAK,YACvCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,IAAK,GAAI,YACvC+D,EAAIO,KAAK2D,GAAGlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAEzD,EAAI,GAAI,GAAI,WACtCM,EAAIgE,KAAK2D,GAAG3H,EAAGyD,EAAG0D,EAAGpH,EAAGoD,EAAEzD,EAAI,IAAK,IAAK,YACxCK,EAAIiE,KAAK2D,GAAG5H,EAAGC,EAAGyD,EAAG0D,EAAGhE,EAAEzD,EAAI,GAAI,GAAI,WACtCyH,EAAInD,KAAK2D,GAAGR,EAAGpH,EAAGC,EAAGyD,EAAGN,EAAEzD,EAAI,GAAI,IAAK,WACvC+D,EAAIO,KAAK4D,MAAMnE,EAAG2D,GAClBD,EAAInD,KAAK4D,MAAMT,EAAGE,GAClBtH,EAAIiE,KAAK4D,MAAM7H,EAAGuH,GAClBtH,EAAIgE,KAAK4D,MAAM5H,EAAGuH,GAClB7H,GAAK,GAEP,OAAOsE,KAAK6D,KAAKpE,GAAKO,KAAK6D,KAAKV,GAAKnD,KAAK6D,KAAK9H,GAAKiE,KAAK6D,KAAK7H,IAE9D2H,GAAI,SAAUlE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAK+D,OAAOhI,EAAGiE,KAAKgE,MAAMb,GAAInH,IAAKyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/D8G,GAAI,SAAUjE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAK+D,OAAO/D,KAAK+D,OAAOZ,EAAGpH,GAAIC,GAAIyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/D6G,GAAI,SAAUhE,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAKgE,MAAMhE,KAAKiE,OAAOd,EAAGnH,GAAIgE,KAAKiE,OAAOlI,GAAIC,IAAKyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/E4G,GAAI,SAAU/D,EAAG0D,EAAGpH,EAAGC,EAAGmD,EAAG1B,EAAGb,GAChC,OAAOoD,KAAK8D,IAAI9D,KAAKgE,MAAMhE,KAAKiE,OAAOd,EAAGpH,GAAIiE,KAAKiE,QAAQd,EAAGnH,IAAKyD,EAAG0D,EAAGhE,EAAG1B,EAAGb,IAE/EkH,IAAK,SAAUI,EAAGzE,EAAG0D,EAAGhE,EAAG1B,EAAGb,GAC9B,OAAOoD,KAAK4D,MAAM5D,KAAKmE,IAAInE,KAAK4D,MAAM5D,KAAK4D,MAAMnE,EAAGyE,GAAIlE,KAAK4D,MAAMzE,EAAGvC,IAAKa,GAAI0F,IAE/EgB,IAAK,SAAUC,EAAKC,GACpB,OAAOD,GAAOC,EAAMD,IAAQ,GAAKC,GAEjCnB,SAAU,SAAUD,GAIpB,IAHA,IAAIqB,EAA+B,GAAvBrB,EAAIzE,OAAS,GAAK,GAC1B+F,EAAO,IAAIC,MACXC,EAAM,EAAGC,EAAY,GAAPJ,EACXG,EAAMC,GAAI,CAEfH,EADI7I,EAAI+I,KACE,EAGZ,IADA,IAAI/I,EAAI,EACDA,EAAIuH,EAAIzE,QACb+F,EAAK7I,GAAK,IAAMiC,YAAYsB,IAAIgE,EAAKvH,KAAoB,EAAbuH,EAAIzE,OAAa9C,GAAK,EAAI,EACtEA,IAEF6I,EAAK7I,GAAK,IAAM,MAAqB,EAAbuH,EAAIzE,OAAa9C,GAAK,EAAI,EAClD,IAAIC,EAAiB,EAAbsH,EAAIzE,OACRC,EAAW,GAAP6F,EAAY,EAKpB,OAJAC,EAAK9F,GAAS,IAAJ9C,EACV4I,EAAK9F,KAAO9C,IAAM,EAAI,MAAQ,EAC9B4I,EAAK9F,KAAO9C,IAAM,GAAK,MAAQ,GAC/B4I,EAAK9F,KAAO9C,IAAM,GAAK,MAAQ,GACxB4I,GAEPV,KAAM,SAAUO,GAIhB,IAHA,IAAInB,EAAM,GAENyB,EAAK,EACFA,EAAK,GAAG,CACb,IAAIC,EAAID,IACRzB,GAJY,mBAIG2B,OAAOR,GAAW,EAAJO,EAAQ,EAAI,IAJ7B,mBAI2CC,OAAOR,GAAW,EAAJO,EAAQ,IAE/E,OAAO1B,GAEPW,MAAO,SAAUzE,EAAGH,GACpB,IAAI6F,GAAW,MAAJ1F,IAAkB,MAAJH,GAEzB,OADWG,GAAK,KAAOH,GAAK,KAAO6F,GAAO,KAC5B,GAAW,MAANA,GAEnBZ,OAAQ,SAAUxE,EAAG0D,GAGrB,OADY1D,IAAM,EAAI0D,IAAM,IACZ,EAFF,EAAJ1D,EAAS0D,GAInBY,OAAQ,SAAUtE,EAAG0D,GAGrB,OADY1D,IAAM,EAAI0D,IAAM,IACZ,EAFF,EAAJ1D,EAAY,EAAJ0D,GAIlBa,MAAO,SAAUvE,EAAG0D,GAGpB,OADY1D,IAAM,EAAI0D,IAAM,IACZ,GAFF,EAAJ1D,EAAY,EAAJ0D,IAIlB9C,UAAWqB,KAAKS,KAEpBT,KAAKC,MAAQ,SAAUmD,GACrB,IAAIC,EAAK/E,KACTA,KAAKgF,GAAKhD,OAAOiD,YAAY,WAC3BF,EAAGG,OACFJ,IAELpD,KAAKC,MAAM/D,UAAW,EACtB8D,KAAKC,MAAMC,MAAQ,SAAUuD,EAAGL,GAC9B,IAAIlI,EAAI,IAAI8E,KAAKC,MAAMmD,GAKvB,OAJAlI,EAAEsI,IAAM,WACNtI,EAAEwI,OACFD,KAEKvI,GAET8E,KAAKC,MAAM0D,QAAU,SAAUF,EAAG7F,GAChC,IAAIgG,EAAK5D,KAAKC,MAAM4D,QAChB/I,EAAI2I,IAER,OADAzD,KAAKgB,IAAIC,MAAMjB,KAAKC,MAAM4D,QAAUD,EAAK,IAAKhG,GACvC9C,GAETkF,KAAKC,MAAM4D,MAAQ,WACjB,OAAO,IAAI5G,MAAO6G,UAAY,KAEhC9D,KAAKC,MAAMrE,WACT4H,IAAK,aAEHE,KAAM,WACS,MAAXpF,KAAKgF,KACThD,OAAOyD,cAAczF,KAAKgF,IAC1BhF,KAAKgF,GAAK,OAEV3E,UAAWqB,KAAKC,OAEpB,IAAInB,GAAKA,OAuJLkF,GACJ,SAAS7D,MAAM1F,EAAGL,GAAK,IAAIqJ,EAAI,SAAJA,IAAkB,OAAOA,EAAEQ,OAAOC,MAAMT,EAAEU,MAAOC,YAA0C,OAA3BX,EAAEU,MAAQ1J,EAAGgJ,EAAEQ,OAAS7J,EAAUqJ,EAvJ7H3E,GAAGC,KAAO,aACVD,GAAGC,KAAK7C,UAAW,EACnB4C,GAAGC,KAAKsF,SAAW,SAAUtI,GAC3B,OAAOA,EAAEiB,MAAM,KAAKsH,KAAK,SAAStH,MAAM,KAAKsH,KAAK,QAAQtH,MAAM,KAAKsH,KAAK,SAE5ExF,GAAGC,KAAKoC,QAAU,SAAUtC,EAAG7E,GAC7B,IAEIM,EAFAiK,EAAW,MAALvK,EAAYA,EAAEwK,SAAW,IAAMxK,EAAEyK,WAAa,KAAO,GAC/DF,GAAOzF,GAAGC,KAAKG,aAAaL,EAAG,IAEN,oBAAbiC,UAA2E,OAA9CxG,EAAIwG,SAAS4D,eAAe,eAAwBpK,EAAEqK,WAAa7F,GAAGC,KAAKsF,SAASE,GAAO,QAAsC,oBAAZK,SAA0C,MAAfA,QAAQC,KAAaD,QAAQC,IAAIN,IAE5NzF,GAAGC,KAAKsC,cAAgB,WACtB,IAAI/G,EAAIwG,SAAS4D,eAAe,cACvB,MAALpK,IAAWA,EAAEqK,UAAY,KAE/B7F,GAAGC,KAAK+F,QAAU,SAAUrK,GAC1B,OAAOA,EAAEyB,UAEX4C,GAAGC,KAAKgG,OAAS,SAAUC,GACzB,OAAOA,EAAEC,WAEXnG,GAAGC,KAAKmG,SAAW,SAAUzK,GAC3B,OAAOA,EAAEkE,WAEXG,GAAGC,KAAKG,aAAe,SAAUzE,EAAGsB,GAClC,GAAS,MAALtB,EAAW,MAAO,OACtB,GAAIsB,EAAEe,QAAU,EAAG,MAAO,QAC1B,IAAI5B,EAACiK,QAAW1K,GAEhB,OADS,YAALS,IAAoBT,EAAEyB,UAAYzB,EAAEwK,aAAY/J,EAAI,UAChDA,GACN,IAAK,SACH,GAAIT,aAAaqI,MAAO,CACtB,GAAIrI,EAAE2K,SAAU,CACd,GAAgB,GAAZ3K,EAAEqC,OAAa,OAAOrC,EAAE,GAC5B,IAAI8G,EAAM9G,EAAE,GAAK,IACjBsB,GAAK,KAEL,IADA,IAAIgH,EAAM,EAAGC,EAAKvI,EAAEqC,OACbiG,EAAMC,GAAI,CAEHzB,GAAH,IADLvH,EAAI+I,KACW,IAAMjE,GAAGC,KAAKG,aAAazE,EAAET,GAAI+B,GAAgB+C,GAAGC,KAAKG,aAAazE,EAAET,GAAI+B,GAEjG,OAAOwF,EAAM,IAEf,IACIvH,EADAC,EAAIQ,EAAEqC,OAENyE,EAAM,IACVxF,GAAK,KAEL,IADIiH,EAAK,EACFA,EAAK/I,GAAG,CACb,IAAIoL,EAAKrC,IACTzB,IAAQ8D,EAAK,EAAI,IAAM,IAAMvG,GAAGC,KAAKG,aAAazE,EAAE4K,GAAKtJ,GAG3D,OADAwF,GAAO,IAGT,IAAI+D,EACJ,IACEA,EAAQ7K,EAAE8K,SACV,MAAOP,GACP,MAAO,MAET,GAAa,MAATM,GAAiBA,GAAS5K,OAAO6K,SAAU,CAC7C,IAAIC,EAAK/K,EAAE8K,WACX,GAAU,mBAANC,EAAyB,OAAOA,EAEtC,IAAIzI,EAAI,KACJwE,EAAM,MACVxF,GAAK,KACL,IAAI0J,EAA2B,MAApBhL,EAAEoB,eACb,IAAK,IAAIkB,KAAKtC,EAERgL,IAAShL,EAAEoB,eAAekB,IAGrB,aAALA,GAAyB,aAALA,GAAyB,aAALA,GAAyB,kBAALA,GAA8B,kBAALA,IAGvE,GAAdwE,EAAIzE,SAAayE,GAAO,QAC5BA,GAAOxF,EAAIgB,EAAI,MAAQ+B,GAAGC,KAAKG,aAAazE,EAAEsC,GAAIhB,IAIpD,OADAwF,GAAO,MADPxF,EAAIA,EAAE2J,UAAU,IACE,IAEpB,IAAK,WACH,MAAO,aACT,IAAK,SACH,OAAOjL,EACT,QACE,OAAOkL,OAAOlL,KAGpBqE,GAAGC,KAAK6G,aAAe,SAAUC,EAAIC,GACnC,GAAU,MAAND,EAAY,OAAO,EACvB,GAAIA,GAAMC,EAAI,OAAO,EACrB,IAAIC,EAAOF,EAAGG,eACd,GAAY,MAARD,EAEF,IADA,IAAIhD,EAAM,EAAGC,EAAK+C,EAAKjJ,OAChBiG,EAAMC,GAAI,CACf,IACIqC,EAAKU,EADDhD,KAER,GAAIsC,GAAMS,GAAMhH,GAAGC,KAAK6G,aAAaP,EAAIS,GAAK,OAAO,EAGzD,OAAOhH,GAAGC,KAAK6G,aAAaC,EAAGI,UAAWH,IAE5ChH,GAAGC,KAAKC,aAAe,SAAUvE,EAAGqL,GAClC,IACE,GAAIrL,aAAaqL,EACf,OAAIA,GAAMhD,OAA4B,MAAdrI,EAAE2K,SAG5B,GAAItG,GAAGC,KAAK6G,aAAanL,EAAEkE,UAAWmH,GAAK,OAAO,EAClD,MAAOd,GACP,GAAU,MAANc,EAAY,OAAO,EAEzB,OAAQA,GACN,KAAKI,IACH,OAAO3G,KAAK4G,KAAK1L,EAAI,cAAkBA,EACzC,KAAK2L,MACH,MAAqB,iBAAN3L,EACjB,KAAK4L,KACH,OAAa,IAAN5L,IAAoB,IAANA,EACvB,KAAKkL,OACH,MAAqB,iBAANlL,EACjB,KAAK6L,QACH,OAAO,EACT,QACE,OAAS,MAAL7L,IACAqL,GAAMS,OAAuB,MAAd9L,EAAEyB,WACjB4J,GAAMU,MAAuB,MAAf/L,EAAEwK,WACbxK,EAAE2K,UAAYU,MAG3BhH,GAAGC,KAAK0H,OAAS,SAAUhM,EAAGS,GAC5B,GAAI4D,GAAGC,KAAKC,aAAavE,EAAGS,GAAI,OAAOT,EAAQ,KAAM,eAAiBmE,IAAIK,OAAOxE,GAAK,OAASmE,IAAIK,OAAO/D,IAE5G4D,GAAG+B,IAAM,aACT/B,GAAG+B,IAAI3E,UAAW,EAClB4C,GAAG+B,IAAI6F,MAAQ,aAGf5H,GAAG+B,IAAI8F,MAAQ,SAAU9H,GACvB8H,MAAM7H,GAAGC,KAAKG,aAAaL,EAAG,MAEhCC,GAAG+B,IAAI+F,KAAO,SAAUC,MACtB,OAAOD,KAAKC,OAEd/H,GAAG+B,IAAIiG,gBAAkB,SAAUrD,GACjC3E,GAAG+B,IAAIkG,QAAUtD,GAIfX,MAAMlH,UAAUoL,UAAS/K,YAAY6B,OAAS,SAAUC,EAAGtD,GAC7D,IAAIT,EAAI+D,EAAEiJ,QAAQvM,GAClB,OAAU,GAANT,IACJ+D,EAAEE,OAAOjE,EAAG,IACL,KAETuF,KAAKrD,UAAY,QACjBqD,KAAK0H,IAAMC,OAAOD,IAClB1H,KAAK4H,kBAAoBD,OAAOC,kBAChC5H,KAAK6H,kBAAoBF,OAAOE,kBAChC7H,KAAK8H,SAAW,SAAUrN,GACxB,OAAOqN,SAASrN,IAElBuF,KAAKH,MAAQ,SAAUpF,GACrB,OAAOoF,MAAMpF,IAEf2L,OAAO/J,UAAU+C,UAAYgH,OAC7BA,OAAOzJ,UAAW,EAClB4G,MAAMlH,UAAU+C,UAAYmE,MAC5BA,MAAM5G,UAAW,EACjBe,KAAKrB,UAAU+C,UAAY1B,KAC3BA,KAAKf,UAAY,QACjB,IAAIgK,KAAQhK,UAAW,QACnBoK,SAAYpK,UAAW,YACvBkK,MAAQc,OACZd,MAAMlK,UAAY,SAClB,IAAImK,KAAOiB,QACXjB,KAAKpB,WAAa,QAClB,IAAIsB,OAAUrK,UAAW,UACrBsK,QACAe,MAAStC,WAAY,SACF,oBAAZnE,WAAyBhC,GAAG+B,IAAIC,SAAWA,UACjC,oBAAVR,SACTxB,GAAG+B,IAAIP,OAASA,OAChBxB,GAAG+B,IAAIP,OAAOyG,QAAU,SAAUxC,EAAKiD,EAAKC,GAC1C,IAAIhE,EAAI3E,GAAG+B,IAAIkG,QACf,OAAS,MAALtD,GACGA,EAAEc,GAAMiD,EAAM,IAAMC,MAG/BhI,IAAIC,MAAMZ,GAAGa,cAAcE,OAniB5B,UAqiBMiD,MAAMlH,UAAU+C,2BChlCvB,IAAA6B,EAAc5G,EAAQ,GAEtB,iBAAA4G,IAAAA,IAA4CzG,EAAAC,EAASwG,EAAA,MAOrD,IAAAkH,GAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAC,GAEalO,EAAQ,EAARA,CAAiD4G,EAAAkH,GAE9DlH,EAAAuH,SAAAhO,EAAAD,QAAA0G,EAAAuH,0BCjBAhO,EAAAD,QAA2BF,EAAQ,EAARA,EAA6C,IAKxEoO,MAAcjO,EAAAC,EAAS,6jXAAyjX,oBCAhlXD,EAAAD,QAAA,SAAAmO,GACA,IAAAC,KAwCA,OArCAA,EAAA3C,SAAA,WACA,OAAAjH,KAAA6J,IAAA,SAAAC,GACA,IAAA5H,EAsCA,SAAA4H,EAAAH,GACA,IAAAzH,EAAA4H,EAAA,IAAA,GACAC,EAAAD,EAAA,GACA,IAAAC,EACA,OAAA7H,EAGA,GAAAyH,GAAA,mBAAAK,KAAA,CACA,IAAAC,EAYA,SAAAC,GAKA,MAAA,mEAHAF,KAAAG,SAAAC,mBAAAC,KAAAC,UAAAJ,MAGA,MAjBAK,CAAAR,GACAS,EAAAT,EAAAU,QAAAZ,IAAA,SAAAa,GACA,MAAA,iBAAAX,EAAAY,WAAAD,EAAA,QAGA,OAAAxI,GAAA0I,OAAAJ,GAAAI,QAAAX,IAAAjE,KAAA,MAGA,OAAA9D,GAAA8D,KAAA,MAtDA6E,CAAAf,EAAAH,GACA,OAAAG,EAAA,GACA,UAAAA,EAAA,GAAA,IAAmC5H,EAAA,IAEnCA,IAEG8D,KAAA,KAIH4D,EAAAlO,EAAA,SAAAE,EAAAkP,GACA,iBAAAlP,IACAA,IAAA,KAAAA,EAAA,MAEA,IADA,IAAAmP,KACArP,EAAA,EAAgBA,EAAAsE,KAAAxB,OAAiB9C,IAAA,CACjC,IAAAsJ,EAAAhF,KAAAtE,GAAA,GACA,iBAAAsJ,IACA+F,EAAA/F,IAAA,GAEA,IAAAtJ,EAAA,EAAYA,EAAAE,EAAA4C,OAAoB9C,IAAA,CAChC,IAAAoO,EAAAlO,EAAAF,GAKA,iBAAAoO,EAAA,IAAAiB,EAAAjB,EAAA,MACAgB,IAAAhB,EAAA,GACAA,EAAA,GAAAgB,EACKA,IACLhB,EAAA,GAAA,IAAAA,EAAA,GAAA,UAAAgB,EAAA,KAEAlB,EAAAF,KAAAI,MAIAF,oBCzCA,IAAAoB,KAWAC,EATA,SAAAC,GACA,IAAAC,EAEA,OAAA,WAEA,YADA,IAAAA,IAAAA,EAAAD,EAAAtF,MAAA5F,KAAA8F,YACAqF,GAIAC,CAAA,WAMA,OAAApJ,QAAAQ,UAAAA,SAAA6I,MAAArJ,OAAAsJ,OAUAC,EAAA,SAAAL,GACA,IAAAC,KAEA,OAAA,SAAAK,EAAAC,GAMA,GAAA,mBAAAD,EACA,OAAAA,IAEA,QAAA,IAAAL,EAAAK,GAAA,CACA,IAAAE,EApBA,SAAAF,EAAAC,GACA,OAAAA,EACAA,EAAAE,cAAAH,GAEAhJ,SAAAmJ,cAAAH,IAgBA3P,KAAAmE,KAAAwL,EAAAC,GAEA,GAAAzJ,OAAA4J,mBAAAF,aAAA1J,OAAA4J,kBACA,IAGAF,EAAAA,EAAAG,gBAAAC,KACK,MAAApF,GACLgF,EAAA,KAGAP,EAAAK,GAAAE,EAEA,OAAAP,EAAAK,IA1BA,GA8BAO,EAAA,KACAC,EAAA,EACAC,KAEAC,EAAc5Q,EAAQ,GAqDtB,SAAA6Q,EAAAC,EAAAhD,GACA,IAAA,IAAA1N,EAAA,EAAgBA,EAAA0Q,EAAA5N,OAAmB9C,IAAA,CACnC,IAAAoO,EAAAsC,EAAA1Q,GACA2Q,EAAArB,EAAAlB,EAAA9E,IAEA,GAAAqH,EAAA,CACAA,EAAAC,OAEA,IAAA,IAAA3H,EAAA,EAAiBA,EAAA0H,EAAAE,MAAA/N,OAA2BmG,IAC5C0H,EAAAE,MAAA5H,GAAAmF,EAAAyC,MAAA5H,IAGA,KAAQA,EAAAmF,EAAAyC,MAAA/N,OAAuBmG,IAC/B0H,EAAAE,MAAA7C,KAAA8C,EAAA1C,EAAAyC,MAAA5H,GAAAyE,QAEG,CACH,IAAAmD,KAEA,IAAA5H,EAAA,EAAiBA,EAAAmF,EAAAyC,MAAA/N,OAAuBmG,IACxC4H,EAAA7C,KAAA8C,EAAA1C,EAAAyC,MAAA5H,GAAAyE,IAGA4B,EAAAlB,EAAA9E,KAA2BA,GAAA8E,EAAA9E,GAAAsH,KAAA,EAAAC,MAAAA,KAK3B,SAAAE,EAAA7C,EAAAR,GAIA,IAHA,IAAAgD,KACAM,KAEAhR,EAAA,EAAgBA,EAAAkO,EAAApL,OAAiB9C,IAAA,CACjC,IAAAoO,EAAAF,EAAAlO,GACAsJ,EAAAoE,EAAAuD,KAAA7C,EAAA,GAAAV,EAAAuD,KAAA7C,EAAA,GAIA8C,GAAcC,IAHd/C,EAAA,GAGcgD,MAFdhD,EAAA,GAEcI,UADdJ,EAAA,IAGA4C,EAAA1H,GACA0H,EAAA1H,GAAAuH,MAAA7C,KAAAkD,GADAR,EAAA1C,KAAAgD,EAAA1H,IAAkDA,GAAAA,EAAAuH,OAAAK,KAIlD,OAAAR,EAGA,SAAAW,EAAA3D,EAAA4D,GACA,IAAAxB,EAAAD,EAAAnC,EAAAG,YAEA,IAAAiC,EACA,MAAA,IAAAyB,MAAA,+GAGA,IAAAC,EAAAjB,EAAAA,EAAAzN,OAAA,GAEA,GAAA,QAAA4K,EAAA+D,SACAD,EAEGA,EAAAE,YACH5B,EAAA6B,aAAAL,EAAAE,EAAAE,aAEA5B,EAAA8B,YAAAN,GAJAxB,EAAA6B,aAAAL,EAAAxB,EAAA+B,YAMAtB,EAAAvC,KAAAsD,QACE,GAAA,WAAA5D,EAAA+D,SACF3B,EAAA8B,YAAAN,OACE,CAAA,GAAA,iBAAA5D,EAAA+D,WAAA/D,EAAA+D,SAAAK,OAIF,MAAA,IAAAP,MAAA,8LAHA,IAAAG,EAAA7B,EAAAnC,EAAA+D,SAAAK,OAAAhC,GACAA,EAAA6B,aAAAL,EAAAI,IAMA,SAAAK,EAAAT,GACA,GAAA,OAAAA,EAAAU,WAAA,OAAA,EACAV,EAAAU,WAAAC,YAAAX,GAEA,IAAAY,EAAA3B,EAAAvD,QAAAsE,GACAY,GAAA,GACA3B,EAAAtM,OAAAiO,EAAA,GAIA,SAAAC,EAAAzE,GACA,IAAA4D,EAAAxK,SAAAsL,cAAA,SAMA,QAJAtE,IAAAJ,EAAA2E,MAAAC,OACA5E,EAAA2E,MAAAC,KAAA,iBAGAxE,IAAAJ,EAAA2E,MAAAE,MAAA,CACA,IAAAA,EAgCA,WACK,EAIL,OAAQ3S,EAAA4S,GArCRC,GACAF,IACA7E,EAAA2E,MAAAE,MAAAA,GAOA,OAHAG,EAAApB,EAAA5D,EAAA2E,OACAhB,EAAA3D,EAAA4D,GAEAA,EAiBA,SAAAoB,EAAAC,EAAAN,GACA3R,OAAAkS,KAAAP,GAAAQ,QAAA,SAAAtR,GACAoR,EAAAG,aAAAvR,EAAA8Q,EAAA9Q,MAYA,SAAAuP,EAAA9M,EAAA0J,GACA,IAAA4D,EAAAyB,EAAAjP,EAAAkP,EAGA,GAAAtF,EAAAE,WAAA5J,EAAAmN,IAAA,CAKA,KAJA6B,EAAA,mBAAAtF,EAAAE,UACAF,EAAAE,UAAA5J,EAAAmN,KACAzD,EAAAE,UAAAqF,QAAAjP,EAAAmN,MASA,OAAA,aAJAnN,EAAAmN,IAAA6B,EAUA,GAAAtF,EAAA2C,UAAA,CACA,IAAA6C,EAAA5C,IAEAgB,EAAAjB,IAAAA,EAAA8B,EAAAzE,IAEAqF,EAAAI,EAAA3R,KAAA,KAAA8P,EAAA4B,GAAA,GACApP,EAAAqP,EAAA3R,KAAA,KAAA8P,EAAA4B,GAAA,QAGAlP,EAAAwK,WACA,mBAAA4E,KACA,mBAAAA,IAAAC,iBACA,mBAAAD,IAAAE,iBACA,mBAAAC,MACA,mBAAAjF,MAEAgD,EAlEA,SAAA5D,GACA,IAAA8F,EAAA1M,SAAAsL,cAAA,QAUA,YARAtE,IAAAJ,EAAA2E,MAAAC,OACA5E,EAAA2E,MAAAC,KAAA,YAEA5E,EAAA2E,MAAAoB,IAAA,aAEAf,EAAAc,EAAA9F,EAAA2E,OACAhB,EAAA3D,EAAA8F,GAEAA,EAuDAE,CAAAhG,GACAqF,EAiFA,SAAAS,EAAA9F,EAAA1J,GACA,IAAAmN,EAAAnN,EAAAmN,IACA3C,EAAAxK,EAAAwK,UAQAmF,OAAA7F,IAAAJ,EAAAkG,uBAAApF,GAEAd,EAAAkG,uBAAAD,KACAxC,EAAAX,EAAAW,IAGA3C,IAEA2C,GAAA,uDAAuD7C,KAAAG,SAAAC,mBAAAC,KAAAC,UAAAJ,MAAA,OAGvD,IAAAqF,EAAA,IAAAN,MAAApC,IAA6BmB,KAAA,aAE7BwB,EAAAN,EAAAO,KAEAP,EAAAO,KAAAX,IAAAC,gBAAAQ,GAEAC,GAAAV,IAAAE,gBAAAQ,IA5GAtS,KAAA,KAAA8P,EAAA5D,GACA5J,EAAA,WACAiO,EAAAT,GAEAA,EAAAyC,MAAAX,IAAAE,gBAAAhC,EAAAyC,SAGAzC,EAAAa,EAAAzE,GACAqF,EAsDA,SAAAzB,EAAAtN,GACA,IAAAmN,EAAAnN,EAAAmN,IACAC,EAAApN,EAAAoN,MAEAA,GACAE,EAAAwB,aAAA,QAAA1B,GAGA,GAAAE,EAAA0C,WACA1C,EAAA0C,WAAAC,QAAA9C,MACE,CACF,KAAAG,EAAAO,YACAP,EAAAW,YAAAX,EAAAO,YAGAP,EAAAM,YAAA9K,SAAAoN,eAAA/C,MArEA3P,KAAA,KAAA8P,GACAxN,EAAA,WACAiO,EAAAT,KAMA,OAFAyB,EAAA/O,GAEA,SAAAmQ,GACA,GAAAA,EAAA,CACA,GACAA,EAAAhD,MAAAnN,EAAAmN,KACAgD,EAAA/C,QAAApN,EAAAoN,OACA+C,EAAA3F,YAAAxK,EAAAwK,UAEA,OAGAuE,EAAA/O,EAAAmQ,QAEArQ,KA1PA/D,EAAAD,QAAA,SAAAoO,EAAAR,GACA,GAAA,oBAAA0G,OAAAA,OACA,iBAAAtN,SAAA,MAAA,IAAAyK,MAAA,iEAGA7D,EAAAA,OAEA2E,MAAA,iBAAA3E,EAAA2E,MAAA3E,EAAA2E,SAIA3E,EAAA2C,WAAA,kBAAA3C,EAAA2C,YAAA3C,EAAA2C,UAAAd,KAGA7B,EAAAG,aAAAH,EAAAG,WAAA,QAGAH,EAAA+D,WAAA/D,EAAA+D,SAAA,UAEA,IAAAf,EAAAK,EAAA7C,EAAAR,GAIA,OAFA+C,EAAAC,EAAAhD,GAEA,SAAA2G,GAGA,IAFA,IAAAC,KAEAtU,EAAA,EAAiBA,EAAA0Q,EAAA5N,OAAmB9C,IAAA,CACpC,IAAAoO,EAAAsC,EAAA1Q,IACA2Q,EAAArB,EAAAlB,EAAA9E,KAEAsH,OACA0D,EAAAtG,KAAA2C,GAGA0D,GAEA5D,EADAM,EAAAsD,EAAA3G,GACAA,GAGA,IAAA1N,EAAA,EAAiBA,EAAAsU,EAAAxR,OAAsB9C,IAAA,CACvC,IAAA2Q,EAEA,GAAA,KAFAA,EAAA2D,EAAAtU,IAEA4Q,KAAA,CACA,IAAA,IAAA3H,EAAA,EAAmBA,EAAA0H,EAAAE,MAAA/N,OAA2BmG,IAAA0H,EAAAE,MAAA5H,YAE9CqG,EAAAqB,EAAArH,QAkNA,IAAAiL,EAAA,WACA,IAAAC,KAEA,OAAA,SAAAhR,EAAAiR,GAGA,OAFAD,EAAAhR,GAAAiR,EAEAD,EAAAE,OAAApH,SAAAhD,KAAA,OANA,GAUA,SAAA6I,EAAA7B,EAAA9N,EAAAM,EAAAE,GACA,IAAAmN,EAAArN,EAAA,GAAAE,EAAAmN,IAEA,GAAAG,EAAA0C,WACA1C,EAAA0C,WAAAC,QAAAM,EAAA/Q,EAAA2N,OACE,CACF,IAAAwD,EAAA7N,SAAAoN,eAAA/C,GACAyD,EAAAtD,EAAAsD,WAEAA,EAAApR,IAAA8N,EAAAW,YAAA2C,EAAApR,IAEAoR,EAAA9R,OACAwO,EAAAK,aAAAgD,EAAAC,EAAApR,IAEA8N,EAAAM,YAAA+C,oBC7UA5U,EAAAD,QAAA,SAAAqR,GAEA,IAAA0D,EAAA,oBAAAvO,QAAAA,OAAAuO,SAEA,IAAAA,EACA,MAAA,IAAAtD,MAAA,oCAIA,IAAAJ,GAAA,iBAAAA,EACA,OAAAA,EAGA,IAAA2D,EAAAD,EAAAE,SAAA,KAAAF,EAAAG,KACAC,EAAAH,EAAAD,EAAAK,SAAAC,QAAA,YAAA,KA2DA,OA/BAhE,EAAAgE,QAAA,sDAAA,SAAAC,EAAAC,GAEA,IAWAC,EAXAC,EAAAF,EACAG,OACAL,QAAA,WAAA,SAAA1U,EAAAgV,GAAwC,OAAAA,IACxCN,QAAA,WAAA,SAAA1U,EAAAgV,GAAwC,OAAAA,IAGxC,MAAA,oDAAAC,KAAAH,GACAH,GAQAE,EAFA,IAAAC,EAAAvI,QAAA,MAEAuI,EACG,IAAAA,EAAAvI,QAAA,KAEH8H,EAAAS,EAGAN,EAAAM,EAAAJ,QAAA,QAAA,IAIA,OAAAxG,KAAAC,UAAA0G,GAAA,uNC9EqBK,8OAMjB,OACEC,UAAW,UACXC,UAAW,UACXC,YAAa,QACbC,gBAAiB,8DASnB,OACEC,UAAW,aACXC,UAAW,aACXC,WAAY,mEASd,OACEF,UAAW,gBACXC,UAAW,gBACXC,WAAY,wDASd,OACE5M,GAAI,gBACJsM,UAAW,IACXC,UAAW,IACXC,YAAa,IACbK,UAAW,IACXC,MAAO,+CAWT,OACE9M,GAAI,oBACJsM,UAAW,IACXC,UAAW,IACXC,YAAa,IACbK,UAAW,IACXC,MAAO,IACPL,gBAAiB,wLCjEFM,wOAOQ7P,EAASxG,GAIlC,IAEMsW,EAAG,UAAApH,OADU,qBACV,+BACHqH,EAAI,KAAArH,OAAQoH,EAAR,OACJE,EAAK,IAAAtH,OAJK,6BAILA,OAAiBqH,EAAjB,cACLE,EAAa,IAAIC,OAAOF,GAGxBG,EADgBnQ,EAAQkF,UAAU,EAAG1L,GACZgD,MAAM,IAAI4T,UAAUtM,KAAK,IAGxD,OAFemM,EAAWf,KAAKiB,yCAYZE,GAAO,IACpBjB,EAAcD,EAAUmB,0BAAxBlB,UACAC,EAAcF,EAAUmB,0BAAxBjB,UACAC,EAAgBH,EAAUmB,0BAA1BhB,YACAC,EAAoBJ,EAAUmB,0BAA9Bf,gBAMNc,GAFAA,GADAA,GADAA,EAAQA,EAAM7T,MAAM4S,GAAWtL,KAAKqL,EAAUoB,kBAAkBnB,YAClD5S,MAAM6S,GAAWvL,KAAKqL,EAAUoB,kBAAkBlB,YAClD7S,MAAM8S,GAAaxL,KAAKqL,EAAUoB,kBAAkBjB,cAEpD9S,MAAM+S,GAAiBzL,KAAKqL,EAAUoB,kBAAkBhB,iBAV5C,IAalBC,EAAcL,EAAUqB,4BAAxBhB,UACAC,EAAcN,EAAUqB,4BAAxBf,UACAC,EAAeP,EAAUqB,4BAAzBd,WACJ,oBAAqB5P,QAAUA,OAAO2Q,kBAGxCJ,GADAA,GADAA,EAAQA,EAAM7T,MAAMgT,GAAW1L,KAAKqL,EAAUuB,6BAA6BlB,YAC7DhT,MAAMiT,GAAW3L,KAAKqL,EAAUuB,6BAA6BjB,YAC7DjT,MAAMkT,GAAY5L,KAAKqL,EAAUuB,6BAA6BhB,aAG3EN,EAAcD,EAAUoB,kBAAxBnB,UACAC,EAAcF,EAAUoB,kBAAxBlB,UACAC,EAAgBH,EAAUoB,kBAA1BjB,YACAC,EAAoBJ,EAAUoB,kBAA9BhB,gBAzBuB,IA0BlBI,EAAcR,EAAUoB,kBAAxBZ,UACAC,EAAUT,EAAUoB,kBAApBX,MAORS,GADAA,GADAA,GADAA,GADAA,EAAQA,EAAM7T,MAAM4S,GAAWtL,KAAKqL,EAAUwB,cAAcvB,YAC9C5S,MAAM6S,GAAWvL,KAAKqL,EAAUwB,cAActB,YAC9C7S,MAAM8S,GAAaxL,KAAKqL,EAAUwB,cAAcrB,cAChD9S,MAAMmT,GAAW7L,KAAKqL,EAAUwB,cAAchB,YAC9CnT,MAAMoT,GAAO9L,KAAKqL,EAAUwB,cAAcf,OAOxD,IAHA,IAAIgB,EAAc,GACdC,EAAgB,KAEXrX,EAAI,EAAGA,EAAI6W,EAAM/T,OAAQ9C,GAAK,EAAG,CACxC,IAAMsX,EAAYT,EAAM3N,OAAOlJ,GACV,MAAjBqX,EACgB,MAAdC,EACFD,EAAgB,GAEhBD,GAAeE,EAEM,MAAdA,GACTF,GAAW,IAAAlI,OAAQmI,GACnBA,EAAgB,MACPC,EAAUC,MAAM,2BACzBF,GAAiBC,GAEjBF,GAAW,IAAAlI,OAAQmI,GACnBA,EAAgB,KAChBrX,GAAK,GAIT,OAAOoX,wCASYP,GAAO,IAClBjB,EAAcD,EAAUwB,cAAxBvB,UACAC,EAAcF,EAAUwB,cAAxBtB,UACAC,EAAgBH,EAAUwB,cAA1BrB,YACAK,EAAcR,EAAUwB,cAAxBhB,UACAC,EAAUT,EAAUwB,cAApBf,MAQR,OAFAS,GADAA,GADAA,GADAA,GADAA,EAAQA,EAAM7T,MAAM4S,GAAWtL,KAAKqL,EAAUoB,kBAAkBnB,YAClD5S,MAAM6S,GAAWvL,KAAKqL,EAAUoB,kBAAkBlB,YAClD7S,MAAM8S,GAAaxL,KAAKqL,EAAUoB,kBAAkBjB,cACpD9S,MAAMmT,GAAW7L,KAAKqL,EAAUoB,kBAAkBZ,YAClDnT,MAAMoT,GAAO9L,KAAKqL,EAAUoB,kBAAkBX,8CAWxCoB,GAGpB,IAFA,IAAIC,EAAW,GAENzX,EAAI,EAAGA,EAAIwX,EAAO1U,OAAQ9C,GAAK,EAAG,CACzC,IAAMsX,EAAYE,EAAOtO,OAAOlJ,GAGhC,GAAIwX,EAAOE,YAAY1X,GAAK,IAC1ByX,GAAQ,KAAAvI,OAASsI,EAAOE,YAAY1X,GAA5B,KAEJwX,EAAOE,YAAY1X,GAAK,QAC1BA,GAAK,QAEF,GAAkB,MAAdsX,EAAmB,CAC5B,IAAMK,EAAMH,EAAOxK,QAAQ,IAAKhN,EAAI,GACpC,GAAI2X,GAAO,EAAG,CACZ,IAAMC,EAAY9Q,SAASsL,cAAc,QACzCwF,EAAUjN,UAAY6M,EAAO9L,UAAU1L,EAAG2X,EAAM,GAChDF,GAAQ,KAAAvI,OAAS2I,EAAKC,gBAAiBF,EAAUG,aAAeH,EAAUI,UAAY,GAA9E,KACRhY,EAAI2X,OAEJF,GAAYH,OAGdG,GAAYH,EAIhB,OAAOG,wDAS4BD,EAAQS,GAC3C,IAAIR,EAAW,GAETS,EAAQV,EAAOxK,QAAQ,SAC7B,GAAc,IAAVkL,EAAa,CACf,IAAMP,EAAMH,EAAOxK,QAAQ,KAC3B,IAAiC,IAA7BwK,EAAOxK,QAAQ,SAIjB,OAFAyK,EAAQ,GAAAvI,OAAMsI,EAAO7T,OAAOuU,EAAOP,GAA3B,gBAAAzI,OAA8C+I,EAA9C,MACRR,GAAYD,EAAO7T,OAAOgU,EAAM,EAAGH,EAAO1U,QAI9C,OAAO0U,2DAS+BA,EAAQS,GAE9C,OAAiC,IAA7BT,EAAOxK,QAAQ,WAA8D,IAA3CwK,EAAOxK,QAAP,OAAAkC,OAAsB+I,IACnDT,GAK8C,IAAnDA,EAAOxK,QAAP,cAAAkC,OAA6B+I,EAA7B,MACKT,EAAOrC,QAAP,cAAAjG,OAA6B+I,EAA7B,KAA8C,IAIhDT,EAAOrC,QAAP,OAAAjG,OAAsB+I,GAAgB,0CAW1BT,EAAQhR,EAAS2R,GAEpC,IAEIC,EAAuB,GAC3B,IAA4B,IAHDZ,EAAOxK,QAAQ,eAGX,CAC7B,IAAMqL,EAAsBb,EAAOxK,QAAQ,gBAC3CoL,EAAoB,GAAAlJ,OAAMsI,EAAO9L,UAAU,EAAG2M,GAA1B,0BAAAnJ,OAAuEiJ,EAAvE,MAAAjJ,OAA8F1I,EAA9F,iBAAA0I,OAAqHsI,EAAO9L,UAAU2M,SACrJ,GAAIhC,EAAOiC,QAAQd,GAAS,CACjC,IAAMe,EAAiBf,EAAOxK,QAAQ,MAChCwL,EAAoBhB,EAAOxK,QAAQ,KACnCyL,EAAWD,IAAsBD,EAAiBA,EAAiBC,EACzEJ,EAAoB,GAAAlJ,OAAMsI,EAAO9L,UAAU,EAAG+M,GAA1B,sCAAAvJ,OAAwEiJ,EAAxE,MAAAjJ,OAA+F1I,EAA/F,wCACf,CACL,IAAMkS,EAAqBlB,EAAOxK,QAAQ,KAAO,EAC3C2L,EAAmBnB,EAAOoB,YAAY,WACtCC,EAAgBrB,EAAO9L,UAAUgN,EAAoBC,GAC3DP,EAAoB,GAAAlJ,OAAMsI,EAAO9L,UAAU,EAAGgN,GAA1B,eAAAxJ,OAA2D2J,EAA3D,0BAAA3J,OAAiGiJ,EAAjG,MAAAjJ,OAAwH1I,EAAxH,oCAGtB,OAAO4R,2CAUeZ,EAAQW,GAC9B,IAAIW,EAA0BtB,EACxBuB,EAAiB,yBAAA7J,OAA4BiJ,EAA5B,MAEjBa,EAAuBxB,EAAOxK,QAAQ+L,GAC5C,IAA8B,IAA1BC,EAA6B,CAG/B,IAFA,IAAIC,GAA2B,EAC3BC,EAA2B1B,EAAOxK,QAAQ,gBACT,IAA9BkM,GACDA,IAA6BF,IAC/BC,GAA2B,GAE7BC,EAA2B1B,EAAOxK,QAAQ,cAAekM,EAA2B,GAGtF,GAAID,EAA0B,CAC5B,IACME,EADa3B,EAAOxK,QAbH,gBAa+BgM,GAb/B,gBAcoClW,OAE3DgW,EADmBtB,EAAO9L,UAAU,EAAGsN,GACAxB,EAAO9L,UAAUyN,QAExDL,EAA0BzC,EAAO+C,gBAAgB5B,GAIrD,OAAOsB,0CAQctB,GACrB,IAII6B,EAAyB7B,EACvB8B,EAAiB9B,EAAOxK,QAJR,eAKtB,IAAwB,IAApBsM,EAAuB,CACzB,IAAMC,EAAkB/B,EAAOxK,QALV,cAKkCsM,EANnC,cAMkExW,SAC7D,IAArByW,IACFF,EAAyB7B,EAAO9L,UAAU,EAAG4N,GAC3C9B,EAAO9L,UAAU4N,EATD,cASgCxW,OAAQyW,GAV3C,WAcnB,OAAOF,oDAYwBG,GAW/B,IAX2E,IAAtCC,EAAsCrP,UAAAtH,OAAA,QAAAgL,IAAA1D,UAAA,GAAAA,UAAA,GAAzBuL,EAAUwB,cACtDuC,EAAY,GAAAxK,OAAMuK,EAAW7D,UAAjB,QACZ+D,EAAU,GAAAzK,OAAMuK,EAAW7D,UAAjB,SAAA1G,OAAkCuK,EAAW5D,WACvD+D,EAAc,IAAA1K,OAAOuK,EAAW5D,WAC9BA,EAAc4D,EAAd5D,UACFgE,EAAiB,GAAA3K,OAAMuK,EAAW7D,UAAjB,aAAA1G,OAAsCuK,EAAW5D,WAClEiE,EAAkB,GAAA5K,OAAMuK,EAAW7D,UAAjB,wBAEpBmE,EAAS,GACT7B,EAAQsB,EAAKxM,QAAQ0M,GACrB/B,EAAM,GACQ,IAAXO,GAAc,CACnB6B,GAAUP,EAAK9N,UAAUiM,EAAKO,GAG9B,IAAM8B,EAAkBR,EAAKxM,QAAQ2M,EAAYzB,GAC3C+B,EAAsBT,EAAKxM,QAAQ4M,EAAgB1B,GACnDgC,EAAiBV,EAAKxM,QAAQ6I,EAAWqC,IACtB,IAArB8B,EACFrC,EAAMqC,EACGC,IAAwBC,EAAiB,IAClDvC,EAAMsC,GAGR,IAAME,EAAiBX,EAAKxM,QAAQ6M,EAAmB3B,GACvD,IAAwB,IAApBiC,EAAuB,CACzB,IAAMC,EAAcZ,EAAK9N,UAAUwM,EAAOiC,GACpCE,EAAkBb,EAAKxM,QAAQ8M,EAAoB5B,GACzD,IAAyB,IAArBmC,EAAwB,CAC1B,IAAMC,EAAaH,EAAiBN,EAAkB/W,OAEtDiX,GAAUK,EADSZ,EAAK9N,UAAU4O,EAAYD,GACTV,EACrCzB,EAAQsB,EAAKxM,QAAQ0M,EAAcxB,EAAQwB,EAAa5W,QACxD6U,GAAOgC,EAAW7W,YAElB6U,EAAMO,EACNA,EAAQsB,EAAKxM,QAAQ0M,EAAcxB,EAAQwB,EAAa5W,aAG1D6U,EAAMO,EACNA,EAAQsB,EAAKxM,QAAQ0M,EAAcxB,EAAQwB,EAAa5W,QAK5D,OADAiX,GAAUP,EAAK9N,UAAUiM,EAAK6B,EAAK1W,6CAYjByX,EAAQC,GAC1B,IAAMC,EAAaF,EAAOvN,QAAQ,SAClC,IAAoB,IAAhByN,EACF,OAAO,EAET,IAAMC,EAAmBH,EAAOvN,QAAQ,IAAKyN,GAE7C,OAAqC,IADpBF,EAAO7O,UAAU+O,EAAYC,GACjC1N,QAAQwN,mCAWRhD,GAEb,IAEMmD,EAAqBnD,EAAOxK,QAFjB,KAGX4N,EAA2BpD,EAAOxK,QAFjB,MAGnB6N,GAAQ,EAUZ,IARkC,IAA9BD,GACEA,IAA6BD,EAAqB,IACpDE,GAAQ,IAMPA,EAAO,CACV,IACMC,EADkB,IAAIpE,OAAO,iBACKqE,KAAKvD,GACzCsD,IACFD,EAAQF,EAAqB,IAAMG,EAAgBtX,OAIvD,OAAOqX,2CAQerD,GAetB,OADsBA,EAAOrC,QAZf,aAEG,SAACoC,GAGhB,IAAMyD,EAAazD,EAAMvK,QAAQ,KAC3BiO,EAAgB1D,EAAM7L,UAAUsP,EAAa,EAAGzD,EAAMzU,OAAS,GAC/DoY,EAAuBrD,EAAKsD,aAAaF,GAE/C,MADkB,GAAA/L,OAAMqI,EAAM7L,UAAU,EAAGsP,EAAa,IAAtC9L,OAA2CgM,EAA3C,0LChaHE,qOAKKC,GACtB3a,OAAO4a,OAAOF,EAAcC,WAAYA,+BA4B/B9Z,GACT,OAAKb,OAAOkB,UAAUC,eAAe1B,KAAKib,EAAcC,WAAY9Z,GAO7D6Z,EAAcC,WAAW9Z,KAL1Bb,OAAOkB,UAAUC,eAAe1B,KAAKib,EAAcC,WAAY,eAC1DD,EAAcC,WAAd,aAAAnM,OAAsC3N,gCAYxCA,EAAKN,GACdma,EAAcC,WAAW9Z,GAAON,iCAQpBM,EAAK0Z,GACjB,GAAKG,EAAcva,IAAIU,GAEhB,CACL,IAAMga,EAAiB7a,OAAO4a,OAAOF,EAAcva,IAAIU,GAAM0Z,GAC7DG,EAAcI,IAAIja,EAAKga,QAHvBH,EAAcI,IAAIja,EAAK0Z,sCA7CzB,OAAOG,EAAcK,0BASDxa,GACpBma,EAAcK,YAAcxa,iLAiDhCma,EAAcK,mBC/EOC,aASnB,SAAAA,iGAAcC,CAAArX,KAAAoX,GAKZpX,KAAKsX,iGAQEra,EAAKN,GACZqD,KAAKsX,MAAMra,GAAON,8BAQhBM,GACF,QAAIb,OAAOkB,UAAUC,eAAe1B,KAAKmE,KAAKsX,MAAOra,IAC5C+C,KAAKsX,MAAMra,sLC1BHsa,aAMnB,SAAAA,iGAAcC,CAAAxX,KAAAuX,GAKZvX,KAAKyX,gGAQHC,GACF1X,KAAKyX,UAAU/N,KAAKgO,gCASjBC,EAAWC,GACd,IAAK,IAAIlc,EAAI,EAAGA,EAAIsE,KAAKyX,UAAUjZ,SAAWoZ,EAAMC,UAAWnc,GAAK,EAC9DsE,KAAKyX,UAAU/b,GAAGic,YAAcA,GAElC3X,KAAKyX,UAAU/b,GAAGoc,SAASF,GAG/B,OAAOA,EAAMG,uDASIJ,EAAWG,GAC5B,IAAMJ,KAGN,OAFAA,EAASC,UAAYA,EACrBD,EAASI,SAAWA,EACbJ,qLC1CUM,gOAaAN,GACjBM,EAAgBP,UAAUQ,IAAIP,qCAQfC,EAAWC,GAC1BI,EAAgBP,UAAUS,KAAKP,EAAWC,0CA+CtBO,EAASC,GAC7BJ,EAAgBK,aAAaF,GAAWC,yCASpBE,GACpB,OAAON,EAAgBK,aAAaC,0CA2BpC,IACMxY,EADMkC,OAAOuO,SAASd,KACZ/Q,MAAM,KAEtB,MADY,GAAAkM,OAAM9K,EAAI,GAAV,MAAA8K,OAAiB9K,EAAI,iCAUvByY,GACVP,EAAgBO,WAAaA,EAE7B,IAAIC,EAAmBR,EAAgBS,iBAAiB,mBACpDC,EAAiBV,EAAgBS,iBAAiB,eAClDE,EAAeX,EAAgBS,iBAAiB,aAChDG,EAAeZ,EAAgBS,iBAAiB,aAChDI,EAAab,EAAgBS,iBAAiB,WAKlD,GAAoD,IAAhDT,EAAgBO,WAAWO,IAAIpQ,QAAQ,KAAY,CACrD,IAAMqQ,EAAaf,EAAgBgB,eACnCR,EAAmBO,EAAaP,EAChCG,EAAeI,EAAaJ,EAC5BD,EAAiBK,EAAaL,EAC9BE,EAAeG,EAAaH,EAC5BC,EAAaE,EAAaF,EAG5Bb,EAAgBiB,eAAe,kBAAmBT,GAClDR,EAAgBiB,eAAe,YAAaN,GAC5CX,EAAgBiB,eAAe,cAAeP,GAC9CV,EAAgBiB,eAAe,UAAWJ,GAC1Cb,EAAgBiB,eAAe,YAAaL,GAC5CZ,EAAgBiB,eAAe,kBAAmBT,GAElDR,EAAgBP,UAAUS,KAAK,4CAYnBhP,EAAKgQ,GACjB,IAAMC,EAAcnX,OAAOuO,SAAStJ,WAAW5H,OAAO,EAAG2C,OAAOuO,SAAStJ,WAAWqN,YAAY,KAAO,GACjG8E,EAAc7F,EAAK8F,oBAEzB,OAAID,QAC2B,IAAlBF,QAA0D,IAAlBA,EACjDE,EAAYE,KAAK,MAAOpQ,GAAK,GACC,MAArBA,EAAI7J,OAAO,EAAG,IAAmC,YAArB6J,EAAI7J,OAAO,EAAG,IAAyC,aAArB6J,EAAI7J,OAAO,EAAG,GACrF+Z,EAAYE,KAAK,OAAQpQ,GAAK,GAE9BkQ,EAAYE,KAAK,OAAQH,EAAcjQ,GAAK,QAGjB,IAAlBgQ,GAAiCA,GAC1CE,EAAYG,iBAAiB,eAAgB,oDAC7CH,EAAYI,KAAKjG,EAAKkG,eAAeP,KAErCE,EAAYI,KAAK,MAGZJ,EAAYM,cAEd,sCAUSvB,EAASe,EAAe3c,GACxC,IAAIod,EACJ,IAAY,IAARpd,EAAc,CAChB,IAAIqd,EAAeV,EAAgB,IAAMA,EAAgB,GACnDW,EAAU,GAAAjP,OAAMoN,EAAgB8B,eAAe3B,IAArCvN,OAAgDgP,GAChED,EAAW3B,EAAgB+B,OAAOF,OAC7B,CACL,IAAMA,EAAa7B,EAAgB8B,eAAe3B,GAClDwB,EAAW3B,EAAgB+B,OAAOF,EAAYX,GAEhD,OAAOS,uDAW2BxB,GAClC,OAAiC,IAA7BA,EAAQzP,QAAQ,QACX,OAEyB,IAA9ByP,EAAQzP,QAAQ,SACX,QAEqC,IAA1CyP,EAAQzP,QAAQ,qBACX,OAEF,gDAQeyP,GACtB,IAAM6B,EAAYhC,EAAgBiC,kBAClC,OAAO1G,EAAK2G,eAAelC,EAAgBO,WAAWO,IAAKX,GAAW6B,4CAItE,OAA0D,IAAtDhC,EAAgBO,WAAW4B,OAAOzR,QAAQ,OACrC,QAEkD,IAAvDsP,EAAgBO,WAAW4B,OAAOzR,QAAQ,QACrC,QAEF,qCA7OP,OAAOsP,EAAgBoC,8CA0BvB,OAAOpC,EAAgBqC,0BAQH9B,GACpBP,EAAgBqC,YAAc9B,uCAU9B,OAAOP,EAAgBsC,4BASD3d,GACtBqb,EAAgBsC,cAAgB3d,0CA6BhC,OAAOqb,EAAgBuC,+BASE5d,GACzBqb,EAAgBuC,iBAAmB5d,iLAwJvCqb,EAAgBsC,iBAQhBtC,EAAgBuC,iBAAmB,GAOnCvC,EAAgBoC,WAAa,IAAI7C,EAOjCS,EAAgBqC,mBCrRKG,uOA2BOtH,GACxB,IAAM6B,EAAyBhD,EAAO+C,gBAAgB5B,GAI9CoE,EAAUkD,EAAVlD,MAEFmD,GACJtC,QAAS,eACTuC,IAAK3F,GAGD4F,EAAetQ,KAAKuQ,MAAM5C,EAAgB6C,WAAW,UAAWJ,IAGlEK,EAAQ,GAEZ,GAA4B,OAAxBH,EAAaI,OAAiB,CAChCD,EAAQH,EAAajM,OAAOwG,KAC5B,IAAM8F,EAA2BzH,EAAKsD,aAAaiE,GAE7CG,EAAsBlJ,EAAOmJ,cAAchI,EAAQ8H,EAA0B,SACnF1D,EAAM6D,SAASL,EAAOG,GAGxB,OAAOH,6CAWiBA,EAAOM,GAI/B,IAAMC,EAAab,EAAMlD,MAEzB,GAAIkD,EAAMlD,MAAM/a,IAAIue,GAClB,OAAON,EAAMlD,MAAM/a,IAAIue,GAEzB,IAAML,GACJtC,QAAS,eACT2C,MAAAA,GAGEM,IACFX,EAAKa,UAAY,IAGnB,IAEI7F,EAFEkF,EAAetQ,KAAKuQ,MAAM5C,EAAgB6C,WAAW,UAAWJ,IAGtE,GAA4B,OAAxBE,EAAaI,OAAiB,CAChC,IAAI7H,EAASyH,EAAajM,OAAOwG,KAM/BO,GAFmC,KAHrCvC,EAASA,EAAOxU,MAAM,MAAMsH,KAAK,IAAItH,MAAM,MAAMsH,KAAK,MAG3C0C,QAAQ,eAAyD,IAAlCwK,EAAOxK,QAAQ,cACvDwK,EAASnB,EAAOmJ,cAAchI,EAAQ4H,EAAO,SAGpC5H,EAENmI,EAAW9e,IAAIue,IAClBO,EAAWF,SAASL,EAAO5H,QAG7BuC,EAAM,KAAA7K,OAAQkQ,EAAR,MAER,OAAOrF,6CAWiBvT,EAASiT,GAYjC,IAXA,IAOIjC,EACA+B,EACAsG,EATA9F,EAAS,GACP+F,EAAY,GAAA5Q,OAAMuK,EAAW7D,UAAjB,QACZ+D,EAAU,GAAAzK,OAAMuK,EAAW7D,UAAjB,SAAA1G,OAAkCuK,EAAW5D,WACvDkK,EAAU,GAAA7Q,OAAMuK,EAAW7D,UAAjB,wBAAA1G,OAAiDuK,EAAW3D,YAA5D,SAAA5G,OAA+EuK,EAAW3D,aAA1F5G,OAAwGuK,EAAW5D,WAC7HmK,EAAW,GAAA9Q,OAAMuK,EAAW7D,UAAjB,eAAA1G,OAAwCuK,EAAW5D,WAChEqC,EAAQ1R,EAAQwG,QAAQ8S,GACxBnI,EAAM,GAKQ,IAAXO,GAAc,CAanB,GAZA6B,GAAUvT,EAAQkF,UAAUiM,EAAKO,IAGpB,KAFbP,EAAMnR,EAAQwG,QAAQ2M,EAAYzB,IAGhCP,EAAMnR,EAAQ1D,OAAS,EAEvB6U,GAAOgC,EAAW7W,QAMK,KADzByW,GAFA/B,EAAShR,EAAQkF,UAAUwM,EAAOP,IAET3K,QAAQ+S,IACL,CAC1BxG,GAAmBwG,EAAWjd,OAC9B+c,EAAkBrI,EAAOxK,QAAQgT,GACjC,IAAIZ,EAAQ5H,EAAO9L,UAAU6N,EAAiBsG,GAC1CpG,IAAe9D,EAAUoB,oBAC3BqI,EAAQ/I,EAAO4J,cAAcb,IAE/BrF,GAAM,KAAA7K,OAASkQ,EAAT,MAGNN,EAAMlD,MAAM6D,SAASL,EAAO5H,QAE5BuC,GAAUvC,EAEZU,EAAQ1R,EAAQwG,QAAQ8S,EAAcnI,GAIxC,OADAoC,GAAUvT,EAAQkF,UAAUiM,EAAKnR,EAAQ1D,qDAcfod,EAAUC,EAAeC,QAQ1B,IAAdA,GAA0C,MAAbA,IACtCA,GALAxC,KAAM,KACNyC,MAAO,OAST,IAFA,IAqDInI,EArDAoI,EAAYJ,EAETI,EAAUC,iBAA0D,IAAvCD,EAAUC,gBAAgBC,UAC5DF,EAAYA,EAAUC,gBAYxB,SAASE,EAAqBC,EAAaC,EAAiBC,GAG1D,IAFA,IAAIC,EAAWH,EAAYI,UAAU9T,QAAQ4T,EAAKD,IAE7B,IAAdE,GAAiB,CAGtB,KAFAH,EAAcA,EAAYhP,aAGxB,OAAO,KAGTmP,EAAWH,EAAYI,UAAYJ,EAAYI,UAAU9T,QAAQoT,EAAUC,QAAU,EAGvF,OACEU,KAAML,EACNG,SAAAA,GAYJ,SAASG,EAAWD,EAAMF,EAAUI,EAASC,GAC3C,GAAIH,IAASE,EACX,OAAQJ,GAAYK,EAEtB,KAAOH,GAAQA,IAASE,GACtBF,EAAOA,EAAKrP,YAGd,OAAQqP,IAASE,EAInB,IAuBI7B,EAvBAzH,GACFoJ,KAAMT,EACNO,SAAU,GAGNM,EAAYf,EAAUxC,KAAK9a,OACjC,EAAG,CAGD,GAAa,OAFboV,EAAQuI,EAAqB9I,EAAIoJ,KAAMpJ,EAAIkJ,SAAUT,EAAUxC,QAE1CoD,EAAWd,EAAUC,EAAejI,EAAM6I,KAAM7I,EAAM2I,UACzE,OAAO,KAKT,GAAW,OAFXlJ,EAAM8I,EAAqBvI,EAAM6I,KAAM7I,EAAM2I,SAAWM,EAAWf,EAAUC,QAG3E,OAAO,KAGT1I,EAAIkJ,UAAYM,QACTH,EAAWrJ,EAAIoJ,KAAMpJ,EAAIkJ,SAAUX,EAAUC,IAKtD,GAAIjI,EAAM6I,OAASpJ,EAAIoJ,KACrB3B,EAAQlH,EAAM6I,KAAKD,UAAUpV,UAAUwM,EAAM2I,SAAWM,EAAWxJ,EAAIkJ,SAAWM,OAC7E,CACL,IAAM3d,EAAQ0U,EAAM2I,SAAWM,EAC/B/B,EAAQlH,EAAM6I,KAAKD,UAAUpV,UAAUlI,EAAO0U,EAAM6I,KAAKD,UAAUhe,QACnE,IAAI4d,EAAcxI,EAAM6I,KAExB,IACEL,EAAcA,EAAYhP,eACNiG,EAAIoJ,KACtB3B,GAASzH,EAAIoJ,KAAKD,UAAUpV,UAAU,EAAGiM,EAAIkJ,SAAWM,GAExD/B,GAASsB,EAAYI,UAAYJ,EAAYI,UAAY,SAEpDJ,IAAgB/I,EAAIoJ,MAG/B,OACE3B,MAAAA,EACAkB,UAAWpI,EAAM6I,KACjBK,cAAelJ,EAAM2I,SACrBI,QAAStJ,EAAIoJ,KACbG,YAAavJ,EAAIkJ,wCAjRnB,OAAO/B,EAAMuC,qBASEpgB,GACf6d,EAAMuC,OAASpgB,WAiRnB6d,EAAMuC,OAAS,IAAI3F,uLC1SE4F,aACnB,SAAAA,IACE,kGADYC,CAAAjd,KAAAgd,GACN,IAAI/P,MAAM,+IASPhQ,GAAK,IACRigB,EAAald,KAAbkd,SAcN,OAXIA,GAAYA,EAAS1e,OAAS,IAChC0e,EAAWA,EAASC,MAAM,EAAG,IAI1Bnd,KAAKod,QAAQ7f,eAAe2f,KAC/B5W,QAAQ+W,KAAR,oBAAAzS,OAAiCsS,EAAjC,2BACAA,EAAW,MAIRld,KAAKod,QAAQF,GAAU3f,eAAeN,GAKpC+C,KAAKod,QAAQF,GAAUjgB,IAJ5BqJ,QAAQ+W,KAAR,eAAAzS,OAA4B3N,EAA5B,kBAAA2N,OAAgDsS,EAAhD,uBACOjgB,kLAab+f,EAAcI,QAAUE,EAKxBN,EAAcE,SAAW,SCzCJ3J,8NAOFgK,EAAa5F,GAC5B,GAAInV,SAASgb,YAAa,CACxB,IAAMC,EAAcjb,SAASgb,YAAY,cAEzC,OADAC,EAAYC,UAAU/F,GAAW,GAAM,IAC/B4F,EAAYI,cAAcF,GAGpC,IAAMA,EAAcjb,SAASob,oBAC7B,OAAOL,EAAYM,UAAZ,KAAAjT,OAA2B+M,GAAa8F,oCAUjCF,EAAa5F,EAAWmG,GAClCP,EAAYQ,iBACdR,EAAYQ,iBAAiBpG,EAAWmG,GAAkB,GACjDP,EAAYS,aAErBT,EAAYS,YAAZ,KAAApT,OAA6B+M,GAAamG,uCAW3BP,EAAa5F,EAAWmG,GACrCP,EAAYU,oBACdV,EAAYU,oBAAoBtG,EAAWmG,GAAkB,GACpDP,EAAYW,aACrBX,EAAYW,YAAZ,KAAAtT,OAA6B+M,GAAamG,4CAetBP,EAAaY,EAAoBC,EAAkBC,GACrEF,GACF5K,EAAK+K,SAASf,EAAa,WAAY,SAAC3F,GACtC,IAAM2G,EAAa3G,GAAU5V,OAAO4V,MAC9B4G,EAAUD,EAAUE,WAAaF,EAAUE,WAAaF,EAAU/S,OACxE2S,EAAmBK,EAASD,KAI5BH,GACF7K,EAAK+K,SAASf,EAAa,YAAa,SAAC3F,GACvC,IAAM2G,EAAa3G,GAAU5V,OAAO4V,MAC9B4G,EAAUD,EAAUE,WAAaF,EAAUE,WAAaF,EAAU/S,OACxE4S,EAAiBI,EAASD,KAI1BF,GAKF9K,EAAK+K,SAAS9b,SAAU,UAAW,SAACoV,GAClC,IAAM2G,EAAa3G,GAAU5V,OAAO4V,MAC9B4G,EAAUD,EAAUE,WAAaF,EAAUE,WAAaF,EAAU/S,OACxE6S,EAAeG,EAASD,sCAWdC,EAAStI,GAClB3C,EAAKmL,cAAcF,EAAStI,KAC/BsI,EAAQtI,WAAR,IAAAtL,OAAyBsL,0CAWRsI,EAAStI,GAC5B,GAAe,MAAXsI,KAAqB,cAAeA,GACtC,OAAO,EAKT,IAFA,IAAMG,EAAiBH,EAAQtI,UAAUxX,MAAM,KAEtChD,EAAIijB,EAAengB,OAAS,EAAG9C,GAAK,EAAGA,GAAK,EACnD,GAAIijB,EAAejjB,KAAOwa,EACxB,OAAO,EAIX,OAAO,sCASUsI,EAAStI,GAI1B,IAHA,IAAI0I,EAAe,GACbC,EAAUL,EAAQtI,UAAUxX,MAAM,KAE/BhD,EAAI,EAAGA,EAAImjB,EAAQrgB,OAAQ9C,GAAK,EACnCmjB,EAAQnjB,KAAOwa,IACjB0I,GAAY,GAAAhU,OAAOiU,EAAQnjB,GAAf,MAGhB8iB,EAAQtI,UAAY0I,EAAa1N,iEAUMgE,GAGvC,IAAM4J,EAAM,SAENC,EAAS7J,EAAKxM,QAAQ,kBACtBsW,EAAS9J,EAAKxM,QAAQoW,EAAKC,GAC3BjN,EAAQoD,EAAKtQ,OAAOoa,EAASF,EAAItgB,QACjCygB,EAAaD,EAASF,EAAItgB,OAAS,EACnC0gB,EAAWhK,EAAKxM,QAAQoJ,EAAOmN,GAE/BtiB,EAAQuY,EAAK9N,UAAU6X,EAAYC,GAErCC,EAAWxiB,EAAM+B,MAAM,KAAKsH,KAAK,QAMrC,OAHAmZ,GADAA,GADAA,EAAWA,EAASzgB,MAAM,KAAKsH,KAAK,SAChBtH,MAAM,KAAKsH,KAAK,MAChBtH,MAAM,KAAKsH,KAAK,UAEpCkP,EAAOA,EAAKxW,MAAM/B,GAAOqJ,KAAKmZ,yCAeXC,EAASC,EAAYC,GASxC,IAAId,OARehV,IAAf6V,IACFA,WAGc7V,IAAZ8V,IACFA,EAAU9c,UAWZ,IACE,IAAI+c,EAAI,IAAA3U,OAAOwU,GAEfhjB,OAAOkS,KAAK+Q,GAAY9Q,QAAQ,SAACiR,GAC/BD,GAAI,IAAA3U,OAAQ4U,EAAR,MAAA5U,OAA0B2I,EAAKsD,aAAawI,EAAWG,IAAvD,OAEND,GAAQ,IACRf,EAAUc,EAAQxR,cAAcyR,GAChC,MAAO7Y,GACP8X,EAAUc,EAAQxR,cAAcsR,GAChChjB,OAAOkS,KAAK+Q,GAAY9Q,QAAQ,SAACiR,GAC/BhB,EAAQhQ,aAAagR,EAAeH,EAAWG,MAGnD,OAAOhB,uCASWiB,EAAYH,QACd9V,IAAZ8V,IACFA,EAAU9c,UAQZid,GADAA,GAFAA,GADAA,EAAaA,EAAW/gB,MAAM,YAAYsH,KAAK,oCAAoCtH,MAAM,YAAYsH,KAAK,qCAClFtH,MAAM,aAAasH,KAAK,WAAWtH,MAAM,aAAasH,KAAK,YAE3DtH,MAAM,WAAWsH,KAAK,iCAAiCtH,MAAM,WAAWsH,KAAK,kCAC7EtH,MAAM,YAAYsH,KAAK,SAAStH,MAAM,YAAYsH,KAAK,SAE/E,IAAMsN,EAAYC,EAAKzF,cAAc,SAAWwR,GAqDhD,OApDAhM,EAAUjN,UAAYoZ,EAEtB,SAASC,EAAmBtiB,GAC1B,GAAIA,EAAOuiB,cAAuD,eAAvCviB,EAAOuiB,aAAa,eAAiC,CAG9E,IAFA,IAAMC,KAEGlkB,EAAI,EAAGA,EAAI0B,EAAOiiB,WAAW7gB,OAAQ9C,GAAK,EACV,OAAnC0B,EAAOiiB,WAAW3jB,GAAG8gB,YACvBoD,EAAiBxiB,EAAOiiB,WAAW3jB,GAAGmkB,UAAYziB,EAAOiiB,WAAW3jB,GAAG8gB,WAI3E,IAAMsD,EAAQvM,EAAKzF,cAAc,QAAS8R,EAAkBN,GAGxDQ,EAAMC,OACRD,EAAM7jB,KAAO6jB,EAAMC,KACnBD,EAAMnjB,MAAQmjB,EAAME,OAGtBF,EAAMG,gBAAgB,eACtB7iB,EAAOsQ,WAAWwS,aAAaJ,EAAO1iB,QACjC,GAAIA,EAAOuiB,cAAuD,gBAAvCviB,EAAOuiB,aAAa,eAAkC,CAGtF,IAFA,IAAMC,KAEGlkB,EAAI,EAAGA,EAAI0B,EAAOiiB,WAAW7gB,OAAQ9C,GAAK,EACV,OAAnC0B,EAAOiiB,WAAW3jB,GAAG8gB,YACvBoD,EAAiBxiB,EAAOiiB,WAAW3jB,GAAGmkB,UAAYziB,EAAOiiB,WAAW3jB,GAAG8gB,WAI3E,IAAM2D,EAAS5M,EAAKzF,cAAc,SAAU8R,EAAkBN,GAC9Da,EAAOF,gBAAgB,eAEvB,IAAK,IAAIvkB,EAAI,EAAGA,EAAI0B,EAAOkT,WAAW9R,OAAQ9C,GAAK,EACjDgkB,EAAmBtiB,EAAOkT,WAAW5U,IAEe,UAAhD0B,EAAOkT,WAAW5U,GAAGmkB,SAASO,gBAChCD,EAAO7S,YAAYlQ,EAAOkT,WAAW5U,IACrCA,GAAK,GAIT0B,EAAOsQ,WAAWwS,aAAaC,EAAQ/iB,QAEvC,IAAK,IAAI1B,EAAI,EAAGA,EAAI0B,EAAOkT,WAAW9R,OAAQ9C,GAAK,EACjDgkB,EAAmBtiB,EAAOkT,WAAW5U,IAK3CgkB,CAAmBpM,GACZA,EAAU/F,oDASKiR,GAEtB,QAAuB,IAAZA,GAAuC,OAAZA,EACpC,OAAO,KAGT,GAAyB,IAArBA,EAAQtC,SAAgB,CAG1B,IAFA,IAAIzG,EAAM,IAAA7K,OAAO4T,EAAQY,SAEhB1jB,EAAI,EAAGA,EAAI8iB,EAAQa,WAAW7gB,OAAQ9C,GAAK,EAC9C8iB,EAAQa,WAAW3jB,GAAG2kB,YACxB5K,GAAM,IAAA7K,OAAQ4T,EAAQa,WAAW3jB,GAAGO,KAA9B,MAAA2O,OAAuC2I,EAAKsD,aAAa2H,EAAQa,WAAW3jB,GAAGiB,OAA/E,MAIV,GAAI6hB,EAAQlO,WAAW9R,OAAS,EAAG,CACjCiX,GAAU,IAEV,IAAK,IAAI/Z,EAAI,EAAGA,EAAI8iB,EAAQlO,WAAW9R,OAAQ9C,GAAK,EAClD+Z,GAAUlC,EAAK+M,aAAa9B,EAAQlO,WAAW5U,IAGjD+Z,GAAM,KAAA7K,OAAS4T,EAAQY,QAAjB,SACwB,QAArBZ,EAAQqB,UAA2C,WAArBrB,EAAQqB,SAC/CpK,GAAM,MAAA7K,OAAU4T,EAAQY,QAAlB,KAEN3J,GAAU,KAGZ,OAAOA,EAGT,OAAyB,IAArB+I,EAAQtC,SACH3I,EAAKsD,aAAa2H,EAAQhC,WAG5B,0CASa+D,EAAOC,GAC3B,IAAIC,EAAY,GAIhB,OAHKF,EAAM7X,QAAQ,OAAS6X,EAAM/hB,QAAmC,IAAvBgiB,EAAM9X,QAAQ,OAC1D+X,EAAY,MAENF,EAAQE,EAAYD,GAAO3P,QAAQ,eAAgB,2CASzC0B,GAClB,OAAOA,EAAM7T,MAAM,KAAKsH,KAAK,SAAStH,MAAM,KAAKsH,KAAK,QACnDtH,MAAM,KACNsH,KAAK,QACLtH,MAAM,KACNsH,KAAK,qDASgBuM,GAExB,IAAMmO,EAAWle,SAASsL,cAAc,YAExC,OADA4S,EAASra,UAAYkM,EACdmO,EAAS/jB,kDAUhB,GAAiC,YADbqF,OAAOuO,SAAStJ,WAAW5H,OAAO,EAAG2C,OAAOuO,SAAStJ,WAAWqN,YAAY,KAAO,GACvFjV,OAAO,EAAG,GACxB,MAAM2d,EAAczgB,IAAI,wBAG1B,GAA8B,oBAAnBokB,eACT,OAAO,IAAIA,eAGb,IACE,OAAO,IAAIC,cAAc,kBACzB,MAAOla,GACP,IACE,OAAO,IAAIka,cAAc,qBACzB,MAAOC,GACP,OAAO,8CAYS9J,GACpB,IAAIrI,EAAS,GAab,OAXAtS,OAAOkS,KAAKyI,GAAYxI,QAAQ,SAAC7S,GACV,MAAjBqb,EAAWrb,KACbgT,GAAM,GAAA9D,OAAO2I,EAAKuN,UAAUplB,GAAtB,KAAAkP,OAA4B2I,EAAKuN,UAAU/J,EAAWrb,IAAtD,QAKkC,MAAxCgT,EAAOtH,UAAUsH,EAAOlQ,OAAS,KACnCkQ,EAASA,EAAOtH,UAAU,EAAGsH,EAAOlQ,OAAS,IAGxCkQ,6CASiBqS,GAExB,IAAMzS,KACNlS,OAAOkS,KAAKyS,GAAMxS,QAAQ,SAACtR,GACrBb,OAAOkB,UAAUC,eAAe1B,KAAKklB,EAAM9jB,IAC7CqR,EAAK5E,KAAKzM,KAKd,IADA,IAAME,EAAImR,EAAK9P,OACN9C,EAAI,EAAGA,EAAIyB,EAAGzB,GAAK,EAC1B,IAAK,IAAIiJ,EAAIjJ,EAAI,EAAGiJ,EAAIxH,EAAGwH,GAAK,EAAG,CACjC,IAAMqc,EAAK1S,EAAK5S,GACVwL,EAAKoH,EAAK3J,GACZ4O,EAAK0N,eAAeD,EAAI9Z,GAAM,IAEhCoH,EAAK5S,GAAKwL,EACVoH,EAAK3J,GAAKqc,GAOhB,IADA,IAAIvL,EAAS,GACJ/Z,EAAI,EAAGA,EAAIyB,EAAGzB,GAAK,EAAG,CAC7B,IAAMuB,EAAMqR,EAAK5S,GACjB+Z,GAAUxY,EACVwY,GAAU,IACV,IAAI9Y,EAAQokB,EAAK9jB,GAMjBwY,GAFA9Y,GADAA,GADAA,GADAA,EAAQA,EAAMkU,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,OAG5B4E,GAAU,KAEZ,OAAOA,yCAUahW,EAAG0D,GACvB,IAAIzH,EACEwlB,EAAKzhB,EAAEjB,OACP2iB,EAAKhe,EAAE3E,OACPrB,EAAK+jB,EAAKC,EAAMA,EAAKD,EAC3B,IAAKxlB,EAAI,EAAGA,EAAIyB,EAAGzB,GAAK,EAAG,CACzB,IAAMK,EAAIwX,EAAKC,gBAAgB/T,EAAG/D,GAAK6X,EAAKC,gBAAgBrQ,EAAGzH,GAC/D,GAAU,IAANK,EACF,OAAOA,EAGX,OAAO0D,EAAEjB,OAAS2E,EAAE3E,+CAWCmC,EAAQiN,GAC7BA,EAAMA,GAAO,EACb,IACIwT,EACAC,EAFE9Y,EAAO5H,EAAOvB,WAAWwO,GAO/B,GAAIrF,GAAQ,OAAUA,GAAQ,MAAQ,CAGpC,GAFA6Y,EAAK7Y,EACL8Y,EAAM1gB,EAAOvB,WAAWwO,EAAM,GAC1BhF,OAAO9H,MAAMugB,GACf,MAAMrE,EAAczgB,IAAI,4BAE1B,OAAwB,MAAf6kB,EAAK,QAAoBC,EAAM,OAAU,MAGpD,QAAI9Y,GAAQ,OAAUA,GAAQ,QAKvBA,wCASYW,GACnB,IAAIxN,EAEJ,IADAA,EAAIwN,EAAIR,QAAQ,MACR,EAAG,CACT,IACM4Y,EADQpY,EAAI9B,UAAU1L,EAAI,GACfgD,MAAM,KACjBT,KACN,IAAKvC,EAAI,EAAGA,EAAI4lB,EAAG9iB,OAAQ9C,GAAK,EAAG,CACjC,IACM6lB,EADID,EAAG5lB,GACAgD,MAAM,KACf6iB,EAAG/iB,OAAS,IACdP,EAAEsjB,EAAG,IAAMC,mBAAmBD,EAAG,GAAG1Q,QAAQ,MAAO,OAGvD,OAAO5S,EAET,2CAYewjB,GAIf,OADSrX,mBAAmBqX,+CAeHC,EAASC,EAAcC,GAChD,IAAMC,EAAYtO,EAAK+M,aAAaoB,GACpC,GAAIG,IACEA,EAAU3L,YAAcY,EAAcva,IAAI,mBAAqBslB,EAAUlC,aAAa7I,EAAcva,IAAI,0BAA0B,CACpI,IAAKolB,EACH,OAAOD,EAGT,IAAMI,EAAaD,EAAUlC,aAAa7I,EAAcva,IAAI,yBAExD0Z,EAASlE,EAAO4J,cAAcmG,GAUlC,OARKhL,EAAcva,IAAI,oBACrB0Z,EAASlE,EAAOgQ,iBAAiB9L,EAAQ,qBAG7B,MAAVA,IACFA,EAAS4L,EAAUlC,aAAa,QAG9BiC,EACiB7P,EAAOiQ,cAAc/L,GAInCA,EAGX,OAAOyL,wCASYjF,GAMnB,GAAsB,IAAlBA,EAAKP,SACP,OAAOO,EAAKD,UAAUhe,OAGxB,GAAsB,IAAlBie,EAAKP,SAAgB,CACvB,IAAI1d,GATJyjB,IAAK,EACLC,GAAI,GAQ2BzF,EAAKoD,SAASsC,oBAE9B3Y,IAAXhL,IACFA,EAAS,GAGX,IAAK,IAAI9C,EAAI,EAAGA,EAAI+gB,EAAKnM,WAAW9R,OAAQ9C,GAAK,EAC/C8C,GAAU+U,EAAK6O,cAAc3F,EAAKnM,WAAW5U,IAE/C,OAAO8C,EAET,OAAO,0CAccgN,EAAQ6W,EAAUC,GACvC,IAAIC,EAUJ,GARIF,GACFE,EAAe/W,EAAOgX,eACTC,SAEbF,EAAevgB,OACfwJ,EAAOiX,SAGLjgB,SAASkgB,YAAcJ,EAAmB,CAC5C,IAAMK,EAAQJ,EAAa/f,SAASkgB,UAAUE,cAE9C,GAAID,EAAME,cAAe,CACvB,GAAIF,EAAMG,SAAStkB,OAAS,EAC1B,OAA0B,IAAtBmkB,EAAMzN,KAAK1W,OACN+U,EAAKwP,gBAAgBvX,EAAQ6W,GAAU,GAGzC,KAGTE,EAAa/f,SAASwgB,YAAY,eAAe,EAAO,KACxD,IASIvG,EACAZ,EAVAoH,EAAiBN,EAAME,gBA2B3B,MAzB8C,QAA1CI,EAAepD,SAASsC,gBAG1BQ,EAAMO,UAAU,0DAChBD,EAAiBV,EAAa/f,SAAS4D,eAAe,wCAMpD6c,EAAe7V,aAAuD,IAAxC6V,EAAe7V,YAAY8O,UAC3DO,EAAOwG,EAAe7V,YACtByO,EAAgB,GACPoH,EAAehH,iBACuB,IAA5CgH,EAAehH,gBAAgBC,SAElCL,GADAY,EAAOwG,EAAehH,iBACDO,UAAUhe,QAE/Bie,EAAO8F,EAAa/f,SAASoN,eAAe,IAC5CqT,EAAevV,WAAWL,aAAaoP,EAAMwG,GAC7CpH,EAAgB,GAGlBoH,EAAevV,WAAWC,YAAYsV,IAGpCxG,KAAAA,EACAZ,cAAAA,GAIJ,OAAI8G,EAAMnkB,OAAS,EACV,MAIPie,KAAMkG,EAAM7Y,KAAK,IAIrB,GAAIyY,EAAaY,aAAc,CAC7B,IAAIR,EACED,EAAYH,EAAaY,eAE/B,IACER,EAAQD,EAAUU,WAAW,GAC7B,MAAO1c,GACPic,EAAQJ,EAAa/f,SAASogB,cAGhC,IAAMnG,EAAOkG,EAAMU,eAEnB,GAAsB,IAAlB5G,EAAKP,SACP,OACEO,KAAAA,EACAZ,cAAe8G,EAAMW,aAIzB,GAAI7G,IAASkG,EAAMY,aACjB,OAAO,KAGT,GAAsB,IAAlB9G,EAAKP,SAAgB,CACvB,IAAMK,EAAWoG,EAAMW,YAEvB,GAAI7G,EAAKnM,WAAWiM,GAClB,OACEE,KAAMA,EAAKnM,WAAWiM,KAM9B,OAAO,uDAawBmE,GAC/B,IAAM9E,EAAWpZ,SAASoN,eAAe8Q,EAAS/jB,OAC5C6mB,EAAiBhJ,EAAMiJ,qBAAqB7H,EAAU8E,EAASgD,gBACrE,OAAuB,OAAnBF,EACK,MAIP/G,KAAMb,EACNC,cAAe6E,EAASgD,eACxB5G,cAAe0G,EAAe1G,cAC9BF,YAAa4G,EAAe5G,iEAcGrU,EAAMtM,EAAM0nB,GAC7C,IAAMC,KACNrb,EAAOA,EAAK6X,cACZnkB,EAAOA,EAAKmkB,cAGZ,IAFA,IAAIxM,EAAQrL,EAAKG,QAAL,IAAAkC,OAAiB3O,EAAjB,OAEM,IAAX2X,GAAc,CACnB,IAAIiQ,OAAS,EAGXA,EADEF,EACU,IAEH,KAAA/Y,OAAQ3O,EAAR,KAGX,IAAIoX,EAAM9K,EAAKG,QAAQmb,EAAWjQ,IAErB,IAATP,GACFA,GAAOwQ,EAAUrlB,OACjBolB,EAASla,MACPkK,MAAAA,EACAP,IAAAA,KAGFA,EAAMO,EAAQ,EAGhBA,EAAQrL,EAAKG,QAAL,IAAAkC,OAAiB3O,EAAjB,KAA0BoX,GAGpC,OAAOuQ,mCASO5Q,GACd,IAAM8Q,EAAO,IAAI1kB,WAAW,GACtB2kB,EAAQ,IAAI3kB,WAAW,GACvB4kB,EAAS,IAAI5kB,WAAW,GACxB6kB,EAAQ,IAAI7kB,WAAW,GACvB8kB,EAAQ,IAAI9kB,WAAW,GACvB+kB,EAAgB,IAAI/kB,WAAW,GAC/BglB,EAAiB,IAAIhlB,WAAW,GAChCmJ,EAAOyK,EAAU5T,WAAW,GAElC,OAAImJ,IAASub,GAAQvb,IAAS4b,EACrB,GAEL5b,IAASwb,GAASxb,IAAS6b,EACtB,GAEL7b,EAAOyb,GACD,EAENzb,EAAOyb,EAAS,GACXzb,EAAOyb,EAAS,GAAK,GAE1Bzb,EAAO2b,EAAQ,GACV3b,EAAO2b,EAEZ3b,EAAO0b,EAAQ,GACV1b,EAAO0b,EAAQ,GAGjB,4CAUaI,EAAW7lB,GAC/B,IAAI8lB,EAEJ,GAAID,EAAU7lB,OAAS,EAAI,EACzB,MAAM,IAAIyO,MAAM,kDAGlB,IAEItR,EACA4oB,EAcA7oB,EAjBEoE,KAkBN,IAJEnE,EAVG6C,KAED+lB,EAD6C,MAA3CF,EAAUzf,OAAOyf,EAAU7lB,OAAS,GACvB,EACqC,MAA3C6lB,EAAUzf,OAAOyf,EAAU7lB,OAAS,GAC9B,EAEA,GAEE,EAAI6lB,EAAU7lB,OAAS,EAAI6lB,EAAU7lB,QAMrD9C,EAAI,EAAGA,EAAIC,EAAGD,GAAK,EAKtB4oB,EAAO/Q,EAAKiR,SAASH,EAAUzf,OAAOlJ,KAAO,GAAO6X,EAAKiR,SAASH,EAAUzf,OAAOlJ,EAAI,KAAO,GAAO6X,EAAKiR,SAASH,EAAUzf,OAAOlJ,EAAI,KAAO,EAAK6X,EAAKiR,SAASH,EAAUzf,OAAOlJ,EAAI,IAEvLoE,EAAI4J,KAAM4a,GAAO,GAAM,KACvBxkB,EAAI4J,KAAM4a,GAAO,EAAK,KACtBxkB,EAAI4J,KAAW,IAAN4a,GAmBX,OAfIC,IACmB,IAAjBA,GAIFD,EAAO/Q,EAAKiR,SAASH,EAAUzf,OAAOlJ,KAAO,EAAM6X,EAAKiR,SAASH,EAAUzf,OAAOlJ,EAAI,KAAO,EAC7FoE,EAAI4J,KAAW,IAAN4a,IACiB,IAAjBC,IAETD,EAAO/Q,EAAKiR,SAASH,EAAUzf,OAAOlJ,KAAO,GAAO6X,EAAKiR,SAASH,EAAUzf,OAAOlJ,EAAI,KAAO,EAAM6X,EAAKiR,SAASH,EAAUzf,OAAOlJ,EAAI,KAAO,EAC9IoE,EAAI4J,KAAM4a,GAAO,EAAK,KACtBxkB,EAAI4J,KAAW,IAAN4a,KAINxkB,oCASQ2kB,GACf,GAAIA,EAAMjmB,OAAS,EACjB,OAAO,EAET,IAAMkmB,EAAQD,EAAM9kB,OAAO,EAAG,GAG9B,OAAQ+kB,EAAM,IAAM,GAAKA,EAAM,IAAM,GAAKA,EAAM,IAAM,EAAIA,EAAM,IAAM,mCAUxDD,GAEd,OAAOA,EAAME,SAAW,oCAYTF,EAAOnlB,EAAKC,GAC3B,OAAOklB,EAAM9kB,OAAOL,EAAKC,0CAULmhB,EAAUxL,GAC9B,GAAIwL,GAAYxL,EAGd,GAFAwL,EAAS+B,QAEsB,MAA3B/B,EAASgD,eAAwB,CAAA,IAC3BkB,EAAiBlE,EAAjBkE,aACFlB,EAAiBhD,EAAS/jB,MAAMyK,UAAU,EAAGsZ,EAASgD,gBACtDmB,EAAkBnE,EAAS/jB,MAAMyK,UAAUwd,EAAclE,EAAS/jB,MAAM6B,QAC9EkiB,EAAS/jB,MAAQ+mB,EAAiBxO,EAAO2P,EACzCnE,EAASkE,aAAeA,EAAe1P,EAAK1W,WACvC,CACagE,SAASkgB,UAAUE,cAC3B1N,KAAOA,wDAeawL,EAAUxL,EAAMtB,EAAOP,GACzDqN,EAAS+B,QACT,IAAMqC,EAAgBpE,EAAS/jB,MAAMyK,UAAU,EAAGwM,GAClD8M,EAAS/jB,MAAQmoB,EAAgB5P,EAAOwL,EAAS/jB,MAAMyK,UAAUiM,EAAKqN,EAAS/jB,MAAM6B,QACrFkiB,EAASkE,aAAehR,EAAQsB,EAAK1W,2CAUpB4Z,EAAM2M,EAAWpoB,GAClC,IAAIqoB,EAMJ,OAJEA,EADE5M,EAAK1P,QAAQ,KAAO,EAChB,IAEA,IAER,GAAAkC,OAAUwN,EAAO4M,EAAMD,EAAvB,KAAAna,OAAoCjO,sLCp/BnBsoB,4OAKYC,GAC7B,IAAMC,KACE9F,EAAe6F,EAAf7F,WAERjjB,OAAOkS,KAAK+Q,GAAY9Q,QAAQ,SAACtR,GAC/B,IAAMmoB,EAAY/F,EAAWpiB,GACW,IAApCmoB,EAAUnpB,KAAKyM,QAAQ,UAIzByc,EAAmBzb,KAAK0b,EAAUnpB,QAItCkpB,EAAmB5W,QAAQ,SAAC6W,GAC1BF,EAAIjF,gBAAgBmF,mCAUXC,EAAWC,GACtB,IAAMC,EAA4BzO,EAAcva,IAAI,yBAC/C8oB,EAAUG,aAAaD,IAC1BD,EAAQrF,gBAAgBsF,IAGEzO,EAAcva,IAAI,wBAG5CgpB,EACA,MACA,SACA,QACA,QACA,MACA,QAGYhX,QAAQ,SAACkX,GACrB,IAAMC,EAAkBL,EAAU1F,aAAa8F,GAC3CC,GACFJ,EAAQ9W,aAAaiX,EAAUC,wCAYnBR,EAAKS,EAAKhL,GAC1B,IAAIiL,EACAC,EACApB,EACAqB,EACJ,GAAInL,EAEF,GAAyC,QAArC7D,EAAcva,IAAI,eAGpB,GAAsC,WAAlCua,EAAcva,IAAI,YACpBqpB,EAAKX,EAAMc,wBAAwBJ,OAC9B,CACLE,EAAeX,EAAIc,IAAI3mB,OAAO6lB,EAAIc,IAAItd,QAAQ,WAAa,EAAGwc,EAAIc,IAAIxnB,QACtEsnB,EAAY,GACZrB,EAAQlR,EAAK0S,eAAeJ,EAAcA,EAAarnB,QACvD,IAAK,IAAI9C,EAAI,EAAGA,EAAI+oB,EAAMjmB,OAAQ9C,GAAK,EACrCoqB,GAAaze,OAAO6e,aAAazB,EAAM/oB,IAEzCkqB,EAAKX,EAAMc,wBAAwBD,QAIrCD,EAAeX,EAAIc,IAAI3mB,OAAO6lB,EAAIc,IAAItd,QAAQ,WAAa,EAAGwc,EAAIc,IAAIxnB,QACtEimB,EAAQlR,EAAK0S,eAAeJ,EAAc,IAC1CD,EAAKX,EAAMkB,oBAAoB1B,QAIjCmB,EAAKrS,EAAK6S,cAAcT,GAE1B,IAAIU,EAAQT,EAAGU,GACf,GAAKD,EAAL,CAGA,IAAIE,EAASX,EAAGY,GACZC,EAAWb,EAAGc,GACVC,EAAQf,EAARe,IACJA,IACFN,EAAgB,GAARA,EAAaM,EACrBJ,EAAkB,GAATA,EAAcI,EACvBF,EAAsB,GAAXA,EAAgBE,GAE7BzB,EAAImB,MAAQA,EACZnB,EAAIqB,OAASA,EACbrB,EAAIlY,MAAM4Z,cAAV,IAAAhc,OAA8B2b,EAASE,EAAvC,8CAQoBvB,GAMpB,GALAA,EAAIjF,gBAAgB,SACpBiF,EAAIjF,gBAAgB,SACpBiF,EAAIjF,gBAAgB,UAEpBiF,EAAIlY,MAAM6Z,SAAW,QACkB,IAAnC3B,EAAIc,IAAItd,QAAQ,cAClB,GAAyC,QAArCoO,EAAcva,IAAI,eAA0B,CAE9C,IAAMuqB,EAAMtF,mBAAmB0D,EAAIc,IAAI5e,UAAU,GAAI8d,EAAIc,IAAIxnB,SAC7DymB,EAAM8B,WAAW7B,EAAK4B,GAAK,OACtB,CAEL,IAAME,EAAS9B,EAAIc,IAAI5e,UAAU,GAAI8d,EAAIc,IAAIxnB,QAC7CymB,EAAM8B,WAAW7B,EAAK8B,GAAQ,QAGhC/B,EAAM8B,WAAW7B,EAAKA,EAAIc,qDAWCF,GAC7B,IAAImB,EAAQnB,EAAUpd,QAAQ,YAC1Bwe,EAAOpB,EAAUpd,QAAQ,IAAKue,EAAQ,EAAGnB,EAAUtnB,QACjD+nB,EAAST,EAAU1e,UAAU6f,EAAQ,EAAGC,GAE9CD,EAAQnB,EAAUpd,QAAQ,WAC1Bwe,EAAOpB,EAAUpd,QAAQ,IAAKue,EAAQ,EAAGnB,EAAUtnB,QACnD,IAAM6nB,EAAQP,EAAU1e,UAAU6f,EAAQ,EAAGC,GAE7CD,EAAQnB,EAAUpd,QAAQ,kBAC1Bwe,EAAOpB,EAAUpd,QAAQ,IAAKue,EAAQ,GAAInB,EAAUtnB,QACpD,IAAMioB,EAAWX,EAAU1e,UAAU6f,EAAQ,GAAIC,GAEjD,QAAqB,IAAVb,EAAuB,CAChC,IAAMvmB,KAMN,OALAA,EAAIwmB,GAAKD,EACTvmB,EAAI0mB,GAAKD,OACe,IAAbE,IACT3mB,EAAI4mB,GAAKD,GAEJ3mB,EAET,qDAQyB2kB,GAEzB,IAAI4B,EACAE,EACAY,EACAV,EACAE,EACJ,IANApT,EAAK6T,UAAU3C,EAAO,EAAG,GAMlBA,EAAMjmB,QAAU,GAET,cADZ2oB,EAAM5T,EAAK8T,UAAU5C,KAEnB4B,EAAQ9S,EAAK8T,UAAU5C,GACvB8B,EAAShT,EAAK8T,UAAU5C,GAExBlR,EAAK8T,UAAU5C,GACflR,EAAK+T,SAAS7C,IACG,aAAR0C,EACTV,EAAWlT,EAAK8T,UAAU5C,GACT,aAAR0C,IACTR,EAAMpT,EAAK8T,UAAU5C,GACrBkC,EAAO1lB,KAAKsmB,MAAMZ,EAAM,OACxBpT,EAAK8T,UAAU5C,GACflR,EAAK+T,SAAS7C,IAEhBlR,EAAK8T,UAAU5C,GAGjB,QAAqB,IAAV4B,EAAuB,CAChC,IAAMvmB,KAQN,OAPAA,EAAIwmB,GAAKD,EACTvmB,EAAI0mB,GAAKD,EACTzmB,EAAI6mB,IAAMA,EACNF,IACF3mB,EAAI4mB,GAAKD,GAGJ3mB,EAET,4LC3NiB0nB,uOA2BOvR,EAAQiH,EAAUzC,QAChB,IAAdyC,IACVA,EAAW,MAKTnL,EAAO0V,aAAaxR,EAAQ,mBAC9BwE,EAAK5d,KAAO,aAEd,IAAI6qB,EAAiB,GAErB,GAAIF,EAAclQ,MAAM/a,IAAI0Z,GAC1ByR,EAAiBF,EAAclQ,MAAM/a,IAAI0Z,OACpC,CACLwE,EAAKtC,QAAU,oBACfsC,EAAKkN,KAAOzK,EACZ,IAAM0K,EAAyBvd,KAAKuQ,MAAM5C,EAAgB6C,WAAW,UAAWJ,IAC1C,UAAlCmN,EAAuB7M,QACzB2M,EAAiBE,EAAuBlZ,OAAOwG,KAC/CsS,EAAclQ,MAAM6D,SAASlF,EAAQyR,IAErCA,EAAiB1K,EAAczgB,IAAI,+BAIvC,OAAOmrB,gCA9CP,OAAOF,EAAczK,qBASNpgB,GACf6qB,EAAczK,OAASpgB,WA8C3B6qB,EAAczK,OAAS,IAAI3F,iLCxDNyQ,sOAUMvI,EAASpM,EAAQ4U,EAAiB5K,GACzD,IAAM2E,EAAYvC,EAAQxR,cAAc,OACxC+T,EAAUkG,MAAQ,SAClBlG,EAAU7U,MAAM6Z,SAAW,OAC3B,IAAMpM,EAAOqN,MAmBb,GAjBArN,EAAKC,IAAMxH,EACXuH,EAAKkN,KAAOzK,EAEZzC,EAAKuN,QAAU,OACfvN,EAAKwN,eAAiB,QAIgB,WAAlCnR,EAAcva,IAAI,aAAoE,YAAxCua,EAAcva,IAAI,oBAClEke,EAAKuM,QAAS,GAMhBnF,EAAU3L,UAAYY,EAAcva,IAAI,mBAEL,IAA/B2W,EAAOxK,QAAQ,WAAmB,CAGpC,IAAIwf,EAAkBhV,EAAO9L,UAAU8L,EAAOxK,QAAQ,WAAa,UAAUlK,OAAQ0U,EAAO1U,QAE5F0pB,GADAA,EAAkBA,EAAgB9gB,UAAU,EAAG8gB,EAAgBxf,QAAQ,OACrCtB,UAAU,EAAG8gB,EAAgB1pB,QAC/DqjB,EAAUrT,aAAasI,EAAcva,IAAI,yBAA0B2rB,GAIrE,IAAIpR,EAAcva,IAAI,2BAAgE,QAAlCua,EAAcva,IAAI,aAA2D,YAAlCua,EAAcva,IAAI,YA2B1G,CACL,IAAMmS,EAASmZ,EAAOM,eAAejV,EAAQuH,GAC7CoH,EAAUrT,aAAasI,EAAcva,IAAI,wBAAyBwV,EAAOiQ,cAAc9O,IACvF2O,EAAUmE,IAAMtX,EAChBuW,EAAM8B,WAAWlF,EAAWnT,EAA0C,WAAlCoI,EAAcva,IAAI,aAAoE,YAAxCua,EAAcva,IAAI,mBAChGua,EAAcva,IAAI,yBACpBslB,EAAUuG,IAAMZ,EAAca,mBAAmBnV,EAAQgK,EAAUzC,QAjCsE,CAC3I,IAAI/L,EAASrE,KAAKuQ,MAAMiN,EAAOS,mBAAmB7N,EAAMyC,IACxD,GAAsB,YAAlBxO,EAAOqM,OAGT,IACErM,EAASrE,KAAKuQ,MAAM5C,EAAgB6C,WAAW,YAAaJ,IAC5D,MAAO/T,GACP,OAAO,KAIW,SADnBgI,EAAWA,EAAXA,QACQ6Z,OACT1G,EAAUmE,IAAV,yBAAApb,OAAyC8D,EAAOxM,SAEhD2f,EAAUmE,IAAV,mCAAApb,OAAmD2I,EAAKuN,UAAUpS,EAAOxM,UAE3E2f,EAAUrT,aAAasI,EAAcva,IAAI,wBAAyBwV,EAAOiQ,cAAc9O,IACvF+R,EAAM8B,WAAWlF,EAAWnT,EAAOxM,SAAS,GAExC4U,EAAcva,IAAI,8BACM,IAAfmS,EAAO0Z,IAChBvG,EAAUuG,IAAMZ,EAAca,mBAAmBnV,EAAQgK,EAAUzC,GAEnEoH,EAAUuG,IAAM1Z,EAAO0Z,KAmB7B,YAN+B,IAApBP,EAAOW,UAChBX,EAAOW,SAASC,QAAQ5G,GAI1BA,EAAUrT,aAAa,OAAQ,QACxBqT,yCAWa3O,EAAQuH,GAEU,WAAlC3D,EAAcva,IAAI,aAAoE,YAAxCua,EAAcva,IAAI,oBAClEke,EAAKuM,QAAS,GAGhB,IAAItY,EAASsJ,EAAgB6C,WAAW,cAAeJ,GAEvD,IAAkC,IAA9B/L,EAAOhG,QAAQ,UAAkB,CAEnC,IAAMggB,EAAY1Q,EAAgB8B,eAAe,eAAepb,MAAM,KACtEgqB,EAAUC,MACVja,EAASA,EAAOhQ,MAAM,UAAUsH,KAAK0iB,EAAU1iB,KAAK,MAGtD,OAAO0I,oCAcQnG,EAAM2U,GAMrB,OADA3U,EAAOsf,EAAOe,kBAAkBrgB,EAAM2U,GAC/B2K,EAAOgB,kBAAkBtgB,6CAUTA,EAAM2U,GAW7B,OAVIpG,EAAcva,IAAI,cAEpBgM,EAAOiS,EAAMsO,mBAAmBvgB,EAAM8I,EAAUoB,mBAChDlK,EAAOiS,EAAMsO,mBAAmBvgB,EAAM8I,EAAUwB,eAChDtK,EAAOsf,EAAOkB,iBAAiBxgB,EAAM8I,EAAUoB,kBAAmByK,GAClE3U,EAAOsf,EAAOkB,iBAAiBxgB,EAAM8I,EAAUwB,cAAeqK,GACxB,WAAlCpG,EAAcva,IAAI,aAAoE,UAAxCua,EAAcva,IAAI,oBAClEgM,EAAOsf,EAAOmB,iBAAiBzgB,EAAM,sBAGlCA,4CAUgBA,GACvB,IAA0D,IAAtDuO,EAAcva,IAAI,cAAcmM,QAAQ,SAO1C,IANA,IAAMugB,EAAU1V,EAAK2V,4BAA4B3gB,EAAM,OAAO,GACxD4gB,EAAQ,oBAGVC,EAAQ,EAEH1tB,EAAI,EAAGA,EAAIutB,EAAQzqB,OAAQ9C,GAAK,EAAG,CAC1C,IAAMgmB,EAAUnZ,EAAKnB,UAAU6hB,EAAQvtB,GAAGkY,MAAQwV,EAAOH,EAAQvtB,GAAG2X,IAAM+V,GAE1E,IAA4E,IAAxE1H,EAAQhZ,QAAR,WAAAkC,OAA2BkM,EAAcva,IAAI,kBAA7C,MAA2E,CAC7E,IAAI8sB,EAAgB,IAAAze,OAAOkM,EAAcva,IAAI,wBAAzB,MAChB+sB,EAAc5H,EAAQhZ,QAAQ2gB,GAOlC,IALqB,IAAjBC,IACFD,EAAmB,SACnBC,EAAc5H,EAAQhZ,QAAQ2gB,KAGX,IAAjBC,EAAoB,CACtBA,GAAeD,EAAiB7qB,OAChC,IAAM+qB,EAAY7H,EAAQhZ,QAAQ,IAAK4gB,GACjCpW,EAASnB,EAAO4J,cAAc+F,EAAQta,UAAUkiB,EAAaC,IAC/DC,EAAqBtW,EAAOxK,QAAQygB,GAExC,IAA4B,IAAxBK,EAA2B,CAC7BA,GAAsBL,EAAM3qB,OAC5B,IAAMirB,EAAmBvW,EAAOxK,QAAQ,gBAAiB8gB,GACnD1O,EAAQ5H,EAAO9L,UAAUoiB,EAAoBC,GAE7CxZ,EAAW,KAAArF,OAAQ2I,EAAKmW,mBAAmB5O,GAAhC,MAGjBvS,EAFcA,EAAKnB,UAAU,EAAG6hB,EAAQvtB,GAAGkY,MAAQwV,GAEpCnZ,EADH1H,EAAKnB,UAAU6hB,EAAQvtB,GAAG2X,IAAM+V,GAE5CA,GAASnZ,EAAYzR,QAAUyqB,EAAQvtB,GAAG2X,IAAM4V,EAAQvtB,GAAGkY,UAOrE,OAAOrL,mCAWOA,GAEd,IAAMohB,EAAwB9B,EAAO+B,iBAAiBrhB,GAGtD,OAD6Bsf,EAAOgC,iBAAiBF,4CAU/BphB,GAEtB,IAA0D,IAAtDuO,EAAcva,IAAI,cAAcmM,QAAQ,SAAiB,CAI3D,IAHA,IAAI+M,EAAS,GACTmH,EAAc,EACdE,EAAgBvU,EAAKG,QAAQ,OACP,IAAnBoU,GAAsB,CAI3B,GAHArH,GAAUlN,EAAKnB,UAAUwV,EAAaE,IAGjB,KAFrBF,EAAcrU,EAAKG,QAAQ,KAAMoU,EAAgB,IAEzB,CAKtB,IAAMhC,EAAQvS,EAAKnB,UAAU0V,EAAgB,EAAGF,GAC1CkN,EAAevW,EAAKmW,mBAAmB5O,GACzC5H,EAASsH,EAAMuP,mBAAmBD,GAAc,GAC/ChT,EAAcva,IAAI,oBAErB2W,EAASnB,EAAOgQ,iBAAiB7O,EAAQ,qBAE3CuC,GAAUvC,EACV0J,GAAe,OAEfnH,GAAU,KACVmH,EAAcE,EAAgB,EAGhCA,EAAgBvU,EAAKG,QAAQ,KAAMkU,GAIrCrU,EADAkN,GAAUlN,EAAKnB,UAAUwV,EAAarU,EAAK/J,QAI7C,OAAO+J,2CAaeA,GAWtB,OAVIuO,EAAcva,IAAI,cACkB,YAAlCua,EAAcva,IAAI,YACpBgM,EAAOsf,EAAOmB,iBAAiBzgB,EAAM,cACM,QAAlCuO,EAAcva,IAAI,YAC3BgM,EAAOsf,EAAOmB,iBAAiBzgB,EAAM,cACM,WAAlCuO,EAAcva,IAAI,aAAoE,UAAxCua,EAAcva,IAAI,oBACzEgM,EAAOsf,EAAOmB,iBAAiBzgB,EAAM,YAIlCA,6CAYiBkS,EAAMyC,GAC9B,IAAI8M,MACkB,MAAO,QAAS,iBAAkB,OAAQ,MAAO,WAAY,aAAc,kBAAmB,kBAAmB,UAC1Hzb,QAAQ,SAACuR,QACO,IAAhBrF,EAAKqF,KACdkK,EAAQlK,GAASrF,EAAKqF,MAI1B,IAAMmK,KAcN,OAbA7tB,OAAOkS,KAAKmM,GAAMlM,QAAQ,SAACtR,GAGb,QAARA,IACFgtB,EAAWhtB,GAAOwd,EAAKxd,MAI3BgtB,EAAWC,QAAU/oB,IAAIC,MAAMZ,GAAGa,cAAcY,UAAUsR,EAAK4W,mBAAmBH,IAClFC,EAAWtC,UAA4B,IAAbzK,EAA4B,KAAOA,EAC7D+M,EAAWG,QAAUtT,EAAcva,IAAI,WAExByb,EAAgB6C,WAAW,YAAatH,EAAKkG,eAAewQ,IAAa,4CAWlE1hB,EAAM1L,GAM5B,IALA,IAAI4Y,EAAS,GACTmH,EAAc,EACZyN,EAAU,SACVC,EAAgBD,EAAQ3f,OAAOlM,OAE9B6rB,EAAQjZ,KAAK7I,IAAO,CACzB,IAAMuU,EAAgBuN,EAAQE,UAAYD,EAC1C7U,GAAUlN,EAAKnB,UAAUwV,EAAaE,GAItC,IAFA,IAAIphB,EAAIohB,EAAgB,EAEjBphB,EAAI6M,EAAK/J,QAAUoe,GAAeE,GAAe,CACtD,IAAM9J,EAAYzK,EAAK3D,OAAOlJ,GAE9B,GAAkB,MAAdsX,GAAmC,MAAdA,EAAoB,CAC3C,IAAMwX,EAAwBjiB,EAAKG,QAAQsK,EAAWtX,EAAI,GAGxDA,GAD6B,IAA3B8uB,EACEjiB,EAAK/J,OAELgsB,MAEiB,MAAdxX,IACT4J,EAAclhB,EAAI,GAGpBA,GAAK,EAGP,GAAIkhB,EAAcE,EAEhB,OADArH,GAAUlN,EAAKnB,UAAU0V,EAAevU,EAAK/J,QAG/C,IAAIkjB,EAAUnZ,EAAKnB,UAAU0V,EAAeF,GACtCiF,EAAYtO,EAAK+M,aAAaoB,GAChC+I,EAAU5I,EAAUlC,aAAa7I,EAAcva,IAAI,yBACnDolB,OAAY,EACZC,OAAgB,EAEpB,GAAa,qBAAT/kB,EACa,MAAX4tB,IACFA,EAAU5I,EAAUlC,aAAa,QAEnC8K,EAAU1Y,EAAO4J,cAAc8O,GAC/B/I,EAAUmG,EAAO6C,kBAAkBloB,SAAUioB,EAAS,KAAM,MAC5DhV,GAAUlC,EAAKoX,iBAAiBjJ,QAC3B,GAAa,eAAT7kB,EACLia,EAAcva,IAAI,cACkB,YAAlCua,EAAcva,IAAI,aACpBolB,GAAe,EACfC,GAAmB,GACwB,QAAlC9K,EAAcva,IAAI,cAC3BolB,GAAe,EACfC,GAAmB,IAGvBnM,GAAUlC,EAAKqX,oBAAoBlJ,EAASC,EAAcC,QACrD,GAAa,WAAT/kB,EAAmB,CACZ,OAAZ4tB,IACFA,EAAU5I,EAAUlC,aAAa,QAEnC8K,EAAU1Y,EAAO4J,cAAc8O,GAE/B,IAAM1T,GACNA,OAAoB,QACpB2K,EAAUmG,EAAO6C,kBAAkBloB,SAAUioB,EAAS1T,EAAY,MAElEkO,EAAM8B,WAAWrF,EAASA,EAAQsE,KAAK,GACvCvQ,GAAUlC,EAAKoX,iBAAiBjJ,IAIpC,OADAjM,GAAUlN,EAAKnB,UAAUwV,EAAarU,EAAK/J,iDAerB0D,EAASiT,EAAY+H,GAO3C,IANA,IAAIzH,EAAS,GACP+F,EAAY,GAAA5Q,OAAMuK,EAAW7D,UAAjB,QACZ+D,EAAU,GAAAzK,OAAMuK,EAAW7D,UAAjB,SAAA1G,OAAkCuK,EAAW5D,WACzDqC,EAAQ1R,EAAQwG,QAAQ8S,GACxBnI,EAAM,GAEQ,IAAXO,GAAc,CACnB6B,GAAUvT,EAAQkF,UAAUiM,EAAKO,GAEjC,IAAMiX,EAAuB3oB,EAAQwG,QAAQoO,EAAcva,IAAI,yBAa/D,IAVa,KAFb8W,EAAMnR,EAAQwG,QAAQ2M,EAAYzB,IAGhCP,EAAMnR,EAAQ1D,OAAS,EAIvB6U,IAHmC,IAA1BwX,EAGF3oB,EAAQwG,QAAQ,KAAMkL,GAEtByB,EAAW7W,OAGfuT,EAAO+Y,oBAAoB5oB,EAAS0R,KAAoC,IAA1BiX,EAOjDpV,GAAUvT,EAAQkF,UAAUwM,EAAOP,OAP2C,CAC9E,IAAIH,EAAShR,EAAQkF,UAAUwM,EAAOP,GACtCH,EAAUiC,EAAWnQ,KAAOqM,EAAUoB,kBAAkBzN,GACpD+M,EAAO4J,cAAczI,GACrBnB,EAAOgZ,eAAe7X,GAC1BuC,GAAUlC,EAAKoX,iBAAiB9C,EAAO6C,kBAAkBloB,SAAU0Q,EAAQ,KAAMgK,IAKnFtJ,EAAQ1R,EAAQwG,QAAQ8S,EAAcnI,GAIxC,OADAoC,GAAUvT,EAAQkF,UAAUiM,EAAKnR,EAAQ1D,iBAM7C,GAAgC,oBAArBwsB,iBAAkC,CAC3C,IAAMC,EAAmB,IAAID,iBAAiB,SAACE,GAC7CA,EAAU3c,QAAQ,SAAC4c,GACbA,EAASC,WAAatU,EAAcva,IAAI,mBACZ,UAA3B4uB,EAAS3L,gBACmE,IAA5E2L,EAAS3f,OAAO0K,UAAUxN,QAAQoO,EAAcva,IAAI,qBACvD4uB,EAAS3f,OAAO0K,UAAYY,EAAcva,IAAI,uBAKpDsrB,EAAOW,SAAWpsB,OAAOY,OAAOiuB,GAChCpD,EAAOW,SAAS6C,QAAWhM,YAAY,EAAMiM,mBAAmB,GAEhEzD,EAAOW,SAASC,QAAU,SAAcjd,GACtCpP,OAAOmvB,eAAevrB,MAAMyoB,QAAQjd,EAAQxL,KAAKqrB,mLCxehCG,aAQnB,SAAAA,iGAAcC,CAAAzrB,KAAAwrB,GAKZxrB,KAAK0rB,kBAAmB,EAMxB1rB,KAAK2rB,mBAAoB,qGAOPhvB,GAClBqD,KAAK0rB,iBAAmB/uB,gDAQxB,OAAOqD,KAAK0rB,8DAOO/uB,GACnBqD,KAAK2rB,kBAAoBhvB,+CAQNivB,6CAOJA,2CAMFA,IACkB,IAA3B5rB,KAAK2rB,oBAAwD,IAA1B3rB,KAAK0rB,mBAC1C1rB,KAAK0rB,kBAAmB,wCAQfE,mDAOUA,uLCnFJC,aAenB,SAAAA,EAAYC,GAOV,+FAPoCC,CAAA/rB,KAAA6rB,GAMpC7rB,KAAKgsB,sBACD,qBAAsBF,GAGxB,MAAM,IAAI7e,MAAM,uEAoBlB,GAtBEjN,KAAKgsB,iBAAmBF,EAAyBE,iBASnDhsB,KAAKisB,cAAgB,KACjB,kBAAmBH,IACrB9rB,KAAKisB,cAAgBH,EAAyBG,eAUhDjsB,KAAKksB,iBACD,gBAAiBJ,GAGnB,MAAM,IAAI7e,MAAM,iEAQlB,GAVEjN,KAAKksB,YAAcJ,EAAyBI,YAS9ClsB,KAAKkd,SAAW,KACZ,aAAc4O,GAGhB,MAAM,IAAI7e,MAAM,8DAFhBjN,KAAKkd,SAAW4O,EAAyB5O,SAS3Cld,KAAKmsB,eAAiB,IAAIX,EAM1BxrB,KAAKosB,OAAS,KAMdpsB,KAAKqsB,GAAKC,UAAUC,UAAUnM,cAM9BpgB,KAAKwsB,oBACLxsB,KAAKwsB,iBAAiBC,UAAYzsB,KAAKqsB,GAAG3jB,QAAQ,YAAc,EAChE1I,KAAKwsB,iBAAiBE,MAAQb,EAAea,QAO7C1sB,KAAK2sB,QAAU,KAOf3sB,KAAK4sB,oBAAsB,KAM3B5sB,KAAKyX,UAAY,IAAIF,EAMrBvX,KAAKiW,OAAS,KAMdjW,KAAK6sB,cAAe,EAMpB7sB,KAAK8sB,iBAAmB,gGAOdpV,GACV1X,KAAKyX,UAAUQ,IAAIP,+CAQDoV,GAClB9sB,KAAK8sB,iBAAmBA,iDAOHF,GACrB5sB,KAAK4sB,oBAAsBA,mCAS3B5sB,KAAK+sB,YAAY/sB,KAAK4sB,qBACtB5sB,KAAKgtB,aAAahtB,KAAK4sB,4DAQvB,GAAIf,EAAeoB,iBAAkB,CAgBnC,GAfAjtB,KAAKosB,OAASpqB,OAAOb,IAAIC,MAAM8rB,SAASC,SAASC,YAAYptB,KAAKgsB,kBAClEhsB,KAAKosB,OAAO7iB,WAAWvJ,KAAK4sB,oBAAoBS,kBAChDrtB,KAAKosB,OAAO3J,QACRziB,KAAK4sB,oBAAoBU,KAC3BttB,KAAKosB,OAAOmB,OAAO,OAGjBvtB,KAAKosB,OAAOoB,iBAAiBC,UAC/BztB,KAAKosB,OAAO5N,QAAQxR,MAAM0gB,UAAY,OAIxC1tB,KAAKosB,OAAOoB,iBAAiBG,kBAAkB3tB,KAAKmsB,gBAGhDnsB,KAAK4sB,oBAAoBJ,iBAAiBE,MAAO,CACnDkB,WAAW,WAGN5tB,KAAKzC,eAAe,wBAAwByC,KAAK4sB,oBAAoBiB,gBACvE,KAEH,IAAMC,EAAoBtrB,SAASurB,uBAAuB,sBAAsB,GAChFxa,EAAK+K,SAASwP,EAAmB,QAAS9tB,KAAK4sB,oBAAoBoB,6BACnEza,EAAK+K,SAASwP,EAAmB,OAAQ9tB,KAAK4sB,oBAAoBqB,6BAIpEjuB,KAAKyX,UAAUS,KAAK,kBAEpB0V,WAAW/B,EAAevuB,UAAU0vB,aAAa9vB,KAAK8C,MAAO,oCAQ1D6rB,EAAeoB,kBAClBjtB,KAAKkuB,wFAQP,IAAMC,EAAS3rB,SAASsL,cAAc,UACtCqgB,EAAOngB,KAAO,kBACd,IAAIogB,EAAYtX,EAAcva,IAAI,aAE5B8xB,EAAgB7rB,SAASsL,cAAc,KAE7C+d,EAAeyC,uBAAuBD,EAAeD,GACrDvC,EAAe0C,2BAA2BF,GAE1CD,EAAYvC,EAAe2C,wBAAwBH,GAGnD,IAAMI,EAAQzuB,KAAK0uB,iBACnBP,EAAOnI,IAAP,GAAApb,OAAgBwjB,EAAhB,UAAAxjB,OAAkC5K,KAAKkd,SAAvC,kBAAAtS,OAAgE6jB,EAAMrC,OAAtE,gBAAAxhB,OAA2F6jB,EAAM5xB,KAAjG,mBAAA+N,OAAuH6jB,EAAMrE,SAE7H5nB,SAASmsB,qBAAqB,QAAQ,GAAGrhB,YAAY6gB,4CAkDrD,IAAMM,KAmBN,MAlBI,WAAYzuB,KAAKksB,YACnBuC,EAAMrC,OAASpsB,KAAKksB,YAAYE,OAEhCqC,EAAMrC,OAAS,UAGb,SAAUpsB,KAAKksB,YACjBuC,EAAM5xB,KAAOmD,KAAKksB,YAAYrvB,KAE9B4xB,EAAM5xB,KAAOia,EAAcva,IAAI,YAG7B,YAAayD,KAAKksB,YACpBuC,EAAMrE,QAAUpqB,KAAKksB,YAAY9B,QAEjCqE,EAAMrE,QAAUtT,EAAcva,IAAI,WAG7BkyB,8CAmCFzuB,KAAK6sB,cACR7sB,KAAK4uB,UAAU5uB,KAAKiW,0CAUd/C,EAAQ2b,GAAe,IAAAC,EAAA9uB,UAEF,IAAlB6uB,IACTA,GAAgB,GAIlB7uB,KAAKosB,OAAO2C,sBAAsB7b,EAAQ,WACxC4b,EAAK3C,eAAe6C,sBAAqB,KAI3CpB,WAAW,WACTkB,EAAK3C,eAAe8C,qBAAoB,IACvC,KAGEJ,GACH7uB,KAAKkvB,iDASoB,IAAhBlvB,KAAKosB,QAAyC,MAAfpsB,KAAKosB,QAC7CpsB,KAAKosB,OAAO3J,+CASd,GAAKziB,KAAKosB,OAAO+C,iBAgBfnvB,KAAK8sB,iBAAiBsC,cAAc,UAhBH,CACjC,IAAInZ,EAASjW,KAAKosB,OAAOiD,yBAEzB,GAA6C,OAAzCrvB,KAAKisB,cAAcqD,kBAA4B,CAAA,IACzC3C,EAAY3sB,KAAKisB,cAAcqD,kBAA/B3C,QACR1W,EAASlE,EAAOwd,8BAA8BtZ,EAAQ0W,QAItDvwB,OAAOkS,KAAKtO,KAAKisB,cAAcuD,SAASjhB,QAAQ,SAACtR,GAC/CgZ,EAASlE,EAAO0d,iCAAiCxZ,EAAQhZ,KAG7D,IAAMyyB,EAAwB3d,EAAOgZ,eAAe9U,GACpDjW,KAAK8sB,iBAAiBsC,cAAcM,GAKtC1vB,KAAKisB,cAAc0D,UACnB3vB,KAAK8sB,iBAAiB8C,qBAGtB5vB,KAAK6vB,iBACL7vB,KAAKisB,cAAc0D,mDAQf3vB,KAAKwsB,iBAAiBC,WAAazsB,KAAKwsB,iBAAiBE,MAGvD1sB,KAAKosB,OAAOoB,iBAAiBC,QAC/BztB,KAAK4uB,UAAU,yGAAyG,GAExH5uB,KAAK4uB,UAAU,+FAA+F,GAEvG5uB,KAAKosB,OAAOoB,iBAAiBC,QACtCztB,KAAK4uB,UAAU,qBAAqB,GAEpC5uB,KAAK4uB,UAAU,WAAW,oCAYxB5uB,KAAK6sB,aACP7sB,KAAK6vB,iBAEL7vB,KAAK4uB,UAAU5uB,KAAKiW,QAEtBjW,KAAK8vB,gBACL9vB,KAAKkvB,kDAQLlvB,KAAK+sB,YAAY/sB,KAAK4sB,qBACtB,IAAMjZ,EAAe3T,KAAKisB,cAAcqD,kBACxC,GAAI3b,EAAc,CAChB,IAAMgZ,EAAUhZ,EAAagZ,QACzBhZ,EAAagZ,QACboD,yBAAyBpD,QAET,MAAhB3sB,KAAK2sB,SAAmB3sB,KAAK2sB,UAAYA,GAC3C3sB,KAAKgwB,WAAWrD,OAEb,CACL,IAAMA,EAAU3sB,KAAKiwB,aACD,MAAhBjwB,KAAK2sB,SAAmB3sB,KAAK2sB,UAAYA,IAC3C3sB,KAAKgwB,WAAWrD,GAChB3sB,KAAKisB,cAAc0D,kDAUvB,IAAMhc,EAAe3T,KAAKisB,cAAcqD,kBACpC3b,EACF3T,KAAK4sB,oBAAoBsD,SAASvc,EAAawc,OAE/CnwB,KAAK4sB,oBAAoBsD,SAAS,iDASpC,IAAIvD,EAAU,UAUd,MATI,YAAa3sB,KAAKgsB,mBACjBW,EAAY3sB,KAAKgsB,iBAAjBW,SAGW,YAAZA,IAEFA,EAA+C,oBAA7BoD,+BAAwF,IAArCA,yBAAyBpD,QAA2B,UAAYoD,yBAAyBpD,SAGzJA,qCAOEA,GACT3sB,KAAK2sB,QAAUA,EACf3sB,KAAKosB,OAAOgE,WAAYzD,QAAS3sB,KAAK2sB,+CAStC,OAAS3sB,KAAKosB,OAAO+C,kBAAoBnvB,KAAKmsB,eAAekE,wDAOrDC,GACR,QAA0B9mB,IAAtB8mB,EAAcrzB,MAA8C,IAAzBqzB,EAAcC,OACnD,GAA0B,WAAtBD,EAAcrzB,KAA0C,QAAtBqzB,EAAcrzB,IAAe,CAEjE,IAAI2M,EAAOpH,SAASurB,uBAAuB,+DACvB,IAAhBnkB,EAAKpL,QAEa,KADpBoL,EAAOpH,SAASurB,uBAAuB,gEAC9BvvB,QAEa,KADpBoL,EAAOpH,SAASurB,uBAAuB,2BAC9BvvB,SACPwB,KAAK4sB,oBAAoB4D,eACzBF,EAAcG,kBACdH,EAAcI,uBAIf,GAAIJ,EAAcK,UAAkC,QAAtBL,EAAcrzB,IACjD,GAAIuF,SAASouB,gBAAkB5wB,KAAK4sB,oBAAoBiE,aAEtD7wB,KAAKosB,OAAO3J,QACZ6N,EAAcG,kBACdH,EAAcI,qBACT,CACL,IAAMlS,EAAUhc,SAASmJ,cAAc,oBACnCnJ,SAASouB,gBAAkBpS,IAE7Bxe,KAAK4sB,oBAAoBkE,aAAarO,QACtC6N,EAAcG,kBACdH,EAAcI,uBAGb,GAA0B,QAAtBJ,EAAcrzB,IAAe,CACtC,GAAIuF,SAASouB,gBAAkB5wB,KAAK4sB,oBAAoBkE,aAEtCtuB,SAASmJ,cAAc,oBAC/B8W,QACR6N,EAAcG,kBACdH,EAAcI,qBAIwB,mCADtBluB,SAASurB,uBAAuB,sBAAsB,GAC1DpO,aAAa,WAEvB3f,KAAK4sB,oBAAoBiE,aAAapO,QACtC6N,EAAcG,kBACdH,EAAcI,oEA1UMrC,EAAenlB,GAC3CmlB,EAAc5e,KAAOvG,qDAOWmlB,GAEiB,IAA7CrsB,OAAOuO,SAASd,KAAK/G,QAAQ,aAGA,UAA3B2lB,EAAc5d,WAChB4d,EAAc5d,SAAW,0DAWA4d,GAE7B,IAAM0C,EAAoC,OAAvB1C,EAAc2C,MAAwC,QAAvB3C,EAAc2C,MAAyC,KAAvB3C,EAAc2C,KAChG,MAAA,GAAApmB,OAAUyjB,EAAc5d,SAAxB,MAAA7F,OAAqCyjB,EAAc4C,UAAnDrmB,OAA+DmmB,EAAa,GAAM,IAAM1C,EAAc2C,MAAtGpmB,OAA+GyjB,EAAczd,SAASsgB,WAAW,KAAO7C,EAAczd,SAAY,IAAMyd,EAAczd,0CAyCtM,OACE,iBACA,mBACA,iBACA,OACA,SACA,QACAugB,SAAS7E,UAAU8E,WAEjB9E,UAAUC,UAAU4E,SAAS,QAAU,eAAgB3uB,kDAU3D,OAAQR,OAAOb,KAAOa,OAAOb,IAAIC,OAASY,OAAOb,IAAIC,MAAM8rB,UACtDlrB,OAAOb,IAAIC,MAAM8rB,SAASC,UAAYnrB,OAAOb,IAAIC,MAAM8rB,SAASC,SAASC,+LCjU7DiE,aAanB,SAAAA,iGAAcC,CAAAtxB,KAAAqxB,GAMZrxB,KAAKwvB,WAKLxvB,KAAKuxB,aAAe,mGAQZC,EAAYC,GACpB,IAAM9d,KACNA,EAAa1X,KAAOw1B,EAAax1B,KACjC0X,EAAagZ,QAAU8E,EAAa9E,QACpChZ,EAAa+d,KAAOD,EAAaC,KACjC/d,EAAage,aAAeF,EAAaE,aACzChe,EAAawc,MAAQsB,EAAatB,MAClCxc,EAAaie,QAAUH,EAAaG,QACpC5xB,KAAKwvB,QAAQgC,GAAc7d,iCAOtBke,GACL7xB,KAAKuxB,aAAeM,oCAOpB7xB,KAAKuxB,aAAe,oDAQpB,MAA0B,YAAtBvxB,KAAKuxB,aACAvxB,KAAKwvB,QAAQxvB,KAAKuxB,cAEpB,cClEIO,GAJbC,sBAAuB,qBACvBC,eAAgB,eAChBC,aAAc,sLCVKC,aAgBnB,SAAAA,iGAAcC,CAAAnyB,KAAAkyB,GAMZlyB,KAAK6X,WAAY,EAKjB7X,KAAK+X,kBAAmB,0FAOxB/X,KAAK6X,WAAY,2CAOjB7X,KAAK+X,kBAAmB,qLCtC5Bqa,ECAqBC,aAanB,SAAAA,EAAYC,gGAAwBC,CAAAvyB,KAAAqyB,GAIlCryB,KAAKwyB,eAAiBF,EAAuBE,eAE7CxyB,KAAKyyB,UAAYH,EAAuBG,UAKxCzyB,KAAK0yB,eAAiB1yB,KAAKwyB,eAAellB,YAAY9K,SAASsL,cAAc,QAC7E9N,KAAK0yB,eAAelkB,aAAa,QAAS,sCAK1CxO,KAAK2yB,QAAU3yB,KAAK0yB,eAAeplB,YAAY9K,SAASsL,cAAc,QACtE9N,KAAK2yB,QAAQ3tB,GAAK,mBAClBhF,KAAK2yB,QAAQnkB,aAAa,QAAS,0BACnCxO,KAAK2yB,QAAQnkB,aAAa,OAAQ,UAClCxO,KAAK2yB,QAAQnkB,aAAa,mBAAoB,mBAC9C,IAAMokB,EAAYpwB,SAASsL,cAAc,KACnCoH,EAAO1S,SAASoN,eAAe0iB,EAAuBlV,QAAQuV,SACpEC,EAAUtlB,YAAY4H,GACtB0d,EAAU5tB,GAAK,kBACfhF,KAAK2yB,QAAQrlB,YAAYslB,GAKzB,IAAMC,EAAU7yB,KAAK0yB,eAAeplB,YAAY9K,SAASsL,cAAc,QACvE+kB,EAAQrkB,aAAa,QAAS,4BAE9BqkB,EAAQ9U,iBAAiB,QAAS/d,KAAKwwB,aAAatzB,KAAK8C,OAKzDA,KAAK8yB,WAAa9yB,KAAK2yB,QAAQrlB,YAAY9K,SAASsL,cAAc,QAClE9N,KAAK8yB,WAAWtkB,aAAa,QAAS,gCACtCxO,KAAK8yB,WAAW9tB,GAAK,wBAGrB,IAAM+tB,GACJC,MAAO,oBACP3sB,UAAWisB,EAAuBlV,QAAQ6V,aAC1CjuB,GAAI,2BAMNhF,KAAKkzB,YAAclzB,KAAKmzB,aAAaJ,EAAuB/yB,KAAKozB,YAAYl2B,KAAK8C,OAClFA,KAAK8yB,WAAWxlB,YAAYtN,KAAKkzB,aAGjC,IAAMG,GACJL,MAAO,oBACP3sB,UAAWisB,EAAuBlV,QAAQkW,aAC1CtuB,GAAI,2BAMNhF,KAAK8wB,aAAe9wB,KAAKmzB,aAAaE,EAAuBrzB,KAAKwwB,aAAatzB,KAAK8C,OACpFA,KAAK8yB,WAAWxlB,YAAYtN,KAAK8wB,0GAatBvY,EAAYT,GACvB,IAAI0G,KAOJ,OANAA,EAAUhc,SAASsL,cAAc,WACzBU,aAAa,KAAM+J,EAAWvT,IACtCwZ,EAAQhQ,aAAa,QAAS+J,EAAU,OACxCiG,EAAQnY,UAAYkS,EAAWlS,UAC/BmY,EAAQT,iBAAiB,QAASjG,GAE3B0G,iCAQmC,UAAtCxe,KAAK0yB,eAAe1lB,MAAMumB,SAE5B/wB,SAASouB,cAAc4C,OACvBxzB,KAAK0yB,eAAe1lB,MAAMumB,QAAU,QACpCvzB,KAAKkzB,YAAYzQ,SAEjBziB,KAAK0yB,eAAe1lB,MAAMumB,QAAU,8CAUtCvzB,KAAK0yB,eAAe1lB,MAAMumB,QAAU,YACS,IAAlCvzB,KAAKyyB,UAAUgB,gBACxBzzB,KAAKyyB,UAAUgB,uDASjBzzB,KAAKwwB,oBACuC,IAAjCxwB,KAAKyyB,UAAUiB,eACxB1zB,KAAKyyB,UAAUiB,kDAQTpD,QACkB9mB,IAAtB8mB,EAAcrzB,MAEU,WAAtBqzB,EAAcrzB,KAA0C,QAAtBqzB,EAAcrzB,KAClD+C,KAAKwwB,eACLF,EAAcG,kBACdH,EAAcI,kBACiB,QAAtBJ,EAAcrzB,MACnBuF,SAASouB,gBAAkB5wB,KAAKkzB,YAClClzB,KAAK8wB,aAAarO,QAElBziB,KAAKkzB,YAAYzQ,QAEnB6N,EAAcG,kBACdH,EAAcI,4BD/JtBiD,EAAA,IAAAC,WAAA,IEJe,IAAAC,EAAA,sHCQf,ICFe,IAAAC,EAJf,SAAAC,GACA,MAAA,iBAAAA,GAAqCF,EAAKziB,KAAA2iB,IDG1CC,KAESC,EAAC,EAAMA,EAAC,MAAUA,EAC3BD,EAAAtqB,MAAkBuqB,EAAC,KAAAhtB,SAAA,IAAA5H,OAAA,IAoBJ,IAAA60B,EAjBf,SAAAp0B,GACA,IAAAq0B,EAAAruB,UAAAtH,OAAA,QAAAgL,IAAA1D,UAAA,GAAAA,UAAA,GAAA,EAGAiuB,GAAAC,EAAAl0B,EAAAq0B,EAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,IAAA,IAAAH,EAAAl0B,EAAAq0B,EAAA,KAAAH,EAAAl0B,EAAAq0B,EAAA,KAAAH,EAAAl0B,EAAAq0B,EAAA,KAAAH,EAAAl0B,EAAAq0B,EAAA,KAAAH,EAAAl0B,EAAAq0B,EAAA,KAAAH,EAAAl0B,EAAAq0B,EAAA,MAAA/T,cAMA,IAAO0T,EAAQC,GACf,MAAAK,UAAA,+BAGA,OAAAL,GEHe,IAAAM,EApBf,SAAAjrB,EAAAkrB,EAAAH,GAEA,IAAAI,GADAnrB,EAAAA,OACApI,SAAAoI,EAAAorB,KLAe,WAEf,IAAApC,KAGAA,EAAA,oBAAAqC,QAAAA,OAAArC,iBAAAqC,OAAArC,gBAAAl1B,KAAAu3B,SAAA,oBAAAC,UAAA,mBAAAA,SAAAtC,iBAAAsC,SAAAtC,gBAAAl1B,KAAAw3B,WAGA,MAAA,IAAAznB,MAAA,4GAIA,OAAAmlB,EAAAuB,OKPA,GAHAY,EAAA,GAAA,GAAAA,EAAA,GAAA,GACAA,EAAA,GAAA,GAAAA,EAAA,GAAA,IAEAD,EAAA,CACAH,EAAAA,GAAA,EAEA,IAAA,IAAAz4B,EAAA,EAAmBA,EAAA,KAAQA,EAC3B44B,EAAAH,EAAAz4B,GAAA64B,EAAA74B,GAGA,OAAA44B,EAGA,OAASJ,EAASK,oqBCdGI,aACnB,SAAAA,IACE,kGADYC,CAAA50B,KAAA20B,GACN,IAAI1nB,MAAM,gJA8CN4nB,GACV,IAAMpa,GACJ9U,OAAQ,OACR2R,MAAO,WACPwd,SACEC,eAAgB,mBAChBC,YAAa,2CACbC,iBAAkB,KAEpBC,KAAM7qB,KAAKC,UAAUqqB,EAAiBQ,YAAYN,KAKpD,OAAOO,MAAMT,EAAiBU,SAAU5a,GACrC6a,KAAK,SAAA3b,GAAQ,OAAIA,IADb,MAEE,SAAC4b,0CAqFOV,GAMjB,OAJEA,SAAAA,EACAW,OAAQb,EAAiBa,OACzBC,QAASd,EAAiBc,+CAa5B,OAAOC,gDAKP,OAAO11B,KAAK21B,oDAGO15B,EAAMiG,EAAS0zB,GAClC,IAAMC,EAAsB,MAAVD,EAAkB,GAAnB,aAAAhrB,OAAqCgrB,GACtD,MAAA,GAAAhrB,OAAU3O,EAAV,KAAA2O,OAAkB1I,GAAlB0I,OAA4BirB,oCApK5B,IAAK71B,KAAK81B,UAAW,CAGnB,IAAMC,EAAUvzB,SAASwzB,OAAOt3B,MAAM,KAAKmL,IAAI,SAAAmsB,GAAM,OAAIA,EAAO9kB,OAAOxS,MAAM,OAH1Du3B,GAAA,EAAAC,GAAA,EAAAC,OAAA3sB,EAAA,IAInB,IAAA,IAAA4sB,EAAAC,EAA6BN,EAA7Bt5B,OAAAgpB,cAAAwQ,GAAAG,EAAAC,EAAAp2B,QAAAq2B,MAAAL,GAAA,EAAsC,CAAA,IAAAM,EAAAC,EAAAJ,EAAAz5B,MAAA,GAAzBM,EAAyBs5B,EAAA,GAApB55B,EAAoB45B,EAAA,GACpC,GAAIt5B,IAAQw5B,EAAoB,CAC9Bz2B,KAAK81B,UAAYn5B,EACjB,QAPe,MAAA+5B,GAAAR,GAAA,EAAAC,EAAAO,EAAA,QAAA,IAAAT,GAAA,MAAAI,EAAA,QAAAA,EAAA,SAAA,QAAA,GAAAH,EAAA,MAAAC,GAYdn2B,KAAK81B,YACR91B,KAAK81B,UAAYnB,EAAiBgB,cAClCnzB,SAASwzB,OAASh2B,KAAK22B,cAAcF,EAAoBz2B,KAAK81B,UAAWc,IAG7E,OAAO52B,KAAK81B,4CAaZ,OAHK91B,KAAK62B,aACR72B,KAAK62B,WAAalC,EAAiBgB,eAE9B31B,KAAK62B,2CAgCZ,OACE7xB,GAAI2vB,EAAiBmC,UACrBC,KAAM,kCAQR,OAEE/xB,GAAI2vB,EAAiBqC,SAGrBC,GAAI3K,UAAU4K,MACdC,WAAYn1B,OAAOsqB,UAAUC,UAG7B6K,OAAQp1B,OAAOuO,SAAS0gB,SAIxBoG,WAAY1C,EAAiB0C,WAE7BC,eAAiBC,YAAYC,gBAAgBtL,YAAYuL,cAAgBF,YAAYC,gBAAgBtL,YAAYuL,cAAgB,GAEjIva,SAAUqa,YAAYC,gBAAgBta,SAEtCwa,gBAAiBH,YAAYC,gBAAgBpN,QAC7CuN,QAAUJ,YAAYC,gBAAgBI,0BAA0Bzd,OAASod,YAAYC,gBAAgBI,0BAA0Bzd,OAAS,uCAuBpH,IACdiS,EAAWmL,YAAYC,gBAAgBtL,YAAvCE,OAGJyL,EAAS,GAYb,MAVI,UAAUzmB,KAAKgb,GACjByL,EAAS,UACA,SAASzmB,KAAKgb,GACvByL,EAAS,SACA,WAAWzmB,KAAKgb,GACzByL,EAAS,WACA,UAAUzmB,KAAKgb,KACxByL,EAAS,WAGX,GAAAjtB,OAbe,wBAafA,OAAmBitB,YAwCjBpB,EAAqB,wCAMrBG,EAAuB,8KAgB7BjC,EAAiBU,SARH,8BAedV,EAAiBmB,UAAY,GAO7BnB,EAAiBkC,WAAa,OCpMTiB,cAQnB,SAAAA,EAAYC,GAA4B,IAAAjJ,EAAA9uB,KAsCtC,+FAtCsCg4B,CAAAh4B,KAAA83B,GAItC93B,KAAKkd,SAAW,KAMhBld,KAAK43B,6BACD,8BAA+BG,IACjC/3B,KAAK43B,0BAA4BG,EAA2BH,2BAQ9D53B,KAAKi4B,qBAAuB,GACxB,yBAA0BF,IAC5B/3B,KAAK43B,0BAA0B9e,IAAMif,EAA2BE,qBAChE3xB,QAAQ+W,KAAK,+EACV0a,EAA2BE,wBAOhCj4B,KAAKoqB,QAAW,YAAa2N,EAA6BA,EAA2B3N,QAAU,GAM/FpqB,KAAKwL,OAAS,OACV,WAAYusB,GAGd,MAAM,IAAI9qB,MAAM,+DAFhBjN,KAAKwL,OAASusB,EAA2BvsB,OAQvC,eAAgBusB,IAClB/3B,KAAKk4B,WAAaH,EAA2BG,YAM/Cl4B,KAAKm4B,2BACD,4BAA6BJ,IAC/B/3B,KAAKm4B,wBAA0BJ,EAA2BI,yBAO5Dn4B,KAAKksB,eACD,gBAAiB6L,IACnB/3B,KAAKksB,YAAc6L,EAA2B7L,aAMhDlsB,KAAKqiB,UAAW,EACG,MAAfriB,KAAKwL,SACPxL,KAAKqiB,SAAkD,WAAtCriB,KAAKwL,OAAO4T,QAAQ+C,eAOvCniB,KAAKo4B,aAAe,KAChB,iBAAkBL,IACpB/3B,KAAKo4B,aAAeL,EAA2BK,cAMjDp4B,KAAKstB,KAAM,EACP,QAASyK,IACX/3B,KAAKstB,IAAMyK,EAA2BzK,KAMxCttB,KAAKq4B,iBAAkB,EACnB,oBAAqBN,IACvB/3B,KAAKq4B,gBAAkBN,EAA2BM,iBAQpDr4B,KAAKs4B,uBAAwB,EAM7Bt4B,KAAKu4B,KAAO,KAMZv4B,KAAKyX,UAAY,IAAIF,EAGjB,0BAA2BwgB,GAC7BD,EAAiBU,sBAAsBjqB,QAAQ,SAACwW,GAC9C,GAAIA,KAAagT,EAA2BS,sBAAuB,CAEjE,IAAM77B,EAAQo7B,EAA2BS,sBAAsBzT,GAC7B,IAA9B3oB,OAAOkS,KAAK3R,GAAO6B,SACrBswB,EAAK/J,GAAapoB,4FAUrB,IAAA87B,EAAAz4B,KAELA,KAAKkd,SAAWld,KAAK04B,cAIrB,IAAMhhB,EAAWH,EAAUohB,YAAY,SAAU,WAC/CF,EAAKG,iBAAiBH,EAAKN,2BAI7B,IAAqE,IAAjEn4B,KAAK43B,0BAA0B9e,IAAIpQ,QAAQ,iBAAyB,CACtE,IAAMid,EAAM3lB,KAAK43B,0BAA0B9e,IACrCqB,EAASnC,EAAgB6gB,6BAA6BlT,GAC5D3lB,KAAK43B,0BAA0Bzd,OAASA,EACxC,IAAM2e,EAAqB94B,KAAK43B,0BAA0B9e,IAAIpQ,QAAQ,iBAChEqwB,EAAY/4B,KAAK43B,0BAA0B9e,IAAI1R,UAAU,EAAG0xB,GAClE94B,KAAK43B,0BAA0B9e,IAAMigB,EAGvC,IAAIC,EAAuBh5B,KAAK43B,0BAA0B9e,IAC1DkgB,EAA6D,IAAtCA,EAAqBtwB,QAAQ,MAAuD,IAAzCswB,EAAqBtwB,QAAQ,QAC3FswB,EACAzlB,EAAK2G,eAAela,KAAKi5B,UAAWD,GAExCh5B,KAAK43B,0BAA0B9e,IAAMkgB,EAErC,IAAME,KACNA,EAAetB,0BAA4B53B,KAAK43B,0BAChD53B,KAAKm5B,QAAQ,IAAIC,GAAKF,IACtBl5B,KAAKu4B,KAAKc,YAAY3hB,GACtB1X,KAAKu4B,KAAKrb,SAAWld,KAAKkd,SAG1Bld,KAAKu4B,KAAKe,OAEVt5B,KAAKu4B,KAAKgB,eAAev5B,KAAKksB,+CAQ9B,QAA+B,IAApBlsB,KAAKk4B,WACd,MAAM,IAAIjrB,MAAM,2CAIlB,IAFA,IAAMusB,EAAMh3B,SAASmsB,qBAAqB,UACtCvW,EAAO,GACF1c,EAAI,EAAGA,EAAI89B,EAAIh7B,OAAQ9C,GAAK,EAAG,CACtC,IAAMiJ,EAAI60B,EAAI99B,GAAGsqB,IAAI1R,YAAYtU,KAAKk4B,YAClCvzB,GAAK,IACPyT,EAAOohB,EAAI99B,GAAGsqB,IAAI3mB,OAAO,EAAGsF,EAAI,IAGpC,OAAOyT,uCAQP,OAAOpY,KAAKoqB,4CAOFlN,GACVld,KAAKkd,SAAWA,kCAOVqb,GACNv4B,KAAKu4B,KAAOA,EACZA,EAAKkB,oBAAoBz5B,wCAQzB,OAAOA,KAAKu4B,uCAOJ/sB,GACRxL,KAAKwL,OAASA,EACdxL,KAAKqiB,SAAkD,WAAtCriB,KAAKwL,OAAO4T,QAAQ+C,sDAOvBiW,GACdp4B,KAAKo4B,aAAeA,iDAQpBp4B,KAAKu4B,KAAKmB,kBAAkB7M,cAAe,EAC3C7sB,KAAKu4B,KAAKoB,gBAAgB35B,KAAKwL,OAAQxL,KAAKqiB,8DAQ5CriB,KAAKu4B,KAAKmB,kBAAkB7M,cAAe,EAC3C7sB,KAAKu4B,KAAKoB,gBAAgB35B,KAAKwL,OAAQxL,KAAKqiB,gDAWhCnP,GAIZ,IAAI0mB,EACArX,EAJAviB,KAAK65B,mBACP3mB,EAAS/R,IAAIC,MAAMgrB,OAAO0N,KAAKC,YAAY7e,cAAchI,EAAQ,0CAA2C7I,KAAKC,UAAUtK,KAAK65B,oBAM9H75B,KAAKqiB,UACPuX,EAAe55B,KAAKwL,OAAOgX,cAC3BD,EAAeviB,KAAKwL,OAAOgX,gBAE3BoX,EAAe55B,KAAKwL,OACpB+W,EAAevgB,QAGjB,IAAItC,EAAMM,KAAKu4B,KAAKyB,oBAAoB9mB,EAVhB,MAYxB,OAAKxT,IAILA,EAAMM,KAAKi6B,cAAcL,EAAcrX,EAAc7iB,EAAIwT,OAAQxT,EAAIooB,kBAM9D9nB,KAAKu4B,KAAK2B,mBAAmBx6B,EAAIk6B,aAAcl6B,EAAI6iB,aAAc7iB,EAAI+c,KAAM/c,EAAIob,OAT7E,yCAoBG8e,EAAcrX,EAAcrP,EAAQ4U,GAChD,OAAO9nB,KAAKu4B,KAAK0B,cAAcL,EAAcrX,EAAcrP,EAAQ4U,0CAQnE,OAAI9nB,KAAKqiB,UACPriB,KAAKwL,OAAOgX,cAAcC,QACnBziB,KAAKwL,OAAOgX,cAAcW,iBAEnCnjB,KAAKwL,OAAOiX,QACLzgB,OAAOmhB,oDAYJ,IAAAgX,EAAAn6B,KACJud,EAAcvd,KAAKqiB,SAAWriB,KAAKwL,OAAOgX,cAAchgB,SAAWxC,KAAKwL,OAC9E+H,EAAK6mB,iBACH7c,EACA,SAACiB,EAAS5G,GACRuiB,EAAKhc,mBAAmBK,EAAS5G,IAEnC,SAAC4G,EAAS5G,GACRuiB,EAAK/b,iBAAiBI,EAAS5G,IAEjC,SAAC4G,EAAS5G,GACRuiB,EAAK9b,eAAeG,EAAS5G,gDAUhB4G,GACjB,GAAuC,QAAnCA,EAAQqB,SAASO,cAAyB,CAC5CpgB,KAAKu4B,KAAK8B,mBAAmB1K,UAC7B,IAAMpK,EAA4BzO,EAAcva,IAAI,yBACpD,GAAIiiB,EAAQgH,aAAaD,GAA4B,CACnD,IAAM5R,EAAe6K,EAAQmB,aAAa4F,GAC1CvlB,KAAKu4B,KAAK8B,mBAAmBC,OAAO3mB,GAElCJ,EAAKmL,cAAcF,EAAS1H,EAAcva,IAAI,qBAChDyD,KAAKu4B,KAAKmB,kBAAkBa,cAAgB/b,EAC5Cxe,KAAKu4B,KAAKmB,kBAAkB7M,cAAe,EAC3C7sB,KAAKw6B,uEASM,IAAAC,EAAAz6B,KACXA,KAAKs4B,uBACP1K,WAAW,WACT3I,EAAMyV,eAAeD,EAAKnC,wBACzB,6CASU9Z,GACwB,QAAnCA,EAAQqB,SAASO,eACf7M,EAAKmL,cAAcF,EAAS1H,EAAcva,IAAI,qBAChDyD,KAAKs4B,sBAAwB9Z,yCAYjC,OAAOxe,KAAK26B,kEAiBZ,OAPIrO,UAAUsO,aACDtO,UAAUsO,aAAaxzB,UAAU,EAAG,GACtCklB,UAAUpP,SACRoP,UAAUpP,SAAS9V,UAAU,EAAG,GAEhC,gDAWI,IAAAyzB,EAAA76B,KAGX0X,EAAWH,EAAUohB,YAAY,gBAAiB,WACtDkC,EAAKC,UAAUD,EAAKrvB,UAEtBxL,KAAKyX,UAAUQ,IAAIP,+FAqBCkE,EAAUC,6CAUfjE,EAAO5V,EAAQkR,4CAShB1H,EAAQ6W,uDAIlBkV,YAAYC,kBACdD,YAAYC,gBAAgBe,KAAKmB,kBAAkBa,cAAgB,eAOzEzC,GAAiBx6B,UAAUy9B,2BAAwBvxB,EACnDsuB,GAAiBx6B,UAAU09B,sBAAmBxxB,EAC9CsuB,GAAiBx6B,UAAUylB,qBAAkBvZ,EAM7CsuB,GAAiBU,uBAAyB,4BAA6B,oBCthBxD,IAAAyC,GAAA,ysDCAAC,GAAA,kuDCAAC,GAAA,yuDCAAC,GAAA,mqDCAAC,GAAA,+zCCAAC,GAAA,m0CCAAC,GAAA,qwDCAAC,GAAA,+iEC+BMC,cAQnB,SAAAA,EAAYC,GAAuB,IAAA5M,EAAA9uB,KAAA27B,GAAA37B,KAAAy7B,GACjCz7B,KAAKqf,WAAaqc,EAGlB,IAAMrP,EAAKC,UAAUC,UAAUnM,cACzBqM,EAAYJ,EAAG3jB,QAAQ,YAAc,EACrCgkB,EAAQb,EAAea,QAC7B1sB,KAAK47B,uBAAwB,EAC7B57B,KAAK67B,gBAA0C,IAAzBxP,EAAG3jB,QAAQ,SAAkB,IAAM,KACzD1I,KAAK87B,aAAL,OAAAlxB,OAA2B5K,KAAK67B,gBAEhC,IAAME,EAAc/5B,OAAOg6B,WACrBC,EAAej6B,OAAOk6B,YAEtBC,EAAYJ,EAAcE,EAC1BG,EAAWL,EAAcE,EAGzBI,EAAeF,GAAan8B,KAAKqf,WAAWkH,OAAS0V,EACrDK,EAAaF,GAAYp8B,KAAKqf,WAAWgH,MAAQ0V,EACjDQ,EAAWF,GAAeC,EAGhCt8B,KAAKw8B,WAAah6B,SAASurB,uBAAuB,6BAA6BvvB,OAO/EwB,KAAKwsB,kBACHiQ,YAAaN,EAAY,YAAc,UACvC1P,UAAAA,EACAC,MAAAA,EACA6P,SAAAA,EACAG,WAAYH,IAAa7P,IAAUD,GAGrCzsB,KAAK+W,YACH4lB,SAAS,EACTC,MAAO,GACPC,cAAe,GACftgB,UAAYugB,OAAQ,EAAGC,MAAO,IAC9BC,MAAQzW,OAAQ,IAAKF,MAAO,MAY9BrmB,KAAKi9B,4BAA8B,KAEnC,IAAI5d,GACJA,MAAmB,qBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5Crf,KAAK6yB,QAAUtf,EAAKzF,cAAc,MAAOuR,IAEzCA,MACU,MAAS,sBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5Crf,KAAKm9B,SAAW5pB,EAAKzF,cAAc,MAAOuR,IAE1CA,MACU,MAAS,kBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5Crf,KAAKmwB,MAAQ5c,EAAKzF,cAAc,MAAOuR,GACvCrf,KAAKmwB,MAAM9pB,UAAY,IAEvBgZ,MACU,MAAS,yBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5CA,EAAW8Q,MAAQnT,EAAczgB,IAAI,SACrC8iB,EAAWrS,SACXhN,KAAKo9B,SAAW7pB,EAAKzF,cAAc,IAAKuR,GACxCrf,KAAKo9B,SAAS5uB,aAAa,OAAQ,UAEnC,IAAI6uB,EAAY,0EAAAzyB,OAA6E5I,OAAOgI,KAAKszB,IAAzF,KACZC,EAAU,0EAAA3yB,OAA6E5I,OAAOgI,KAAKwzB,IAAzF,KACdx9B,KAAKo9B,SAAS5uB,aAAa,QAAS6uB,GACpCr9B,KAAKo9B,SAAS5uB,aAAa,cAA3B,iBAAA5D,OAA2D2yB,EAA3D,OACAv9B,KAAKo9B,SAAS5uB,aAAa,aAA3B,iBAAA5D,OAA0DyyB,EAA1D,QAEAhe,MACU,MAAS,yBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5CA,EAAW8Q,MAAQnT,EAAczgB,IAAI,mBACrCyD,KAAKy9B,SAAWlqB,EAAKzF,cAAc,IAAKuR,GACxCrf,KAAKy9B,SAASjvB,aAAa,OAAQ,UACnC6uB,EAAY,0EAAAzyB,OAA6E5I,OAAOgI,KAAK0zB,IAAzF,KACZH,EAAU,0EAAA3yB,OAA6E5I,OAAOgI,KAAK2zB,IAAzF,KACV39B,KAAKy9B,SAASjvB,aAAa,QAAS6uB,GACpCr9B,KAAKy9B,SAASjvB,aAAa,cAA3B,iBAAA5D,OAA2D2yB,EAA3D,OACAv9B,KAAKy9B,SAASjvB,aAAa,aAA3B,iBAAA5D,OAA0DyyB,EAA1D,QAGAhe,MACU,MAAS,4BACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5CA,EAAW8Q,MAAQnT,EAAczgB,IAAI,cACrCyD,KAAK49B,YAAcrqB,EAAKzF,cAAc,IAAKuR,GAC3Crf,KAAK49B,YAAYpvB,aAAa,OAAQ,UACtC6uB,EAAY,wGAAAzyB,OAA2G5I,OAAOgI,KAAK6zB,IAAvH,KACZN,EAAU,wGAAA3yB,OAA2G5I,OAAOgI,KAAK8zB,IAAvH,KACV99B,KAAK49B,YAAYpvB,aAAa,QAAS6uB,GACvCr9B,KAAK49B,YAAYpvB,aAAa,cAA9B,iBAAA5D,OAA8D2yB,EAA9D,OACAv9B,KAAK49B,YAAYpvB,aAAa,aAA9B,iBAAA5D,OAA6DyyB,EAA7D,QAEAhe,MACU,MAAS,4BACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5CA,EAAW8Q,MAAQnT,EAAczgB,IAAI,YACrCyD,KAAK+9B,YAAcxqB,EAAKzF,cAAc,IAAKuR,GAC3Crf,KAAK+9B,YAAYvvB,aAAa,OAAQ,UACtC6uB,EAAY,wGAAAzyB,OAA2G5I,OAAOgI,KAAKg0B,IAAvH,KACZT,EAAU,wGAAA3yB,OAA2G5I,OAAOgI,KAAKi0B,IAAvH,KACVj+B,KAAK+9B,YAAYvvB,aAAa,QAAS6uB,GACvCr9B,KAAK+9B,YAAYvvB,aAAa,cAA9B,iBAAA5D,OAA8D2yB,EAA9D,OACAv9B,KAAK+9B,YAAYvvB,aAAa,aAA9B,iBAAA5D,OAA6DyyB,EAA7D,QAEAhe,MACU,MAAS,4BACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5CA,EAAW6e,KAAO,SAClBl+B,KAAKsT,UAAYC,EAAKzF,cAAc,MAAOuR,GAC3Crf,KAAKsT,UAAU9E,aAAa,iBAAkB,uBAE9C6Q,MACU,MAAS,oBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5Crf,KAAKm+B,QAAU5qB,EAAKzF,cAAc,MAAOuR,IAEzCA,MACU,MAAS,wBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5Crf,KAAKqtB,iBAAmB9Z,EAAKzF,cAAc,MAAOuR,IAElDA,MACU,MAAS,qBACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5Crf,KAAKo+B,SAAW7qB,EAAKzF,cAAc,MAAOuR,IAE1CA,MACU,MAAS,8BACnBA,EAAWra,GAAKhF,KAAKk9B,aAAa7d,EAAU,OAC5Crf,KAAKq+B,gBAAkB9qB,EAAKzF,cAAc,MAAOuR,GAGjDrf,KAAK6wB,aAAe7wB,KAAKs+B,oBAErBt5B,GAAIhF,KAAKk9B,aAAa,2BACtBlK,MAAO,0BACP3sB,UAAW2W,EAAczgB,IAAI,WAE/ByD,KAAKu+B,aAAarhC,KAAK8C,OAGzBA,KAAK8wB,aAAe9wB,KAAKs+B,oBAErBt5B,GAAIhF,KAAKk9B,aAAa,2BACtBlK,MAAO,0BACP3sB,UAAW2W,EAAczgB,IAAI,WAE/ByD,KAAKwwB,aAAatzB,KAAK8C,OAGzBA,KAAKw+B,eAAiB,KAGtB,IAAMC,GACJnL,aAActW,EAAczgB,IAAI,UAChC02B,aAAcjW,EAAczgB,IAAI,SAChCo2B,QAAS3V,EAAczgB,IAAI,wBAGvBk2B,GACJiB,cAAe,WAAQ5E,EAAK/S,SAC5B0X,eAAgB,WAAQ3E,EAAKrM,UAGzBic,GACJlM,eAAgBxyB,KAAKsT,UACrBmf,UAAAA,EACArV,QAASqhB,GAGXz+B,KAAK2+B,MAAQ,IAAItM,EAAaqM,GAM9B1+B,KAAKstB,KAAM,EACP,QAASttB,KAAKqf,aAChBrf,KAAKstB,IAAMttB,KAAKqf,WAAWiO,KAI7BttB,KAAKguB,4BAA8BhuB,KAAKguB,4BAA4B9wB,KAAK8C,MACzEA,KAAKiuB,4BAA8BjuB,KAAKiuB,4BAA4B/wB,KAAK8C,2DAQzDw+B,GAChBx+B,KAAKw+B,eAAiBA,8CAQtB,OAAOx+B,KAAKw+B,2DAUoC,IAArCx+B,KAAKw+B,eAAeD,cAC7Bv+B,KAAKw+B,eAAeD,eAEtBv+B,KAAK+b,oDASyC,IAAnC/b,KAAKw+B,eAAeI,WAC7B5+B,KAAK+b,QACK/b,KAAKw+B,eAAeI,aAG9B5+B,KAAK6+B,mBAFL7+B,KAAK+b,mDAgBUhF,EAAYe,GAc7B,OAAO,IAdgC,WAErC,SAAAgnB,IAAcnD,GAAA37B,KAAA8+B,GACZ9+B,KAAKwe,QAAUhc,SAASsL,cAAc,UACtC9N,KAAKwe,QAAQxZ,GAAK+R,EAAW/R,GAC7BhF,KAAKwe,QAAQtI,UAAYa,EAAU,MACnC/W,KAAKwe,QAAQnY,UAAY0Q,EAAW1Q,UACpCkN,EAAK+K,SAASte,KAAKwe,QAAS,QAAS1G,GAPF,OAAAinB,GAAAD,IAAA7hC,IAAA,aAAAN,MAAA,WAWnC,OAAOqD,KAAKwe,YAXuBsgB,EAAA,GAchC,CAAiB/nB,EAAYe,GAAUvM,8CA8B9CvL,KAAKm9B,SAAS7vB,YAAYtN,KAAKo9B,UAC/Bp9B,KAAKm9B,SAAS7vB,YAAYtN,KAAKy9B,UAC/Bz9B,KAAKm9B,SAAS7vB,YAAYtN,KAAK49B,aAC/B59B,KAAKm9B,SAAS7vB,YAAYtN,KAAK+9B,aAC/B/9B,KAAKm9B,SAAS7vB,YAAYtN,KAAKmwB,OAE3BnwB,KAAKwsB,iBAAiBkQ,WACxB18B,KAAKsT,UAAUhG,YAAYtN,KAAKm9B,UAGlCn9B,KAAKm+B,QAAQ7wB,YAAYtN,KAAKqtB,kBAC9BrtB,KAAKm+B,QAAQ7wB,YAAYtN,KAAKo+B,UAE9Bp+B,KAAKo+B,SAAS9wB,YAAYtN,KAAKq+B,iBAE/Br+B,KAAKq+B,gBAAgB/wB,YAAYtN,KAAK6wB,cACtC7wB,KAAKq+B,gBAAgB/wB,YAAYtN,KAAK8wB,cAEtC9wB,KAAKsT,UAAUhG,YAAYtN,KAAKm+B,SAGhCn+B,KAAKg/B,uBAELx8B,SAAS0yB,KAAK5nB,YAAYtN,KAAKsT,WAC/B9Q,SAAS0yB,KAAK5nB,YAAYtN,KAAK6yB,SAE3B7yB,KAAKwsB,iBAAiBkQ,WAExB18B,KAAKi/B,2BACLj/B,KAAKk/B,sBAELl/B,KAAKm/B,eAEDroB,EAAcva,IAAI,0BACpByD,KAAKo/B,YAEEp/B,KAAKwsB,iBAAiBC,UAC/BzsB,KAAKq/B,2BACIr/B,KAAKwsB,iBAAiBE,OAC/B1sB,KAAKs/B,uBAGoB,MAAvBt/B,KAAKw+B,gBACPx+B,KAAKw+B,eAAee,OAAOv/B,MAG7BA,KAAK+W,WAAWuC,MAAO,EACvBtZ,KAAK+W,WAAW4lB,SAAU,EAGtB38B,KAAKytB,UACPztB,KAAKsT,UAAUtG,MAAM+vB,MAArB,GAAAnyB,OAAgC5I,OAAOw9B,WAAax/B,KAAKy/B,eAAiBz/B,KAAKsT,UAAUosB,YAAzF,MACA1/B,KAAKsT,UAAU4C,WAAa,gEAS9BlW,KAAK2/B,UAAYn9B,SAASsL,cAAc,OACxC9N,KAAK2/B,UAAUzpB,UAAY,2BAC3BlW,KAAK2/B,UAAUt5B,UAAY,IAE3BrG,KAAK4/B,UAAYp9B,SAASsL,cAAc,OACxC9N,KAAK4/B,UAAU1pB,UAAY,0BAE3BlW,KAAKsT,UAAUhG,YAAYtN,KAAK2/B,WAChC3/B,KAAKm9B,SAAS7vB,YAAYtN,KAAK4/B,WAE/BrsB,EAAK+K,SAASte,KAAK2/B,UAAW,YAAa3/B,KAAK6/B,sBAAsB3iC,KAAK8C,OAC3EuT,EAAK+K,SAASte,KAAK4/B,UAAW,YAAa5/B,KAAK8/B,sBAAsB5iC,KAAK8C,qDAOvD+/B,GACpB//B,KAAKggC,2BAA2BD,GAAY,iDAOxBA,GACpB//B,KAAKggC,2BAA2BD,GAAY,sDAOnBA,EAAYE,GAErC1sB,EAAK2sB,SAAS19B,SAAS0yB,KAAM,gBAC7B3hB,EAAK2sB,SAASlgC,KAAK6yB,QAAS,sBAC5B7yB,KAAKmgC,kBACHhhC,EAAGa,KAAKogC,YAAYL,GAAYM,EAChCrhC,EAAGgB,KAAKogC,YAAYL,GAAYO,GAGlCtgC,KAAKugC,aAAe1/B,SAASb,KAAKsT,UAAUtG,MAAMqZ,MAAO,IACzDrmB,KAAKwgC,cAAgB3/B,SAASb,KAAKsT,UAAUtG,MAAMuZ,OAAQ,IACtD0Z,EAIHjgC,KAAKygC,WAAY,GAHjBzgC,KAAK0gC,aAAe7/B,SAASb,KAAKsT,UAAUtG,MAAM+vB,MAAO,IACzD/8B,KAAK2gC,cAAgB9/B,SAASb,KAAKsT,UAAUtG,MAAM8vB,OAAQ,KAIxD98B,KAAK0gC,eACR1gC,KAAK0gC,aAAe,GAEjB1gC,KAAK2gC,gBACR3gC,KAAK2gC,cAAgB,GAGvBn+B,SAAS0yB,KAAKloB,MAAM,eAAiB,sCAOhC,IAAAyrB,EAAAz4B,KAEL,IACE20B,EAAiBnb,OACfonB,WAAW,IAAIjiC,MAAOkiC,SACtBC,MAAO,IACPC,MAAO,OACPpO,QAAS,8BAER2C,KAAK,SAAC3b,MAKT,MAAO4b,IAMTv1B,KAAKghC,YAAY,cApBZ,IAsBGtU,EAAU1sB,KAAKwsB,iBAAfE,MACAD,EAAczsB,KAAKwsB,iBAAnBC,UACA8P,EAAav8B,KAAKwsB,iBAAlB+P,SAsCR,IArCI7P,GAASD,GAAa8P,KAExBv8B,KAAKihC,sBACLjhC,KAAKkhC,oBAELtT,WAAW,WAAQ6K,EAAK5K,gBAAmB,MAIxC7tB,KAAK+W,WAAW4lB,SAKd38B,KAAK+W,WAAWuC,OACnBtZ,KAAK+W,WAAWuC,MAAO,EAIlBtZ,KAAKwsB,iBAAiBC,WAAczsB,KAAKwsB,iBAAiBE,OAC7D1sB,KAAKmhC,gBAKLnhC,KAAKwsB,iBAAiBkQ,WAAa5lB,EAAcva,IAAI,0BACvDyD,KAAKo/B,WAKHp/B,KAAKwsB,iBAAiBE,QACxB1sB,KAAK47B,uBAAwB,EAC7B57B,KAAKohC,mBAAL,GAAAx2B,OAA2B,IAAM5K,KAAK67B,mBAvBxC77B,KAAKhD,SA2BF6uB,EAAeoB,iBAMlBjtB,KAAKw+B,eAAe6C,OAAOrhC,UANS,CACpC,IAAM0X,EAAWH,EAAUohB,YAAY,SAAU,WAC/CF,EAAK+F,eAAe6C,OAAO5I,KAE7Bz4B,KAAKw+B,eAAenF,YAAY3hB,oCAYlCogB,GAAiBwJ,yBACjBthC,KAAKghC,YAAY,iBACjBhhC,KAAKghC,YAAY,iBACjBhhC,KAAKghC,YAAY,aACjBhhC,KAAKkgC,SAAS,cACdlgC,KAAKuhC,sBACLvhC,KAAKwhC,sBACLxhC,KAAK+W,WAAWuC,MAAO,gDAQvB,IAAImoB,EAAej/B,SAASmJ,cAAc,uBAEpC+1B,GAAwB,iBAAkB,iBAAkB,kBAC5DC,GAA8B,MAAO,MAAO,OAC5CC,EAAkB,SAACC,EAAiBC,GACxC,IAAMC,EAAcF,EAAgBliB,aAAa,WAEjD,GAAIoiB,EAAa,CAIf,IAHA,IAAMC,EAAYD,EAAYrjC,MAAM,KAChCujC,EAAmB,GACjBC,KACGxmC,EAAI,EAAGA,EAAIsmC,EAAUxjC,OAAQ9C,GAAK,EAAG,CAG5C,IAFA,IAAIymC,GAAiB,EACjBx9B,EAAI,GACAw9B,GAAkBx9B,EAAIm9B,EAAatjC,QACrCwjC,EAAUtmC,GAAGgN,QAAQo5B,EAAan9B,MACpCw9B,GAAiB,GAEnBx9B,GAAK,EAGFw9B,GACHD,EAASx4B,KAAKs4B,EAAUtmC,IAI5B,IAAK,IAAIA,EAAI,EAAGA,EAAIomC,EAAatjC,OAAQ9C,GAAK,EAAG,CAC/C,IAAM0mC,EAAON,EAAapmC,GAAKimC,EAA2BjmC,GAC1DumC,GAA0B,IAANvmC,EAAU0mC,EAAV,IAAAx3B,OAAqBw3B,GAG3C,IAAK,IAAI1mC,EAAI,EAAGA,EAAIwmC,EAAS1jC,OAAQ9C,GAAK,EACxCumC,GAAgB,IAAAr3B,OAAQs3B,EAASxmC,IAEnCmmC,EAAgBrzB,aAAa,UAAWyzB,GAExCJ,EAAgBrzB,aAAa,UAAW,IACxCqzB,EAAgBrzB,aAAa,UAAWuzB,QAExCF,EAAgBrzB,aAAa,UAAW,2DACxCqzB,EAAgB5hB,gBAAgB,YAI/BwhB,EAMHG,EAAgBH,EAAcC,IAL9BD,EAAej/B,SAASsL,cAAc,QACtCtL,SAASmsB,qBAAqB,QAAQ,GAAGrhB,YAAYm0B,GACrDG,EAAgBH,EAAcC,GAC9BD,EAAajiC,sDAUfQ,KAAKi9B,6BACHoF,kBAAmB7/B,SAAS0yB,KAAKloB,MAAMuP,SAAW/Z,SAAS0yB,KAAKloB,MAAMuP,SAAW,GACjF+lB,kBAAmB9/B,SAAS0yB,KAAKloB,MAAMu1B,SAAW//B,SAAS0yB,KAAKloB,MAAMu1B,SAAW,GACjFC,kBAAmBhgC,SAASigC,gBAAgBz1B,MAAMu1B,SAAW//B,SAASigC,gBAAgBz1B,MAAMu1B,SAAW,GACvGG,cAAe1gC,OAAO2gC,QACtBC,cAAe5gC,OAAO6gC,uDAQxB,GAAI7iC,KAAKi9B,4BAA6B,CACpCz6B,SAAS0yB,KAAKloB,MAAMuP,SAAWvc,KAAKi9B,4BAA4BoF,kBAChE7/B,SAAS0yB,KAAKloB,MAAMu1B,SAAWviC,KAAKi9B,4BAA4BqF,kBAChE9/B,SAASigC,gBAAgBz1B,MAAMu1B,SAAWviC,KAAKi9B,4BAA4BuF,kBAHvC,IAI5BE,EAAkB1iC,KAAKi9B,4BAAvByF,cACAE,EAAkB5iC,KAAKi9B,4BAAvB2F,cACR5gC,OAAO8gC,SAASJ,EAAeE,GAC/B5iC,KAAKi9B,4BAA8B,uCAUrC,OAAI3Q,UAAUC,UAAUwW,OAAO,UAAY,GAAKzW,UAAUC,UAAUwW,OAAO,aAAe,GAAKzW,UAAUC,UAAUwW,OAAO,UAAY,kCAWtI,MAAiC,OAA7B/iC,KAAKqf,WAAWnC,UAAkD,OAA7Bld,KAAKqf,WAAWnC,UAGlDld,KAAKstB,qCAOLpX,GACP3C,EAAK2sB,SAASlgC,KAAK6yB,QAAS3c,GAC5B3C,EAAK2sB,SAASlgC,KAAKm9B,SAAUjnB,GAC7B3C,EAAK2sB,SAASlgC,KAAK6yB,QAAS3c,GAC5B3C,EAAK2sB,SAASlgC,KAAKsT,UAAW4C,GAC9B3C,EAAK2sB,SAASlgC,KAAKqtB,iBAAkBnX,GACrC3C,EAAK2sB,SAASlgC,KAAKy9B,SAAUvnB,GAC7B3C,EAAK2sB,SAASlgC,KAAK+9B,YAAa7nB,GAChC3C,EAAK2sB,SAASlgC,KAAK49B,YAAa1nB,GAChC3C,EAAK2sB,SAASlgC,KAAKm+B,QAASjoB,uCAOlBA,GACV3C,EAAKytB,YAAYhhC,KAAK6yB,QAAS3c,GAC/B3C,EAAKytB,YAAYhhC,KAAKm9B,SAAUjnB,GAChC3C,EAAKytB,YAAYhhC,KAAK6yB,QAAS3c,GAC/B3C,EAAKytB,YAAYhhC,KAAKsT,UAAW4C,GACjC3C,EAAKytB,YAAYhhC,KAAKqtB,iBAAkBnX,GACxC3C,EAAKytB,YAAYhhC,KAAKy9B,SAAUvnB,GAChC3C,EAAKytB,YAAYhhC,KAAK+9B,YAAa7nB,GACnC3C,EAAKytB,YAAYhhC,KAAK49B,YAAa1nB,GACnC3C,EAAKytB,YAAYhhC,KAAKm+B,QAASjoB,sDAO/BlW,KAAKkgC,SAAS,qBACdlgC,KAAKgjC,2DAOLhjC,KAAKkgC,SAAS,qBACdl+B,OAAO+b,iBAAiB,SAAU/d,KAAKijC,qCAAqC/lC,KAAK8C,sDAOjFA,KAAKkgC,SAAS,iBAEdl+B,OAAO+b,iBAAiB,SAAU/d,KAAKkjC,iCAAiChmC,KAAK8C,8CAO/C,cAA1BA,KAAK+W,WAAW6lB,MAElB58B,KAAKo/B,WAC8B,cAA1Bp/B,KAAK+W,WAAW6lB,OAEzB58B,KAAK+W,WAAW6lB,MAAQ58B,KAAK+W,WAAW8lB,cACxC78B,KAAK+W,WAAW8lB,cAAgB,GAChC78B,KAAKmjC,YAELnjC,KAAKgjC,wCAQPhjC,KAAK+W,WAAW8lB,cAAgB78B,KAAK+W,WAAW6lB,MAChD58B,KAAK+W,WAAW6lB,MAAQ,QACxB58B,KAAKghC,YAAY,iBACjBhhC,KAAK+9B,YAAY5N,MAAQnT,EAAczgB,IAAI,YAC3CyD,KAAKghC,YAAY,iBACjBhhC,KAAKkgC,SAAS,aAGd,IAAM7C,EAAY,wGAAAzyB,OAA2G5I,OAAOgI,KAAKg0B,IAAvH,KACZT,EAAU,wGAAA3yB,OAA2G5I,OAAOgI,KAAKi0B,IAAvH,KAChBj+B,KAAK+9B,YAAYvvB,aAAa,QAAS6uB,GACvCr9B,KAAK+9B,YAAYvvB,aAAa,cAA9B,iBAAA5D,OAA8D2yB,EAA9D,OACAv9B,KAAK+9B,YAAYvvB,aAAa,aAA9B,iBAAA5D,OAA6DyyB,EAA7D,OAEAr9B,KAAKojC,8BAEyB,IAAnBpjC,KAAK2/B,gBAAuD,IAAnB3/B,KAAK4/B,WACvD5/B,KAAKqjC,6BAIPrjC,KAAKg/B,uBACLh/B,KAAKsjC,sBACLtjC,KAAKujC,mBACLvjC,KAAKyiB,2CAUL,GAFAziB,KAAKuhC,sBACLvhC,KAAKmwB,MAAMnjB,MAAMw2B,OAAS,UACI,cAA1BxjC,KAAK+W,WAAW6lB,OAA2D,UAAlC58B,KAAK+W,WAAW8lB,cAC3D78B,KAAKgjC,aACA,GAA8B,cAA1BhjC,KAAK+W,WAAW6lB,OAA2D,cAAlC58B,KAAK+W,WAAW8lB,cAClE78B,KAAKo/B,eACA,CAELp/B,KAAKsT,UAAUtG,MAAMuZ,OAAS,OAC9BvmB,KAAKsT,UAAUtG,MAAMqZ,MAAQ,QAC7BrmB,KAAKsT,UAAUtG,MAAM8vB,OAAS,MAC9B98B,KAAKsT,UAAUtG,MAAM+vB,MAAQ,OAE7B/8B,KAAKyjC,kBACLzjC,KAAK+W,WAAW8lB,cAAgB78B,KAAK+W,WAAW6lB,MAChD58B,KAAK+W,WAAW6lB,MAAQ,YACxB58B,KAAKqjC,6BACLrjC,KAAK+9B,YAAY5N,MAAQnT,EAAczgB,IAAI,YAEvCgX,EAAKmL,cAAc1e,KAAK6yB,QAAS,aACnC7yB,KAAKghC,YAAY,aAEjBhhC,KAAKghC,YAAY,iBAEnBhhC,KAAKkgC,SAAS,iBAGd,IAAM7C,EAAY,wGAAAzyB,OAA2G5I,OAAOgI,KCryB3H,w2CDqyBS,KACZuzB,EAAU,wGAAA3yB,OAA2G5I,OAAOgI,KEtyBzH,g2CFsyBO,KAChBhK,KAAK+9B,YAAYvvB,aAAa,QAAS6uB,GACvCr9B,KAAK+9B,YAAYvvB,aAAa,cAA9B,iBAAA5D,OAA8D2yB,EAA9D,OACAv9B,KAAK+9B,YAAYvvB,aAAa,aAA9B,iBAAA5D,OAA6DyyB,EAA7D,2CASFr9B,KAAKuhC,sBACyB,cAA1BvhC,KAAK+W,WAAW6lB,QAClB58B,KAAK+W,WAAW8lB,cAAgB78B,KAAK+W,WAAW6lB,MAChD58B,KAAK+W,WAAW6lB,MAAQ,aAG1B58B,KAAKqjC,6BAED9vB,EAAKmL,cAAc1e,KAAK6yB,QAAS,kBACnC7yB,KAAK+9B,YAAY5N,MAAQnT,EAAczgB,IAAI,YAC3CyD,KAAKghC,YAAY,kBACRztB,EAAKmL,cAAc1e,KAAK6yB,QAAS,eAC1C7yB,KAAKsT,UAAUtG,MAAM02B,KAAO,KAC5B1jC,KAAKsT,UAAUtG,MAAM22B,IAAM,KAC3B3jC,KAAKghC,YAAY,cAGnBhhC,KAAKkgC,SAAS,iBAGd,IAAM7C,EAAY,wGAAAzyB,OAA2G5I,OAAOgI,KAAKg0B,IAAvH,KACZT,EAAU,wGAAA3yB,OAA2G5I,OAAOgI,KAAKi0B,IAAvH,KAChBj+B,KAAK+9B,YAAYvvB,aAAa,QAAS6uB,GACvCr9B,KAAK+9B,YAAYvvB,aAAa,cAA9B,iBAAA5D,OAA8D2yB,EAA9D,OACAv9B,KAAK+9B,YAAYvvB,aAAa,aAA9B,iBAAA5D,OAA6DyyB,EAA7D,OAGAr9B,KAAK4jC,QAAQ/iC,SAA8B,GAArBmB,OAAO6hC,YAAmB,IAAKhjC,SAA6B,GAApBmB,OAAOw9B,WAAkB,KACnFx/B,KAAKsT,UAAUwwB,aAAe,MAChC9jC,KAAKsT,UAAUtG,MAAMuZ,OAAS,SAE5BvmB,KAAKsT,UAAUywB,YAAc,OAC/B/jC,KAAKsT,UAAUtG,MAAMqZ,MAAQ,UAlCtB,IAsCDwd,EAAgB7hC,OAAhB6hC,YACArE,EAAex9B,OAAfw9B,WAGF1C,EAAS+G,EAAc,EAFJ7jC,KAAKsT,UAAtB0wB,aAEwC,EAC1CjH,EAAQyC,EAAa,EAFHx/B,KAAKsT,UAArBosB,YAEqC,EAE7C1/B,KAAKikC,YAAYnH,EAAQC,GACzB/8B,KAAKujC,mBACLvjC,KAAKsjC,sBACLtjC,KAAKkkC,kBACLlkC,KAAKyiB,2CAOyB,cAA1BziB,KAAK+W,WAAW6lB,QACoB,cAAlC58B,KAAK+W,WAAW8lB,cAClB78B,KAAKo/B,WAELp/B,KAAKgjC,QAEPhjC,KAAKmwB,MAAMnjB,MAAMw2B,OAAS,oCAStBjd,EAAQF,GACdrmB,KAAKsT,UAAUtG,MAAMuZ,OAArB,GAAA3b,OAAiC2b,EAAjC,MACAvmB,KAAKsT,UAAUtG,MAAMqZ,MAArB,GAAAzb,OAAgCyb,EAAhC,MACArmB,KAAKkkC,sDAQKpH,EAAQC,GAClB/8B,KAAKsT,UAAUtG,MAAM8vB,OAArB,GAAAlyB,OAAiCkyB,EAAjC,MACA98B,KAAKsT,UAAUtG,MAAM+vB,MAArB,GAAAnyB,OAAgCmyB,EAAhC,oDAS8B,UAA1B/8B,KAAK+W,WAAW6lB,QAClB58B,KAAK+W,WAAWwF,SAASugB,OAASj8B,SAASb,KAAKsT,UAAUtG,MAAM8vB,OAAQ,IACxE98B,KAAK+W,WAAWwF,SAASwgB,MAAQl8B,SAASb,KAAKsT,UAAUtG,MAAM+vB,MAAO,IACtE/8B,KAAK+W,WAAWimB,KAAK3W,MAAQxlB,SAASb,KAAKsT,UAAUtG,MAAMqZ,MAAO,IAClErmB,KAAK+W,WAAWimB,KAAKzW,OAAS1lB,SAASb,KAAKsT,UAAUtG,MAAMuZ,OAAQ,sDAQxC,UAA1BvmB,KAAK+W,WAAW6lB,QAElB58B,KAAKikC,YAAYjkC,KAAK+W,WAAWwF,SAASugB,OAAQ98B,KAAK+W,WAAWwF,SAASwgB,OAE3E/8B,KAAK4jC,QAAQ5jC,KAAK+W,WAAWimB,KAAKzW,OAAQvmB,KAAK+W,WAAWimB,KAAK3W,kDAQjErmB,KAAKm+B,QAAQnxB,MAAMqZ,MAAnB,GAAAzb,OAA8B5K,KAAKsT,UAAUywB,YAAc,GAA3D,MACA/jC,KAAKm+B,QAAQnxB,MAAMuZ,OAAnB,GAAA3b,OAA+B5K,KAAKsT,UAAUwwB,aAAe,GAA7D,MACA9jC,KAAKqtB,iBAAiBrgB,MAAMuZ,OAA5B,GAAA3b,OAAwC/J,SAASb,KAAKm+B,QAAQ6F,aAAe,GAAI,IAAjF,2DAO8B,UAA1BhkC,KAAK+W,WAAW6lB,OAClB58B,KAAK4/B,UAAU5yB,MAAMm3B,WAAa,UAClCnkC,KAAK2/B,UAAU3yB,MAAMm3B,WAAa,YAElCnkC,KAAK4/B,UAAU5yB,MAAMm3B,WAAa,SAClCnkC,KAAK2/B,UAAU3yB,MAAMm3B,WAAa,iDASpCnkC,KAAK49B,YAAY7f,iBAAiB,QAAS/d,KAAKo/B,SAASliC,KAAK8C,OAAO,GACrEA,KAAKy9B,SAAS1f,iBAAiB,QAAS/d,KAAKgjC,MAAM9lC,KAAK8C,OAAO,GAC/DA,KAAK+9B,YAAYhgB,iBAAiB,QAAS/d,KAAKmjC,SAASjmC,KAAK8C,OAAO,GACrEA,KAAKo9B,SAASrf,iBAAiB,QAAS/d,KAAKwwB,aAAatzB,KAAK8C,OAC/DA,KAAKmwB,MAAMpS,iBAAiB,QAAS/d,KAAKokC,SAASlnC,KAAK8C,OAGxDA,KAAK6yB,QAAQ9U,iBAAiB,QAAS/d,KAAKwwB,aAAatzB,KAAK8C,OAG9DuT,EAAK+K,SAAStc,OAAQ,YAAahC,KAAKqkC,UAAUnnC,KAAK8C,OACvDuT,EAAK+K,SAAStc,OAAQ,UAAWhC,KAAKskC,SAASpnC,KAAK8C,OACpDuT,EAAK+K,SAAStc,OAAQ,YAAahC,KAAKukC,KAAKrnC,KAAK8C,OAClDuT,EAAK+K,SAAStc,OAAQ,SAAUhC,KAAKwkC,eAAetnC,KAAK8C,OAEzDuT,EAAK+K,SAASte,KAAKsT,UAAW,UAAWtT,KAAKykC,UAAUvnC,KAAK8C,iDAQ7DuT,EAAKmxB,YAAY1iC,OAAQ,YAAahC,KAAKqkC,WAC3C9wB,EAAKmxB,YAAY1iC,OAAQ,UAAWhC,KAAKskC,UACzC/wB,EAAKmxB,YAAY1iC,OAAQ,YAAahC,KAAKukC,MAC3ChxB,EAAKmxB,YAAY1iC,OAAQ,SAAUhC,KAAKwkC,gBAExCjxB,EAAKmxB,YAAY1kC,KAAKsT,UAAW,UAAWtT,KAAKykC,+CAUvC1E,GACV,YAAoC,IAAxBA,EAAW4E,SAA4B5E,EAAW6E,gBAE1DvE,EAAGN,EAAW6E,eAAe,GAAGD,QAChCrE,EAAGP,EAAW6E,eAAe,GAAGC,UAKlCxE,EAAGN,EAAW4E,QACdrE,EAAGP,EAAW8E,2CAWR9E,GACsB,cAA1B//B,KAAK+W,WAAW6lB,OAGhBmD,EAAWv0B,SAAWxL,KAAKmwB,aACM,IAAxBnwB,KAAK8kC,gBAA0D,OAAxB9kC,KAAK8kC,iBAErD9kC,KAAK8kC,gBACH3lC,EAAGa,KAAKogC,YAAYL,GAAYM,EAChCrhC,EAAGgB,KAAKogC,YAAYL,GAAYO,GAGlCtgC,KAAK+kC,UACH5lC,EAAG,MACHH,EAAG,OAG8B,KAA/BgB,KAAKsT,UAAUtG,MAAM+vB,QACvB/8B,KAAKsT,UAAUtG,MAAM+vB,MAAQ,OAEK,KAAhC/8B,KAAKsT,UAAUtG,MAAM8vB,SACvB98B,KAAKsT,UAAUtG,MAAM8vB,OAAS,OAK5B98B,KAAKglC,SAITzxB,EAAK2sB,SAAS19B,SAAS0yB,KAAM,gBAC7B3hB,EAAK2sB,SAASlgC,KAAK6yB,QAAS,sBAE5B7yB,KAAKilC,YAAcjlC,KAAKklC,gDAUzBnF,GACH,GAAI//B,KAAK8kC,eAAgB,CACvB/E,EAAWrP,iBAGX,IAAIyU,EAASlkC,KAAKd,IAAIH,KAAKogC,YAAYL,GAAYO,EAAGtgC,KAAKilC,YAAYG,WAAWpmC,GAClFmmC,EAASlkC,KAAKb,IAAIJ,KAAKilC,YAAYI,WAAWrmC,EAAGmmC,GACjD,IAAIG,EAASrkC,KAAKd,IAAIH,KAAKogC,YAAYL,GAAYM,EAAGrgC,KAAKilC,YAAYG,WAAWjmC,GAClFmmC,EAASrkC,KAAKb,IAAIJ,KAAKilC,YAAYI,WAAWlmC,EAAGmmC,GAGjD,IAAMC,EAAK,GAAA36B,OAAM06B,EAAStlC,KAAK8kC,eAAe3lC,EAAnC,MACLqmC,EAAK,GAAA56B,OAAMu6B,EAASnlC,KAAK8kC,eAAe9lC,EAAnC,MAEXgB,KAAK+kC,UACH5lC,EAAGomC,EACHvmC,EAAGwmC,GAGLxlC,KAAKsT,UAAUtG,MAAM1D,UAArB,eAAAsB,OAAgD26B,EAAhD,KAAA36B,OAAyD46B,EAAzD,OAEF,GAAIxlC,KAAKmgC,iBAAkB,CAAA,IAarBsF,EAZIjG,EAAex9B,OAAfw9B,WACAqE,EAAgB7hC,OAAhB6hC,YACJyB,EAASrkC,KAAKd,IAAIH,KAAKogC,YAAYL,GAAYM,EAAGb,EAAax/B,KAAKy/B,eAAiB,GACrF0F,EAASlkC,KAAKd,IAAIH,KAAKogC,YAAYL,GAAYO,EAAGuD,EAAc,GAChEyB,EAAS,IACXA,EAAS,GAGPH,EAAS,IACXA,EAAS,GAKTM,EADEzlC,KAAKygC,WACY,EAED,EAGpBzgC,KAAKsT,UAAUtG,MAAMqZ,MAArB,GAAAzb,OAAgC5K,KAAKugC,aAAekF,GAAmBH,EAAStlC,KAAKmgC,iBAAiBhhC,GAAtG,MACAa,KAAKsT,UAAUtG,MAAMuZ,OAArB,GAAA3b,OAAiC5K,KAAKwgC,cAAgBiF,GAAmBN,EAASnlC,KAAKmgC,iBAAiBnhC,GAAxG,MACKgB,KAAKygC,YACJzgC,KAAKmgC,iBAAiBhhC,EAAImmC,EAAStlC,KAAKugC,cAAgB,IAC1DvgC,KAAKsT,UAAUtG,MAAM+vB,MAArB,GAAAnyB,OAAgC5K,KAAK0gC,cAAgB4E,EAAStlC,KAAKmgC,iBAAiBhhC,GAApF,OAEAa,KAAKsT,UAAUtG,MAAM+vB,MAArB,GAAAnyB,OAAgC5K,KAAK0gC,aAAe1gC,KAAKugC,aAAe,IAAxE,MACAvgC,KAAKsT,UAAUtG,MAAMqZ,MAAQ,SAE3BrmB,KAAKmgC,iBAAiBnhC,EAAImmC,EAASnlC,KAAKwgC,cAAgB,IAC1DxgC,KAAKsT,UAAUtG,MAAM8vB,OAArB,GAAAlyB,OAAiC5K,KAAK2gC,eAAiBwE,EAASnlC,KAAKmgC,iBAAiBnhC,GAAtF,OAEAgB,KAAKsT,UAAUtG,MAAM8vB,OAArB,GAAAlyB,OAAiC5K,KAAK2gC,cAAgB3gC,KAAKwgC,cAAgB,IAA3E,MACAxgC,KAAKsT,UAAUtG,MAAMuZ,OAAS,UAGlCvmB,KAAKujC,mBACLvjC,KAAKsjC,gEAUP,IAAMzc,EAAW7kB,OAAOw9B,WAClBkG,EAAY1jC,OAAO6hC,YAGjBG,EAAiBhkC,KAAKsT,UAAtB0wB,aACF2B,EAAkB9kC,SAASb,KAAKsT,UAAUtG,MAAM8vB,OAAQ,IACxD8I,EAAiB/kC,SAASb,KAAKsT,UAAUtG,MAAM+vB,MAAO,IAEpD8I,EAAgB7jC,OAAhB6jC,YACFL,EAAQxlC,KAAK8kC,eAAe9lC,EAC5BumC,EAAQvlC,KAAK8kC,eAAe3lC,EAE5B2mC,EAAkB9B,EAAe2B,GAAmBD,GAAaF,EAAQK,IACzEE,EAAiBlf,EAAW7mB,KAAKy/B,gBAAkB8F,EAAQM,GAAeD,EAG1EI,EAAcN,EAAY1lC,KAAKsT,UAAU0wB,aAAe8B,EACxDG,EAAcjmC,KAAKmwB,MAAM6T,cAAgBhkC,KAAKmwB,MAAM6T,aAAe8B,GAKzE,OAASV,YAFYjmC,EAFD0nB,EAAWkf,EAAiB/lC,KAAKy/B,eAEhBzgC,EAAGgnC,GAEnBX,YADAlmC,EAFAa,KAAKsT,UAAUosB,YAAcqG,EAEb/mC,EAAGinC,gDAWxC,IAAMC,EAAQ1jC,SAASsL,cAAc,KACrCo4B,EAAMl5B,MAAMqZ,MAAQ,OACpB6f,EAAMl5B,MAAMuZ,OAAS,QAGrB,IAAM4f,EAAQ3jC,SAASsL,cAAc,OACrCq4B,EAAMn5B,MAAMuP,SAAW,WACvB4pB,EAAMn5B,MAAM22B,IAAM,MAClBwC,EAAMn5B,MAAM02B,KAAO,MACnByC,EAAMn5B,MAAMm3B,WAAa,SACzBgC,EAAMn5B,MAAMqZ,MAAQ,QACpB8f,EAAMn5B,MAAMuZ,OAAS,QACrB4f,EAAMn5B,MAAMu1B,SAAW,SACvB4D,EAAM74B,YAAY44B,GAElB1jC,SAAS0yB,KAAK5nB,YAAY64B,GAC1B,IAAMC,EAAaF,EAAMxG,YAGzByG,EAAMn5B,MAAMu1B,SAAW,SACvB,IAAI8D,EAAaH,EAAMxG,YAQvB,OALI0G,IAAeC,IACjBA,EAAaF,EAAMpC,aAErBvhC,SAAS0yB,KAAKvnB,YAAYw4B,GAElBC,EAAaC,sCAUjBrmC,KAAK8kC,gBAAkB9kC,KAAKmgC,oBAE9BngC,KAAKsT,UAAUtG,MAAM1D,UAAY,GAC7BtJ,KAAK8kC,iBACP9kC,KAAKsT,UAAUtG,MAAM+vB,MAArB,GAAAnyB,OAAgC/J,SAASb,KAAKsT,UAAUtG,MAAM+vB,MAAO,IAAMl8B,SAASb,KAAK+kC,SAAS5lC,EAAG,IAArG,MACAa,KAAKsT,UAAUtG,MAAM8vB,OAArB,GAAAlyB,OAAiC/J,SAASb,KAAKsT,UAAUtG,MAAM8vB,OAAQ,IAAMj8B,SAASb,KAAK+kC,SAAS/lC,EAAG,IAAvG,OAGFgB,KAAKyiB,QAGLjgB,SAAS0yB,KAAKloB,MAAM,eAAiB,GAEjChN,KAAKglC,SAITzxB,EAAKytB,YAAYx+B,SAAS0yB,KAAM,gBAChC3hB,EAAKytB,YAAYhhC,KAAK6yB,QAAS,uBAEjC7yB,KAAK8kC,eAAiB,KACtB9kC,KAAKmgC,iBAAmB,KACxBngC,KAAKugC,aAAe,KACpBvgC,KAAKygC,UAAY,8CAOjBzgC,KAAKg/B,uBACLh/B,KAAKsjC,sBACLtjC,KAAKujC,qDASGjT,QACkB9mB,IAAtB8mB,EAAcrzB,MAEgC,UAA5C+C,KAAK2+B,MAAMjM,eAAe1lB,MAAMumB,QAER,WAAtBjD,EAAcrzB,KAA0C,QAAtBqzB,EAAcrzB,IAC9C+C,KAAK+W,WAAWuC,MAClBtZ,KAAKw+B,eAAeiG,UAAUnU,GAEvBA,EAAcK,UAAkC,QAAtBL,EAAcrzB,IAC7CuF,SAASouB,gBAAkB5wB,KAAK8wB,cAClC9wB,KAAK6wB,aAAapO,QAClB6N,EAAcG,kBACdH,EAAcI,kBAEd1wB,KAAKw+B,eAAeiG,UAAUnU,GAED,QAAtBA,EAAcrzB,MACnBuF,SAASouB,gBAAkB5wB,KAAK6wB,cAClC7wB,KAAK8wB,aAAarO,QAClB6N,EAAcG,kBACdH,EAAcI,kBAEd1wB,KAAKw+B,eAAeiG,UAAUnU,IAIlCtwB,KAAK2+B,MAAM8F,UAAUnU,kDASzBtwB,KAAKsT,UAAUtG,MAAM+vB,MAArB,GAAAnyB,OAAgC3J,KAAKd,IAAIU,SAASb,KAAKsT,UAAUtG,MAAM+vB,MAAO,IAAK/6B,OAAOw9B,WAAax/B,KAAKy/B,eAAiBz/B,KAAKsT,UAAUosB,aAA5I,MACI7+B,SAASb,KAAKsT,UAAUtG,MAAM+vB,MAAO,IAAM,IAC7C/8B,KAAKsT,UAAUtG,MAAM+vB,MAAQ,OAE/B/8B,KAAKsT,UAAUtG,MAAM8vB,OAArB,GAAAlyB,OAAiC3J,KAAKd,IAAIU,SAASb,KAAKsT,UAAUtG,MAAM8vB,OAAQ,IAAK96B,OAAO6hC,YAAc7jC,KAAKsT,UAAU0wB,cAAzH,MACInjC,SAASb,KAAKsT,UAAUtG,MAAM8vB,OAAQ,IAAM,IAC9C98B,KAAKsT,UAAUtG,MAAM8vB,OAAS,kDAQhC,IAAIwJ,GAAkB,EAClBzlC,SAASb,KAAKsT,UAAUtG,MAAMqZ,MAAO,IAAM,KAC7CrmB,KAAKsT,UAAUtG,MAAMqZ,MAArB,GAAAzb,OAAgC3J,KAAKd,IAAIU,SAASb,KAAKsT,UAAUtG,MAAMqZ,MAAO,IAAKrkB,OAAOw9B,WAAax/B,KAAKy/B,gBAA5G,MACA6G,GAAkB,IAElBtmC,KAAKsT,UAAUtG,MAAMqZ,MAAQ,QAC7BigB,GAAkB,GAEhBzlC,SAASb,KAAKsT,UAAUtG,MAAMuZ,OAAQ,IAAM,KAC9CvmB,KAAKsT,UAAUtG,MAAMuZ,OAArB,GAAA3b,OAAiC3J,KAAKd,IAAIU,SAASb,KAAKsT,UAAUtG,MAAMuZ,OAAQ,IAAKvkB,OAAO6hC,aAA5F,MACAyC,GAAkB,IAElBtmC,KAAKsT,UAAUtG,MAAMuZ,OAAS,QAC9B+f,GAAkB,GAEhBA,GACFtmC,KAAKkkC,iEAQPlkC,KAAKumC,aAAevkC,OAAOw9B,WAAah9B,SAASigC,gBAAgBsB,YAC7D/jC,KAAKumC,aACPvmC,KAAKy/B,eAAiBz/B,KAAKwmC,oBAE3BxmC,KAAKy/B,eAAiB,yCAYxB,IAAMgH,EAAajkC,SAASsL,cAAc,SAC1C9N,KAAKsT,UAAUhG,YAAYm5B,GAC3BA,EAAWhkB,QACXgkB,EAAWjT,OAEXiT,EAAWjnC,yCAOgB,MAAvBQ,KAAKw+B,qBAAiE,IAAhCx+B,KAAKw+B,eAAetP,SAC5DlvB,KAAKw+B,eAAetP,iDAStB,OAAOltB,OAAO6hC,YAAc7hC,OAAOw9B,iEAO9Bx/B,KAAK47B,uBAA8C,MAArB57B,KAAK87B,cAAwB97B,KAAK87B,eAAL,MAAAlxB,OAA4B5K,KAAK67B,kBAC3F77B,KAAK0mC,eACP1mC,KAAKohC,mBAAL,KAAAx2B,OAA6B5K,KAAK67B,iBAElC77B,KAAKohC,mBAAL,KAAAx2B,OAA6B5K,KAAK67B,kBAGtC77B,KAAK47B,uBAAwB,wDAO7B57B,KAAK47B,uBAAwB,EAC7B57B,KAAKohC,mBAAL,MAAAx2B,OAA8B5K,KAAK67B,4EAO/B77B,KAAK47B,sBACH57B,KAAK0mC,eACP1mC,KAAKohC,mBAAL,KAAAx2B,OAA6B5K,KAAK67B,iBAElC77B,KAAKohC,mBAAL,KAAAx2B,OAA6B5K,KAAK67B,iBAGpC77B,KAAKohC,mBAAL,MAAAx2B,OAA8B5K,KAAK67B,gFAQrC77B,KAAKohC,mBAAmB,mDAOP7a,GACjBvmB,KAAK87B,aAAevV,EACpBvmB,KAAKm+B,QAAQnxB,MAAMuZ,OAASA,6CAOE,cAA1BvmB,KAAK+W,WAAW6lB,OAClB58B,KAAKgjC,QAEPhjC,KAAK2+B,MAAMgI,wCAOJxW,GACPnwB,KAAKmwB,MAAM9pB,UAAY8pB,uCAUZja,GACX,MAAA,GAAAtL,OAAUsL,EAAV,KAAAtL,OAAuB5K,KAAKw8B,WAA5B;;AGj5CCn1B,OAAO/J,UAAU8V,aACnB,WAEC,IAAIA,EAAc,SAAUmJ,GAC1B,GAAY,MAARvc,KACF,MAAMo0B,YAER,IAAIzzB,EAAS0G,OAAOrH,MAChBg9B,EAAOr8B,EAAOnC,OAEdU,EAAQqd,EAAW3T,OAAO2T,GAAY,EAK1C,GAJIrd,GAASA,IACXA,EAAQ,KAGNA,EAAQ,GAAKA,GAAS89B,GAA1B,CAIA,IACI4J,EADA3f,EAAQtmB,EAAOvB,WAAWF,GAE9B,OACE+nB,GAAS,OAAUA,GAAS,OAC5B+V,EAAO99B,EAAQ,IAEf0nC,EAASjmC,EAAOvB,WAAWF,EAAQ,KACrB,OAAU0nC,GAAU,MAEN,MAAlB3f,EAAQ,OAAkB2f,EAAS,MAAS,MAGjD3f,IAEL7qB,OAAOC,eACTD,OAAOC,eAAegL,OAAO/J,UAAW,eACtCX,MAASyW,EACTyzB,cAAgB,EAChBC,UAAY,IAGdz/B,OAAO/J,UAAU8V,YAAcA,EAvClC,GA6CyB,mBAAjBhX,OAAO4a,QAEhB5a,OAAOC,eAAeD,OAAQ,UAC5BO,MAAO,SAAgB6O,EAAQu7B,GAE7B,GAAc,MAAVv7B,EACF,MAAM,IAAI4oB,UAAU,8CAKtB,IAFA,IAAI4S,EAAK5qC,OAAOoP,GAEPtM,EAAQ,EAAGA,EAAQ4G,UAAUtH,OAAQU,IAAS,CACrD,IAAI+nC,EAAanhC,UAAU5G,GAE3B,GAAkB,MAAd+nC,EACF,IAAK,IAAIC,KAAWD,EAEd7qC,OAAOkB,UAAUC,eAAe1B,KAAKorC,EAAYC,KACnDF,EAAGE,GAAWD,EAAWC,IAKjC,OAAOF,GAETF,UAAU,EACVD,cAAc,oLCxDGzN,cAmBnB,SAAAA,EAAYF,gGAAgBiO,CAAAnnC,KAAAo5B,GAK1Bp5B,KAAKkd,SAAW,KAQhBld,KAAKonC,SAAW,SAMhBpnC,KAAKqnC,YAAc,KAOnBrnC,KAAKisB,cAAgB,IAAIoF,EAmGzB,GApFArxB,KAAKisB,cAAcqb,UAAU,aAR3BrrC,KAAM,YACN0wB,QAAS,YACT+E,KAAM,WACNC,aAAc,cACdxB,MAAO,WACPyB,QAAS,0CAkBX5xB,KAAKksB,eAiBLlsB,KAAK05B,qBAEL15B,KAAK05B,kBAAkB7M,cAAe,EACtC7sB,KAAK05B,kBAAkBa,cAAgB,KACvCv6B,KAAK05B,kBAAkB6N,WAAa,KACpCvnC,KAAK05B,kBAAkB/W,MAAQ,KAM/B3iB,KAAK8sB,iBAAmB,KAMxB9sB,KAAKw+B,eAAiB,KAMtBx+B,KAAKwnC,QAAW,WACd,IAAMnb,EAAKC,UAAUC,UACjBib,EAAU,OAYd,OAXInb,EAAG0W,OAAO,UAAY,EACxByE,EAAU,OACDnb,EAAG0W,OAAO,YAAc,EACjCyE,EAAU,SACDnb,EAAG0W,OAAO,aAAe,EAClCyE,EAAU,KACDnb,EAAG0W,OAAO,aAAe,EAClCyE,EAAU,UACDnb,EAAG0W,OAAO,YAAc,IACjCyE,EAAU,UAELA,EAdO,GAsBhBxnC,KAAKyX,UAAY,IAAIF,EAMrBvX,KAAK43B,+BACD,8BAA+BsB,GAGjC,MAAM,IAAIjsB,MAAM,+CAFhBjN,KAAK43B,0BAA4BsB,EAAetB,+HAiDhC9K,GAClB9sB,KAAK8sB,iBAAmBA,yCAQX2a,GACT,WAAYA,IACdznC,KAAKksB,YAAYE,OAASqb,EAAuBrb,QAE/C,SAAUqb,IACZznC,KAAKksB,YAAYrvB,KAAO4qC,EAAuB5qC,MAE7C,YAAa4qC,IACfznC,KAAKksB,YAAY9B,QAAUqd,EAAuBrd,kDASpD,OAAOpqB,KAAKqnC,2CAYP,IAAAvY,EAAA9uB,KACL,GAAKo5B,EAAKsO,YAqBR1nC,KAAKyX,UAAUS,KAAK,iBArBC,CACrB,IAAMyvB,EAA0BpwB,EAAUohB,YAAY,SAAU,WAC9D,IAAMiP,EAAkB5vB,EAAgB6C,WAAW,kBAAmB,GAAI,OACpEgtB,EAAoBx9B,KAAKuQ,MAAMgtB,GACrC9wB,EAAcgxB,iBAAiBD,GAE/B/wB,EAAcgxB,iBAAiBhW,GAI/B9U,EAAcE,SAAW4R,EAAK5R,SAC9B4R,EAAKrX,UAAUS,KAAK,eAGtBF,EAAgBqhB,YAAYsO,GAC5B3vB,EAAgBshB,KAAKt5B,KAAK43B,2BAE1BwB,EAAKsO,aAAc,uCAYXhwB,GACV1X,KAAKyX,UAAUQ,IAAIP,+CAYDxE,EAAQ4U,GAS1B,IAAMigB,EAAoB,IAAI7V,EAmB9B,OAjBA6V,EAAkB70B,OAASA,EAI3B60B,EAAkBjgB,mBAEK,MAAnBA,GACF1rB,OAAOkS,KAAKwZ,GAAiBvZ,QAAQ,SAAC6zB,GACpC2F,EAAkBjgB,gBAAgBsa,GAAQta,EAAgBsa,KAM9D2F,EAAkB7qB,SAAWld,KAAKkd,SAClC6qB,EAAkBX,SAAWpnC,KAAKonC,SAE9BpnC,KAAKyX,UAAUS,KAAK,2BAA4B6vB,MAIhD3O,EAAK4O,gBAAgB9vB,KAAK,2BAA4B6vB,OAKxD70B,OAAQ60B,EAAkB70B,OAC1B4U,gBAAiBigB,EAAkBjgB,uDAczB8R,EAAcrX,EAAcrP,EAAQ4U,GAOhD,IAAMmgB,KAEN,GAAK/0B,EAEE,GAAsB,UAAlBlT,KAAKonC,SAAsB,CAKpC,GAJAa,EAAantB,MAAQN,EAAM0tB,mBAAmBh1B,GAIxClT,KAAK8sB,iBAAiBkO,mBAAqBiN,EAAantB,MAAO,CACnE,IAAMqtB,EAAmB,IAAIjW,EAC7BiW,EAAiBf,SAAWpnC,KAAKonC,SACjCe,EAAiB5lB,aAAeA,EAChC4lB,EAAiBvO,aAAeA,EAChCuO,EAAiBrtB,MAAQmtB,EAAantB,MACtC9a,KAAK8sB,iBAAiBkO,iBAAiBmN,EAAkB5lB,EAAcrP,QAEvE+0B,EAAaxrB,KAAO8F,EAAa/f,SAASoN,eAAtB,KAAAhF,OAA0Cq9B,EAAantB,MAAvD,OAEtB9a,KAAKooC,yBAAyBH,EAAaxrB,KAAMmd,EAAcrX,QAE/D0lB,EAAaxrB,KAAOoL,EAAO6C,kBAAkBnI,EAAa/f,SACxD0Q,EACA4U,EAAiB9nB,KAAKkd,UAExBld,KAAKooC,yBAAyBH,EAAaxrB,KAAMmd,EAAcrX,QAtB/DviB,KAAKooC,yBAAyB,KAAMxO,EAAcrX,GAyBpD,OAAO0lB,6CAGUrO,EAAcrX,EAAc9F,EAAM3B,GAUnD,IAAMqtB,EAAmB,IAAIjW,EAO7B,OANAiW,EAAiBf,SAAWpnC,KAAKonC,SACjCe,EAAiB5lB,aAAeA,EAChC4lB,EAAiBvO,aAAeA,EAChCuO,EAAiB1rB,KAAOA,EACxB0rB,EAAiBrtB,MAAQA,EAErB9a,KAAKyX,UAAUS,KAAK,0BAA2BiwB,OAI/C/O,EAAK4O,gBAAgB9vB,KAAK,0BAA2BiwB,mDAWvC1rB,GAClBzc,KAAK8sB,iBAAiB3J,eACtB,IAAMklB,EAAe5rB,EAAK6rB,cAC1B,QAAyC,IAA9BD,EAAallB,cAAkC1G,EAAKoG,cAAe,CAC5E,IAAMF,EAAQ0lB,EAAazlB,cAC3BD,EAAM4lB,cAAc9rB,GACpBkG,EAAM6lB,UAAS,GACf,IAAM9lB,EAAY2lB,EAAallB,eAC/BT,EAAU+lB,kBACV/lB,EAAUgmB,SAAS/lB,GACnB0lB,EAAanT,KAAKzS,0DAUGjE,EAASob,EAAcrX,GAC9C,GAAIviB,KAAK05B,kBAAkB7M,aACzB,GAAIrO,EACF,GAA0B,aAAtBob,EAAa5rB,KACfuF,EAAKo1B,eAAe/O,EAAcpb,EAAQ/K,kBACrC,GAAIjR,SAASkgB,WAAuC,IAA1BlgB,SAAS2gB,aAAoB,CAC5D,IAAIR,EAAQJ,EAAa/f,SAASkgB,UAAUE,cAS5C,GARAL,EAAa/f,SAASwgB,YAAY,eAAe,EAAOxE,EAAQwH,KAE1D,kBAAmBrD,IACvBJ,EAAa/f,SAASwgB,YAAY,UAAU,GAC5CL,EAAQJ,EAAa/f,SAASkgB,UAAUE,cACxCL,EAAa/f,SAASwgB,YAAY,eAAe,EAAOxE,EAAQwH,MAG9D,kBAAmBrD,EAAO,CAC5B,IAAMM,EAAiBN,EAAME,gBAEiB,QAA1CI,EAAepD,SAASsC,cAC1Bc,EAAevV,WAAWwS,aAAa1B,EAASyE,GAIhDN,EAAMO,UAAU3P,EAAKoX,iBAAiBnM,SAGrC,CACL,IAAMoqB,EAAkB5oC,KAAK8sB,iBAAiB3J,eAC1CR,EAAQ,KAGR3iB,KAAK05B,kBAAkB/W,OACtBA,EAAU3iB,KAAK05B,kBAAf/W,MACH3iB,KAAK05B,kBAAkB/W,MAAQ,MAE/BA,EAAQimB,EAAgBxlB,WAAW,GAIrCT,EAAMkmB,iBAEN,IAAIpsB,EAAOkG,EAAMU,eACX9G,EAAWoG,EAAMW,YAED,IAAlB7G,EAAKP,UACPO,EAAOA,EAAKqsB,UAAUvsB,IACjB7O,WAAWL,aAAamR,EAAS/B,GACX,IAAlBA,EAAKP,UACdO,EAAKpP,aAAamR,EAAS/B,EAAKnM,WAAWiM,IAG7Cvc,KAAK+oC,oBAAoBvqB,QAEtB,GAA0B,aAAtBob,EAAa5rB,KACtB4rB,EAAanX,YACR,CACL,IAAMmmB,EAAkB5oC,KAAK8sB,iBAAiB3J,eAG9C,GAFAylB,EAAgBH,kBAEZzoC,KAAK05B,kBAAkB/W,MAAO,CAAA,IACxBA,EAAU3iB,KAAK05B,kBAAf/W,MACR3iB,KAAK05B,kBAAkB/W,MAAQ,KAC/BimB,EAAgBF,SAAS/lB,SAGxB,GAAI3iB,KAAK05B,kBAAkB6N,WAC5B/kC,SAASkgB,WAAuC,IAA1BlgB,SAAS2gB,cACjCnjB,KAAK05B,kBAAkB7M,cAAe,EACtC7sB,KAAK05B,kBAAkB6N,WAAWyB,SAClChpC,KAAKooC,yBAAyB5pB,EAASob,EAAcrX,KAErDviB,KAAK05B,kBAAkB6N,WAAWsB,iBAClC7oC,KAAK05B,kBAAkB6N,WAAW0B,WAAWzqB,GAC7Cxe,KAAK+oC,oBAAoBvqB,SAEtB,GAA0B,aAAtBob,EAAa5rB,KAAqB,CAC3C,IAAIlE,EAGFA,OADmD,IAA1C9J,KAAK8sB,iBAAiB/J,gBACxB/iB,KAAK8sB,iBAAiB/J,gBAAgB6W,GAAc,GAEpDrmB,EAAK21B,0BAA0BtP,GAExCrmB,EAAK41B,6BAA6BvP,EAChCpb,EAAQ/K,YACR3J,EAAKgT,cACLhT,EAAK8S,kBAEH4B,GAA8C,QAAnCA,EAAQqB,SAASO,eAG9B6E,EAAMmkB,wBAAwBppC,KAAK05B,kBAAkBa,eAErDtV,EAAMokB,MAAM7qB,EAASxe,KAAK05B,kBAAkBa,gBAE5Cv6B,KAAK05B,kBAAkBa,cAAc/6B,SAEvCQ,KAAK+oC,oBAAoB/oC,KAAK05B,kBAAkBa,uDAUpC/uB,EAAQ6W,GAAU,IA6B1BinB,EA7B0B7Q,EAAAz4B,KAEhCA,KAAKonC,SAAW,SAIhB,IACE,GAAI/kB,EAAU,CAEZ7W,EAAOgX,cAAcC,QACrB,IAAMC,EAAYlX,EAAOgX,cAAcW,eACvCnjB,KAAK05B,kBAAkB/W,MAAQD,EAAUU,WAAW,OAC/C,CAEL5X,EAAOiX,QACP,IAAMC,EAAYS,eAClBnjB,KAAK05B,kBAAkB/W,MAAQD,EAAUU,WAAW,IAEtD,MAAO1c,GACP1G,KAAK05B,kBAAkB/W,MAAQ,KASjC,QANiBnZ,IAAb6Y,IACFA,GAAW,GAGbriB,KAAK05B,kBAAkB6N,WAAa,KAEhC/7B,EASF,GANE89B,OADmD,IAA1CtpC,KAAK8sB,iBAAiB/J,gBAChB/iB,KAAK8sB,iBAAiB/J,gBAAgBvX,EAAQ6W,GAE9C9O,EAAKwP,gBAAgBvX,EAAQ6W,IAM5C,IAAKinB,EAAaztB,eAAiBtI,EAAKmL,cAAc4qB,EAAa7sB,KAAM3F,EAAcva,IAAI,mBACzFyD,KAAK05B,kBAAkBa,cAAgB+O,EAAa7sB,KACpDzc,KAAK05B,kBAAkB7M,cAAe,OACjC,GAAmC,IAA/Byc,EAAa7sB,KAAKP,SAE3B,GAAIlc,KAAK8sB,iBAAiBiO,sBAAuB,CAG/C,IAAM7nB,EAASlT,KAAK8sB,iBAAiBiO,sBACnCuO,EAAa7sB,KACb6sB,EAAaztB,eAEX3I,IACFlT,KAAKonC,SAAW,QAChBpnC,KAAK05B,kBAAkB7M,cAAe,EACtC7sB,KAAK05B,kBAAkBa,cAAgB/3B,SAASsL,cAAc,OAC9D9N,KAAK05B,kBAAkBa,cAAc/rB,aACnCsI,EAAcva,IAAI,wBAClBwV,EAAOiQ,cAAc9O,SAGpB,CACL,IAAMq2B,EAAc/uB,EAAMiJ,qBACxB6lB,EAAa7sB,KACb6sB,EAAaztB,eAEf,GAAI0tB,EAAa,CACf,IAAMr2B,EAASsH,EAAMuP,mBAAmBwf,EAAYzuB,OACpD9a,KAAKonC,SAAW,QAChBpnC,KAAK05B,kBAAkB7M,cAAe,EACtC7sB,KAAK05B,kBAAkBa,cAAgB/3B,SAASsL,cAAc,OAC9D9N,KAAK05B,kBAAkBa,cAAc/rB,aACnCsI,EAAcva,IAAI,wBAClBwV,EAAOiQ,cAAc9O,IAEvB,IAAMqP,EAAeF,EAAW7W,EAAOgX,cAAgBxgB,OAEvD,GAAqC,aAAjCwJ,EAAO4T,QAAQgB,cACjB,GAAI5d,SAASkgB,UAAW,CAItB,IAHA,IAAI8mB,EAAa,EACbC,EAAeF,EAAYvtB,UAAUC,gBAElCwtB,GACLD,GAAcj2B,EAAK6O,cAAcqnB,GACjCA,EAAeA,EAAaxtB,gBAG9Bjc,KAAK05B,kBAAkB6N,WAAahlB,EAAa/f,SAASkgB,UAAUE,cACpE5iB,KAAK05B,kBAAkB6N,WAAWmC,kBAChCH,EAAYvtB,UAAUtO,YAExB1N,KAAK05B,kBAAkB6N,WAAWoC,KAChC,YACAH,EAAaD,EAAYzsB,eAE3B9c,KAAK05B,kBAAkB6N,WAAWqC,QAChC,YACAL,EAAYzuB,MAAMtc,OAAS,QAG7BwB,KAAK05B,kBAAkB6N,WAAahlB,EAAa/f,SAASogB,cAC1D5iB,KAAK05B,kBAAkB6N,WAAWsC,SAChCN,EAAYvtB,UACZutB,EAAYzsB,eAEd9c,KAAK05B,kBAAkB6N,WAAWuC,OAChCP,EAAY5sB,QACZ4sB,EAAY3sB,mBAOkB,aAAjCpR,EAAO4T,QAAQgB,gBAExBpgB,KAAKonC,SAAW,SAepB,IAFA,IAAM2C,EAA+BjzB,EAAcva,IAAI,oBAAoBmC,MAAM,MAC3EsrC,KACGtuC,EAAI,EAAG6D,EAAMwqC,EAA6BvrC,OAAQ9C,EAAI6D,EAAK7D,GAAK,EAAG,CAC1E,IAAMuuC,EAAgBF,EAA6BruC,GAAGgD,MAAM,KACtDzB,EAAMgtC,EAAc,GACpBttC,EAAQstC,EAAc,GAC5BD,EAAwB/sC,GAAON,EAGjC,IAAMqvB,KAEAke,EAAyBpzB,EAAcva,IAAI,oBAE3C4tC,EAAyBnqC,KAAK8sB,iBAAiB+M,iBACrDz9B,OAAO4a,OAAOgV,EAAkBge,EAAyBE,GACzD9tC,OAAO4a,OAAOgV,EAAkBge,EAAyBG,GAEzDne,EAAiB9O,SAAWld,KAAKkd,SACjC8O,EAAiBsB,IAAMttB,KAAK8sB,iBAAiBQ,IAE7C,IAAMxB,KAMN,GALAA,EAAyBE,iBAAmBA,EAC5CF,EAAyB5O,SAAWld,KAAKkd,SACzC4O,EAAyBG,cAAgBjsB,KAAKisB,cAC9CH,EAAyBI,YAAclsB,KAAKksB,YAEpB,MAApBlsB,KAAKqnC,YAAqB,CAC5BrnC,KAAKqnC,YAAc,IAAI5L,GAAYzP,GACnChsB,KAAKw+B,eAAiB,IAAI3S,EAAeC,GAGzC,IAAMpU,EAAWH,EAAUohB,YAAY,SAAU,WAE/C,GADAF,EAAK+F,eAAe3R,aAAe4L,EAAKiB,kBAAkB7M,aACd,MAAxC4L,EAAKiB,kBAAkBa,cAAuB,CAChD,IAAMtkB,EAASlE,EAAO4J,cAAc8c,EAAKiB,kBAAkBa,cAAc5a,aAAa7I,EAAcva,IAAI,0BACxGk8B,EAAK+F,eAAevoB,OAASA,KAGjCjW,KAAKw+B,eAAenF,YAAY3hB,GAChC1X,KAAKw+B,eAAelF,OACpBt5B,KAAKqnC,YAAY+C,kBAAkBpqC,KAAKw+B,gBACxCx+B,KAAKw+B,eAAe6L,uBAAuBrqC,KAAKqnC,kBAGhD,GADArnC,KAAKw+B,eAAe3R,aAAe7sB,KAAK05B,kBAAkB7M,aACd,MAAxC7sB,KAAK05B,kBAAkBa,cAAuB,CAChD,IAAMtkB,EAASlE,EAAO4J,cAAc3b,KAAK05B,kBAAkBa,cAAc5a,aAAa7I,EAAcva,IAAI,0BACxGyD,KAAKw+B,eAAevoB,OAASA,EAGjCjW,KAAKw+B,eAAe/E,oBAAoBz5B,KAAK8sB,kBAC7C9sB,KAAKqnC,YAAY/tB,kDAQjB,OAAOtZ,KAAKisB,0DAvbWvU,GACvB0hB,EAAK4O,gBAAgB/vB,IAAIP,2CAlHzB,OAAO0hB,EAAKkR,+BASa3tC,GACzBy8B,EAAKkR,iBAAmB3tC,sCAUxB,OAAOy8B,EAAKmR,2BAQS5tC,GACrBy8B,EAAKmR,aAAe5tC,WAohBxBy8B,GAAKkR,iBAAmB,IAAI/yB,EAO5B6hB,GAAKmR,cAAe,EC7sBpBvoC,OAAOwoC,sBAZP,SAA+BC,GAG7B,IAAI9yB,EAEAG,EAHJxR,QAAQ+W,KAAK,qBAIbvF,EAAW2yB,EAFX9yB,EAAYvb,OAAOkS,KAAKm8B,GAAc,IAGtC,IAAIC,EAAiBnzB,EAAUohB,YAAYhhB,EAAWG,GACtDshB,GAAKuR,kBAAkBD,IAwBzB1oC,OAAO4oC,cANP,SAAuBriC,EAAM2U,GAE3B,OADA5W,QAAQ+W,KAAK,mDACNwK,EAAOgjB,UAAUtiC,EAAM2U,IAwBhClb,OAAO8oC,aANP,SAAsBviC,EAAMuf,EAAiB5K,GAE3C,OADA5W,QAAQ+W,KAAK,mDACNwK,EAAOkjB,SAASxiC,EAAMuf,EAAiB5K,6gDCxDzC,IAcM8tB,GAAb,SAAAC,uOAAAC,CAAAF,EAA0ClT,IAA1C,IAAAqT,EAAAC,GAAAJ,GAKI,SAAAA,EAAYK,GAAoC,IAAAvc,EAAA,mGAAAwc,CAAAtrC,KAAAgrC,IAM5Clc,EAAAqc,EAAAtvC,KAAAmE,KAAMqrC,IAIDE,sBAAwB,iBAVezc,EALpD,uDAAA0c,CAAAR,IAAA/tC,IAAA,OAAAN,MAAA,WAoBQ8uC,GAAAC,GAAAV,EAAA1tC,WAAA,OAAA0C,MAAAnE,KAAAmE,MAEA,IAAMosB,EAASpsB,KAAKo4B,aAChB,0BAA2BhM,EAAOuf,QAClC70B,EAAcrI,OAAO,mBAAoB2d,EAAOuf,OAAOC,0BAxBnE3uC,IAAA,cAAAN,MAAA,WAmCQ,IACI,OAAOqD,KAAK65B,iBAAiB3c,SAC/B,MAAOxW,IAET,OAAkC,MAA9B1G,KAAKo4B,aAAayT,SACX7rC,KAAKo4B,aAAayT,SAEzBJ,GAAAC,GAAAV,EAAA1tC,WAAA,cAAA0C,MAAAnE,KAAAmE,SA1CZ/C,IAAA,UAAAN,MAAA,WAmDQ,OAAOqD,KAAKo4B,aAAa0T,QAAQC,eAAe3zB,QAnDxDnb,IAAA,qBAAAN,MAAA,WAiEQ,IAAMyvB,EAASpsB,KAAKo4B,kBAE+B,IAAxChM,EAAOuf,OAAOK,wBACpB5f,EAAOuf,OAAOK,wBAgEf5f,EAAO6f,GAAG,gBAAiB,SAAUC,GAEjClsC,KAAKmsC,gBAEPjvC,KAAK8C,OAEPosB,EAAOggB,eAnEPhgB,EAAOigB,QAAQxkB,EAAOgjB,UAAUze,EAAOkgB,YAGvClgB,EAAO6f,GAAG,QAAS,SAAUr0B,GACzB2f,YAAYC,gBAAkBD,YAAYgV,UAAU30B,EAAMwU,OAAOnwB,QAGrEmwB,EAAO6f,GAAG,aAAc,WAEpB7f,EAAO6f,GAAG,cAAe,SAAUr0B,IAEoB,OAA/CA,EAAM6C,KAAK+D,QAAQguB,EAAE3sB,SAASO,eAC9B7M,EAAKmL,cAAc9G,EAAM6C,KAAK+D,QAAQguB,EAAG11B,EAAcva,IAAI,oBAC3DgX,EAAKmL,cAAc9G,EAAM6C,KAAK+D,QAAQguB,EAAG11B,EAAcva,IAAI,oBAE3Dqb,EAAM6C,KAAKgyB,OAAS,OAG1BvvC,KAAK8C,OAEPA,KAAK86B,aAEP59B,KAAK8C,OAGPosB,EAAO6f,GAAG,UAAW,SAAUvlC,GAE3BA,EAAE+T,KAAKiyB,UAAY7kB,EAAOgjB,UAAUnkC,EAAE+T,KAAKiyB,WAAa,KAE1DxvC,KAAK8C,OAEPosB,EAAO6f,GAAG,eAAgB,SAAUvlC,QAED,IAApBmhB,EAAOW,UACdhkB,MAAMlH,UAAUiR,QAAQ1S,KAAK2G,SAASurB,uBAAuB,gBAAiB,SAAU4e,GAEpF9kB,EAAOW,SAASC,QAAQkkB,MAKlCzvC,KAAK8C,OAEPosB,EAAO6f,GAAG,UAAW,SAAUvlC,GAE3BA,EAAE+T,KAAKiyB,UAAY7kB,EAAOkjB,SAASrkC,EAAE+T,KAAKiyB,WAAa,KAEzDxvC,KAAK8C,OAGPosB,EAAO6f,GAAG,OAAQ,SAAUvlC,GAExB1G,KAAKmsC,gBAEPjvC,KAAK8C,OAEPA,KAAKmsC,mBA/HjBlvC,IAAA,eAAAN,MAAA,WAoJQ,IAKIiwC,EALExgB,EAASpsB,KAAKo4B,aACdyU,EAAOrqC,SAAS4D,eAAe,gBAAkBgmB,EAAOnwB,MAC1DuG,SAAS4D,eAAe,gBAAkBgmB,EAAOnwB,MACjDuG,SAAS4D,eAAe,OAASgmB,EAAOnwB,MASxC6wC,GAAqB,EACzB,KANIF,EADAxgB,EAAO2gB,aAAeC,SAASC,oBAClB7gB,EAAO9Y,UAAUk5B,EAEjBK,EAAKle,qBAAqB,UAAU,IAIpC,CAEb,IAAIue,EACJ,IAAK,IAAIC,KAAqBN,EAAKO,UAAW,CAC1C,IAAMC,EAAeR,EAAKO,UAAUD,GACpC,IAAuC,GAAnCE,EAAatK,OAAO,WAAkB,CACtCmK,EAAgBG,EAChB,OAGJH,IAEAJ,GAAqB,GADrBF,EAAapqC,SAAS4D,eAAe8mC,EAAgB,cAG1CI,aAAc,GAKjC,IAAKV,EAAWU,YACZ,GAAIlhB,EAAO2gB,cAAgBC,SAASC,oBAAqB,CACrD,GAA2B,aAAvBL,EAAWxtB,QAAwB,CAEnC,IAAMmuB,EAAgB/qC,SAASurB,uBAAuB,uBACtDvpB,MAAMlH,UAAUiR,QAAQ1S,KAAK0xC,EAAe,SAAUC,GAElDxtC,KAAKytC,UAAUD,GACfxtC,KAAK86B,mBAKT96B,KAAKytC,UAAUb,GACf5sC,KAAK86B,YAGT8R,EAAWU,aAAc,OAElBV,EAAWpqB,eAAiBsqB,KACnC9sC,KAAKytC,UAAUb,GACf5sC,KAAK86B,YAEL8R,EAAWU,aAAc,MA3MzCrwC,IAAA,qBAAAN,MAAA,SAqNuB6hB,EAAS5G,GACxB,GAAsC,OAAlC4G,EAAQqB,SAASO,eACb7M,EAAKmL,cAAcF,EAAS1H,EAAcva,IAAI,mBAAoB,MAG9B,IAAzBqb,EAAM6Y,gBACb7Y,EAAM6Y,kBAEN7Y,EAAM9E,aAAc,EAExB9S,KAAKu4B,KAAK8B,mBAAmB1K,UAC7B,IAAM+d,EAAmBlvB,EAAQmB,aAAa7I,EAAcva,IAAI,0BAC5DmxC,GACA1tC,KAAKu4B,KAAK8B,mBAAmBC,OAAOoT,GAExC1tC,KAAKu4B,KAAKmB,kBAAkBa,cAAgB/b,EAC5Cxe,KAAKw6B,gCArOrBv9B,IAAA,gBAAAN,MAAA,SA2OkBi9B,EAAcrX,EAAcrP,EAAQ4U,GAI9C,IAAMoC,EAAOuhB,GAAAC,GAAAV,EAAA1tC,WAAA,gBAAA0C,MAAAnE,KAAAmE,KAAuB45B,EAAcrX,EAAcrP,EAAQ4U,GAExE,OADA9nB,KAAKo4B,aAAalgB,KAAK,UAChBgS,KAjPfjtB,IAAA,cAAAN,MAAA,WAuPQ,OAAOqwC,SAASlB,QAAQ7S,QAAQj5B,KAAKurC,0BAvP7CtuC,IAAA,eAAAN,MAAA,WA6PQ,OADAqD,KAAKo4B,aAAauV,WAAWnB,EAAE/pB,QACxBziB,KAAKo4B,aAAajV,eAAeyqB,eA7PhD3wC,IAAA,mBAAAN,MAAA,WAkQQ8uC,GAAAC,GAAAV,EAAA1tC,WAAA,mBAAA0C,MAAAnE,KAAAmE,MACAA,KAAK6tC,yBAnQb7C,EAAA,0KAyQIgC,SAASlB,QAAQ7zB,IAAI,kBACjBqhB,KAAQ,SAAUlN,GACdA,EAAO0hB,GAAGC,UAAU,gCAEhBC,MAAS,oCACTC,QAAW,mCACXvc,KAAQsb,SAASlB,QAAQ7S,QAAQ,kBAAoB,wBAIzD7M,EAAO0hB,GAAGC,UAAU,yCAEhBC,MAAS,wCACTC,QAAW,4CACXvc,KAAQsb,SAASlB,QAAQ7S,QAAQ,kBAAoB,qBAKzD,IAAIiV,EAAiB,aACrBA,GAAkBp3B,EAAcva,IAAI,wBACpC2xC,GAAkB,2BAGlB9hB,EAAO+hB,WAAW,oCAEdC,OAAS,EACTC,SAAW,EACXC,aAAe,EACfJ,eAAkBA,EAClBK,gBAAmBL,EAEnBz3B,KAAQ,SAAC2V,GACL,IAAMoiB,EAA8BjX,YAAYgV,UAAUngB,EAAOnwB,MAGjEuyC,EAA4BjW,KAAK8B,mBAAmB1K,UACpD6e,EAA4BC,0BAMpCriB,EAAO+hB,WAAW,6CAEdC,OAAS,EACTC,SAAW,EACXC,aAAe,EACfJ,eAAkBA,EAClBK,gBAAmBL,EAEnBz3B,KAAQ,SAAC2V,GACL,IAAMoiB,EAA8BjX,YAAYgV,UAAUngB,EAAOnwB,MACjEuyC,EAA4BjW,KAAK8B,mBAAmBC,OAAO,aAC3DkU,EAA4BC,0BAKpCriB,EAAO6f,GAAG,gBAAiB,WAMvB,IAAIZ,KACJA,EAAmCjT,aAAehM,EAGlDif,EAAmC7/B,OAAS4gB,EAAO9Y,UAAUk5B,EAAE7gC,cAAc,yBAC7E0/B,EAAmCzT,6BACnCyT,EAAmCzT,0BAA0B9e,IAAM,cACnEuyB,EAAmCzT,0BAA0Bzd,OAAS,MACtEkxB,EAAmCjhB,QAAUskB,GAAAA,EAC7CrD,EAAmCnT,WAAa,YAChDmT,EAAmCnf,eACnCmf,EAAmCnf,YAAYE,OAAS,YACxDif,EAAmCnf,YAAYuL,cAAgB,MAE3D,qBAAsBrL,EAAOuf,SAC7BN,EAAmCpT,qBAAwB7L,EAAOuf,OAAOgD,iBAAmBtD,EAAmCpT,qBAC/H3xB,QAAQ+W,KAAK,2EAA4E+O,EAAOuf,OAAOgD,mBAIvG,uBAAwBviB,EAAOuf,SAC/BN,EAAmC7S,sBAAwBpM,EAAOuf,OAAOiD,oBAG7E,IAAMJ,EAA8B,IAAIxD,GAAqBK,GAC7DmD,EAA4BlV,OAC5BkV,EAA4B/2B,UAAUS,KAAK,oBAC3Cqf,YAAYgV,UAAUngB,EAAOnwB,MAAQuyC,EACrCjX,YAAYC,gBAAkBgX,WC3XzBK,8NAEjBA,EAAKC,sDAIL,IAAIr0B,EACJnU,QAAQC,IAAI,oCACZD,QAAQC,IAAIyR,EAAgB6C,WAAW,kBAAmB,GAAI,QAC9DvU,QAAQC,IAAI,iCACZkU,MACKC,IAAM,4FACXpU,QAAQC,IAAIyR,EAAgB6C,WAAW,YAAaJ,IACpDnU,QAAQC,IAAI,mCACZkU,MACKC,IAAM,4FACXpU,QAAQC,IAAIyR,EAAgB6C,WAAW,cAAeJ,EAAM,SAC5DnU,QAAQC,IAAI,oCACZkU,MACKtC,QAAU,eACfsC,EAAKC,IAAM,4FACXpU,QAAQC,IAAIyR,EAAgB6C,WAAW,UAAWJ,IAClDnU,QAAQC,IAAI,oCACZkU,MACKtC,QAAU,eACfsC,EAAKK,MAAQ,MACbxU,QAAQC,IAAIyR,EAAgB6C,WAAW,UAAWJ,IAClDnU,QAAQC,IAAI,wCACZkU,MACKtC,QAAU,oBACfsC,EAAKC,IAAM,4FACXpU,QAAQC,IAAIyR,EAAgB6C,WAAW,UAAWJ,aCrBtDzY,OAAOu1B,aACH6B,KAAMA,GACNvR,OAAQA,EACR5C,MAAOA,EACP1R,KAAMA,EACNuD,cAAeA,EACfS,UAAWA,EACXugB,iBAAkBA,GAClBN,gBFJyB,KEKzB+U,aACAvB,qBAAsBA,GACtBxwB,MAAOA,EACPq0B,KAAMA\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 8);\\n\",\"/* eslint-disable */\\nvar md5;\\nexport default md5;\\n\\n(function () {\\n  var HxOverrides = function () { }\\n  HxOverrides.__name__ = true;\\n  HxOverrides.dateStr = function (date) {\\n    var m = date.getMonth() + 1;\\n    var d = date.getDate();\\n    var h = date.getHours();\\n    var mi = date.getMinutes();\\n    var s = date.getSeconds();\\n    return date.getFullYear() + \\\"-\\\" + (m < 10 ? \\\"0\\\" + m : \\\"\\\" + m) + \\\"-\\\" + (d < 10 ? \\\"0\\\" + d : \\\"\\\" + d) + \\\" \\\" + (h < 10 ? \\\"0\\\" + h : \\\"\\\" + h) + \\\":\\\" + (mi < 10 ? \\\"0\\\" + mi : \\\"\\\" + mi) + \\\":\\\" + (s < 10 ? \\\"0\\\" + s : \\\"\\\" + s);\\n  }\\n  HxOverrides.strDate = function (s) {\\n    switch (s.length) {\\n      case 8:\\n        var k = s.split(\\\":\\\");\\n        var d = new Date();\\n        d.setTime(0);\\n        d.setUTCHours(k[0]);\\n        d.setUTCMinutes(k[1]);\\n        d.setUTCSeconds(k[2]);\\n        return d;\\n      case 10:\\n        var k = s.split(\\\"-\\\");\\n        return new Date(k[0], k[1] - 1, k[2], 0, 0, 0);\\n      case 19:\\n        var k = s.split(\\\" \\\");\\n        var y = k[0].split(\\\"-\\\");\\n        var t = k[1].split(\\\":\\\");\\n        return new Date(y[0], y[1] - 1, y[2], t[0], t[1], t[2]);\\n      default:\\n        throw \\\"Invalid date format : \\\" + s;\\n    }\\n  }\\n  HxOverrides.cca = function (s, index) {\\n    var x = s.charCodeAt(index);\\n    if (x != x) return undefined;\\n    return x;\\n  }\\n  HxOverrides.substr = function (s, pos, len) {\\n    if (pos != null && pos != 0 && len != null && len < 0) return \\\"\\\";\\n    if (len == null) len = s.length;\\n    if (pos < 0) {\\n      pos = s.length + pos;\\n      if (pos < 0) pos = 0;\\n    } else if (len < 0) len = s.length + len - pos;\\n    return s.substr(pos, len);\\n  }\\n  HxOverrides.remove = function (a, obj) {\\n    var i = 0;\\n    var l = a.length;\\n    while (i < l) {\\n      if (a[i] == obj) {\\n        a.splice(i, 1);\\n        return true;\\n      }\\n      i++;\\n    }\\n    return false;\\n  }\\n  HxOverrides.iter = function (a) {\\n    return {\\n      cur: 0, arr: a, hasNext: function () {\\n        return this.cur < this.arr.length;\\n      }, next: function () {\\n        return this.arr[this.cur++];\\n      }\\n    };\\n  }\\n  var IntIter = function (min, max) {\\n    this.min = min;\\n    this.max = max;\\n  };\\n  IntIter.__name__ = true;\\n  IntIter.prototype = {\\n    next: function () {\\n      return this.min++;\\n    }\\n    , hasNext: function () {\\n      return this.min < this.max;\\n    }\\n    , __class__: IntIter\\n  }\\n  var Std = function () { }\\n  Std.__name__ = true;\\n  Std[\\\"is\\\"] = function (v, t) {\\n    return js.Boot.__instanceof(v, t);\\n  }\\n  Std.string = function (s) {\\n    return js.Boot.__string_rec(s, \\\"\\\");\\n  }\\n  Std[\\\"int\\\"] = function (x) {\\n    return x | 0;\\n  }\\n  Std.parseInt = function (x) {\\n    var v = parseInt(x, 10);\\n    if (v == 0 && (HxOverrides.cca(x, 1) == 120 || HxOverrides.cca(x, 1) == 88)) v = parseInt(x);\\n    if (isNaN(v)) return null;\\n    return v;\\n  }\\n  Std.parseFloat = function (x) {\\n    return parseFloat(x);\\n  }\\n  Std.random = function (x) {\\n    return Math.floor(Math.random() * x);\\n  }\\n  var com = com || {}\\n  if (!com.wiris) com.wiris = {}\\n  if (!com.wiris.js) com.wiris.js = {}\\n  com.wiris.js.JsPluginTools = function () {\\n    this.tryReady();\\n  };\\n  com.wiris.js.JsPluginTools.__name__ = true;\\n  com.wiris.js.JsPluginTools.main = function () {\\n    var ev;\\n    ev = com.wiris.js.JsPluginTools.getInstance();\\n    haxe.Timer.delay($bind(ev, ev.tryReady), 100);\\n  }\\n  com.wiris.js.JsPluginTools.getInstance = function () {\\n    if (com.wiris.js.JsPluginTools.instance == null) com.wiris.js.JsPluginTools.instance = new com.wiris.js.JsPluginTools();\\n    return com.wiris.js.JsPluginTools.instance;\\n  }\\n  com.wiris.js.JsPluginTools.bypassEncapsulation = function () {\\n    if (window.com == null) window.com = {};\\n    if (window.com.wiris == null) window.com.wiris = {};\\n    if (window.com.wiris.js == null) window.com.wiris.js = {};\\n    if (window.com.wiris.js.JsPluginTools == null) window.com.wiris.js.JsPluginTools = com.wiris.js.JsPluginTools.getInstance();\\n  }\\n  com.wiris.js.JsPluginTools.prototype = {\\n    md5encode: function (content) {\\n      return haxe.Md5.encode(content);\\n    }\\n    , doLoad: function () {\\n      this.ready = true;\\n      com.wiris.js.JsPluginTools.instance = this;\\n      com.wiris.js.JsPluginTools.bypassEncapsulation();\\n    }\\n    , tryReady: function () {\\n      this.ready = false;\\n      if (js.Lib.document.readyState) {\\n        this.doLoad();\\n        this.ready = true;\\n      }\\n      if (!this.ready) haxe.Timer.delay($bind(this, this.tryReady), 100);\\n    }\\n    , __class__: com.wiris.js.JsPluginTools\\n  }\\n  var haxe = haxe || {}\\n  haxe.Log = function () { }\\n  haxe.Log.__name__ = true;\\n  haxe.Log.trace = function (v, infos) {\\n    js.Boot.__trace(v, infos);\\n  }\\n  haxe.Log.clear = function () {\\n    js.Boot.__clear_trace();\\n  }\\n  haxe.Md5 = function () {\\n  };\\n  haxe.Md5.__name__ = true;\\n  haxe.Md5.encode = function (s) {\\n    return new haxe.Md5().doEncode(s);\\n  }\\n  haxe.Md5.prototype = {\\n    doEncode: function (str) {\\n      var x = this.str2blks(str);\\n      var a = 1732584193;\\n      var b = -271733879;\\n      var c = -1732584194;\\n      var d = 271733878;\\n      var step;\\n      var i = 0;\\n      while (i < x.length) {\\n        var olda = a;\\n        var oldb = b;\\n        var oldc = c;\\n        var oldd = d;\\n        step = 0;\\n        a = this.ff(a, b, c, d, x[i], 7, -680876936);\\n        d = this.ff(d, a, b, c, x[i + 1], 12, -389564586);\\n        c = this.ff(c, d, a, b, x[i + 2], 17, 606105819);\\n        b = this.ff(b, c, d, a, x[i + 3], 22, -1044525330);\\n        a = this.ff(a, b, c, d, x[i + 4], 7, -176418897);\\n        d = this.ff(d, a, b, c, x[i + 5], 12, 1200080426);\\n        c = this.ff(c, d, a, b, x[i + 6], 17, -1473231341);\\n        b = this.ff(b, c, d, a, x[i + 7], 22, -45705983);\\n        a = this.ff(a, b, c, d, x[i + 8], 7, 1770035416);\\n        d = this.ff(d, a, b, c, x[i + 9], 12, -1958414417);\\n        c = this.ff(c, d, a, b, x[i + 10], 17, -42063);\\n        b = this.ff(b, c, d, a, x[i + 11], 22, -1990404162);\\n        a = this.ff(a, b, c, d, x[i + 12], 7, 1804603682);\\n        d = this.ff(d, a, b, c, x[i + 13], 12, -40341101);\\n        c = this.ff(c, d, a, b, x[i + 14], 17, -1502002290);\\n        b = this.ff(b, c, d, a, x[i + 15], 22, 1236535329);\\n        a = this.gg(a, b, c, d, x[i + 1], 5, -165796510);\\n        d = this.gg(d, a, b, c, x[i + 6], 9, -1069501632);\\n        c = this.gg(c, d, a, b, x[i + 11], 14, 643717713);\\n        b = this.gg(b, c, d, a, x[i], 20, -373897302);\\n        a = this.gg(a, b, c, d, x[i + 5], 5, -701558691);\\n        d = this.gg(d, a, b, c, x[i + 10], 9, 38016083);\\n        c = this.gg(c, d, a, b, x[i + 15], 14, -660478335);\\n        b = this.gg(b, c, d, a, x[i + 4], 20, -405537848);\\n        a = this.gg(a, b, c, d, x[i + 9], 5, 568446438);\\n        d = this.gg(d, a, b, c, x[i + 14], 9, -1019803690);\\n        c = this.gg(c, d, a, b, x[i + 3], 14, -187363961);\\n        b = this.gg(b, c, d, a, x[i + 8], 20, 1163531501);\\n        a = this.gg(a, b, c, d, x[i + 13], 5, -1444681467);\\n        d = this.gg(d, a, b, c, x[i + 2], 9, -51403784);\\n        c = this.gg(c, d, a, b, x[i + 7], 14, 1735328473);\\n        b = this.gg(b, c, d, a, x[i + 12], 20, -1926607734);\\n        a = this.hh(a, b, c, d, x[i + 5], 4, -378558);\\n        d = this.hh(d, a, b, c, x[i + 8], 11, -2022574463);\\n        c = this.hh(c, d, a, b, x[i + 11], 16, 1839030562);\\n        b = this.hh(b, c, d, a, x[i + 14], 23, -35309556);\\n        a = this.hh(a, b, c, d, x[i + 1], 4, -1530992060);\\n        d = this.hh(d, a, b, c, x[i + 4], 11, 1272893353);\\n        c = this.hh(c, d, a, b, x[i + 7], 16, -155497632);\\n        b = this.hh(b, c, d, a, x[i + 10], 23, -1094730640);\\n        a = this.hh(a, b, c, d, x[i + 13], 4, 681279174);\\n        d = this.hh(d, a, b, c, x[i], 11, -358537222);\\n        c = this.hh(c, d, a, b, x[i + 3], 16, -722521979);\\n        b = this.hh(b, c, d, a, x[i + 6], 23, 76029189);\\n        a = this.hh(a, b, c, d, x[i + 9], 4, -640364487);\\n        d = this.hh(d, a, b, c, x[i + 12], 11, -421815835);\\n        c = this.hh(c, d, a, b, x[i + 15], 16, 530742520);\\n        b = this.hh(b, c, d, a, x[i + 2], 23, -995338651);\\n        a = this.ii(a, b, c, d, x[i], 6, -198630844);\\n        d = this.ii(d, a, b, c, x[i + 7], 10, 1126891415);\\n        c = this.ii(c, d, a, b, x[i + 14], 15, -1416354905);\\n        b = this.ii(b, c, d, a, x[i + 5], 21, -57434055);\\n        a = this.ii(a, b, c, d, x[i + 12], 6, 1700485571);\\n        d = this.ii(d, a, b, c, x[i + 3], 10, -1894986606);\\n        c = this.ii(c, d, a, b, x[i + 10], 15, -1051523);\\n        b = this.ii(b, c, d, a, x[i + 1], 21, -2054922799);\\n        a = this.ii(a, b, c, d, x[i + 8], 6, 1873313359);\\n        d = this.ii(d, a, b, c, x[i + 15], 10, -30611744);\\n        c = this.ii(c, d, a, b, x[i + 6], 15, -1560198380);\\n        b = this.ii(b, c, d, a, x[i + 13], 21, 1309151649);\\n        a = this.ii(a, b, c, d, x[i + 4], 6, -145523070);\\n        d = this.ii(d, a, b, c, x[i + 11], 10, -1120210379);\\n        c = this.ii(c, d, a, b, x[i + 2], 15, 718787259);\\n        b = this.ii(b, c, d, a, x[i + 9], 21, -343485551);\\n        a = this.addme(a, olda);\\n        b = this.addme(b, oldb);\\n        c = this.addme(c, oldc);\\n        d = this.addme(d, oldd);\\n        i += 16;\\n      }\\n      return this.rhex(a) + this.rhex(b) + this.rhex(c) + this.rhex(d);\\n    }\\n    , ii: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitXOR(c, this.bitOR(b, ~d)), a, b, x, s, t);\\n    }\\n    , hh: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitXOR(this.bitXOR(b, c), d), a, b, x, s, t);\\n    }\\n    , gg: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitOR(this.bitAND(b, d), this.bitAND(c, ~d)), a, b, x, s, t);\\n    }\\n    , ff: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitOR(this.bitAND(b, c), this.bitAND(~b, d)), a, b, x, s, t);\\n    }\\n    , cmn: function (q, a, b, x, s, t) {\\n      return this.addme(this.rol(this.addme(this.addme(a, q), this.addme(x, t)), s), b);\\n    }\\n    , rol: function (num, cnt) {\\n      return num << cnt | num >>> 32 - cnt;\\n    }\\n    , str2blks: function (str) {\\n      var nblk = (str.length + 8 >> 6) + 1;\\n      var blks = new Array();\\n      var _g1 = 0, _g = nblk * 16;\\n      while (_g1 < _g) {\\n        var i = _g1++;\\n        blks[i] = 0;\\n      }\\n      var i = 0;\\n      while (i < str.length) {\\n        blks[i >> 2] |= HxOverrides.cca(str, i) << (str.length * 8 + i) % 4 * 8;\\n        i++;\\n      }\\n      blks[i >> 2] |= 128 << (str.length * 8 + i) % 4 * 8;\\n      var l = str.length * 8;\\n      var k = nblk * 16 - 2;\\n      blks[k] = l & 255;\\n      blks[k] |= (l >>> 8 & 255) << 8;\\n      blks[k] |= (l >>> 16 & 255) << 16;\\n      blks[k] |= (l >>> 24 & 255) << 24;\\n      return blks;\\n    }\\n    , rhex: function (num) {\\n      var str = \\\"\\\";\\n      var hex_chr = \\\"0123456789abcdef\\\";\\n      var _g = 0;\\n      while (_g < 4) {\\n        var j = _g++;\\n        str += hex_chr.charAt(num >> j * 8 + 4 & 15) + hex_chr.charAt(num >> j * 8 & 15);\\n      }\\n      return str;\\n    }\\n    , addme: function (x, y) {\\n      var lsw = (x & 65535) + (y & 65535);\\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\\n      return msw << 16 | lsw & 65535;\\n    }\\n    , bitAND: function (a, b) {\\n      var lsb = a & 1 & (b & 1);\\n      var msb31 = a >>> 1 & b >>> 1;\\n      return msb31 << 1 | lsb;\\n    }\\n    , bitXOR: function (a, b) {\\n      var lsb = a & 1 ^ b & 1;\\n      var msb31 = a >>> 1 ^ b >>> 1;\\n      return msb31 << 1 | lsb;\\n    }\\n    , bitOR: function (a, b) {\\n      var lsb = a & 1 | b & 1;\\n      var msb31 = a >>> 1 | b >>> 1;\\n      return msb31 << 1 | lsb;\\n    }\\n    , __class__: haxe.Md5\\n  }\\n  haxe.Timer = function (time_ms) {\\n    var me = this;\\n    this.id = window.setInterval(function () {\\n      me.run();\\n    }, time_ms);\\n  };\\n  haxe.Timer.__name__ = true;\\n  haxe.Timer.delay = function (f, time_ms) {\\n    var t = new haxe.Timer(time_ms);\\n    t.run = function () {\\n      t.stop();\\n      f();\\n    };\\n    return t;\\n  }\\n  haxe.Timer.measure = function (f, pos) {\\n    var t0 = haxe.Timer.stamp();\\n    var r = f();\\n    haxe.Log.trace(haxe.Timer.stamp() - t0 + \\\"s\\\", pos);\\n    return r;\\n  }\\n  haxe.Timer.stamp = function () {\\n    return new Date().getTime() / 1000;\\n  }\\n  haxe.Timer.prototype = {\\n    run: function () {\\n    }\\n    , stop: function () {\\n      if (this.id == null) return;\\n      window.clearInterval(this.id);\\n      this.id = null;\\n    }\\n    , __class__: haxe.Timer\\n  }\\n  var js = js || {}\\n  js.Boot = function () { }\\n  js.Boot.__name__ = true;\\n  js.Boot.__unhtml = function (s) {\\n    return s.split(\\\"&\\\").join(\\\"&amp;\\\").split(\\\"<\\\").join(\\\"&lt;\\\").split(\\\">\\\").join(\\\"&gt;\\\");\\n  }\\n  js.Boot.__trace = function (v, i) {\\n    var msg = i != null ? i.fileName + \\\":\\\" + i.lineNumber + \\\": \\\" : \\\"\\\";\\n    msg += js.Boot.__string_rec(v, \\\"\\\");\\n    var d;\\n    if (typeof (document) != \\\"undefined\\\" && (d = document.getElementById(\\\"haxe:trace\\\")) != null) d.innerHTML += js.Boot.__unhtml(msg) + \\\"<br/>\\\"; else if (typeof (console) != \\\"undefined\\\" && console.log != null) console.log(msg);\\n  }\\n  js.Boot.__clear_trace = function () {\\n    var d = document.getElementById(\\\"haxe:trace\\\");\\n    if (d != null) d.innerHTML = \\\"\\\";\\n  }\\n  js.Boot.isClass = function (o) {\\n    return o.__name__;\\n  }\\n  js.Boot.isEnum = function (e) {\\n    return e.__ename__;\\n  }\\n  js.Boot.getClass = function (o) {\\n    return o.__class__;\\n  }\\n  js.Boot.__string_rec = function (o, s) {\\n    if (o == null) return \\\"null\\\";\\n    if (s.length >= 5) return \\\"<...>\\\";\\n    var t = typeof (o);\\n    if (t == \\\"function\\\" && (o.__name__ || o.__ename__)) t = \\\"object\\\";\\n    switch (t) {\\n      case \\\"object\\\":\\n        if (o instanceof Array) {\\n          if (o.__enum__) {\\n            if (o.length == 2) return o[0];\\n            var str = o[0] + \\\"(\\\";\\n            s += \\\"\\\\t\\\";\\n            var _g1 = 2, _g = o.length;\\n            while (_g1 < _g) {\\n              var i = _g1++;\\n              if (i != 2) str += \\\",\\\" + js.Boot.__string_rec(o[i], s); else str += js.Boot.__string_rec(o[i], s);\\n            }\\n            return str + \\\")\\\";\\n          }\\n          var l = o.length;\\n          var i;\\n          var str = \\\"[\\\";\\n          s += \\\"\\\\t\\\";\\n          var _g = 0;\\n          while (_g < l) {\\n            var i1 = _g++;\\n            str += (i1 > 0 ? \\\",\\\" : \\\"\\\") + js.Boot.__string_rec(o[i1], s);\\n          }\\n          str += \\\"]\\\";\\n          return str;\\n        }\\n        var tostr;\\n        try {\\n          tostr = o.toString;\\n        } catch (e) {\\n          return \\\"???\\\";\\n        }\\n        if (tostr != null && tostr != Object.toString) {\\n          var s2 = o.toString();\\n          if (s2 != \\\"[object Object]\\\") return s2;\\n        }\\n        var k = null;\\n        var str = \\\"{\\\\n\\\";\\n        s += \\\"\\\\t\\\";\\n        var hasp = o.hasOwnProperty != null;\\n        for (var k in o) {\\n          ;\\n          if (hasp && !o.hasOwnProperty(k)) {\\n            continue;\\n          }\\n          if (k == \\\"prototype\\\" || k == \\\"__class__\\\" || k == \\\"__super__\\\" || k == \\\"__interfaces__\\\" || k == \\\"__properties__\\\") {\\n            continue;\\n          }\\n          if (str.length != 2) str += \\\", \\\\n\\\";\\n          str += s + k + \\\" : \\\" + js.Boot.__string_rec(o[k], s);\\n        }\\n        s = s.substring(1);\\n        str += \\\"\\\\n\\\" + s + \\\"}\\\";\\n        return str;\\n      case \\\"function\\\":\\n        return \\\"<function>\\\";\\n      case \\\"string\\\":\\n        return o;\\n      default:\\n        return String(o);\\n    }\\n  }\\n  js.Boot.__interfLoop = function (cc, cl) {\\n    if (cc == null) return false;\\n    if (cc == cl) return true;\\n    var intf = cc.__interfaces__;\\n    if (intf != null) {\\n      var _g1 = 0, _g = intf.length;\\n      while (_g1 < _g) {\\n        var i = _g1++;\\n        var i1 = intf[i];\\n        if (i1 == cl || js.Boot.__interfLoop(i1, cl)) return true;\\n      }\\n    }\\n    return js.Boot.__interfLoop(cc.__super__, cl);\\n  }\\n  js.Boot.__instanceof = function (o, cl) {\\n    try {\\n      if (o instanceof cl) {\\n        if (cl == Array) return o.__enum__ == null;\\n        return true;\\n      }\\n      if (js.Boot.__interfLoop(o.__class__, cl)) return true;\\n    } catch (e) {\\n      if (cl == null) return false;\\n    }\\n    switch (cl) {\\n      case Int:\\n        return Math.ceil(o % 2147483648.0) === o;\\n      case Float:\\n        return typeof (o) == \\\"number\\\";\\n      case Bool:\\n        return o === true || o === false;\\n      case String:\\n        return typeof (o) == \\\"string\\\";\\n      case Dynamic:\\n        return true;\\n      default:\\n        if (o == null) return false;\\n        if (cl == Class && o.__name__ != null) return true; else null;\\n        if (cl == Enum && o.__ename__ != null) return true; else null;\\n        return o.__enum__ == cl;\\n    }\\n  }\\n  js.Boot.__cast = function (o, t) {\\n    if (js.Boot.__instanceof(o, t)) return o; else throw \\\"Cannot cast \\\" + Std.string(o) + \\\" to \\\" + Std.string(t);\\n  }\\n  js.Lib = function () { }\\n  js.Lib.__name__ = true;\\n  js.Lib.debug = function () {\\n    debugger;\\n  }\\n  js.Lib.alert = function (v) {\\n    alert(js.Boot.__string_rec(v, \\\"\\\"));\\n  }\\n  js.Lib.eval = function (code) {\\n    return eval(code);\\n  }\\n  js.Lib.setErrorHandler = function (f) {\\n    js.Lib.onerror = f;\\n  }\\n  var $_;\\n  function $bind(o, m) { var f = function () { return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; return f; };\\n  if (Array.prototype.indexOf) HxOverrides.remove = function (a, o) {\\n    var i = a.indexOf(o);\\n    if (i == -1) return false;\\n    a.splice(i, 1);\\n    return true;\\n  }; else null;\\n  Math.__name__ = [\\\"Math\\\"];\\n  Math.NaN = Number.NaN;\\n  Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\\n  Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\\n  Math.isFinite = function (i) {\\n    return isFinite(i);\\n  };\\n  Math.isNaN = function (i) {\\n    return isNaN(i);\\n  };\\n  String.prototype.__class__ = String;\\n  String.__name__ = true;\\n  Array.prototype.__class__ = Array;\\n  Array.__name__ = true;\\n  Date.prototype.__class__ = Date;\\n  Date.__name__ = [\\\"Date\\\"];\\n  var Int = { __name__: [\\\"Int\\\"] };\\n  var Dynamic = { __name__: [\\\"Dynamic\\\"] };\\n  var Float = Number;\\n  Float.__name__ = [\\\"Float\\\"];\\n  var Bool = Boolean;\\n  Bool.__ename__ = [\\\"Bool\\\"];\\n  var Class = { __name__: [\\\"Class\\\"] };\\n  var Enum = {};\\n  var Void = { __ename__: [\\\"Void\\\"] };\\n  if (typeof document != \\\"undefined\\\") js.Lib.document = document;\\n  if (typeof window != \\\"undefined\\\") {\\n    js.Lib.window = window;\\n    js.Lib.window.onerror = function (msg, url, line) {\\n      var f = js.Lib.onerror;\\n      if (f == null) return false;\\n      return f(msg, [url + \\\":\\\" + line]);\\n    };\\n  }\\n  com.wiris.js.JsPluginTools.main();\\n  delete Array.prototype.__class__;\\n}());\\n\\n\\n(function () {\\n  var HxOverrides = function () { }\\n  HxOverrides.__name__ = true;\\n  HxOverrides.dateStr = function (date) {\\n    var m = date.getMonth() + 1;\\n    var d = date.getDate();\\n    var h = date.getHours();\\n    var mi = date.getMinutes();\\n    var s = date.getSeconds();\\n    return date.getFullYear() + \\\"-\\\" + (m < 10 ? \\\"0\\\" + m : \\\"\\\" + m) + \\\"-\\\" + (d < 10 ? \\\"0\\\" + d : \\\"\\\" + d) + \\\" \\\" + (h < 10 ? \\\"0\\\" + h : \\\"\\\" + h) + \\\":\\\" + (mi < 10 ? \\\"0\\\" + mi : \\\"\\\" + mi) + \\\":\\\" + (s < 10 ? \\\"0\\\" + s : \\\"\\\" + s);\\n  }\\n  HxOverrides.strDate = function (s) {\\n    switch (s.length) {\\n      case 8:\\n        var k = s.split(\\\":\\\");\\n        var d = new Date();\\n        d.setTime(0);\\n        d.setUTCHours(k[0]);\\n        d.setUTCMinutes(k[1]);\\n        d.setUTCSeconds(k[2]);\\n        return d;\\n      case 10:\\n        var k = s.split(\\\"-\\\");\\n        return new Date(k[0], k[1] - 1, k[2], 0, 0, 0);\\n      case 19:\\n        var k = s.split(\\\" \\\");\\n        var y = k[0].split(\\\"-\\\");\\n        var t = k[1].split(\\\":\\\");\\n        return new Date(y[0], y[1] - 1, y[2], t[0], t[1], t[2]);\\n      default:\\n        throw \\\"Invalid date format : \\\" + s;\\n    }\\n  }\\n  HxOverrides.cca = function (s, index) {\\n    var x = s.charCodeAt(index);\\n    if (x != x) return undefined;\\n    return x;\\n  }\\n  HxOverrides.substr = function (s, pos, len) {\\n    if (pos != null && pos != 0 && len != null && len < 0) return \\\"\\\";\\n    if (len == null) len = s.length;\\n    if (pos < 0) {\\n      pos = s.length + pos;\\n      if (pos < 0) pos = 0;\\n    } else if (len < 0) len = s.length + len - pos;\\n    return s.substr(pos, len);\\n  }\\n  HxOverrides.remove = function (a, obj) {\\n    var i = 0;\\n    var l = a.length;\\n    while (i < l) {\\n      if (a[i] == obj) {\\n        a.splice(i, 1);\\n        return true;\\n      }\\n      i++;\\n    }\\n    return false;\\n  }\\n  HxOverrides.iter = function (a) {\\n    return {\\n      cur: 0, arr: a, hasNext: function () {\\n        return this.cur < this.arr.length;\\n      }, next: function () {\\n        return this.arr[this.cur++];\\n      }\\n    };\\n  }\\n  var IntIter = function (min, max) {\\n    this.min = min;\\n    this.max = max;\\n  };\\n  IntIter.__name__ = true;\\n  IntIter.prototype = {\\n    next: function () {\\n      return this.min++;\\n    }\\n    , hasNext: function () {\\n      return this.min < this.max;\\n    }\\n    , __class__: IntIter\\n  }\\n  var Std = function () { }\\n  Std.__name__ = true;\\n  Std[\\\"is\\\"] = function (v, t) {\\n    return js.Boot.__instanceof(v, t);\\n  }\\n  Std.string = function (s) {\\n    return js.Boot.__string_rec(s, \\\"\\\");\\n  }\\n  Std[\\\"int\\\"] = function (x) {\\n    return x | 0;\\n  }\\n  Std.parseInt = function (x) {\\n    var v = parseInt(x, 10);\\n    if (v == 0 && (HxOverrides.cca(x, 1) == 120 || HxOverrides.cca(x, 1) == 88)) v = parseInt(x);\\n    if (isNaN(v)) return null;\\n    return v;\\n  }\\n  Std.parseFloat = function (x) {\\n    return parseFloat(x);\\n  }\\n  Std.random = function (x) {\\n    return Math.floor(Math.random() * x);\\n  }\\n  var com = com || {}\\n  if (!com.wiris) com.wiris = {}\\n  if (!com.wiris.js) com.wiris.js = {}\\n  com.wiris.js.JsPluginTools = function () {\\n    this.tryReady();\\n  };\\n  com.wiris.js.JsPluginTools.__name__ = true;\\n  com.wiris.js.JsPluginTools.main = function () {\\n    var ev;\\n    ev = com.wiris.js.JsPluginTools.getInstance();\\n    haxe.Timer.delay($bind(ev, ev.tryReady), 100);\\n  }\\n  com.wiris.js.JsPluginTools.getInstance = function () {\\n    if (com.wiris.js.JsPluginTools.instance == null) com.wiris.js.JsPluginTools.instance = new com.wiris.js.JsPluginTools();\\n    return com.wiris.js.JsPluginTools.instance;\\n  }\\n  com.wiris.js.JsPluginTools.bypassEncapsulation = function () {\\n    if (window.com == null) window.com = {};\\n    if (window.com.wiris == null) window.com.wiris = {};\\n    if (window.com.wiris.js == null) window.com.wiris.js = {};\\n    if (window.com.wiris.js.JsPluginTools == null) window.com.wiris.js.JsPluginTools = com.wiris.js.JsPluginTools.getInstance();\\n  }\\n  com.wiris.js.JsPluginTools.prototype = {\\n    md5encode: function (content) {\\n      return haxe.Md5.encode(content);\\n    }\\n    , doLoad: function () {\\n      this.ready = true;\\n      com.wiris.js.JsPluginTools.instance = this;\\n      com.wiris.js.JsPluginTools.bypassEncapsulation();\\n    }\\n    , tryReady: function () {\\n      this.ready = false;\\n      if (js.Lib.document.readyState) {\\n        this.doLoad();\\n        this.ready = true;\\n      }\\n      if (!this.ready) haxe.Timer.delay($bind(this, this.tryReady), 100);\\n    }\\n    , __class__: com.wiris.js.JsPluginTools\\n  }\\n  var haxe = haxe || {}\\n  haxe.Log = function () { }\\n  haxe.Log.__name__ = true;\\n  haxe.Log.trace = function (v, infos) {\\n    js.Boot.__trace(v, infos);\\n  }\\n  haxe.Log.clear = function () {\\n    js.Boot.__clear_trace();\\n  }\\n  haxe.Md5 = function () {\\n  };\\n  haxe.Md5.__name__ = true;\\n  haxe.Md5.encode = function (s) {\\n    return new haxe.Md5().doEncode(s);\\n  }\\n  haxe.Md5.prototype = {\\n    doEncode: function (str) {\\n      var x = this.str2blks(str);\\n      var a = 1732584193;\\n      var b = -271733879;\\n      var c = -1732584194;\\n      var d = 271733878;\\n      var step;\\n      var i = 0;\\n      while (i < x.length) {\\n        var olda = a;\\n        var oldb = b;\\n        var oldc = c;\\n        var oldd = d;\\n        step = 0;\\n        a = this.ff(a, b, c, d, x[i], 7, -680876936);\\n        d = this.ff(d, a, b, c, x[i + 1], 12, -389564586);\\n        c = this.ff(c, d, a, b, x[i + 2], 17, 606105819);\\n        b = this.ff(b, c, d, a, x[i + 3], 22, -1044525330);\\n        a = this.ff(a, b, c, d, x[i + 4], 7, -176418897);\\n        d = this.ff(d, a, b, c, x[i + 5], 12, 1200080426);\\n        c = this.ff(c, d, a, b, x[i + 6], 17, -1473231341);\\n        b = this.ff(b, c, d, a, x[i + 7], 22, -45705983);\\n        a = this.ff(a, b, c, d, x[i + 8], 7, 1770035416);\\n        d = this.ff(d, a, b, c, x[i + 9], 12, -1958414417);\\n        c = this.ff(c, d, a, b, x[i + 10], 17, -42063);\\n        b = this.ff(b, c, d, a, x[i + 11], 22, -1990404162);\\n        a = this.ff(a, b, c, d, x[i + 12], 7, 1804603682);\\n        d = this.ff(d, a, b, c, x[i + 13], 12, -40341101);\\n        c = this.ff(c, d, a, b, x[i + 14], 17, -1502002290);\\n        b = this.ff(b, c, d, a, x[i + 15], 22, 1236535329);\\n        a = this.gg(a, b, c, d, x[i + 1], 5, -165796510);\\n        d = this.gg(d, a, b, c, x[i + 6], 9, -1069501632);\\n        c = this.gg(c, d, a, b, x[i + 11], 14, 643717713);\\n        b = this.gg(b, c, d, a, x[i], 20, -373897302);\\n        a = this.gg(a, b, c, d, x[i + 5], 5, -701558691);\\n        d = this.gg(d, a, b, c, x[i + 10], 9, 38016083);\\n        c = this.gg(c, d, a, b, x[i + 15], 14, -660478335);\\n        b = this.gg(b, c, d, a, x[i + 4], 20, -405537848);\\n        a = this.gg(a, b, c, d, x[i + 9], 5, 568446438);\\n        d = this.gg(d, a, b, c, x[i + 14], 9, -1019803690);\\n        c = this.gg(c, d, a, b, x[i + 3], 14, -187363961);\\n        b = this.gg(b, c, d, a, x[i + 8], 20, 1163531501);\\n        a = this.gg(a, b, c, d, x[i + 13], 5, -1444681467);\\n        d = this.gg(d, a, b, c, x[i + 2], 9, -51403784);\\n        c = this.gg(c, d, a, b, x[i + 7], 14, 1735328473);\\n        b = this.gg(b, c, d, a, x[i + 12], 20, -1926607734);\\n        a = this.hh(a, b, c, d, x[i + 5], 4, -378558);\\n        d = this.hh(d, a, b, c, x[i + 8], 11, -2022574463);\\n        c = this.hh(c, d, a, b, x[i + 11], 16, 1839030562);\\n        b = this.hh(b, c, d, a, x[i + 14], 23, -35309556);\\n        a = this.hh(a, b, c, d, x[i + 1], 4, -1530992060);\\n        d = this.hh(d, a, b, c, x[i + 4], 11, 1272893353);\\n        c = this.hh(c, d, a, b, x[i + 7], 16, -155497632);\\n        b = this.hh(b, c, d, a, x[i + 10], 23, -1094730640);\\n        a = this.hh(a, b, c, d, x[i + 13], 4, 681279174);\\n        d = this.hh(d, a, b, c, x[i], 11, -358537222);\\n        c = this.hh(c, d, a, b, x[i + 3], 16, -722521979);\\n        b = this.hh(b, c, d, a, x[i + 6], 23, 76029189);\\n        a = this.hh(a, b, c, d, x[i + 9], 4, -640364487);\\n        d = this.hh(d, a, b, c, x[i + 12], 11, -421815835);\\n        c = this.hh(c, d, a, b, x[i + 15], 16, 530742520);\\n        b = this.hh(b, c, d, a, x[i + 2], 23, -995338651);\\n        a = this.ii(a, b, c, d, x[i], 6, -198630844);\\n        d = this.ii(d, a, b, c, x[i + 7], 10, 1126891415);\\n        c = this.ii(c, d, a, b, x[i + 14], 15, -1416354905);\\n        b = this.ii(b, c, d, a, x[i + 5], 21, -57434055);\\n        a = this.ii(a, b, c, d, x[i + 12], 6, 1700485571);\\n        d = this.ii(d, a, b, c, x[i + 3], 10, -1894986606);\\n        c = this.ii(c, d, a, b, x[i + 10], 15, -1051523);\\n        b = this.ii(b, c, d, a, x[i + 1], 21, -2054922799);\\n        a = this.ii(a, b, c, d, x[i + 8], 6, 1873313359);\\n        d = this.ii(d, a, b, c, x[i + 15], 10, -30611744);\\n        c = this.ii(c, d, a, b, x[i + 6], 15, -1560198380);\\n        b = this.ii(b, c, d, a, x[i + 13], 21, 1309151649);\\n        a = this.ii(a, b, c, d, x[i + 4], 6, -145523070);\\n        d = this.ii(d, a, b, c, x[i + 11], 10, -1120210379);\\n        c = this.ii(c, d, a, b, x[i + 2], 15, 718787259);\\n        b = this.ii(b, c, d, a, x[i + 9], 21, -343485551);\\n        a = this.addme(a, olda);\\n        b = this.addme(b, oldb);\\n        c = this.addme(c, oldc);\\n        d = this.addme(d, oldd);\\n        i += 16;\\n      }\\n      return this.rhex(a) + this.rhex(b) + this.rhex(c) + this.rhex(d);\\n    }\\n    , ii: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitXOR(c, this.bitOR(b, ~d)), a, b, x, s, t);\\n    }\\n    , hh: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitXOR(this.bitXOR(b, c), d), a, b, x, s, t);\\n    }\\n    , gg: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitOR(this.bitAND(b, d), this.bitAND(c, ~d)), a, b, x, s, t);\\n    }\\n    , ff: function (a, b, c, d, x, s, t) {\\n      return this.cmn(this.bitOR(this.bitAND(b, c), this.bitAND(~b, d)), a, b, x, s, t);\\n    }\\n    , cmn: function (q, a, b, x, s, t) {\\n      return this.addme(this.rol(this.addme(this.addme(a, q), this.addme(x, t)), s), b);\\n    }\\n    , rol: function (num, cnt) {\\n      return num << cnt | num >>> 32 - cnt;\\n    }\\n    , str2blks: function (str) {\\n      var nblk = (str.length + 8 >> 6) + 1;\\n      var blks = new Array();\\n      var _g1 = 0, _g = nblk * 16;\\n      while (_g1 < _g) {\\n        var i = _g1++;\\n        blks[i] = 0;\\n      }\\n      var i = 0;\\n      while (i < str.length) {\\n        blks[i >> 2] |= HxOverrides.cca(str, i) << (str.length * 8 + i) % 4 * 8;\\n        i++;\\n      }\\n      blks[i >> 2] |= 128 << (str.length * 8 + i) % 4 * 8;\\n      var l = str.length * 8;\\n      var k = nblk * 16 - 2;\\n      blks[k] = l & 255;\\n      blks[k] |= (l >>> 8 & 255) << 8;\\n      blks[k] |= (l >>> 16 & 255) << 16;\\n      blks[k] |= (l >>> 24 & 255) << 24;\\n      return blks;\\n    }\\n    , rhex: function (num) {\\n      var str = \\\"\\\";\\n      var hex_chr = \\\"0123456789abcdef\\\";\\n      var _g = 0;\\n      while (_g < 4) {\\n        var j = _g++;\\n        str += hex_chr.charAt(num >> j * 8 + 4 & 15) + hex_chr.charAt(num >> j * 8 & 15);\\n      }\\n      return str;\\n    }\\n    , addme: function (x, y) {\\n      var lsw = (x & 65535) + (y & 65535);\\n      var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\\n      return msw << 16 | lsw & 65535;\\n    }\\n    , bitAND: function (a, b) {\\n      var lsb = a & 1 & (b & 1);\\n      var msb31 = a >>> 1 & b >>> 1;\\n      return msb31 << 1 | lsb;\\n    }\\n    , bitXOR: function (a, b) {\\n      var lsb = a & 1 ^ b & 1;\\n      var msb31 = a >>> 1 ^ b >>> 1;\\n      return msb31 << 1 | lsb;\\n    }\\n    , bitOR: function (a, b) {\\n      var lsb = a & 1 | b & 1;\\n      var msb31 = a >>> 1 | b >>> 1;\\n      return msb31 << 1 | lsb;\\n    }\\n    , __class__: haxe.Md5\\n  }\\n  haxe.Timer = function (time_ms) {\\n    var me = this;\\n    this.id = window.setInterval(function () {\\n      me.run();\\n    }, time_ms);\\n  };\\n  haxe.Timer.__name__ = true;\\n  haxe.Timer.delay = function (f, time_ms) {\\n    var t = new haxe.Timer(time_ms);\\n    t.run = function () {\\n      t.stop();\\n      f();\\n    };\\n    return t;\\n  }\\n  haxe.Timer.measure = function (f, pos) {\\n    var t0 = haxe.Timer.stamp();\\n    var r = f();\\n    haxe.Log.trace(haxe.Timer.stamp() - t0 + \\\"s\\\", pos);\\n    return r;\\n  }\\n  haxe.Timer.stamp = function () {\\n    return new Date().getTime() / 1000;\\n  }\\n  haxe.Timer.prototype = {\\n    run: function () {\\n    }\\n    , stop: function () {\\n      if (this.id == null) return;\\n      window.clearInterval(this.id);\\n      this.id = null;\\n    }\\n    , __class__: haxe.Timer\\n  }\\n  var js = js || {}\\n  js.Boot = function () { }\\n  js.Boot.__name__ = true;\\n  js.Boot.__unhtml = function (s) {\\n    return s.split(\\\"&\\\").join(\\\"&amp;\\\").split(\\\"<\\\").join(\\\"&lt;\\\").split(\\\">\\\").join(\\\"&gt;\\\");\\n  }\\n  js.Boot.__trace = function (v, i) {\\n    var msg = i != null ? i.fileName + \\\":\\\" + i.lineNumber + \\\": \\\" : \\\"\\\";\\n    msg += js.Boot.__string_rec(v, \\\"\\\");\\n    var d;\\n    if (typeof (document) != \\\"undefined\\\" && (d = document.getElementById(\\\"haxe:trace\\\")) != null) d.innerHTML += js.Boot.__unhtml(msg) + \\\"<br/>\\\"; else if (typeof (console) != \\\"undefined\\\" && console.log != null) console.log(msg);\\n  }\\n  js.Boot.__clear_trace = function () {\\n    var d = document.getElementById(\\\"haxe:trace\\\");\\n    if (d != null) d.innerHTML = \\\"\\\";\\n  }\\n  js.Boot.isClass = function (o) {\\n    return o.__name__;\\n  }\\n  js.Boot.isEnum = function (e) {\\n    return e.__ename__;\\n  }\\n  js.Boot.getClass = function (o) {\\n    return o.__class__;\\n  }\\n  js.Boot.__string_rec = function (o, s) {\\n    if (o == null) return \\\"null\\\";\\n    if (s.length >= 5) return \\\"<...>\\\";\\n    var t = typeof (o);\\n    if (t == \\\"function\\\" && (o.__name__ || o.__ename__)) t = \\\"object\\\";\\n    switch (t) {\\n      case \\\"object\\\":\\n        if (o instanceof Array) {\\n          if (o.__enum__) {\\n            if (o.length == 2) return o[0];\\n            var str = o[0] + \\\"(\\\";\\n            s += \\\"\\\\t\\\";\\n            var _g1 = 2, _g = o.length;\\n            while (_g1 < _g) {\\n              var i = _g1++;\\n              if (i != 2) str += \\\",\\\" + js.Boot.__string_rec(o[i], s); else str += js.Boot.__string_rec(o[i], s);\\n            }\\n            return str + \\\")\\\";\\n          }\\n          var l = o.length;\\n          var i;\\n          var str = \\\"[\\\";\\n          s += \\\"\\\\t\\\";\\n          var _g = 0;\\n          while (_g < l) {\\n            var i1 = _g++;\\n            str += (i1 > 0 ? \\\",\\\" : \\\"\\\") + js.Boot.__string_rec(o[i1], s);\\n          }\\n          str += \\\"]\\\";\\n          return str;\\n        }\\n        var tostr;\\n        try {\\n          tostr = o.toString;\\n        } catch (e) {\\n          return \\\"???\\\";\\n        }\\n        if (tostr != null && tostr != Object.toString) {\\n          var s2 = o.toString();\\n          if (s2 != \\\"[object Object]\\\") return s2;\\n        }\\n        var k = null;\\n        var str = \\\"{\\\\n\\\";\\n        s += \\\"\\\\t\\\";\\n        var hasp = o.hasOwnProperty != null;\\n        for (var k in o) {\\n          ;\\n          if (hasp && !o.hasOwnProperty(k)) {\\n            continue;\\n          }\\n          if (k == \\\"prototype\\\" || k == \\\"__class__\\\" || k == \\\"__super__\\\" || k == \\\"__interfaces__\\\" || k == \\\"__properties__\\\") {\\n            continue;\\n          }\\n          if (str.length != 2) str += \\\", \\\\n\\\";\\n          str += s + k + \\\" : \\\" + js.Boot.__string_rec(o[k], s);\\n        }\\n        s = s.substring(1);\\n        str += \\\"\\\\n\\\" + s + \\\"}\\\";\\n        return str;\\n      case \\\"function\\\":\\n        return \\\"<function>\\\";\\n      case \\\"string\\\":\\n        return o;\\n      default:\\n        return String(o);\\n    }\\n  }\\n  js.Boot.__interfLoop = function (cc, cl) {\\n    if (cc == null) return false;\\n    if (cc == cl) return true;\\n    var intf = cc.__interfaces__;\\n    if (intf != null) {\\n      var _g1 = 0, _g = intf.length;\\n      while (_g1 < _g) {\\n        var i = _g1++;\\n        var i1 = intf[i];\\n        if (i1 == cl || js.Boot.__interfLoop(i1, cl)) return true;\\n      }\\n    }\\n    return js.Boot.__interfLoop(cc.__super__, cl);\\n  }\\n  js.Boot.__instanceof = function (o, cl) {\\n    try {\\n      if (o instanceof cl) {\\n        if (cl == Array) return o.__enum__ == null;\\n        return true;\\n      }\\n      if (js.Boot.__interfLoop(o.__class__, cl)) return true;\\n    } catch (e) {\\n      if (cl == null) return false;\\n    }\\n    switch (cl) {\\n      case Int:\\n        return Math.ceil(o % 2147483648.0) === o;\\n      case Float:\\n        return typeof (o) == \\\"number\\\";\\n      case Bool:\\n        return o === true || o === false;\\n      case String:\\n        return typeof (o) == \\\"string\\\";\\n      case Dynamic:\\n        return true;\\n      default:\\n        if (o == null) return false;\\n        if (cl == Class && o.__name__ != null) return true; else null;\\n        if (cl == Enum && o.__ename__ != null) return true; else null;\\n        return o.__enum__ == cl;\\n    }\\n  }\\n  js.Boot.__cast = function (o, t) {\\n    if (js.Boot.__instanceof(o, t)) return o; else throw \\\"Cannot cast \\\" + Std.string(o) + \\\" to \\\" + Std.string(t);\\n  }\\n  js.Lib = function () { }\\n  js.Lib.__name__ = true;\\n  js.Lib.debug = function () {\\n    debugger;\\n  }\\n  js.Lib.alert = function (v) {\\n    alert(js.Boot.__string_rec(v, \\\"\\\"));\\n  }\\n  js.Lib.eval = function (code) {\\n    return eval(code);\\n  }\\n  js.Lib.setErrorHandler = function (f) {\\n    js.Lib.onerror = f;\\n  }\\n  var $_;\\n  function $bind(o, m) { var f = function () { return f.method.apply(f.scope, arguments); }; f.scope = o; f.method = m; return f; };\\n  if (Array.prototype.indexOf) HxOverrides.remove = function (a, o) {\\n    var i = a.indexOf(o);\\n    if (i == -1) return false;\\n    a.splice(i, 1);\\n    return true;\\n  }; else null;\\n  Math.__name__ = [\\\"Math\\\"];\\n  Math.NaN = Number.NaN;\\n  Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\\n  Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\\n  Math.isFinite = function (i) {\\n    return isFinite(i);\\n  };\\n  Math.isNaN = function (i) {\\n    return isNaN(i);\\n  };\\n  String.prototype.__class__ = String;\\n  String.__name__ = true;\\n  Array.prototype.__class__ = Array;\\n  Array.__name__ = true;\\n  Date.prototype.__class__ = Date;\\n  Date.__name__ = [\\\"Date\\\"];\\n  var Int = { __name__: [\\\"Int\\\"] };\\n  var Dynamic = { __name__: [\\\"Dynamic\\\"] };\\n  var Float = Number;\\n  Float.__name__ = [\\\"Float\\\"];\\n  var Bool = Boolean;\\n  Bool.__ename__ = [\\\"Bool\\\"];\\n  var Class = { __name__: [\\\"Class\\\"] };\\n  var Enum = {};\\n  var Void = { __ename__: [\\\"Void\\\"] };\\n  if (typeof document != \\\"undefined\\\") js.Lib.document = document;\\n  if (typeof window != \\\"undefined\\\") {\\n    js.Lib.window = window;\\n    js.Lib.window.onerror = function (msg, url, line) {\\n      var f = js.Lib.onerror;\\n      if (f == null) return false;\\n      return f(msg, [url + \\\":\\\" + line]);\\n    };\\n  }\\n  com.wiris.js.JsPluginTools.main();\\n}());\\ndelete Array.prototype.__class__;\\n// @codingStandardsIgnoreEnd\\n\",\"\\nvar content = require(\\\"!!../../../css-loader/index.js!./styles.css\\\");\\n\\nif(typeof content === 'string') content = [[module.id, content, '']];\\n\\nvar transform;\\nvar insertInto;\\n\\n\\n\\nvar options = {\\\"hmr\\\":true}\\n\\noptions.transform = transform\\noptions.insertInto = undefined;\\n\\nvar update = require(\\\"!../../../style-loader/lib/addStyles.js\\\")(content, options);\\n\\nif(content.locals) module.exports = content.locals;\\n\\nif(module.hot) {\\n\\tmodule.hot.accept(\\\"!!../../../css-loader/index.js!./styles.css\\\", function() {\\n\\t\\tvar newContent = require(\\\"!!../../../css-loader/index.js!./styles.css\\\");\\n\\n\\t\\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\\n\\n\\t\\tvar locals = (function(a, b) {\\n\\t\\t\\tvar key, idx = 0;\\n\\n\\t\\t\\tfor(key in a) {\\n\\t\\t\\t\\tif(!b || a[key] !== b[key]) return false;\\n\\t\\t\\t\\tidx++;\\n\\t\\t\\t}\\n\\n\\t\\t\\tfor(key in b) idx--;\\n\\n\\t\\t\\treturn idx === 0;\\n\\t\\t}(content.locals, newContent.locals));\\n\\n\\t\\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\\n\\n\\t\\tupdate(newContent);\\n\\t});\\n\\n\\tmodule.hot.dispose(function() { update(); });\\n}\",\"exports = module.exports = require(\\\"../../../css-loader/lib/css-base.js\\\")(false);\\n// imports\\n\\n\\n// module\\nexports.push([module.id, \\\".wrs_modal_overlay {\\\\r\\\\n  position: fixed;\\\\r\\\\n  font-family: arial, sans-serif;\\\\r\\\\n  top: 0;\\\\r\\\\n  right: 0;\\\\r\\\\n  left: 0;\\\\r\\\\n  bottom: 0;\\\\r\\\\n  background: rgba(0, 0, 0, 0.8);\\\\r\\\\n  z-index: 999998;\\\\r\\\\n  opacity: 0.65;\\\\r\\\\n  pointer-events: auto;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_ios {\\\\r\\\\n  visibility: hidden;\\\\r\\\\n  display: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_android {\\\\r\\\\n  visibility: hidden;\\\\r\\\\n  display: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_ios.moodle {\\\\r\\\\n  position: fixed;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_stack {\\\\r\\\\n  background: rgba(0, 0, 0, 0);\\\\r\\\\n  display: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_maximized {\\\\r\\\\n  background: rgba(0, 0, 0, 0.8);\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_minimized {\\\\r\\\\n  background: rgba(0, 0, 0, 0);\\\\r\\\\n  display: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_closed {\\\\r\\\\n  background: rgba(0, 0, 0, 0);\\\\r\\\\n  display: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_title {\\\\r\\\\n  color: #fff;\\\\r\\\\n  padding: 5px 0 5px 10px;\\\\r\\\\n  -moz-user-select: none;\\\\r\\\\n  -webkit-user-select: none;\\\\r\\\\n  -ms-user-select: none;\\\\r\\\\n  user-select: none;\\\\r\\\\n  text-align: left;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_close_button {\\\\r\\\\n  float: right;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  color: #fff;\\\\r\\\\n  padding: 5px 10px 5px 0;\\\\r\\\\n  margin: 10px 7px 0 0;\\\\r\\\\n  background-repeat: no-repeat;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_minimize_button {\\\\r\\\\n  float: right;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  color: #fff;\\\\r\\\\n  padding: 5px 10px 5px 0;\\\\r\\\\n  top: inherit;\\\\r\\\\n  margin: 10px 7px 0 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_stack_button {\\\\r\\\\n  float: right;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  color: #fff;\\\\r\\\\n  margin: 10px 7px 0 0;\\\\r\\\\n  padding: 5px 10px 5px 0;\\\\r\\\\n  top: inherit;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_stack_button.wrs_stack {\\\\r\\\\n  visibility: hidden;\\\\r\\\\n  margin: 0;\\\\r\\\\n  padding: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_stack_button.wrs_minimized {\\\\r\\\\n  visibility: hidden;\\\\r\\\\n  margin: 0;\\\\r\\\\n  padding: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_maximize_button {\\\\r\\\\n  float: right;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  color: #fff;\\\\r\\\\n  margin: 10px 7px 0 0;\\\\r\\\\n  padding: 5px 10px 5px 0;\\\\r\\\\n  top: inherit;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_maximize_button.wrs_maximized {\\\\r\\\\n  visibility: hidden;\\\\r\\\\n  margin: 0;\\\\r\\\\n  padding: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_wrapper {\\\\r\\\\n  display: block;\\\\r\\\\n  margin: 6px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_title_bar {\\\\r\\\\n  display: block;\\\\r\\\\n  background-color: #778e9a;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer {\\\\r\\\\n  border: none;\\\\r\\\\n  background: #fafafa;\\\\r\\\\n  z-index: 999999;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_desktop {\\\\r\\\\n  font-size: 14px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_maximized {\\\\r\\\\n  position: fixed;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized {\\\\r\\\\n  position: fixed;\\\\r\\\\n  top: inherit;\\\\r\\\\n  margin: 0;\\\\r\\\\n  margin-right: 10px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_closed {\\\\r\\\\n  visibility: hidden;\\\\r\\\\n  display: none;\\\\r\\\\n  opacity: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n\\\\r\\\\n/* Class that exists but hasn't got css properties defined\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized.wrs_drag {} */\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_stack {\\\\r\\\\n  position: fixed;\\\\r\\\\n  bottom: 0;\\\\r\\\\n  right: 0;\\\\r\\\\n  box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_drag {\\\\r\\\\n  box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_drag {\\\\r\\\\n  box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_android {\\\\r\\\\n  margin: auto;\\\\r\\\\n  position: fixed;\\\\r\\\\n  width: 99%;\\\\r\\\\n  height: 99%;\\\\r\\\\n  overflow: hidden;\\\\r\\\\n  transform: translate(50%, -50%);\\\\r\\\\n  top: 50%;\\\\r\\\\n  right: 50% !important;\\\\r\\\\n  position: fixed;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_ios {\\\\r\\\\n  margin: auto;\\\\r\\\\n  position: fixed;\\\\r\\\\n  width: 100%;\\\\r\\\\n  height: 100%;\\\\r\\\\n  overflow: hidden;\\\\r\\\\n  transform: translate(50%, -50%);\\\\r\\\\n  top: 50%;\\\\r\\\\n  right: 50% !important;\\\\r\\\\n  position: fixed;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n\\\\r\\\\n/* Class that exists but hasn't got css properties defined\\\\r\\\\n.wrs_content_container.wrs_maximized {} */\\\\r\\\\n\\\\r\\\\n.wrs_content_container.wrs_minimized {\\\\r\\\\n  display: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n/* .wrs_editor {\\\\r\\\\n    flex-grow: 1;\\\\r\\\\n} */\\\\r\\\\n\\\\r\\\\n.wrs_content_container.wrs_modal_android {\\\\r\\\\n  width: 100%;\\\\r\\\\n  flex-grow: 1;\\\\r\\\\n  display: flex;\\\\r\\\\n  flex-direction: column;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_content_container.wrs_modal_android > div:first-child {\\\\r\\\\n  flex-grow: 1;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_content_container.wrs_modal_ios > div:first-child {\\\\r\\\\n  flex-grow: 1;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_content_container.wrs_modal_desktop > div:first-child {\\\\r\\\\n  flex-grow: 1;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_wrapper.wrs_modal_android {\\\\r\\\\n  margin: auto;\\\\r\\\\n  display: flex;\\\\r\\\\n  flex-direction: column;\\\\r\\\\n  height: 100%;\\\\r\\\\n  width: 100%;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_content_container.wrs_modal_desktop {\\\\r\\\\n  width: 100%;\\\\r\\\\n  flex-grow: 1;\\\\r\\\\n  display: flex;\\\\r\\\\n  flex-direction: column;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_content_container.wrs_modal_ios {\\\\r\\\\n  width: 100%;\\\\r\\\\n  flex-grow: 1;\\\\r\\\\n  display: flex;\\\\r\\\\n  flex-direction: column;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_wrapper.wrs_modal_ios {\\\\r\\\\n  margin: auto;\\\\r\\\\n  display: flex;\\\\r\\\\n  flex-direction: column;\\\\r\\\\n  height: 100%;\\\\r\\\\n  width: 100%;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_virtual_keyboard {\\\\r\\\\n  height: 100%;\\\\r\\\\n  width: 100%;\\\\r\\\\n  top: 0;\\\\r\\\\n  left: 50%;\\\\r\\\\n  transform: translate(-50%, 0%);\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n@media all and (orientation: portrait) {\\\\r\\\\n  .wrs_modal_dialogContainer.wrs_modal_mobile {\\\\r\\\\n    width: 100vmin;\\\\r\\\\n    height: 100vmin;\\\\r\\\\n    margin: auto;\\\\r\\\\n    border-width: 0;\\\\r\\\\n  }\\\\r\\\\n\\\\r\\\\n  .wrs_modal_wrapper.wrs_modal_mobile {\\\\r\\\\n    width: 100vmin;\\\\r\\\\n    height: 100vmin;\\\\r\\\\n    margin: auto;\\\\r\\\\n  }\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n@media all and (orientation: landscape) {\\\\r\\\\n  .wrs_modal_dialogContainer.wrs_modal_mobile {\\\\r\\\\n    width: 100vmin;\\\\r\\\\n    height: 100vmin;\\\\r\\\\n    margin: auto;\\\\r\\\\n    border-width: 0;\\\\r\\\\n  }\\\\r\\\\n\\\\r\\\\n  .wrs_modal_wrapper.wrs_modal_mobile {\\\\r\\\\n    width: 100vmin;\\\\r\\\\n    height: 100vmin;\\\\r\\\\n    margin: auto;\\\\r\\\\n  }\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_dialogContainer.wrs_modal_badStock {\\\\r\\\\n  width: 100%;\\\\r\\\\n  height: 280px;\\\\r\\\\n  margin: 0 auto;\\\\r\\\\n  border-width: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_wrapper.wrs_modal_badStock {\\\\r\\\\n  width: 100%;\\\\r\\\\n  height: 280px;\\\\r\\\\n  margin: 0 auto;\\\\r\\\\n  border-width: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_noselect {\\\\r\\\\n  -moz-user-select: none;\\\\r\\\\n  -khtml-user-select: none;\\\\r\\\\n  -webkit-user-select: none;\\\\r\\\\n  -ms-user-select: none;\\\\r\\\\n  user-select: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_bottom_right_resizer {\\\\r\\\\n  width: 10px;\\\\r\\\\n  height: 10px;\\\\r\\\\n  color: #778e9a;\\\\r\\\\n  position: absolute;\\\\r\\\\n  right: 4px;\\\\r\\\\n  bottom: 8px;\\\\r\\\\n  cursor: se-resize;\\\\r\\\\n  -moz-user-select: none;\\\\r\\\\n  -webkit-user-select: none;\\\\r\\\\n  -ms-user-select: none;\\\\r\\\\n  user-select: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_bottom_left_resizer {\\\\r\\\\n  width: 15px;\\\\r\\\\n  height: 15px;\\\\r\\\\n  color: #778e9a;\\\\r\\\\n  position: absolute;\\\\r\\\\n  left: 0;\\\\r\\\\n  top: 0;\\\\r\\\\n  cursor: se-resize;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_controls {\\\\r\\\\n  height: 42px;\\\\r\\\\n  margin: 3px 0;\\\\r\\\\n  overflow: hidden;\\\\r\\\\n  line-height: normal;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_links {\\\\r\\\\n  margin: 10px auto;\\\\r\\\\n  margin-bottom: 0;\\\\r\\\\n  font-family: arial, sans-serif;\\\\r\\\\n  padding: 6px;\\\\r\\\\n  display: inline;\\\\r\\\\n  float: right;\\\\r\\\\n  text-align: right;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_links > a {\\\\r\\\\n  text-decoration: none;\\\\r\\\\n  color: #778e9a;\\\\r\\\\n  font-size: 16px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_button_cancel,\\\\r\\\\n.wrs_modal_button_cancel:hover,\\\\r\\\\n.wrs_modal_button_cancel:visited,\\\\r\\\\n.wrs_modal_button_cancel:active,\\\\r\\\\n.wrs_modal_button_cancel:focus {\\\\r\\\\n  min-width: 80px;\\\\r\\\\n  font-size: 14px;\\\\r\\\\n  border-radius: 3px;\\\\r\\\\n  border: 1px solid #778e9a;\\\\r\\\\n  padding: 6px 8px;\\\\r\\\\n  margin: 10px auto;\\\\r\\\\n  margin-left: 5px;\\\\r\\\\n  margin-bottom: 0;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  font-family: arial, sans-serif;\\\\r\\\\n  background-color: #ddd;\\\\r\\\\n  height: 32px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_button_accept,\\\\r\\\\n.wrs_modal_button_accept:hover,\\\\r\\\\n.wrs_modal_button_accept:visited,\\\\r\\\\n.wrs_modal_button_accept:active,\\\\r\\\\n.wrs_modal_button_accept:focus {\\\\r\\\\n  min-width: 80px;\\\\r\\\\n  font-size: 14px;\\\\r\\\\n  border-radius: 3px;\\\\r\\\\n  border: 1px solid #778e9a;\\\\r\\\\n  padding: 6px 8px;\\\\r\\\\n  margin: 10px auto;\\\\r\\\\n  margin-right: 5px;\\\\r\\\\n  margin-bottom: 0;\\\\r\\\\n  color: #fff;\\\\r\\\\n  background: #778e9a;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  font-family: arial, sans-serif;\\\\r\\\\n  height: 32px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_editor_vertical_bar {\\\\r\\\\n  height: 20px;\\\\r\\\\n  float: right;\\\\r\\\\n  background: none;\\\\r\\\\n  width: 20px;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_buttons_container {\\\\r\\\\n  display: inline;\\\\r\\\\n  float: left;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_buttons_container.wrs_modalAndroid {\\\\r\\\\n  padding-left: 6px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_buttons_container.wrs_modalDesktop {\\\\r\\\\n  padding-left: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_buttons_container > button {\\\\r\\\\n  line-height: normal;\\\\r\\\\n  background-image: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_wrapper {\\\\r\\\\n  margin: 6px;\\\\r\\\\n  display: flex;\\\\r\\\\n  flex-direction: column;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_wrapper.wrs_modal_desktop.wrs_minimized {\\\\r\\\\n  display: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n@media only screen and (max-device-width: 480px) and (orientation: portrait) {\\\\r\\\\n  #wrs_modal_wrapper {\\\\r\\\\n    width: 140%;\\\\r\\\\n  }\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_popupmessage_overlay_envolture {\\\\r\\\\n  display: none;\\\\r\\\\n  width: 100%;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_popupmessage_overlay {\\\\r\\\\n  position: absolute;\\\\r\\\\n  width: 100%;\\\\r\\\\n  height: 100%;\\\\r\\\\n  top: 0;\\\\r\\\\n  left: 0;\\\\r\\\\n  right: 0;\\\\r\\\\n  bottom: 0;\\\\r\\\\n  background-color: rgba(0, 0, 0, 0.5);\\\\r\\\\n  z-index: 4;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_popupmessage_panel {\\\\r\\\\n  top: 50%;\\\\r\\\\n  left: 50%;\\\\r\\\\n  transform: translate(-50%, -50%);\\\\r\\\\n  position: absolute;\\\\r\\\\n  background: white;\\\\r\\\\n  max-width: 500px;\\\\r\\\\n  width: 75%;\\\\r\\\\n  border-radius: 2px;\\\\r\\\\n  padding: 20px;\\\\r\\\\n  font-family: sans-serif;\\\\r\\\\n  font-size: 15px;\\\\r\\\\n  text-align: left;\\\\r\\\\n  color: #2e2e2e;\\\\r\\\\n  z-index: 5;\\\\r\\\\n  max-height: 75%;\\\\r\\\\n  overflow: auto;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_popupmessage_button_area {\\\\r\\\\n  margin: 10px 0 0 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_panelContainer * {\\\\r\\\\n  border: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_button_cancel,\\\\r\\\\n.wrs_button_cancel:hover,\\\\r\\\\n.wrs_button_cancel:visited,\\\\r\\\\n.wrs_button_cancel:active,\\\\r\\\\n.wrs_button_cancel:focus {\\\\r\\\\n  min-width: 80px;\\\\r\\\\n  font-size: 14px;\\\\r\\\\n  border-radius: 3px;\\\\r\\\\n  border: 1px solid #778e9a;\\\\r\\\\n  padding: 6px 8px;\\\\r\\\\n  margin: 10px auto;\\\\r\\\\n  margin-left: 5px;\\\\r\\\\n  margin-bottom: 0;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  font-family: arial, sans-serif;\\\\r\\\\n  background-color: #ddd;\\\\r\\\\n  background-image: none;\\\\r\\\\n  height: 32px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_button_accept,\\\\r\\\\n.wrs_button_accept:hover,\\\\r\\\\n.wrs_button_accept:visited,\\\\r\\\\n.wrs_button_accept:active,\\\\r\\\\n.wrs_button_accept:focus {\\\\r\\\\n  min-width: 80px;\\\\r\\\\n  font-size: 14px;\\\\r\\\\n  border-radius: 3px;\\\\r\\\\n  border: 1px solid #778e9a;\\\\r\\\\n  padding: 6px 8px;\\\\r\\\\n  margin: 10px auto;\\\\r\\\\n  margin-right: 5px;\\\\r\\\\n  margin-bottom: 0;\\\\r\\\\n  color: #fff;\\\\r\\\\n  background: #778e9a;\\\\r\\\\n  cursor: pointer;\\\\r\\\\n  font-family: arial, sans-serif;\\\\r\\\\n  height: 32px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_editor button {\\\\r\\\\n  box-shadow: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_editor .wrs_header button {\\\\r\\\\n  border-bottom: none;\\\\r\\\\n  border-bottom-left-radius: 0;\\\\r\\\\n  border-bottom-right-radius: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_stack.wrs_overlay_active {\\\\r\\\\n  display: block;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n/* Fix selection in drupal style */\\\\r\\\\n.wrs_toolbar tr:focus {\\\\r\\\\n  background: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_toolbar tr:hover {\\\\r\\\\n  background: none;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n/* End of fix drupal */\\\\r\\\\n.wrs_modal_rtl .wrs_modal_button_cancel {\\\\r\\\\n  margin-right: 5px;\\\\r\\\\n  margin-left: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_rtl .wrs_modal_button_accept {\\\\r\\\\n  margin-right: 0;\\\\r\\\\n  margin-left: 5px;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_rtl .wrs_button_cancel {\\\\r\\\\n  margin-right: 5px;\\\\r\\\\n  margin-left: 0;\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.wrs_modal_rtl .wrs_button_accept {\\\\r\\\\n  margin-right: 0;\\\\r\\\\n  margin-left: 5px;\\\\r\\\\n}\\\\r\\\\n\\\", \\\"\\\"]);\\n\\n// exports\\n\",\"/*\\n\\tMIT License http://www.opensource.org/licenses/mit-license.php\\n\\tAuthor Tobias Koppers @sokra\\n*/\\n// css base code, injected by the css-loader\\nmodule.exports = function(useSourceMap) {\\n\\tvar list = [];\\n\\n\\t// return the list of modules as css string\\n\\tlist.toString = function toString() {\\n\\t\\treturn this.map(function (item) {\\n\\t\\t\\tvar content = cssWithMappingToString(item, useSourceMap);\\n\\t\\t\\tif(item[2]) {\\n\\t\\t\\t\\treturn \\\"@media \\\" + item[2] + \\\"{\\\" + content + \\\"}\\\";\\n\\t\\t\\t} else {\\n\\t\\t\\t\\treturn content;\\n\\t\\t\\t}\\n\\t\\t}).join(\\\"\\\");\\n\\t};\\n\\n\\t// import a list of modules into the list\\n\\tlist.i = function(modules, mediaQuery) {\\n\\t\\tif(typeof modules === \\\"string\\\")\\n\\t\\t\\tmodules = [[null, modules, \\\"\\\"]];\\n\\t\\tvar alreadyImportedModules = {};\\n\\t\\tfor(var i = 0; i < this.length; i++) {\\n\\t\\t\\tvar id = this[i][0];\\n\\t\\t\\tif(typeof id === \\\"number\\\")\\n\\t\\t\\t\\talreadyImportedModules[id] = true;\\n\\t\\t}\\n\\t\\tfor(i = 0; i < modules.length; i++) {\\n\\t\\t\\tvar item = modules[i];\\n\\t\\t\\t// skip already imported module\\n\\t\\t\\t// this implementation is not 100% perfect for weird media query combinations\\n\\t\\t\\t//  when a module is imported multiple times with different media queries.\\n\\t\\t\\t//  I hope this will never occur (Hey this way we have smaller bundles)\\n\\t\\t\\tif(typeof item[0] !== \\\"number\\\" || !alreadyImportedModules[item[0]]) {\\n\\t\\t\\t\\tif(mediaQuery && !item[2]) {\\n\\t\\t\\t\\t\\titem[2] = mediaQuery;\\n\\t\\t\\t\\t} else if(mediaQuery) {\\n\\t\\t\\t\\t\\titem[2] = \\\"(\\\" + item[2] + \\\") and (\\\" + mediaQuery + \\\")\\\";\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tlist.push(item);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t};\\n\\treturn list;\\n};\\n\\nfunction cssWithMappingToString(item, useSourceMap) {\\n\\tvar content = item[1] || '';\\n\\tvar cssMapping = item[3];\\n\\tif (!cssMapping) {\\n\\t\\treturn content;\\n\\t}\\n\\n\\tif (useSourceMap && typeof btoa === 'function') {\\n\\t\\tvar sourceMapping = toComment(cssMapping);\\n\\t\\tvar sourceURLs = cssMapping.sources.map(function (source) {\\n\\t\\t\\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\\n\\t\\t});\\n\\n\\t\\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\\\n');\\n\\t}\\n\\n\\treturn [content].join('\\\\n');\\n}\\n\\n// Adapted from convert-source-map (MIT)\\nfunction toComment(sourceMap) {\\n\\t// eslint-disable-next-line no-undef\\n\\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\\n\\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\\n\\n\\treturn '/*# ' + data + ' */';\\n}\\n\",\"/*\\n\\tMIT License http://www.opensource.org/licenses/mit-license.php\\n\\tAuthor Tobias Koppers @sokra\\n*/\\n\\nvar stylesInDom = {};\\n\\nvar\\tmemoize = function (fn) {\\n\\tvar memo;\\n\\n\\treturn function () {\\n\\t\\tif (typeof memo === \\\"undefined\\\") memo = fn.apply(this, arguments);\\n\\t\\treturn memo;\\n\\t};\\n};\\n\\nvar isOldIE = memoize(function () {\\n\\t// Test for IE <= 9 as proposed by Browserhacks\\n\\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\\n\\t// Tests for existence of standard globals is to allow style-loader\\n\\t// to operate correctly into non-standard environments\\n\\t// @see https://github.com/webpack-contrib/style-loader/issues/177\\n\\treturn window && document && document.all && !window.atob;\\n});\\n\\nvar getTarget = function (target, parent) {\\n  if (parent){\\n    return parent.querySelector(target);\\n  }\\n  return document.querySelector(target);\\n};\\n\\nvar getElement = (function (fn) {\\n\\tvar memo = {};\\n\\n\\treturn function(target, parent) {\\n                // If passing function in options, then use it for resolve \\\"head\\\" element.\\n                // Useful for Shadow Root style i.e\\n                // {\\n                //   insertInto: function () { return document.querySelector(\\\"#foo\\\").shadowRoot }\\n                // }\\n                if (typeof target === 'function') {\\n                        return target();\\n                }\\n                if (typeof memo[target] === \\\"undefined\\\") {\\n\\t\\t\\tvar styleTarget = getTarget.call(this, target, parent);\\n\\t\\t\\t// Special case to return head of iframe instead of iframe itself\\n\\t\\t\\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\\n\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\t// This will throw an exception if access to iframe is blocked\\n\\t\\t\\t\\t\\t// due to cross-origin restrictions\\n\\t\\t\\t\\t\\tstyleTarget = styleTarget.contentDocument.head;\\n\\t\\t\\t\\t} catch(e) {\\n\\t\\t\\t\\t\\tstyleTarget = null;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\tmemo[target] = styleTarget;\\n\\t\\t}\\n\\t\\treturn memo[target]\\n\\t};\\n})();\\n\\nvar singleton = null;\\nvar\\tsingletonCounter = 0;\\nvar\\tstylesInsertedAtTop = [];\\n\\nvar\\tfixUrls = require(\\\"./urls\\\");\\n\\nmodule.exports = function(list, options) {\\n\\tif (typeof DEBUG !== \\\"undefined\\\" && DEBUG) {\\n\\t\\tif (typeof document !== \\\"object\\\") throw new Error(\\\"The style-loader cannot be used in a non-browser environment\\\");\\n\\t}\\n\\n\\toptions = options || {};\\n\\n\\toptions.attrs = typeof options.attrs === \\\"object\\\" ? options.attrs : {};\\n\\n\\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\\n\\t// tags it will allow on a page\\n\\tif (!options.singleton && typeof options.singleton !== \\\"boolean\\\") options.singleton = isOldIE();\\n\\n\\t// By default, add <style> tags to the <head> element\\n        if (!options.insertInto) options.insertInto = \\\"head\\\";\\n\\n\\t// By default, add <style> tags to the bottom of the target\\n\\tif (!options.insertAt) options.insertAt = \\\"bottom\\\";\\n\\n\\tvar styles = listToStyles(list, options);\\n\\n\\taddStylesToDom(styles, options);\\n\\n\\treturn function update (newList) {\\n\\t\\tvar mayRemove = [];\\n\\n\\t\\tfor (var i = 0; i < styles.length; i++) {\\n\\t\\t\\tvar item = styles[i];\\n\\t\\t\\tvar domStyle = stylesInDom[item.id];\\n\\n\\t\\t\\tdomStyle.refs--;\\n\\t\\t\\tmayRemove.push(domStyle);\\n\\t\\t}\\n\\n\\t\\tif(newList) {\\n\\t\\t\\tvar newStyles = listToStyles(newList, options);\\n\\t\\t\\taddStylesToDom(newStyles, options);\\n\\t\\t}\\n\\n\\t\\tfor (var i = 0; i < mayRemove.length; i++) {\\n\\t\\t\\tvar domStyle = mayRemove[i];\\n\\n\\t\\t\\tif(domStyle.refs === 0) {\\n\\t\\t\\t\\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\\n\\n\\t\\t\\t\\tdelete stylesInDom[domStyle.id];\\n\\t\\t\\t}\\n\\t\\t}\\n\\t};\\n};\\n\\nfunction addStylesToDom (styles, options) {\\n\\tfor (var i = 0; i < styles.length; i++) {\\n\\t\\tvar item = styles[i];\\n\\t\\tvar domStyle = stylesInDom[item.id];\\n\\n\\t\\tif(domStyle) {\\n\\t\\t\\tdomStyle.refs++;\\n\\n\\t\\t\\tfor(var j = 0; j < domStyle.parts.length; j++) {\\n\\t\\t\\t\\tdomStyle.parts[j](item.parts[j]);\\n\\t\\t\\t}\\n\\n\\t\\t\\tfor(; j < item.parts.length; j++) {\\n\\t\\t\\t\\tdomStyle.parts.push(addStyle(item.parts[j], options));\\n\\t\\t\\t}\\n\\t\\t} else {\\n\\t\\t\\tvar parts = [];\\n\\n\\t\\t\\tfor(var j = 0; j < item.parts.length; j++) {\\n\\t\\t\\t\\tparts.push(addStyle(item.parts[j], options));\\n\\t\\t\\t}\\n\\n\\t\\t\\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\\n\\t\\t}\\n\\t}\\n}\\n\\nfunction listToStyles (list, options) {\\n\\tvar styles = [];\\n\\tvar newStyles = {};\\n\\n\\tfor (var i = 0; i < list.length; i++) {\\n\\t\\tvar item = list[i];\\n\\t\\tvar id = options.base ? item[0] + options.base : item[0];\\n\\t\\tvar css = item[1];\\n\\t\\tvar media = item[2];\\n\\t\\tvar sourceMap = item[3];\\n\\t\\tvar part = {css: css, media: media, sourceMap: sourceMap};\\n\\n\\t\\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\\n\\t\\telse newStyles[id].parts.push(part);\\n\\t}\\n\\n\\treturn styles;\\n}\\n\\nfunction insertStyleElement (options, style) {\\n\\tvar target = getElement(options.insertInto)\\n\\n\\tif (!target) {\\n\\t\\tthrow new Error(\\\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\\\");\\n\\t}\\n\\n\\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\\n\\n\\tif (options.insertAt === \\\"top\\\") {\\n\\t\\tif (!lastStyleElementInsertedAtTop) {\\n\\t\\t\\ttarget.insertBefore(style, target.firstChild);\\n\\t\\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\\n\\t\\t\\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\\n\\t\\t} else {\\n\\t\\t\\ttarget.appendChild(style);\\n\\t\\t}\\n\\t\\tstylesInsertedAtTop.push(style);\\n\\t} else if (options.insertAt === \\\"bottom\\\") {\\n\\t\\ttarget.appendChild(style);\\n\\t} else if (typeof options.insertAt === \\\"object\\\" && options.insertAt.before) {\\n\\t\\tvar nextSibling = getElement(options.insertAt.before, target);\\n\\t\\ttarget.insertBefore(style, nextSibling);\\n\\t} else {\\n\\t\\tthrow new Error(\\\"[Style Loader]\\\\n\\\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\\\n Must be 'top', 'bottom', or Object.\\\\n (https://github.com/webpack-contrib/style-loader#insertat)\\\\n\\\");\\n\\t}\\n}\\n\\nfunction removeStyleElement (style) {\\n\\tif (style.parentNode === null) return false;\\n\\tstyle.parentNode.removeChild(style);\\n\\n\\tvar idx = stylesInsertedAtTop.indexOf(style);\\n\\tif(idx >= 0) {\\n\\t\\tstylesInsertedAtTop.splice(idx, 1);\\n\\t}\\n}\\n\\nfunction createStyleElement (options) {\\n\\tvar style = document.createElement(\\\"style\\\");\\n\\n\\tif(options.attrs.type === undefined) {\\n\\t\\toptions.attrs.type = \\\"text/css\\\";\\n\\t}\\n\\n\\tif(options.attrs.nonce === undefined) {\\n\\t\\tvar nonce = getNonce();\\n\\t\\tif (nonce) {\\n\\t\\t\\toptions.attrs.nonce = nonce;\\n\\t\\t}\\n\\t}\\n\\n\\taddAttrs(style, options.attrs);\\n\\tinsertStyleElement(options, style);\\n\\n\\treturn style;\\n}\\n\\nfunction createLinkElement (options) {\\n\\tvar link = document.createElement(\\\"link\\\");\\n\\n\\tif(options.attrs.type === undefined) {\\n\\t\\toptions.attrs.type = \\\"text/css\\\";\\n\\t}\\n\\toptions.attrs.rel = \\\"stylesheet\\\";\\n\\n\\taddAttrs(link, options.attrs);\\n\\tinsertStyleElement(options, link);\\n\\n\\treturn link;\\n}\\n\\nfunction addAttrs (el, attrs) {\\n\\tObject.keys(attrs).forEach(function (key) {\\n\\t\\tel.setAttribute(key, attrs[key]);\\n\\t});\\n}\\n\\nfunction getNonce() {\\n\\tif (typeof __webpack_nonce__ === 'undefined') {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn __webpack_nonce__;\\n}\\n\\nfunction addStyle (obj, options) {\\n\\tvar style, update, remove, result;\\n\\n\\t// If a transform function was defined, run it on the css\\n\\tif (options.transform && obj.css) {\\n\\t    result = typeof options.transform === 'function'\\n\\t\\t ? options.transform(obj.css) \\n\\t\\t : options.transform.default(obj.css);\\n\\n\\t    if (result) {\\n\\t    \\t// If transform returns a value, use that instead of the original css.\\n\\t    \\t// This allows running runtime transformations on the css.\\n\\t    \\tobj.css = result;\\n\\t    } else {\\n\\t    \\t// If the transform function returns a falsy value, don't add this css.\\n\\t    \\t// This allows conditional loading of css\\n\\t    \\treturn function() {\\n\\t    \\t\\t// noop\\n\\t    \\t};\\n\\t    }\\n\\t}\\n\\n\\tif (options.singleton) {\\n\\t\\tvar styleIndex = singletonCounter++;\\n\\n\\t\\tstyle = singleton || (singleton = createStyleElement(options));\\n\\n\\t\\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\\n\\t\\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\\n\\n\\t} else if (\\n\\t\\tobj.sourceMap &&\\n\\t\\ttypeof URL === \\\"function\\\" &&\\n\\t\\ttypeof URL.createObjectURL === \\\"function\\\" &&\\n\\t\\ttypeof URL.revokeObjectURL === \\\"function\\\" &&\\n\\t\\ttypeof Blob === \\\"function\\\" &&\\n\\t\\ttypeof btoa === \\\"function\\\"\\n\\t) {\\n\\t\\tstyle = createLinkElement(options);\\n\\t\\tupdate = updateLink.bind(null, style, options);\\n\\t\\tremove = function () {\\n\\t\\t\\tremoveStyleElement(style);\\n\\n\\t\\t\\tif(style.href) URL.revokeObjectURL(style.href);\\n\\t\\t};\\n\\t} else {\\n\\t\\tstyle = createStyleElement(options);\\n\\t\\tupdate = applyToTag.bind(null, style);\\n\\t\\tremove = function () {\\n\\t\\t\\tremoveStyleElement(style);\\n\\t\\t};\\n\\t}\\n\\n\\tupdate(obj);\\n\\n\\treturn function updateStyle (newObj) {\\n\\t\\tif (newObj) {\\n\\t\\t\\tif (\\n\\t\\t\\t\\tnewObj.css === obj.css &&\\n\\t\\t\\t\\tnewObj.media === obj.media &&\\n\\t\\t\\t\\tnewObj.sourceMap === obj.sourceMap\\n\\t\\t\\t) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tupdate(obj = newObj);\\n\\t\\t} else {\\n\\t\\t\\tremove();\\n\\t\\t}\\n\\t};\\n}\\n\\nvar replaceText = (function () {\\n\\tvar textStore = [];\\n\\n\\treturn function (index, replacement) {\\n\\t\\ttextStore[index] = replacement;\\n\\n\\t\\treturn textStore.filter(Boolean).join('\\\\n');\\n\\t};\\n})();\\n\\nfunction applyToSingletonTag (style, index, remove, obj) {\\n\\tvar css = remove ? \\\"\\\" : obj.css;\\n\\n\\tif (style.styleSheet) {\\n\\t\\tstyle.styleSheet.cssText = replaceText(index, css);\\n\\t} else {\\n\\t\\tvar cssNode = document.createTextNode(css);\\n\\t\\tvar childNodes = style.childNodes;\\n\\n\\t\\tif (childNodes[index]) style.removeChild(childNodes[index]);\\n\\n\\t\\tif (childNodes.length) {\\n\\t\\t\\tstyle.insertBefore(cssNode, childNodes[index]);\\n\\t\\t} else {\\n\\t\\t\\tstyle.appendChild(cssNode);\\n\\t\\t}\\n\\t}\\n}\\n\\nfunction applyToTag (style, obj) {\\n\\tvar css = obj.css;\\n\\tvar media = obj.media;\\n\\n\\tif(media) {\\n\\t\\tstyle.setAttribute(\\\"media\\\", media)\\n\\t}\\n\\n\\tif(style.styleSheet) {\\n\\t\\tstyle.styleSheet.cssText = css;\\n\\t} else {\\n\\t\\twhile(style.firstChild) {\\n\\t\\t\\tstyle.removeChild(style.firstChild);\\n\\t\\t}\\n\\n\\t\\tstyle.appendChild(document.createTextNode(css));\\n\\t}\\n}\\n\\nfunction updateLink (link, options, obj) {\\n\\tvar css = obj.css;\\n\\tvar sourceMap = obj.sourceMap;\\n\\n\\t/*\\n\\t\\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\\n\\t\\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\\n\\t\\ton by default.  Otherwise default to the convertToAbsoluteUrls option\\n\\t\\tdirectly\\n\\t*/\\n\\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\\n\\n\\tif (options.convertToAbsoluteUrls || autoFixUrls) {\\n\\t\\tcss = fixUrls(css);\\n\\t}\\n\\n\\tif (sourceMap) {\\n\\t\\t// http://stackoverflow.com/a/26603875\\n\\t\\tcss += \\\"\\\\n/*# sourceMappingURL=data:application/json;base64,\\\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \\\" */\\\";\\n\\t}\\n\\n\\tvar blob = new Blob([css], { type: \\\"text/css\\\" });\\n\\n\\tvar oldSrc = link.href;\\n\\n\\tlink.href = URL.createObjectURL(blob);\\n\\n\\tif(oldSrc) URL.revokeObjectURL(oldSrc);\\n}\\n\",\"\\n/**\\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\\n * embed the css on the page. This breaks all relative urls because now they are relative to a\\n * bundle instead of the current page.\\n *\\n * One solution is to only use full urls, but that may be impossible.\\n *\\n * Instead, this function \\\"fixes\\\" the relative urls to be absolute according to the current page location.\\n *\\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\\n *\\n */\\n\\nmodule.exports = function (css) {\\n  // get current location\\n  var location = typeof window !== \\\"undefined\\\" && window.location;\\n\\n  if (!location) {\\n    throw new Error(\\\"fixUrls requires window.location\\\");\\n  }\\n\\n\\t// blank or null?\\n\\tif (!css || typeof css !== \\\"string\\\") {\\n\\t  return css;\\n  }\\n\\n  var baseUrl = location.protocol + \\\"//\\\" + location.host;\\n  var currentDir = baseUrl + location.pathname.replace(/\\\\/[^\\\\/]*$/, \\\"/\\\");\\n\\n\\t// convert each url(...)\\n\\t/*\\n\\tThis regular expression is just a way to recursively match brackets within\\n\\ta string.\\n\\n\\t /url\\\\s*\\\\(  = Match on the word \\\"url\\\" with any whitespace after it and then a parens\\n\\t   (  = Start a capturing group\\n\\t     (?:  = Start a non-capturing group\\n\\t         [^)(]  = Match anything that isn't a parentheses\\n\\t         |  = OR\\n\\t         \\\\(  = Match a start parentheses\\n\\t             (?:  = Start another non-capturing groups\\n\\t                 [^)(]+  = Match anything that isn't a parentheses\\n\\t                 |  = OR\\n\\t                 \\\\(  = Match a start parentheses\\n\\t                     [^)(]*  = Match anything that isn't a parentheses\\n\\t                 \\\\)  = Match a end parentheses\\n\\t             )  = End Group\\n              *\\\\) = Match anything and then a close parens\\n          )  = Close non-capturing group\\n          *  = Match anything\\n       )  = Close capturing group\\n\\t \\\\)  = Match a close parens\\n\\n\\t /gi  = Get all matches, not the first.  Be case insensitive.\\n\\t */\\n\\tvar fixedCss = css.replace(/url\\\\s*\\\\(((?:[^)(]|\\\\((?:[^)(]+|\\\\([^)(]*\\\\))*\\\\))*)\\\\)/gi, function(fullMatch, origUrl) {\\n\\t\\t// strip quotes (if they exist)\\n\\t\\tvar unquotedOrigUrl = origUrl\\n\\t\\t\\t.trim()\\n\\t\\t\\t.replace(/^\\\"(.*)\\\"$/, function(o, $1){ return $1; })\\n\\t\\t\\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\\n\\n\\t\\t// already a full url? no change\\n\\t\\tif (/^(#|data:|http:\\\\/\\\\/|https:\\\\/\\\\/|file:\\\\/\\\\/\\\\/|\\\\s*$)/i.test(unquotedOrigUrl)) {\\n\\t\\t  return fullMatch;\\n\\t\\t}\\n\\n\\t\\t// convert the url to a full url\\n\\t\\tvar newUrl;\\n\\n\\t\\tif (unquotedOrigUrl.indexOf(\\\"//\\\") === 0) {\\n\\t\\t  \\t//TODO: should we add protocol?\\n\\t\\t\\tnewUrl = unquotedOrigUrl;\\n\\t\\t} else if (unquotedOrigUrl.indexOf(\\\"/\\\") === 0) {\\n\\t\\t\\t// path should be relative to the base url\\n\\t\\t\\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\\n\\t\\t} else {\\n\\t\\t\\t// path should be relative to current directory\\n\\t\\t\\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\\\.\\\\//, \\\"\\\"); // Strip leading './'\\n\\t\\t}\\n\\n\\t\\t// send back the fixed url(...)\\n\\t\\treturn \\\"url(\\\" + JSON.stringify(newUrl) + \\\")\\\";\\n\\t});\\n\\n\\t// send back the fixed css\\n\\treturn fixedCss;\\n};\\n\",\"/**\\n * This class represents all the constants needed in a MathType integration among different classes.\\n * If a constant should be used across different classes should be defined using attribute\\n * accessors.\\n */\\nexport default class Constants {\\n  /**\\n   * Safe XML entities.\\n   * @type {Object}\\n   */\\n  static get safeXmlCharactersEntities() {\\n    return {\\n      tagOpener: '&laquo;',\\n      tagCloser: '&raquo;',\\n      doubleQuote: '&uml;',\\n      realDoubleQuote: '&quot;',\\n    };\\n  }\\n\\n  /**\\n   * Blackboard invalid safe characters.\\n   * @type {Object}\\n   */\\n  static get safeBadBlackboardCharacters() {\\n    return {\\n      ltElement: '«mo»<«/mo»',\\n      gtElement: '«mo»>«/mo»',\\n      ampElement: '«mo»&«/mo»',\\n    };\\n  }\\n\\n  /**\\n   * Blackboard valid safe characters.\\n   * @type{Object}\\n   */\\n  static get safeGoodBlackboardCharacters() {\\n    return {\\n      ltElement: '«mo»§lt;«/mo»',\\n      gtElement: '«mo»§gt;«/mo»',\\n      ampElement: '«mo»§amp;«/mo»',\\n    };\\n  }\\n\\n  /**\\n   * Standard XML special characters.\\n   * @type {Object}\\n   */\\n  static get xmlCharacters() {\\n    return {\\n      id: 'xmlCharacters',\\n      tagOpener: '<', // Hex: \\\\x3C.\\n      tagCloser: '>', // Hex: \\\\x3E.\\n      doubleQuote: '\\\"', // Hex: \\\\x22.\\n      ampersand: '&', // Hex: \\\\x26.\\n      quote: '\\\\'', // Hex: \\\\x27.\\n    };\\n  }\\n\\n  /**\\n  * Safe XML special characters. This characters are used instead the standard\\n  * the standard to parse the  MathML if safeXML save mode is enable. Each XML\\n  * special character have a UTF-8 representation.\\n  * @type {Object}\\n  */\\n  static get safeXmlCharacters() {\\n    return {\\n      id: 'safeXmlCharacters',\\n      tagOpener: '«', // Hex: \\\\xAB.\\n      tagCloser: '»', // Hex: \\\\xBB.\\n      doubleQuote: '¨', // Hex: \\\\xA8.\\n      ampersand: '§', // Hex: \\\\xA7.\\n      quote: '`', // Hex: \\\\x60.\\n      realDoubleQuote: '¨',\\n    };\\n  }\\n}\\n\",\"import Constants from './constants';\\nimport Util from './util';\\n\\n/**\\n * @classdesc\\n * This class represents a class to manage MathML objects.\\n */\\nexport default class MathML {\\n  /**\\n   * Checks if the mathml at position i is inside an HTML attribute or not.\\n   * @param {string} content - a string containing MathML code.\\n   * @param {number} i -  search index.\\n   * @return {boolean} true if is inside an HTML attribute. false otherwise.\\n   */\\n  static isMathmlInAttribute(content, i) {\\n    // Regex =\\n    // '^[\\\\'\\\"][\\\\\\\\s]*=[\\\\\\\\s]*[\\\\\\\\w-]+([\\\\\\\\s]*(\\\"[^\\\"]*\\\"|\\\\'[^\\\\']*\\\\')[\\\\\\\\s]*\\n    // =[\\\\\\\\s]*[\\\\\\\\w-]+[\\\\\\\\s]*)*[\\\\\\\\s]+gmi<';\\n    const mathAtt = '[\\\\'\\\"][\\\\\\\\s]*=[\\\\\\\\s]*[\\\\\\\\w-]+'; // \\\"=att OR '=att\\n    const attContent = '\\\"[^\\\"]*\\\"|\\\\'[^\\\\']*\\\\''; // \\\"blabla\\\" OR 'blabla'\\n    const att = `[\\\\\\\\s]*(${attContent})[\\\\\\\\s]*=[\\\\\\\\s]*[\\\\\\\\w-]+[\\\\\\\\s]*`; // \\\"blabla\\\"=att OR 'blabla'=att\\n    const atts = `('${att}')*`; // \\\"blabla\\\"=att1 \\\"blabla\\\"=att2\\n    const regex = `^${mathAtt}${atts}[\\\\\\\\s]+gmi<`; // \\\"=att \\\"blabla\\\"=att1 \\\"blabla\\\"=att2 gmi< .\\n    const expression = new RegExp(regex);\\n\\n    const actualContent = content.substring(0, i);\\n    const reversed = actualContent.split('').reverse().join('');\\n    const exists = expression.test(reversed);\\n\\n    return exists;\\n  }\\n\\n  /**\\n   * Decodes an encoded MathML with standard XML tags.\\n   * We use these entities because IE doesn't support html entities\\n   * on its attributes sometimes. Yes, sometimes.\\n   * @param {string} input - string to be decoded.\\n   * @return {string} decoded string.\\n   */\\n  static safeXmlDecode(input) {\\n    let { tagOpener } = Constants.safeXmlCharactersEntities;\\n    let { tagCloser } = Constants.safeXmlCharactersEntities;\\n    let { doubleQuote } = Constants.safeXmlCharactersEntities;\\n    let { realDoubleQuote } = Constants.safeXmlCharactersEntities;\\n    // Decoding entities.\\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\\n    // Added to fix problem due to import from 1.9.x.\\n    input = input.split(realDoubleQuote).join(Constants.safeXmlCharacters.realDoubleQuote);\\n\\n    // Blackboard.\\n    const { ltElement } = Constants.safeBadBlackboardCharacters;\\n    const { gtElement } = Constants.safeBadBlackboardCharacters;\\n    const { ampElement } = Constants.safeBadBlackboardCharacters;\\n    if ('_wrs_blackboard' in window && window._wrs_blackboard) {\\n      input = input.split(ltElement).join(Constants.safeGoodBlackboardCharacters.ltElement);\\n      input = input.split(gtElement).join(Constants.safeGoodBlackboardCharacters.gtElement);\\n      input = input.split(ampElement).join(Constants.safeGoodBlackboardCharacters.ampElement);\\n    }\\n\\n    ({ tagOpener } = Constants.safeXmlCharacters);\\n    ({ tagCloser } = Constants.safeXmlCharacters);\\n    ({ doubleQuote } = Constants.safeXmlCharacters);\\n    ({ realDoubleQuote } = Constants.safeXmlCharacters);\\n    const { ampersand } = Constants.safeXmlCharacters;\\n    const { quote } = Constants.safeXmlCharacters;\\n\\n    // Decoding characters.\\n    input = input.split(tagOpener).join(Constants.xmlCharacters.tagOpener);\\n    input = input.split(tagCloser).join(Constants.xmlCharacters.tagCloser);\\n    input = input.split(doubleQuote).join(Constants.xmlCharacters.doubleQuote);\\n    input = input.split(ampersand).join(Constants.xmlCharacters.ampersand);\\n    input = input.split(quote).join(Constants.xmlCharacters.quote);\\n\\n    // We are replacing $ by & when its part of an entity for retrocompatibility.\\n    // Now, the standard is replace § by &.\\n    let returnValue = '';\\n    let currentEntity = null;\\n\\n    for (let i = 0; i < input.length; i += 1) {\\n      const character = input.charAt(i);\\n      if (currentEntity == null) {\\n        if (character === '$') {\\n          currentEntity = '';\\n        } else {\\n          returnValue += character;\\n        }\\n      } else if (character === ';') {\\n        returnValue += `&${currentEntity}`;\\n        currentEntity = null;\\n      } else if (character.match(/([a-zA-Z0-9#._-] | '-')/)) { // Character is part of an entity.\\n        currentEntity += character;\\n      } else {\\n        returnValue += `$${currentEntity}`; // Is not an entity.\\n        currentEntity = null;\\n        i -= 1; // Parse again the current character.\\n      }\\n    }\\n\\n    return returnValue;\\n  }\\n\\n  /**\\n   * Encodes a MathML with standard XML tags to a MMathML encoded with safe XML tags.\\n   * We use these entities because IE doesn't support html entities on its attributes sometimes.\\n   * @param {string} input - input string to be encoded\\n   * @returns {string} encoded string.\\n   */\\n  static safeXmlEncode(input) {\\n    const { tagOpener } = Constants.xmlCharacters;\\n    const { tagCloser } = Constants.xmlCharacters;\\n    const { doubleQuote } = Constants.xmlCharacters;\\n    const { ampersand } = Constants.xmlCharacters;\\n    const { quote } = Constants.xmlCharacters;\\n\\n    input = input.split(tagOpener).join(Constants.safeXmlCharacters.tagOpener);\\n    input = input.split(tagCloser).join(Constants.safeXmlCharacters.tagCloser);\\n    input = input.split(doubleQuote).join(Constants.safeXmlCharacters.doubleQuote);\\n    input = input.split(ampersand).join(Constants.safeXmlCharacters.ampersand);\\n    input = input.split(quote).join(Constants.safeXmlCharacters.quote);\\n\\n    return input;\\n  }\\n\\n  /**\\n   * Converts special symbols (> 128) to entities and replaces all textual\\n   * entities by its number entities.\\n   * @param {string} mathml - MathML string containing - or not - special symbols\\n   * @returns {string} MathML with all textual entities replaced.\\n   */\\n  static mathMLEntities(mathml) {\\n    let toReturn = '';\\n\\n    for (let i = 0; i < mathml.length; i += 1) {\\n      const character = mathml.charAt(i);\\n\\n      // Parsing > 128 characters.\\n      if (mathml.codePointAt(i) > 128) {\\n        toReturn += `&#${mathml.codePointAt(i)};`;\\n        // For UTF-32 characters we need to move the index one position.\\n        if (mathml.codePointAt(i) > 0xffff) {\\n          i += 1;\\n        }\\n      } else if (character === '&') {\\n        const end = mathml.indexOf(';', i + 1);\\n        if (end >= 0) {\\n          const container = document.createElement('span');\\n          container.innerHTML = mathml.substring(i, end + 1);\\n          toReturn += `&#${Util.fixedCharCodeAt((container.textContent || container.innerText), 0)};`;\\n          i = end;\\n        } else {\\n          toReturn += character;\\n        }\\n      } else {\\n        toReturn += character;\\n      }\\n    }\\n\\n    return toReturn;\\n  }\\n\\n  /**\\n   * Add a custom editor name with the prefix wrs_ to a MathML class attribute.\\n   * @param {string} mathml - a MathML string created with a custom editor, like chemistry.\\n   * @param {string} customEditor - custom editor name.\\n   * @returns {string} MathML string with his class containing the editor toolbar string.\\n   */\\n  static addCustomEditorClassAttribute(mathml, customEditor) {\\n    let toReturn = '';\\n\\n    const start = mathml.indexOf('<math');\\n    if (start === 0) {\\n      const end = mathml.indexOf('>');\\n      if (mathml.indexOf('class') === -1) {\\n        // Adding custom editor type.\\n        toReturn = `${mathml.substr(start, end)} class=\\\"wrs_${customEditor}\\\">`;\\n        toReturn += mathml.substr(end + 1, mathml.length);\\n        return toReturn;\\n      }\\n    }\\n    return mathml;\\n  }\\n\\n  /**\\n   * Remove a custom editor name from the MathML class attribute.\\n   * @param {string} mathml - a MathML string.\\n   * @param {string} customEditor - custom editor name.\\n   * @returns {string} The input MathML without customEditor name in his class.\\n   */\\n  static removeCustomEditorClassAttribute(mathml, customEditor) {\\n    // Discard MathML without the specified class.\\n    if (mathml.indexOf('class') === -1 || mathml.indexOf(`wrs_${customEditor}`) === -1) {\\n      return mathml;\\n    }\\n\\n    // Trivial case: class attribute value equal to editor name. Then\\n    // class attribute is removed.\\n    if (mathml.indexOf(`class=\\\"wrs_${customEditor}\\\"`) !== -1) {\\n      return mathml.replace(`class=\\\"wrs_${customEditor}\\\"`, '');\\n    }\\n\\n    // Non Trivial case: class attribute contains editor name.\\n    return mathml.replace(`wrs_${customEditor}`, '');\\n  }\\n\\n  /**\\n   * Adds annotation tag in MathML element.\\n   * @param {String} mathml - valid MathML.\\n   * @param {String} content - value to put inside annotation tag.\\n   * @param {String} annotationEncoding - annotation encoding.\\n   * @returns {String} - 'mathml' with an annotation that contains\\n   * 'content' and encoding 'encoding'.\\n   */\\n  static addAnnotation(mathml, content, annotationEncoding) {\\n    // If contains annotation, also contains semantics tag.\\n    const containsAnnotation = mathml.indexOf('<annotation');\\n\\n    let mathmlWithAnnotation = '';\\n    if (containsAnnotation !== -1) {\\n      const closeSemanticsIndex = mathml.indexOf('</semantics>');\\n      mathmlWithAnnotation = `${mathml.substring(0, closeSemanticsIndex)}<annotation encoding=\\\"${annotationEncoding}\\\">${content}</annotation>${mathml.substring(closeSemanticsIndex)}`;\\n    } else if (MathML.isEmpty(mathml)) {\\n      const endIndexInline = mathml.indexOf('/>');\\n      const endIndexNonInline = mathml.indexOf('>');\\n      const endIndex = endIndexNonInline === endIndexInline ? endIndexInline : endIndexNonInline;\\n      mathmlWithAnnotation = `${mathml.substring(0, endIndex)}><semantics><annotation encoding=\\\"${annotationEncoding}\\\">${content}</annotation></semantics></math>`;\\n    } else {\\n      const beginMathMLContent = mathml.indexOf('>') + 1;\\n      const endMathmlContent = mathml.lastIndexOf('</math>');\\n      const mathmlContent = mathml.substring(beginMathMLContent, endMathmlContent);\\n      mathmlWithAnnotation = `${mathml.substring(0, beginMathMLContent)}<semantics>${mathmlContent}<annotation encoding=\\\"${annotationEncoding}\\\">${content}</annotation></semantics></math>`;\\n    }\\n\\n    return mathmlWithAnnotation;\\n  }\\n\\n  /**\\n   * Removes specific annotation tag in MathML element.\\n   * In case of remove the unique annotation, also is removed semantics tag.\\n   * @param {String} mathml - valid MathML.\\n   * @param {String} annotationEncoding - annotation encoding to remove.\\n   * @returns {String} - 'mathml' without the annotation encoding specified.\\n   */\\n  static removeAnnotation(mathml, annotationEncoding) {\\n    let mathmlWithoutAnnotation = mathml;\\n    const openAnnotationTag = `<annotation encoding=\\\"${annotationEncoding}\\\">`;\\n    const closeAnnotationTag = '</annotation>';\\n    const startAnnotationIndex = mathml.indexOf(openAnnotationTag);\\n    if (startAnnotationIndex !== -1) {\\n      let differentAnnotationFound = false;\\n      let differentAnnotationIndex = mathml.indexOf('<annotation');\\n      while (differentAnnotationIndex !== -1) {\\n        if (differentAnnotationIndex !== startAnnotationIndex) {\\n          differentAnnotationFound = true;\\n        }\\n        differentAnnotationIndex = mathml.indexOf('<annotation', differentAnnotationIndex + 1);\\n      }\\n\\n      if (differentAnnotationFound) {\\n        const closeIndex = mathml.indexOf(closeAnnotationTag, startAnnotationIndex);\\n        const endAnnotationIndex = closeIndex + closeAnnotationTag.length;\\n        const startIndex = mathml.substring(0, startAnnotationIndex);\\n        mathmlWithoutAnnotation = startIndex + mathml.substring(endAnnotationIndex);\\n      } else {\\n        mathmlWithoutAnnotation = MathML.removeSemantics(mathml);\\n      }\\n    }\\n\\n    return mathmlWithoutAnnotation;\\n  }\\n\\n  /**\\n   * Removes semantics tag to mathml.\\n   * @param {string} mathml - MathML string.\\n   * @returns {string} - 'mathml' without semantics tag.\\n   */\\n  static removeSemantics(mathml) {\\n    const mathTagEnd = '</math>';\\n    const openSemantics = '<semantics>';\\n    const openAnnotation = '<annotation';\\n\\n    let mathmlWithoutSemantics = mathml;\\n    const startSemantics = mathml.indexOf(openSemantics);\\n    if (startSemantics !== -1) {\\n      const startAnnotation = mathml.indexOf(openAnnotation, startSemantics + openSemantics.length);\\n      if (startAnnotation !== -1) {\\n        mathmlWithoutSemantics = mathml.substring(0, startSemantics)\\n        + mathml.substring(startSemantics + openSemantics.length, startAnnotation) + mathTagEnd;\\n      }\\n    }\\n\\n    return mathmlWithoutSemantics;\\n  }\\n\\n  /**\\n   * Transforms all xml mathml ocurrences that contain semantics to the same\\n   * xml mathml ocurrences without semantics.\\n   * @param {string} text - string that can contain xml mathml ocurrences.\\n   * @param {Constants} [characters] - Constant object containing xmlCharacters\\n   * or safeXmlCharacters relation.\\n   * xmlCharacters by default.\\n   * @returns {string} - 'text' with all xml mathml ocurrences without annotation tag.\\n   */\\n  static removeSemanticsOcurrences(text, characters = Constants.xmlCharacters) {\\n    const mathTagStart = `${characters.tagOpener}math`;\\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\\n    const mathTagEndline = `/${characters.tagCloser}`;\\n    const { tagCloser } = characters;\\n    const semanticsTagStart = `${characters.tagOpener}semantics${characters.tagCloser}`;\\n    const annotationTagStart = `${characters.tagOpener}annotation encoding=`;\\n\\n    let output = '';\\n    let start = text.indexOf(mathTagStart);\\n    let end = 0;\\n    while (start !== -1) {\\n      output += text.substring(end, start);\\n\\n      // MathML can be written as '<math></math>' or '<math />'.\\n      const mathTagEndIndex = text.indexOf(mathTagEnd, start);\\n      const mathTagEndlineIndex = text.indexOf(mathTagEndline, start);\\n      const firstTagCloser = text.indexOf(tagCloser, start);\\n      if (mathTagEndIndex !== -1) {\\n        end = mathTagEndIndex;\\n      } else if (mathTagEndlineIndex === firstTagCloser - 1) {\\n        end = mathTagEndlineIndex;\\n      }\\n\\n      const semanticsIndex = text.indexOf(semanticsTagStart, start);\\n      if (semanticsIndex !== -1) {\\n        const mmlTagStart = text.substring(start, semanticsIndex);\\n        const annotationIndex = text.indexOf(annotationTagStart, start);\\n        if (annotationIndex !== -1) {\\n          const startIndex = semanticsIndex + semanticsTagStart.length;\\n          const mmlContent = text.substring(startIndex, annotationIndex);\\n          output += mmlTagStart + mmlContent + mathTagEnd;\\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\\n          end += mathTagEnd.length;\\n        } else {\\n          end = start;\\n          start = text.indexOf(mathTagStart, start + mathTagStart.length);\\n        }\\n      } else {\\n        end = start;\\n        start = text.indexOf(mathTagStart, start + mathTagStart.length);\\n      }\\n    }\\n\\n    output += text.substring(end, text.length);\\n    return output;\\n  }\\n\\n  /**\\n   * Returns true if a MathML contains a certain class.\\n   * @param {string} mathML - input MathML.\\n   * @param {string} className - className.\\n   * @returns {boolean} true if the input MathML contains the input class.\\n   * false otherwise.\\n   * @static\\n   */\\n  static containClass(mathML, className) {\\n    const classIndex = mathML.indexOf('class');\\n    if (classIndex === -1) {\\n      return false;\\n    }\\n    const classTagEndIndex = mathML.indexOf('>', classIndex);\\n    const classTag = mathML.substring(classIndex, classTagEndIndex);\\n    if (classTag.indexOf(className) !== -1) {\\n      return true;\\n    }\\n    return false;\\n  }\\n\\n  /**\\n   * Returns true if mathml is empty. Otherwise, false.\\n   * @param {string} mathml - valid MathML with standard XML tags.\\n   * @returns {boolean} - true if mathml is empty. Otherwise, false.\\n   */\\n  static isEmpty(mathml) {\\n    // MathML can have the shape <math></math> or '<math />'.\\n    const closeTag = '>';\\n    const closeTagInline = '/>';\\n    const firstCloseTagIndex = mathml.indexOf(closeTag);\\n    const firstCloseTagInlineIndex = mathml.indexOf(closeTagInline);\\n    let empty = false;\\n    // MathML is always empty in the second shape.\\n    if (firstCloseTagInlineIndex !== -1) {\\n      if (firstCloseTagInlineIndex === firstCloseTagIndex - 1) {\\n        empty = true;\\n      }\\n    }\\n\\n    // MathML is always empty in the first shape when there aren't elements\\n    // between math tags.\\n    if (!empty) {\\n      const mathTagEndRegex = new RegExp('</(.+:)?math>');\\n      const mathTagEndArray = mathTagEndRegex.exec(mathml);\\n      if (mathTagEndArray) {\\n        empty = firstCloseTagIndex + 1 === mathTagEndArray.index;\\n      }\\n    }\\n\\n    return empty;\\n  }\\n\\n  /**\\n   * Encodes html entities inside properties.\\n   * @param {String} mathml - valid MathML with standard XML tags.\\n   * @returns {String} - 'mathml' with property entities encoded.\\n   */\\n  static encodeProperties(mathml) {\\n    // Search all the properties.\\n    const regex = /\\\\w+=\\\".*?\\\"/g;\\n    // Encode html entities.\\n    const replacer = (match) => {\\n      // It has the shape:\\n      // <math propertyOne=\\\"somethingOne\\\"><children propertyTwo=\\\"somethingTwo\\\"></children></math>.\\n      const quoteIndex = match.indexOf('\\\"');\\n      const propertyValue = match.substring(quoteIndex + 1, match.length - 1);\\n      const propertyValueEncoded = Util.htmlEntities(propertyValue);\\n      const matchEncoded = `${match.substring(0, quoteIndex + 1)}${propertyValueEncoded}\\\"`;\\n      return matchEncoded;\\n    };\\n\\n    const mathmlEncoded = mathml.replace(regex, replacer);\\n    return mathmlEncoded;\\n  }\\n}\\n\",\"/**\\n * This class represents the configuration class.\\n * Usually used to retrieve configuration properties generated in the backend into the frontend.\\n */\\nexport default class Configuration {\\n  /**\\n   * Adds a properties object to {@link Configuration.properties}.\\n   * @param {Object} properties - properties to append to current properties.\\n   */\\n  static addConfiguration(properties) {\\n    Object.assign(Configuration.properties, properties);\\n  }\\n\\n  /**\\n  * Static property.\\n  * The configuration properties object.\\n  * @private\\n  * @type {Object}\\n  */\\n  static get properties() {\\n    return Configuration._properties;\\n  }\\n\\n  /**\\n   * Static property setter.\\n   * Set configuration properties.\\n   * @param {Object} value - The property value.\\n   * @ignore\\n   */\\n  static set properties(value) {\\n    Configuration._properties = value;\\n  }\\n\\n  /**\\n   * Returns the value of a property key.\\n   * @param {String} key - Property key\\n   * @returns {String} Property value\\n   */\\n  static get(key) {\\n    if (!Object.prototype.hasOwnProperty.call(Configuration.properties, key)) {\\n      // Backwards compatibility.\\n      if (Object.prototype.hasOwnProperty.call(Configuration.properties, '_wrs_conf_')) {\\n        return Configuration.properties[`_wrs_conf_${key}`];\\n      }\\n      return false;\\n    }\\n    return Configuration.properties[key];\\n  }\\n\\n  /**\\n   * Adds a new property to Configuration class.\\n   * @param {String} key - Property key.\\n   * @param {Object} value - Property value.\\n   */\\n  static set(key, value) {\\n    Configuration.properties[key] = value;\\n  }\\n\\n  /**\\n   * Updates a property object value with new values.\\n   * @param {String} key - The property key to be updated.\\n   * @param {Object} propertyValue - Object containing the new values.\\n   */\\n  static update(key, propertyValue) {\\n    if (!Configuration.get(key)) {\\n      Configuration.set(key, propertyValue);\\n    } else {\\n      const updateProperty = Object.assign(Configuration.get(key), propertyValue);\\n      Configuration.set(key, updateProperty);\\n    }\\n  }\\n}\\n\\n/**\\n * Static properties object. Stores all configuration properties.\\n * Needed to attribute accessors.\\n * @private\\n * @type {Object}\\n */\\nConfiguration._properties = {};\\n\",\"export default class TextCache {\\n  /**\\n   * @classdesc\\n   * This class represent a client-side text cache class. Contains pairs of\\n   * strings (key/value) which can be retrieved in any moment. Usually used\\n   * to store AJAX responses for text services like mathml2latex\\n   * (c.f {@link Latex} class) or mathml2accessible (c.f {@link Accessibility} class).\\n   * @constructs\\n   */\\n  constructor() {\\n    /**\\n     * Cache array property storing the cache entries.\\n     * @type {Array.<String>}\\n     */\\n    this.cache = [];\\n  }\\n\\n  /**\\n   * This method populates a key/value pair into the {@link this.cache} property.\\n   * @param {String} key - Cache key, usually the service string parameter.\\n   * @param {String} value - Cache value, usually the service response.\\n   */\\n  populate(key, value) {\\n    this.cache[key] = value;\\n  }\\n\\n  /**\\n   * Returns the cache value associated to certain cache key.\\n   * @param {String} key - Cache key, usually the service string parameter.\\n   * @return {String} value - Cache value, if exists. False otherwise.\\n   */\\n  get(key) {\\n    if (Object.prototype.hasOwnProperty.call(this.cache, key)) {\\n      return this.cache[key];\\n    }\\n    return false;\\n  }\\n}\\n\",\"/**\\n * This object represents a custom listener.\\n * @typedef {Object} Listener\\n * @property {String} Listener.eventName - The listener name.\\n * @property {Function} Listener.callback - The listener callback function.\\n */\\n\\nexport default class Listeners {\\n  /**\\n   * @classdesc\\n   * This class represents a custom listeners manager.\\n   * @constructs\\n   */\\n  constructor() {\\n    /**\\n     * Array containing all custom listeners.\\n     * @type {Object[]}\\n     */\\n    this.listeners = [];\\n  }\\n\\n\\n  /**\\n   * Add a listener to Listener class.\\n   * @param {Object} listener - A listener object.\\n   */\\n  add(listener) {\\n    this.listeners.push(listener);\\n  }\\n\\n  /**\\n   * Fires MathType event listeners\\n   * @param {String} eventName - event name\\n   * @param {Event} event - event object.\\n   * @return {boolean} false if event has been prevented. true otherwise.\\n   */\\n  fire(eventName, event) {\\n    for (let i = 0; i < this.listeners.length && !event.cancelled; i += 1) {\\n      if (this.listeners[i].eventName === eventName) {\\n        // Calling listener.\\n        this.listeners[i].callback(event);\\n      }\\n    }\\n    return event.defaultPrevented;\\n  }\\n\\n  /**\\n   * Creates a new listener object.\\n   * @param {string} eventName - Event name.\\n   * @param {Object} callback - Callback function.\\n   * @returns {object} the listener object.\\n   */\\n  static newListener(eventName, callback) {\\n    const listener = {};\\n    listener.eventName = eventName;\\n    listener.callback = callback;\\n    return listener;\\n  }\\n}\\n\",\"import Util from './util';\\r\\nimport Listeners from './listeners';\\r\\n\\r\\n/**\\r\\n * @typedef {Object} ServiceProviderProperties\\r\\n * @property {String} URI - Service URI.\\r\\n * @property {String} server - Service server language.\\r\\n */\\r\\n\\r\\n/**\\r\\n * @classdesc\\r\\n * Class representing a serviceProvider. A serviceProvider is a class containing\\r\\n * an arbitrary number of services with the correspondent path.\\r\\n */\\r\\nexport default class ServiceProvider {\\r\\n  /**\\r\\n   * Returns Service Provider listeners.\\r\\n   * @type {Listeners}\\r\\n   */\\r\\n  static get listeners() {\\r\\n    return ServiceProvider._listeners;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Adds a {@link Listener} instance to {@link ServiceProvider} class.\\r\\n   * @param {Listener} listener - Instance of {@link Listener}.\\r\\n   */\\r\\n  static addListener(listener) {\\r\\n    ServiceProvider.listeners.add(listener);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Fires events in Service Provider.\\r\\n   * @param {String} eventName - Event name.\\r\\n   * @param {Event} event - Event object.\\r\\n   */\\r\\n  static fireEvent(eventName, event) {\\r\\n    ServiceProvider.listeners.fire(eventName, event);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Service parameters.\\r\\n   * @type {ServiceProviderProperties}\\r\\n   *\\r\\n   */\\r\\n  static get parameters() {\\r\\n    return ServiceProvider._parameters;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Service parameters.\\r\\n   * @private\\r\\n   * @type {ServiceProviderProperties}\\r\\n   */\\r\\n  static set parameters(parameters) {\\r\\n    ServiceProvider._parameters = parameters;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Static property.\\r\\n   * Return service provider paths.\\r\\n   * @private\\r\\n   * @type {String}\\r\\n   */\\r\\n  static get servicePaths() {\\r\\n    return ServiceProvider._servicePaths;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Static property setter.\\r\\n   * Set service paths.\\r\\n   * @param {String} value - The property value.\\r\\n   * @ignore\\r\\n   */\\r\\n  static set servicePaths(value) {\\r\\n    ServiceProvider._servicePaths = value;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Adds a new service to the ServiceProvider.\\r\\n   * @param {String} service - Service name.\\r\\n   * @param {String} path - Service path.\\r\\n   * @static\\r\\n   */\\r\\n  static setServicePath(service, path) {\\r\\n    ServiceProvider.servicePaths[service] = path;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the service path for a certain service.\\r\\n   * @param {String} serviceName - Service name.\\r\\n   * @returns {String} The service path.\\r\\n   * @static\\r\\n   */\\r\\n  static getServicePath(serviceName) {\\r\\n    return ServiceProvider.servicePaths[serviceName];\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Static property.\\r\\n   * Service provider integration path.\\r\\n   * @type {String}\\r\\n   */\\r\\n  static get integrationPath() {\\r\\n    return ServiceProvider._integrationPath;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Static property setter.\\r\\n   * Set service provider integration path.\\r\\n   * @param {String} value - The property value.\\r\\n   * @ignore\\r\\n   */\\r\\n  static set integrationPath(value) {\\r\\n    ServiceProvider._integrationPath = value;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the server URL in the form protocol://serverName:serverPort.\\r\\n   * @return {String} The client side server path.\\r\\n   */\\r\\n  static getServerURL() {\\r\\n    const url = window.location.href;\\r\\n    const arr = url.split('/');\\r\\n    const result = `${arr[0]}//${arr[2]}`;\\r\\n    return result;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Inits {@link this} class. Uses {@link this.integrationPath} as\\r\\n   * base path to generate all backend services paths.\\r\\n   * @param {Object} parameters - Function parameters.\\r\\n   * @param {String} parameters.integrationPath - Service path.\\r\\n   */\\r\\n  static init(parameters) {\\r\\n    ServiceProvider.parameters = parameters;\\r\\n    // Services path (tech dependant).\\r\\n    let configurationURI = ServiceProvider.createServiceURI('configurationjs');\\r\\n    let createImageURI = ServiceProvider.createServiceURI('createimage');\\r\\n    let showImageURI = ServiceProvider.createServiceURI('showimage');\\r\\n    let getMathMLURI = ServiceProvider.createServiceURI('getmathml');\\r\\n    let serviceURI = ServiceProvider.createServiceURI('service');\\r\\n\\r\\n    // Some backend integrations (like Java o Ruby) have an absolute backend path,\\r\\n    // for example: /app/service. For them we calculate the absolute URL path, i.e\\r\\n    // protocol://domain:port/app/service\\r\\n    if (ServiceProvider.parameters.URI.indexOf('/') === 0) {\\r\\n      const serverPath = ServiceProvider.getServerURL();\\r\\n      configurationURI = serverPath + configurationURI;\\r\\n      showImageURI = serverPath + showImageURI;\\r\\n      createImageURI = serverPath + createImageURI;\\r\\n      getMathMLURI = serverPath + getMathMLURI;\\r\\n      serviceURI = serverPath + serviceURI;\\r\\n    }\\r\\n\\r\\n    ServiceProvider.setServicePath('configurationjs', configurationURI);\\r\\n    ServiceProvider.setServicePath('showimage', showImageURI);\\r\\n    ServiceProvider.setServicePath('createimage', createImageURI);\\r\\n    ServiceProvider.setServicePath('service', serviceURI);\\r\\n    ServiceProvider.setServicePath('getmathml', getMathMLURI);\\r\\n    ServiceProvider.setServicePath('configurationjs', configurationURI);\\r\\n\\r\\n    ServiceProvider.listeners.fire('onInit', {});\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Gets the content from an URL.\\r\\n   * @param {String} url - Target URL.\\r\\n   * @param {Object} [postVariables] - Object containing post variables.\\r\\n   * null if a GET query should be done.\\r\\n   * @returns {String} Content of the target URL.\\r\\n   * @private\\r\\n   * @static\\r\\n   */\\r\\n  static getUrl(url, postVariables) {\\r\\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf('/') + 1);\\r\\n    const httpRequest = Util.createHttpRequest();\\r\\n\\r\\n    if (httpRequest) {\\r\\n      if (typeof postVariables === 'undefined' || typeof postVariables === 'undefined') {\\r\\n        httpRequest.open('GET', url, false);\\r\\n      } else if (url.substr(0, 1) === '/' || url.substr(0, 7) === 'http://' || url.substr(0, 8) === 'https://') {\\r\\n        httpRequest.open('POST', url, false);\\r\\n      } else {\\r\\n        httpRequest.open('POST', currentPath + url, false);\\r\\n      }\\r\\n\\r\\n      if (typeof postVariables !== 'undefined' && postVariables) {\\r\\n        httpRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencoded; charset=UTF-8');\\r\\n        httpRequest.send(Util.httpBuildQuery(postVariables));\\r\\n      } else {\\r\\n        httpRequest.send(null);\\r\\n      }\\r\\n\\r\\n      return httpRequest.responseText;\\r\\n    }\\r\\n    return '';\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the response text of a certain service.\\r\\n   * @param {String} service - Service name.\\r\\n   * @param {String} postVariables - Post variables.\\r\\n   * @param {Boolean} get - True if the request is GET instead of POST. false otherwise.\\r\\n   * @returns {String} Service response text.\\r\\n   */\\r\\n  static getService(service, postVariables, get) {\\r\\n    let response;\\r\\n    if (get === true) {\\r\\n      let getVariables = postVariables ? '?' + postVariables : '';\\r\\n      const serviceUrl = `${ServiceProvider.getServicePath(service)}${getVariables}`;\\r\\n      response = ServiceProvider.getUrl(serviceUrl);\\r\\n    } else {\\r\\n      const serviceUrl = ServiceProvider.getServicePath(service);\\r\\n      response = ServiceProvider.getUrl(serviceUrl, postVariables);\\r\\n    }\\r\\n    return response;\\r\\n  }\\r\\n\\r\\n\\r\\n  /**\\r\\n   * Returns the server language of a certain service. The possible values\\r\\n   * are: php, aspx, java and ruby.\\r\\n   * This method has backward compatibility purposes.\\r\\n   * @param {String} service - The configuration service.\\r\\n   * @returns {String} - The server technology associated with the configuration service.\\r\\n   */\\r\\n  static getServerLanguageFromService(service) {\\r\\n    if (service.indexOf('.php') !== -1) {\\r\\n      return 'php';\\r\\n    }\\r\\n    if (service.indexOf('.aspx') !== -1) {\\r\\n      return 'aspx';\\r\\n    }\\r\\n    if (service.indexOf('wirispluginengine') !== -1) {\\r\\n      return 'ruby';\\r\\n    }\\r\\n    return 'java';\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the URI associated with a certain service.\\r\\n   * @param {String} service - The service name.\\r\\n   * @return {String} The service path.\\r\\n   */\\r\\n  static createServiceURI(service) {\\r\\n    const extension = ServiceProvider.serverExtension();\\r\\n    return Util.concatenateUrl(ServiceProvider.parameters.URI, service) + extension;\\r\\n  }\\r\\n\\r\\n  static serverExtension() {\\r\\n    if (ServiceProvider.parameters.server.indexOf('php') !== -1) {\\r\\n      return '.php';\\r\\n    }\\r\\n    if (ServiceProvider.parameters.server.indexOf('aspx') !== -1) {\\r\\n      return '.aspx';\\r\\n    }\\r\\n    return '';\\r\\n  }\\r\\n}\\r\\n\\r\\n/**\\r\\n * @property {String} service - The service name.\\r\\n * @property {String} path - The service path.\\r\\n * @static\\r\\n */\\r\\nServiceProvider._servicePaths = {};\\r\\n\\r\\n/**\\r\\n * The integration path. Contains the path of the configuration service.\\r\\n * Used to define the path for all services.\\r\\n * @type {String}\\r\\n * @private\\r\\n */\\r\\nServiceProvider._integrationPath = '';\\r\\n\\r\\n/**\\r\\n * ServiceProvider static listeners.\\r\\n * @type {Listeners}\\r\\n * @private\\r\\n */\\r\\nServiceProvider._listeners = new Listeners();\\r\\n\\r\\n\\r\\n/**\\r\\n * Service provider parameters.\\r\\n * @type {ServiceProviderParameters}\\r\\n */\\r\\nServiceProvider._parameters = {};\\r\\n\",\"import TextCache from './textcache';\\nimport MathML from './mathml';\\nimport ServiceProvider from './serviceprovider';\\nimport Constants from './constants';\\nimport Util from './util';\\n\\n/**\\n * @classdesc\\n * This class represents a LaTeX parser. Manages the services which allows to convert\\n * LaTeX into MathML and MathML into LaTeX.\\n */\\nexport default class Latex {\\n  /**\\n   * Static property.\\n   * Return latex cache.\\n   * @private\\n   * @type {Cache}\\n   */\\n  static get cache() {\\n    return Latex._cache;\\n  }\\n\\n  /**\\n   * Static property setter.\\n   * Set latex cache.\\n   * @param {Cache} value - The property value.\\n   * @ignore\\n  */\\n  static set cache(value) {\\n    Latex._cache = value;\\n  }\\n\\n  /**\\n   * Converts MathML to LaTeX by calling mathml2latex service. For text services\\n   * we call a text service with the param mathml2latex.\\n   * @param {String} mathml - MathML String.\\n   * @return {String} LaTeX string generated by the MathML argument.\\n   */\\n  static getLatexFromMathML(mathml) {\\n    const mathmlWithoutSemantics = MathML.removeSemantics(mathml);\\n    /**\\n     * @type {TextCache}\\n     */\\n    const { cache } = Latex;\\n\\n    const data = {\\n      service: 'mathml2latex',\\n      mml: mathmlWithoutSemantics,\\n    };\\n\\n    const jsonResponse = JSON.parse(ServiceProvider.getService('service', data));\\n\\n    // TODO: Error handling.\\n    let latex = '';\\n\\n    if (jsonResponse.status === 'ok') {\\n      latex = jsonResponse.result.text;\\n      const latexHtmlEntitiesEncoded = Util.htmlEntities(latex);\\n      // Inserting LaTeX semantics.\\n      const mathmlWithSemantics = MathML.addAnnotation(mathml, latexHtmlEntitiesEncoded, 'LaTeX');\\n      cache.populate(latex, mathmlWithSemantics);\\n    }\\n\\n    return latex;\\n  }\\n\\n  /**\\n   * Converts LaTeX to MathML by calling latex2mathml service. For text services\\n   * we call a text service with the param latex2mathml.\\n   * @param {String} latex - String containing a LaTeX formula.\\n   * @param {Boolean} includeLatexOnSemantics\\n   * - If true LaTeX would me included into MathML semantics.\\n   * @return {String} MathML string generated by the LaTeX argument.\\n   */\\n  static getMathMLFromLatex(latex, includeLatexOnSemantics) {\\n    /**\\n     * @type {TextCache}\\n     */\\n    const latexCache = Latex.cache;\\n\\n    if (Latex.cache.get(latex)) {\\n      return Latex.cache.get(latex);\\n    }\\n    const data = {\\n      service: 'latex2mathml',\\n      latex,\\n    };\\n\\n    if (includeLatexOnSemantics) {\\n      data.saveLatex = '';\\n    }\\n\\n    const jsonResponse = JSON.parse(ServiceProvider.getService('service', data));\\n\\n    let output;\\n    if (jsonResponse.status === 'ok') {\\n      let mathml = jsonResponse.result.text;\\n      mathml = mathml.split('\\\\r').join('').split('\\\\n').join(' ');\\n\\n      // Populate LatexCache.\\n      if (mathml.indexOf('semantics') === -1 && mathml.indexOf('annotation') === -1) {\\n        mathml = MathML.addAnnotation(mathml, latex, 'LaTeX');\\n        output = mathml;\\n      } else {\\n        output = mathml;\\n      }\\n      if (!latexCache.get(latex)) {\\n        latexCache.populate(latex, mathml);\\n      }\\n    } else {\\n      output = `$$${latex}$$`;\\n    }\\n    return output;\\n  }\\n\\n  /**\\n   * Converts all occurrences of MathML code to LaTeX.\\n   * The MathML code should containing <annotation encoding=\\\"LaTeX\\\"/> to be converted.\\n   * @param {String} content - A string containing MathML valid code.\\n   * @param {Object} characters - An object containing special characters.\\n   * @return {String} A string containing all MathML annotated occurrences\\n   * replaced by the corresponding LaTeX code.\\n   */\\n  static parseMathmlToLatex(content, characters) {\\n    let output = '';\\n    const mathTagBegin = `${characters.tagOpener}math`;\\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\\n    const openTarget = `${characters.tagOpener}annotation encoding=${characters.doubleQuote}LaTeX${characters.doubleQuote}${characters.tagCloser}`;\\n    const closeTarget = `${characters.tagOpener}/annotation${characters.tagCloser}`;\\n    let start = content.indexOf(mathTagBegin);\\n    let end = 0;\\n    let mathml;\\n    let startAnnotation;\\n    let closeAnnotation;\\n\\n    while (start !== -1) {\\n      output += content.substring(end, start);\\n      end = content.indexOf(mathTagEnd, start);\\n\\n      if (end === -1) {\\n        end = content.length - 1;\\n      } else {\\n        end += mathTagEnd.length;\\n      }\\n\\n      mathml = content.substring(start, end);\\n\\n      startAnnotation = mathml.indexOf(openTarget);\\n      if (startAnnotation !== -1) {\\n        startAnnotation += openTarget.length;\\n        closeAnnotation = mathml.indexOf(closeTarget);\\n        let latex = mathml.substring(startAnnotation, closeAnnotation);\\n        if (characters === Constants.safeXmlCharacters) {\\n          latex = MathML.safeXmlDecode(latex);\\n        }\\n        output += `$$${latex}$$`;\\n        // Populate latex into cache.\\n\\n        Latex.cache.populate(latex, mathml);\\n      } else {\\n        output += mathml;\\n      }\\n      start = content.indexOf(mathTagBegin, end);\\n    }\\n\\n    output += content.substring(end, content.length);\\n    return output;\\n  }\\n\\n  /**\\n   * Extracts the latex of a determined position in a text.\\n   * @param {Node} textNode - textNode to extract the LaTeX\\n   * @param {Number} caretPosition - Starting position to find LaTeX.\\n   * @param {Object} latexTags - Optional parameter representing tags between latex is inserted.\\n   * It has the 'open' attribute for the open tag and the 'close' attribute for the close tag.\\n   * \\\"$$\\\" by default.\\n   * @return {Object} An object with 3 keys: 'latex', 'start' and 'end'. Null if latex is not found.\\n   * @static\\n   */\\n  static getLatexFromTextNode(textNode, caretPosition, latexTags) {\\n    // TODO: Set LaTeX Tags as Core variable. Fix the call to this function (third argument).\\n    // Tags used for LaTeX formulas.\\n    const defaultLatexTags = {\\n      open: '$$',\\n      close: '$$',\\n    };\\n    // latexTags is an optional parameter. If is not set, use default latexTags.\\n    if (typeof latexTags === 'undefined' || latexTags == null) {\\n      latexTags = defaultLatexTags;\\n    }\\n    // Looking for the first textNode.\\n    let startNode = textNode;\\n\\n    while (startNode.previousSibling && startNode.previousSibling.nodeType === 3) { // TEXT_NODE.\\n      startNode = startNode.previousSibling;\\n    }\\n\\n    /**\\n     * Returns the next latex position and node from a specific node and position.\\n     * @param {Node} currentNode - Node where searching latex.\\n     * @param {Number} currentPosition - Current position inside the currentNode.\\n     * @param {Object} latexTagsToUse - Tags used at latex beginning and latex final.\\n     * \\\"$$\\\" by default.\\n     * @param {Boolean} tag - Tag containing the current search.\\n     * @returns {Object} Object containing the current node and the position.\\n     */\\n    function getNextLatexPosition(currentNode, currentPosition, tag) {\\n      let position = currentNode.nodeValue.indexOf(tag, currentPosition);\\n\\n      while (position === -1) {\\n        currentNode = currentNode.nextSibling;\\n\\n        if (!currentNode) { // TEXT_NODE.\\n          return null; // Not found.\\n        }\\n\\n        position = currentNode.nodeValue ? currentNode.nodeValue.indexOf(latexTags.close) : -1;\\n      }\\n\\n      return {\\n        node: currentNode,\\n        position,\\n      };\\n    }\\n\\n    /**\\n     * Determines if a node is previous, or not, to a second one.\\n     * @param {Node} node - Start node.\\n     * @param {Number} position - Start node position.\\n     * @param {Node} endNode - End node.\\n     * @param {Number} endPosition - End node position.\\n     * @returns {Boolean} True if the starting node is previous thant the en node. false otherwise.\\n     */\\n    function isPrevious(node, position, endNode, endPosition) {\\n      if (node === endNode) {\\n        return (position <= endPosition);\\n      }\\n      while (node && node !== endNode) {\\n        node = node.nextSibling;\\n      }\\n\\n      return (node === endNode);\\n    }\\n\\n    let start;\\n    let end = {\\n      node: startNode,\\n      position: 0,\\n    };\\n    // Is supposed that open and close tags has the same length.\\n    const tagLength = latexTags.open.length;\\n    do {\\n      start = getNextLatexPosition(end.node, end.position, latexTags.open);\\n\\n      if (start == null || isPrevious(textNode, caretPosition, start.node, start.position)) {\\n        return null;\\n      }\\n\\n      end = getNextLatexPosition(start.node, start.position + tagLength, latexTags.close);\\n\\n      if (end == null) {\\n        return null;\\n      }\\n\\n      end.position += tagLength;\\n    } while (isPrevious(end.node, end.position, textNode, caretPosition));\\n\\n    // Isolating latex.\\n    let latex;\\n\\n    if (start.node === end.node) {\\n      latex = start.node.nodeValue.substring(start.position + tagLength, end.position - tagLength);\\n    } else {\\n      const index = start.position + tagLength;\\n      latex = start.node.nodeValue.substring(index, start.node.nodeValue.length);\\n      let currentNode = start.node;\\n\\n      do {\\n        currentNode = currentNode.nextSibling;\\n        if (currentNode === end.node) {\\n          latex += end.node.nodeValue.substring(0, end.position - tagLength);\\n        } else {\\n          latex += currentNode.nodeValue ? currentNode.nodeValue : '';\\n        }\\n      } while (currentNode !== end.node);\\n    }\\n\\n    return {\\n      latex,\\n      startNode: start.node,\\n      startPosition: start.position,\\n      endNode: end.node,\\n      endPosition: end.position,\\n    };\\n  }\\n}\\n\\n/**\\n * Text cache. Stores all processed LaTeX strings and it's correspondent MathML string.\\n * @type {Cache}\\n * @static\\n */\\nLatex._cache = new TextCache();\\n\",\"import translations from '../lang/strings.json';\\n/**\\n * This class represents a string manager. It's used to load localized strings.\\n */\\nexport default class StringManager {\\n  constructor() {\\n    throw new Error('Static class StringManager can not be instantiated.');\\n  }\\n\\n  /**\\n   * Returns the associated value of certain string key. If the associated value\\n   * doesn't exits returns the original key.\\n   * @param {string} key - string key\\n   * @returns {string} correspondent value. If doesn't exists original key.\\n   */\\n  static get(key) {\\n    let { language } = this;\\n\\n    // Cut down on strings. e.g. en_US -> en\\n    if (language && language.length > 2) {\\n      language = language.slice(0, 2);\\n    }\\n\\n    // Check if we support the language\\n    if (!this.strings.hasOwnProperty(language)) {\\n      console.warn(`Unknown language ${language} set in StringManager.`);\\n      language = 'en';\\n    }\\n\\n    // Check if the key is supported in the given language\\n    if (!this.strings[language].hasOwnProperty(key)) {\\n      console.warn(`Unknown key ${key} for language ${language} in StringManager.`);\\n      return key;\\n    }\\n\\n    return this.strings[language][key];\\n  }\\n}\\n\\n/**\\n * Dictionary of dictionaries:\\n * Key: language code\\n * Value: Key: id of the string\\n *        Value: translation of the string\\n */\\nStringManager.strings = translations;\\n\\n/**\\n * Language of the translations; English by default\\n */\\nStringManager.language = 'en';\\n\",\"/* eslint-disable no-bitwise */\\r\\nimport MathML from './mathml';\\r\\nimport Configuration from './configuration';\\r\\nimport Latex from './latex';\\r\\nimport StringManager from './stringmanager';\\r\\n\\r\\n/**\\r\\n * This class represents an utility class.\\r\\n */\\r\\nexport default class Util {\\r\\n  /**\\r\\n   * Fires an event in a target.\\r\\n   * @param {EventTarget} eventTarget - target where event should be fired.\\r\\n   * @param {string} eventName event to fire.\\r\\n   * @static\\r\\n   */\\r\\n  static fireEvent(eventTarget, eventName) {\\r\\n    if (document.createEvent) {\\r\\n      const eventObject = document.createEvent('HTMLEvents');\\r\\n      eventObject.initEvent(eventName, true, true);\\r\\n      return !eventTarget.dispatchEvent(eventObject);\\r\\n    }\\r\\n\\r\\n    const eventObject = document.createEventObject();\\r\\n    return eventTarget.fireEvent(`on${eventName}`, eventObject);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Cross-browser addEventListener/attachEvent function.\\r\\n   * @param {EventTarget} eventTarget - target to add the event.\\r\\n   * @param {string} eventName - specifies the type of event.\\r\\n   * @param {Function} callBackFunction - callback function.\\r\\n   * @static\\r\\n   */\\r\\n  static addEvent(eventTarget, eventName, callBackFunction) {\\r\\n    if (eventTarget.addEventListener) {\\r\\n      eventTarget.addEventListener(eventName, callBackFunction, true);\\r\\n    } else if (eventTarget.attachEvent) {\\r\\n      // Backwards compatibility.\\r\\n      eventTarget.attachEvent(`on${eventName}`, callBackFunction);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Cross-browser removeEventListener/detachEvent function.\\r\\n   * @param {EventTarget} eventTarget - target to add the event.\\r\\n   * @param {string} eventName - specifies the type of event.\\r\\n   * @param {Function} callBackFunction - function to remove from the event target.\\r\\n   * @static\\r\\n   */\\r\\n  static removeEvent(eventTarget, eventName, callBackFunction) {\\r\\n    if (eventTarget.removeEventListener) {\\r\\n      eventTarget.removeEventListener(eventName, callBackFunction, true);\\r\\n    } else if (eventTarget.detachEvent) {\\r\\n      eventTarget.detachEvent(`on${eventName}`, callBackFunction);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Adds the a callback function, for a certain event target, to the following event types:\\r\\n   * - dblclick\\r\\n   * - mousedown\\r\\n   * - mouseup\\r\\n   * @param {EventTarget} eventTarget - event target.\\r\\n   * @param {Function} doubleClickHandler - function to run when on dblclick event.\\r\\n   * @param {Function} mousedownHandler - function to run when on mousedown event.\\r\\n   * @param {Function} mouseupHandler - function to run when on mouseup event.\\r\\n   * @static\\r\\n   */\\r\\n  static addElementEvents(eventTarget, doubleClickHandler, mousedownHandler, mouseupHandler) {\\r\\n    if (doubleClickHandler) {\\r\\n      Util.addEvent(eventTarget, 'dblclick', (event) => {\\r\\n        const realEvent = (event) || window.event;\\r\\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\\r\\n        doubleClickHandler(element, realEvent);\\r\\n      });\\r\\n    }\\r\\n\\r\\n    if (mousedownHandler) {\\r\\n      Util.addEvent(eventTarget, 'mousedown', (event) => {\\r\\n        const realEvent = (event) || window.event;\\r\\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\\r\\n        mousedownHandler(element, realEvent);\\r\\n      });\\r\\n    }\\r\\n\\r\\n    if (mouseupHandler) {\\r\\n      // Chrome doesn't trigger this event for eventTarget if we release the mouse button\\r\\n      // while the mouse is outside the editor text field.\\r\\n      // This is a workaround: we trigger the event independently of where the mouse\\r\\n      // is when we release its button.\\r\\n      Util.addEvent(document, 'mouseup', (event) => {\\r\\n        const realEvent = (event) || window.event;\\r\\n        const element = realEvent.srcElement ? realEvent.srcElement : realEvent.target;\\r\\n        mouseupHandler(element, realEvent);\\r\\n      });\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Adds a class name to a HTMLElement.\\r\\n   * @param {HTMLElement} element - the HTML element.\\r\\n   * @param {string} className - the class name.\\r\\n   * @static\\r\\n   */\\r\\n  static addClass(element, className) {\\r\\n    if (!Util.containsClass(element, className)) {\\r\\n      element.className += ` ${className}`;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Checks if a HTMLElement contains a certain class.\\r\\n   * @param {HTMLElement} element - the HTML element.\\r\\n   * @param {string} className - the className.\\r\\n   * @returns {boolean} true if the HTMLElement contains the class name. false otherwise.\\r\\n   * @static\\r\\n   */\\r\\n  static containsClass(element, className) {\\r\\n    if (element == null || !('className' in element)) {\\r\\n      return false;\\r\\n    }\\r\\n\\r\\n    const currentClasses = element.className.split(' ');\\r\\n\\r\\n    for (let i = currentClasses.length - 1; i >= 0; i -= 1) {\\r\\n      if (currentClasses[i] === className) {\\r\\n        return true;\\r\\n      }\\r\\n    }\\r\\n\\r\\n    return false;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Remove a certain class for a HTMLElement.\\r\\n   * @param {HTMLElement} element - the HTML element.\\r\\n   * @param {string} className - the class name.\\r\\n   * @static\\r\\n   */\\r\\n  static removeClass(element, className) {\\r\\n    let newClassName = '';\\r\\n    const classes = element.className.split(' ');\\r\\n\\r\\n    for (let i = 0; i < classes.length; i += 1) {\\r\\n      if (classes[i] !== className) {\\r\\n        newClassName += `${classes[i]} `;\\r\\n      }\\r\\n    }\\r\\n    element.className = newClassName.trim();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Converts old xml initial text attribute (with «») to the correct one(with §lt;§gt;). It's\\r\\n   * used to parse old applets.\\r\\n   * @param {string} text - string containing safeXml characters\\r\\n   * @returns {string} a string with safeXml characters parsed.\\r\\n   * @static\\r\\n   */\\r\\n  static convertOldXmlinitialtextAttribute(text) {\\r\\n    // Used to fix a bug with Cas imported from Moodle 1.9 to Moodle 2.x.\\r\\n    // This could be removed in future.\\r\\n    const val = 'value=';\\r\\n\\r\\n    const xitpos = text.indexOf('xmlinitialtext');\\r\\n    const valpos = text.indexOf(val, xitpos);\\r\\n    const quote = text.charAt(valpos + val.length);\\r\\n    const startquote = valpos + val.length + 1;\\r\\n    const endquote = text.indexOf(quote, startquote);\\r\\n\\r\\n    const value = text.substring(startquote, endquote);\\r\\n\\r\\n    let newvalue = value.split('«').join('§lt;');\\r\\n    newvalue = newvalue.split('»').join('§gt;');\\r\\n    newvalue = newvalue.split('&').join('§');\\r\\n    newvalue = newvalue.split('¨').join('§quot;');\\r\\n\\r\\n    text = text.split(value).join(newvalue);\\r\\n    return text;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Cross-browser solution for creating new elements.\\r\\n   * @param {string} tagName - tag name of the wished element.\\r\\n   * @param {Object} attributes - an object where each key is a wished\\r\\n   * attribute name and each value is its value.\\r\\n   * @param {Object} [creator] - if supplied, this function will use\\r\\n   * the \\\"createElement\\\" method from this param. Otherwise\\r\\n   * document will be used as creator.\\r\\n   * @returns {Element} The DOM element with the specified attributes assigned.\\r\\n   * @static\\r\\n   */\\r\\n  static createElement(tagName, attributes, creator) {\\r\\n    if (attributes === undefined) {\\r\\n      attributes = {};\\r\\n    }\\r\\n\\r\\n    if (creator === undefined) {\\r\\n      creator = document;\\r\\n    }\\r\\n\\r\\n    let element;\\r\\n\\r\\n    /*\\r\\n    * Internet Explorer fix:\\r\\n    * If you create a new object dynamically, you can't set a non-standard attribute.\\r\\n    * For example, you can't set the \\\"src\\\" attribute on an \\\"applet\\\" object.\\r\\n    * Other browsers will throw an exception and will run the standard code.\\r\\n    */\\r\\n    try {\\r\\n      let html = `<${tagName}`;\\r\\n\\r\\n      Object.keys(attributes).forEach((attributeName) => {\\r\\n        html += ` ${attributeName}=\\\"${Util.htmlEntities(attributes[attributeName])}\\\"`;\\r\\n      });\\r\\n      html += '>';\\r\\n      element = creator.createElement(html);\\r\\n    } catch (e) {\\r\\n      element = creator.createElement(tagName);\\r\\n      Object.keys(attributes).forEach((attributeName) => {\\r\\n        element.setAttribute(attributeName, attributes[attributeName]);\\r\\n      });\\r\\n    }\\r\\n    return element;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Creates new HTML from it's HTML code as string.\\r\\n   * @param {string} objectCode - html code\\r\\n   * @returns {Element} the HTML element.\\r\\n   * @static\\r\\n   */\\r\\n  static createObject(objectCode, creator) {\\r\\n    if (creator === undefined) {\\r\\n      creator = document;\\r\\n    }\\r\\n\\r\\n    // Internet Explorer can't include \\\"param\\\" tag when is setting an innerHTML property.\\r\\n    objectCode = objectCode.split('<applet ').join('<span wirisObject=\\\"WirisApplet\\\" ').split('<APPLET ').join('<span wirisObject=\\\"WirisApplet\\\" '); // It is a 'span' because 'span' objects can contain 'br' nodes.\\r\\n    objectCode = objectCode.split('</applet>').join('</span>').split('</APPLET>').join('</span>');\\r\\n\\r\\n    objectCode = objectCode.split('<param ').join('<br wirisObject=\\\"WirisParam\\\" ').split('<PARAM ').join('<br wirisObject=\\\"WirisParam\\\" '); // It is a 'br' because 'br' can't contain nodes.\\r\\n    objectCode = objectCode.split('</param>').join('</br>').split('</PARAM>').join('</br>');\\r\\n\\r\\n    const container = Util.createElement('div', {}, creator);\\r\\n    container.innerHTML = objectCode;\\r\\n\\r\\n    function recursiveParamsFix(object) {\\r\\n      if (object.getAttribute && object.getAttribute('wirisObject') === 'WirisParam') {\\r\\n        const attributesParsed = {};\\r\\n\\r\\n        for (let i = 0; i < object.attributes.length; i += 1) {\\r\\n          if (object.attributes[i].nodeValue !== null) {\\r\\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\\r\\n          }\\r\\n        }\\r\\n\\r\\n        const param = Util.createElement('param', attributesParsed, creator);\\r\\n\\r\\n        // IE fix.\\r\\n        if (param.NAME) {\\r\\n          param.name = param.NAME;\\r\\n          param.value = param.VALUE;\\r\\n        }\\r\\n\\r\\n        param.removeAttribute('wirisObject');\\r\\n        object.parentNode.replaceChild(param, object);\\r\\n      } else if (object.getAttribute && object.getAttribute('wirisObject') === 'WirisApplet') {\\r\\n        const attributesParsed = {};\\r\\n\\r\\n        for (let i = 0; i < object.attributes.length; i += 1) {\\r\\n          if (object.attributes[i].nodeValue !== null) {\\r\\n            attributesParsed[object.attributes[i].nodeName] = object.attributes[i].nodeValue;\\r\\n          }\\r\\n        }\\r\\n\\r\\n        const applet = Util.createElement('applet', attributesParsed, creator);\\r\\n        applet.removeAttribute('wirisObject');\\r\\n\\r\\n        for (let i = 0; i < object.childNodes.length; i += 1) {\\r\\n          recursiveParamsFix(object.childNodes[i]);\\r\\n\\r\\n          if (object.childNodes[i].nodeName.toLowerCase() === 'param') {\\r\\n            applet.appendChild(object.childNodes[i]);\\r\\n            i -= 1; // When we insert the object child into the applet, object loses one child.\\r\\n          }\\r\\n        }\\r\\n\\r\\n        object.parentNode.replaceChild(applet, object);\\r\\n      } else {\\r\\n        for (let i = 0; i < object.childNodes.length; i += 1) {\\r\\n          recursiveParamsFix(object.childNodes[i]);\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n\\r\\n    recursiveParamsFix(container);\\r\\n    return container.firstChild;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Converts an Element to its HTML code.\\r\\n   * @param {Element} element - entry element.\\r\\n   * @return {string} the HTML code of the input element.\\r\\n   * @static\\r\\n   */\\r\\n  static createObjectCode(element) {\\r\\n    // In case that the image was not created, the object can be null or undefined.\\r\\n    if (typeof element === 'undefined' || element === null) {\\r\\n      return null;\\r\\n    }\\r\\n\\r\\n    if (element.nodeType === 1) { // ELEMENT_NODE.\\r\\n      let output = `<${element.tagName}`;\\r\\n\\r\\n      for (let i = 0; i < element.attributes.length; i += 1) {\\r\\n        if (element.attributes[i].specified) {\\r\\n          output += ` ${element.attributes[i].name}=\\\"${Util.htmlEntities(element.attributes[i].value)}\\\"`;\\r\\n        }\\r\\n      }\\r\\n\\r\\n      if (element.childNodes.length > 0) {\\r\\n        output += '>';\\r\\n\\r\\n        for (let i = 0; i < element.childNodes.length; i += 1) {\\r\\n          output += Util.createObject(element.childNodes[i]);\\r\\n        }\\r\\n\\r\\n        output += `</${element.tagName}>`;\\r\\n      } else if (element.nodeName === 'DIV' || element.nodeName === 'SCRIPT') {\\r\\n        output += `></${element.tagName}>`;\\r\\n      } else {\\r\\n        output += '/>';\\r\\n      }\\r\\n\\r\\n      return output;\\r\\n    }\\r\\n\\r\\n    if (element.nodeType === 3) { // TEXT_NODE.\\r\\n      return Util.htmlEntities(element.nodeValue);\\r\\n    }\\r\\n\\r\\n    return '';\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Concatenates two URL paths.\\r\\n   * @param {string} path1 - first URL path\\r\\n   * @param {string} path2 - second URL path\\r\\n   * @returns {string} new URL.\\r\\n   */\\r\\n  static concatenateUrl(path1, path2) {\\r\\n    let separator = '';\\r\\n    if ((path1.indexOf('/') !== path1.length) && (path2.indexOf('/') !== 0)) {\\r\\n      separator = '/';\\r\\n    }\\r\\n    return (path1 + separator + path2).replace(/([^:]\\\\/)\\\\/+/g, '$1');\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses a text and replaces all HTML special characters by their correspondent entities.\\r\\n   * @param {string} input - text to be parsed.\\r\\n   * @returns {string} the input text with all their special characters replaced by their entities.\\r\\n   * @static\\r\\n   */\\r\\n  static htmlEntities(input) {\\r\\n    return input.split('&').join('&amp;').split('<').join('&lt;')\\r\\n      .split('>')\\r\\n      .join('&gt;')\\r\\n      .split('\\\"')\\r\\n      .join('&quot;');\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses a text and replaces all the HTML entities by their characters.\\r\\n   * @param {string} input - text to be parsed\\r\\n   * @returns {string} the input text with all their entities replaced by characters.\\r\\n   * @static\\r\\n   */\\r\\n  static htmlEntitiesDecode(input) {\\r\\n    // Textarea element decodes when inner html is set.\\r\\n    const textarea = document.createElement('textarea');\\r\\n    textarea.innerHTML = input;\\r\\n    return textarea.value;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns a cross-browser http request.\\r\\n   * @return {object} httpRequest request object.\\r\\n   * @returns {XMLHttpRequest|ActiveXObject} the proper request object.\\r\\n   */\\r\\n  static createHttpRequest() {\\r\\n    const currentPath = window.location.toString().substr(0, window.location.toString().lastIndexOf('/') + 1);\\r\\n    if (currentPath.substr(0, 7) === 'file://') {\\r\\n      throw StringManager.get('exception_cross_site');\\r\\n    }\\r\\n\\r\\n    if (typeof XMLHttpRequest !== 'undefined') {\\r\\n      return new XMLHttpRequest();\\r\\n    }\\r\\n\\r\\n    try {\\r\\n      return new ActiveXObject('Msxml2.XMLHTTP');\\r\\n    } catch (e) {\\r\\n      try {\\r\\n        return new ActiveXObject('Microsoft.XMLHTTP');\\r\\n      } catch (oc) {\\r\\n        return null;\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Converts a hash to a HTTP query.\\r\\n   * @param {Object[]} properties - a key/value object.\\r\\n   * @returns {string} a HTTP query containing all the key value pairs with\\r\\n   * all the special characters replaced by their entities.\\r\\n   * @static\\r\\n   */\\r\\n  static httpBuildQuery(properties) {\\r\\n    let result = '';\\r\\n\\r\\n    Object.keys(properties).forEach((i) => {\\r\\n      if (properties[i] != null) {\\r\\n        result += `${Util.urlEncode(i)}=${Util.urlEncode(properties[i])}&`;\\r\\n      }\\r\\n    });\\r\\n\\r\\n    // Deleting last '&' empty character.\\r\\n    if (result.substring(result.length - 1) === '&') {\\r\\n      result = result.substring(0, result.length - 1);\\r\\n    }\\r\\n\\r\\n    return result;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Convert a hash to string sorting keys to get a deterministic output\\r\\n   * @param {Object[]} hash - a key/value object.\\r\\n   * @returns {string} a string with the form key1=value1...keyn=valuen\\r\\n   * @static\\r\\n   */\\r\\n  static propertiesToString(hash) {\\r\\n    // 1. Sort keys. We sort the keys because we want a deterministic output.\\r\\n    const keys = [];\\r\\n    Object.keys(hash).forEach((key) => {\\r\\n      if (Object.prototype.hasOwnProperty.call(hash, key)) {\\r\\n        keys.push(key);\\r\\n      }\\r\\n    });\\r\\n\\r\\n    const n = keys.length;\\r\\n    for (let i = 0; i < n; i += 1) {\\r\\n      for (let j = i + 1; j < n; j += 1) {\\r\\n        const s1 = keys[i];\\r\\n        const s2 = keys[j];\\r\\n        if (Util.compareStrings(s1, s2) > 0) {\\r\\n          // Swap.\\r\\n          keys[i] = s2;\\r\\n          keys[j] = s1;\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n\\r\\n    // 2. Generate output.\\r\\n    let output = '';\\r\\n    for (let i = 0; i < n; i += 1) {\\r\\n      const key = keys[i];\\r\\n      output += key;\\r\\n      output += '=';\\r\\n      let value = hash[key];\\r\\n      value = value.replace('\\\\\\\\', '\\\\\\\\\\\\\\\\');\\r\\n      value = value.replace('\\\\n', '\\\\\\\\n');\\r\\n      value = value.replace('\\\\r', '\\\\\\\\r');\\r\\n      value = value.replace('\\\\t', '\\\\\\\\t');\\r\\n\\r\\n      output += value;\\r\\n      output += '\\\\n';\\r\\n    }\\r\\n    return output;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Compare two strings using charCodeAt method\\r\\n   * @param {string} a - first string to compare.\\r\\n   * @param {string} b - second string to compare.\\r\\n   * @returns {number} the difference between a and b\\r\\n   * @static\\r\\n   */\\r\\n  static compareStrings(a, b) {\\r\\n    let i;\\r\\n    const an = a.length;\\r\\n    const bn = b.length;\\r\\n    const n = (an > bn) ? bn : an;\\r\\n    for (i = 0; i < n; i += 1) {\\r\\n      const c = Util.fixedCharCodeAt(a, i) - Util.fixedCharCodeAt(b, i);\\r\\n      if (c !== 0) {\\r\\n        return c;\\r\\n      }\\r\\n    }\\r\\n    return a.length - b.length;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Fix charCodeAt() JavaScript function to handle non-Basic-Multilingual-Plane characters.\\r\\n   * @param {string} string - input string\\r\\n   * @param {number} idx - an integer greater than or equal to 0\\r\\n   * and less than the length of the string\\r\\n   * @returns {number} an integer representing the UTF-16 code of the string at the given index.\\r\\n   * @static\\r\\n   */\\r\\n  static fixedCharCodeAt(string, idx) {\\r\\n    idx = idx || 0;\\r\\n    const code = string.charCodeAt(idx);\\r\\n    let hi;\\r\\n    let low;\\r\\n\\r\\n    /* High surrogate (could change last hex to 0xDB7F to treat high\\r\\n    private surrogates as single characters) */\\r\\n\\r\\n    if (code >= 0xD800 && code <= 0xDBFF) {\\r\\n      hi = code;\\r\\n      low = string.charCodeAt(idx + 1);\\r\\n      if (Number.isNaN(low)) {\\r\\n        throw StringManager.get('exception_high_surrogate');\\r\\n      }\\r\\n      return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;\\r\\n    }\\r\\n\\r\\n    if (code >= 0xDC00 && code <= 0xDFFF) { // Low surrogate.\\r\\n      /* We return false to allow loops to skip this iteration since should have\\r\\n      already handled high surrogate above in the previous iteration. */\\r\\n      return false;\\r\\n    }\\r\\n    return code;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns an URL with it's query params converted into array.\\r\\n   * @param {string} url - input URL.\\r\\n   * @returns {Object[]} an array containing all URL query params.\\r\\n   * @static\\r\\n   */\\r\\n  static urlToAssArray(url) {\\r\\n    let i;\\r\\n    i = url.indexOf('?');\\r\\n    if (i > 0) {\\r\\n      const query = url.substring(i + 1);\\r\\n      const ss = query.split('&');\\r\\n      const h = {};\\r\\n      for (i = 0; i < ss.length; i += 1) {\\r\\n        const s = ss[i];\\r\\n        const kv = s.split('=');\\r\\n        if (kv.length > 1) {\\r\\n          h[kv[0]] = decodeURIComponent(kv[1].replace(/\\\\+/g, ' '));\\r\\n        }\\r\\n      }\\r\\n      return h;\\r\\n    }\\r\\n    return {};\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns an encoded URL by replacing each instance of certain characters by\\r\\n   * one, two, three or four escape sequences using encodeURIComponent method.\\r\\n   * !'()* . will not be encoded.\\r\\n   *\\r\\n   * @param {string} clearString - URL string to be encoded\\r\\n   * @returns {string} URL with it's special characters replaced.\\r\\n   * @static\\r\\n   */\\r\\n  static urlEncode(clearString) {\\r\\n    let output = '';\\r\\n    // Method encodeURIComponent doesn't encode !'()*~ .\\r\\n    output = encodeURIComponent(clearString);\\r\\n    return output;\\r\\n  }\\r\\n\\r\\n  // TODO: To parser?\\r\\n  /**\\r\\n   * Converts the HTML of a image into the output code that WIRIS must return.\\r\\n   * By default returns the MathML stored on data-mahml attribute (if imgCode is a formula)\\r\\n   * or the Wiriscas attribute of a WIRIS applet.\\r\\n   * @param {string} imgCode - the html code from a formula or a CAS image.\\r\\n   * @param {boolean} convertToXml - true if the image should be converted to XML.\\r\\n   * @param {boolean} convertToSafeXml - true if the image should be converted to safeXML.\\r\\n   * @returns {string} the XML or safeXML of a WIRIS image.\\r\\n   * @static\\r\\n   */\\r\\n  static getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml) {\\r\\n    const imgObject = Util.createObject(imgCode);\\r\\n    if (imgObject) {\\r\\n      if (imgObject.className === Configuration.get('imageClassName') || imgObject.getAttribute(Configuration.get('imageMathmlAttribute'))) {\\r\\n        if (!convertToXml) {\\r\\n          return imgCode;\\r\\n        }\\r\\n\\r\\n        const dataMathML = imgObject.getAttribute(Configuration.get('imageMathmlAttribute'));\\r\\n        // To handle annotations, first we need the MathML in XML.\\r\\n        let mathML = MathML.safeXmlDecode(dataMathML);\\r\\n\\r\\n        if (!Configuration.get('saveHandTraces')) {\\r\\n          mathML = MathML.removeAnnotation(mathML, 'application/json');\\r\\n        }\\r\\n\\r\\n        if (mathML == null) {\\r\\n          mathML = imgObject.getAttribute('alt');\\r\\n        }\\r\\n\\r\\n        if (convertToSafeXml) {\\r\\n          const safeMathML = MathML.safeXmlEncode(mathML);\\r\\n          return safeMathML;\\r\\n        }\\r\\n\\r\\n        return mathML;\\r\\n      }\\r\\n    }\\r\\n    return imgCode;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Gets the node length in characters.\\r\\n   * @param {Node} node - HTML node.\\r\\n   * @returns {number} node length.\\r\\n   * @static\\r\\n   */\\r\\n  static getNodeLength(node) {\\r\\n    const staticNodeLengths = {\\r\\n      IMG: 1,\\r\\n      BR: 1,\\r\\n    };\\r\\n\\r\\n    if (node.nodeType === 3) { // TEXT_NODE.\\r\\n      return node.nodeValue.length;\\r\\n    }\\r\\n\\r\\n    if (node.nodeType === 1) { // ELEMENT_NODE.\\r\\n      let length = staticNodeLengths[node.nodeName.toUpperCase()];\\r\\n\\r\\n      if (length === undefined) {\\r\\n        length = 0;\\r\\n      }\\r\\n\\r\\n      for (let i = 0; i < node.childNodes.length; i += 1) {\\r\\n        length += Util.getNodeLength(node.childNodes[i]);\\r\\n      }\\r\\n      return length;\\r\\n    }\\r\\n    return 0;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Gets a selected node or text from an editable HTMLElement.\\r\\n   * If the caret is on a text node, concatenates it with all the previous and next text nodes.\\r\\n   * @param {HTMLElement} target - the editable HTMLElement.\\r\\n   * @param {boolean} isIframe  - specifies if the target is an iframe or not\\r\\n   * @param {boolean} forceGetSelection - if true, ignores IE system to get\\r\\n   * the current selection and uses window.getSelection()\\r\\n   * @returns {object} an object with the 'node' key set if the item is an\\r\\n   * element or the keys 'node' and 'caretPosition' if the element is text.\\r\\n   * @static\\r\\n   */\\r\\n  static getSelectedItem(target, isIframe, forceGetSelection) {\\r\\n    let windowTarget;\\r\\n\\r\\n    if (isIframe) {\\r\\n      windowTarget = target.contentWindow;\\r\\n      windowTarget.focus();\\r\\n    } else {\\r\\n      windowTarget = window;\\r\\n      target.focus();\\r\\n    }\\r\\n\\r\\n    if (document.selection && !forceGetSelection) {\\r\\n      const range = windowTarget.document.selection.createRange();\\r\\n\\r\\n      if (range.parentElement) {\\r\\n        if (range.htmlText.length > 0) {\\r\\n          if (range.text.length === 0) {\\r\\n            return Util.getSelectedItem(target, isIframe, true);\\r\\n          }\\r\\n\\r\\n          return null;\\r\\n        }\\r\\n\\r\\n        windowTarget.document.execCommand('InsertImage', false, '#');\\r\\n        let temporalObject = range.parentElement();\\r\\n\\r\\n        if (temporalObject.nodeName.toUpperCase() !== 'IMG') {\\r\\n          // IE9 fix: parentElement() does not return the IMG node,\\r\\n          // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\\r\\n          range.pasteHTML('<span id=\\\"wrs_openEditorWindow_temporalObject\\\"></span>');\\r\\n          temporalObject = windowTarget.document.getElementById('wrs_openEditorWindow_temporalObject');\\r\\n        }\\r\\n\\r\\n        let node;\\r\\n        let caretPosition;\\r\\n\\r\\n        if (temporalObject.nextSibling && temporalObject.nextSibling.nodeType === 3) { // TEXT_NODE.\\r\\n          node = temporalObject.nextSibling;\\r\\n          caretPosition = 0;\\r\\n        } else if (temporalObject.previousSibling\\r\\n          && temporalObject.previousSibling.nodeType === 3) {\\r\\n          node = temporalObject.previousSibling;\\r\\n          caretPosition = node.nodeValue.length;\\r\\n        } else {\\r\\n          node = windowTarget.document.createTextNode('');\\r\\n          temporalObject.parentNode.insertBefore(node, temporalObject);\\r\\n          caretPosition = 0;\\r\\n        }\\r\\n\\r\\n        temporalObject.parentNode.removeChild(temporalObject);\\r\\n\\r\\n        return {\\r\\n          node,\\r\\n          caretPosition,\\r\\n        };\\r\\n      }\\r\\n\\r\\n      if (range.length > 1) {\\r\\n        return null;\\r\\n      }\\r\\n\\r\\n      return {\\r\\n        node: range.item(0),\\r\\n      };\\r\\n    }\\r\\n\\r\\n    if (windowTarget.getSelection) {\\r\\n      let range;\\r\\n      const selection = windowTarget.getSelection();\\r\\n\\r\\n      try {\\r\\n        range = selection.getRangeAt(0);\\r\\n      } catch (e) {\\r\\n        range = windowTarget.document.createRange();\\r\\n      }\\r\\n\\r\\n      const node = range.startContainer;\\r\\n\\r\\n      if (node.nodeType === 3) { // TEXT_NODE.\\r\\n        return {\\r\\n          node,\\r\\n          caretPosition: range.startOffset,\\r\\n        };\\r\\n      }\\r\\n\\r\\n      if (node !== range.endContainer) {\\r\\n        return null;\\r\\n      }\\r\\n\\r\\n      if (node.nodeType === 1) { // ELEMENT_NODE.\\r\\n        const position = range.startOffset;\\r\\n\\r\\n        if (node.childNodes[position]) {\\r\\n          return {\\r\\n            node: node.childNodes[position],\\r\\n          };\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n\\r\\n    return null;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns null if there isn't any item or if it is malformed.\\r\\n   * Otherwise returns an object containing the node with the MathML image\\r\\n   * and the cursor position inside the textarea.\\r\\n   * @param {HTMLTextAreaElement} textarea - textarea element.\\r\\n   * @returns {Object} An object containing the node, the index of the\\r\\n   * beginning  of the selected text, caret position and the start and end position of the\\r\\n   * text node.\\r\\n   * @static\\r\\n   */\\r\\n  static getSelectedItemOnTextarea(textarea) {\\r\\n    const textNode = document.createTextNode(textarea.value);\\r\\n    const textNodeValues = Latex.getLatexFromTextNode(textNode, textarea.selectionStart);\\r\\n    if (textNodeValues === null) {\\r\\n      return null;\\r\\n    }\\r\\n\\r\\n    return {\\r\\n      node: textNode,\\r\\n      caretPosition: textarea.selectionStart,\\r\\n      startPosition: textNodeValues.startPosition,\\r\\n      endPosition: textNodeValues.endPosition,\\r\\n    };\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Looks for elements that match the given name in a HTML code string.\\r\\n   * Important: this function is very concrete for WIRIS code.\\r\\n   * It takes as preconditions lots of behaviors that are not the general case.\\r\\n   * @param {string} code -  HTML code.\\r\\n   * @param {string} name - element name.\\r\\n   * @param {boolean} autoClosed - true if the elements are autoClosed.\\r\\n   * @return {Object[]} an object containing all HTML elements of code matching the name argument.\\r\\n   * @static\\r\\n   */\\r\\n  static getElementsByNameFromString(code, name, autoClosed) {\\r\\n    const elements = [];\\r\\n    code = code.toLowerCase();\\r\\n    name = name.toLowerCase();\\r\\n    let start = code.indexOf(`<${name} `);\\r\\n\\r\\n    while (start !== -1) { // Look for nodes.\\r\\n      let endString;\\r\\n\\r\\n      if (autoClosed) {\\r\\n        endString = '>';\\r\\n      } else {\\r\\n        endString = `</${name}>`;\\r\\n      }\\r\\n\\r\\n      let end = code.indexOf(endString, start);\\r\\n\\r\\n      if (end !== -1) {\\r\\n        end += endString.length;\\r\\n        elements.push({\\r\\n          start,\\r\\n          end,\\r\\n        });\\r\\n      } else {\\r\\n        end = start + 1;\\r\\n      }\\r\\n\\r\\n      start = code.indexOf(`<${name} `, end);\\r\\n    }\\r\\n\\r\\n    return elements;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the numeric value of a base64 character.\\r\\n   * @param  {string} character - base64 character.\\r\\n   * @returns {number} base64 character numeric value.\\r\\n   * @static\\r\\n   */\\r\\n  static decode64(character) {\\r\\n    const PLUS = '+'.charCodeAt(0);\\r\\n    const SLASH = '/'.charCodeAt(0);\\r\\n    const NUMBER = '0'.charCodeAt(0);\\r\\n    const LOWER = 'a'.charCodeAt(0);\\r\\n    const UPPER = 'A'.charCodeAt(0);\\r\\n    const PLUS_URL_SAFE = '-'.charCodeAt(0);\\r\\n    const SLASH_URL_SAFE = '_'.charCodeAt(0);\\r\\n    const code = character.charCodeAt(0);\\r\\n\\r\\n    if (code === PLUS || code === PLUS_URL_SAFE) {\\r\\n      return 62; // Char '+'.\\r\\n    }\\r\\n    if (code === SLASH || code === SLASH_URL_SAFE) {\\r\\n      return 63; // Char '/'.\\r\\n    }\\r\\n    if (code < NUMBER) {\\r\\n      return -1; // No match.\\r\\n    }\\r\\n    if (code < NUMBER + 10) {\\r\\n      return code - NUMBER + 26 + 26;\\r\\n    }\\r\\n    if (code < UPPER + 26) {\\r\\n      return code - UPPER;\\r\\n    }\\r\\n    if (code < LOWER + 26) {\\r\\n      return code - LOWER + 26;\\r\\n    }\\r\\n\\r\\n    return null;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Converts a base64 string to a array of bytes.\\r\\n   * @param {string} b64String - base64 string.\\r\\n   * @param {number} length - dimension of byte array (by default whole string).\\r\\n   * @return {Object[]} the resultant byte array.\\r\\n   * @static\\r\\n   */\\r\\n  static b64ToByteArray(b64String, length) {\\r\\n    let tmp;\\r\\n\\r\\n    if (b64String.length % 4 > 0) {\\r\\n      throw new Error('Invalid string. Length must be a multiple of 4'); // Tipped base64. Length is fixed.\\r\\n    }\\r\\n\\r\\n    const arr = [];\\r\\n\\r\\n    let l;\\r\\n    let placeHolders;\\r\\n    if (!length) { // All b64String string.\\r\\n      if (b64String.charAt(b64String.length - 2) === '=') {\\r\\n        placeHolders = 2;\\r\\n      } else if (b64String.charAt(b64String.length - 1) === '=') {\\r\\n        placeHolders = 1;\\r\\n      } else {\\r\\n        placeHolders = 0;\\r\\n      }\\r\\n      l = placeHolders > 0 ? b64String.length - 4 : b64String.length;\\r\\n    } else {\\r\\n      l = length;\\r\\n    }\\r\\n\\r\\n    let i;\\r\\n    for (i = 0; i < l; i += 4) {\\r\\n      // Ignoring code checker standards (bitewise operators).\\r\\n      // See https://tracker.moodle.org/browse/CONTRIB-5862 for further information.\\r\\n      // @codingStandardsIgnoreStart\\r\\n      // eslint-disable-next-line max-len\\r\\n      tmp = (Util.decode64(b64String.charAt(i)) << 18) | (Util.decode64(b64String.charAt(i + 1)) << 12) | (Util.decode64(b64String.charAt(i + 2)) << 6) | Util.decode64(b64String.charAt(i + 3));\\r\\n\\r\\n      arr.push((tmp >> 16) & 0xFF);\\r\\n      arr.push((tmp >> 8) & 0xFF);\\r\\n      arr.push(tmp & 0xFF);\\r\\n      // @codingStandardsIgnoreEnd\\r\\n    }\\r\\n\\r\\n    if (placeHolders) {\\r\\n      if (placeHolders === 2) {\\r\\n        // Ignoring code checker standards (bitewise operators).\\r\\n        // @codingStandardsIgnoreStart\\r\\n        // eslint-disable-next-line max-len\\r\\n        tmp = (Util.decode64(b64String.charAt(i)) << 2) | (Util.decode64(b64String.charAt(i + 1)) >> 4);\\r\\n        arr.push(tmp & 0xFF);\\r\\n      } else if (placeHolders === 1) {\\r\\n        // eslint-disable-next-line max-len\\r\\n        tmp = (Util.decode64(b64String.charAt(i)) << 10) | (Util.decode64(b64String.charAt(i + 1)) << 4) | (Util.decode64(b64String.charAt(i + 2)) >> 2);\\r\\n        arr.push((tmp >> 8) & 0xFF);\\r\\n        arr.push(tmp & 0xFF);\\r\\n        // @codingStandardsIgnoreEnd\\r\\n      }\\r\\n    }\\r\\n    return arr;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the first 32-bit signed integer from a byte array.\\r\\n   * @param {Object[]} bytes - array of bytes.\\r\\n   * @returns {number} the 32-bit signed integer.\\r\\n   * @static\\r\\n   */\\r\\n  static readInt32(bytes) {\\r\\n    if (bytes.length < 4) {\\r\\n      return false;\\r\\n    }\\r\\n    const int32 = bytes.splice(0, 4);\\r\\n    // @codingStandardsIgnoreStart\\r\\n    // eslint-disable-next-line no-mixed-operators\\r\\n    return (int32[0] << 24 | int32[1] << 16 | int32[2] << 8 | int32[3] << 0);\\r\\n    // @codingStandardsIgnoreEnd\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Read the first byte from a byte array.\\r\\n   * @param {Object} bytes - input byte array.\\r\\n   * @returns {number} first byte of the byte array.\\r\\n   * @static\\r\\n   */\\r\\n  static readByte(bytes) {\\r\\n    // @codingStandardsIgnoreStart\\r\\n    return bytes.shift() << 0;\\r\\n    // @codingStandardsIgnoreEnd\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Read an arbitrary number of bytes, from a fixed position on a byte array.\\r\\n   * @param  {Object[]} bytes - byte array.\\r\\n   * @param  {number} pos - start position.\\r\\n   * @param  {number} len - number of bytes to read.\\r\\n   * @returns {Object[]} the byte array.\\r\\n   * @static\\r\\n   */\\r\\n  static readBytes(bytes, pos, len) {\\r\\n    return bytes.splice(pos, len);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Inserts or modifies formulas or CAS on a textarea.\\r\\n   * @param {HTMLTextAreaElement} textarea - textarea target.\\r\\n   * @param {string} text - text to add in the textarea. For example, to add the link to the image,\\r\\n   * call this function as (textarea, Parser.createImageSrc(mathml));\\r\\n   * @static\\r\\n   */\\r\\n  static updateTextArea(textarea, text) {\\r\\n    if (textarea && text) {\\r\\n      textarea.focus();\\r\\n\\r\\n      if (textarea.selectionStart != null) {\\r\\n        const { selectionEnd } = textarea;\\r\\n        const selectionStart = textarea.value.substring(0, textarea.selectionStart);\\r\\n        const selectionEndSub = textarea.value.substring(selectionEnd, textarea.value.length);\\r\\n        textarea.value = selectionStart + text + selectionEndSub;\\r\\n        textarea.selectionEnd = selectionEnd + text.length;\\r\\n      } else {\\r\\n        const selection = document.selection.createRange();\\r\\n        selection.text = text;\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Modifies existing formula on a textarea.\\r\\n   * @param {HTMLTextAreaElement} textarea - text area target.\\r\\n   * @param {string} text - text to add in the textarea. For example, if you want to add the link\\r\\n   * to the image,you can call this function as\\r\\n   * Util.updateTextarea(textarea, Parser.createImageSrc(mathml));\\r\\n   * @param {number} start - beginning index from textarea where it needs to be replaced by text.\\r\\n   * @param {number} end - ending index from textarea where it needs to be replaced by text\\r\\n   * @static\\r\\n   */\\r\\n  static updateExistingTextOnTextarea(textarea, text, start, end) {\\r\\n    textarea.focus();\\r\\n    const textareaStart = textarea.value.substring(0, start);\\r\\n    textarea.value = textareaStart + text + textarea.value.substring(end, textarea.value.length);\\r\\n    textarea.selectionEnd = start + text.length;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Add a parameter with it's correspondent value to an URL (GET).\\r\\n   * @param {string} path - URL path\\r\\n   * @param {string} parameter - parameter\\r\\n   * @param {string} value - value\\r\\n   * @static\\r\\n   */\\r\\n  static addArgument(path, parameter, value) {\\r\\n    let sep;\\r\\n    if (path.indexOf('?') > 0) {\\r\\n      sep = '&';\\r\\n    } else {\\r\\n      sep = '?';\\r\\n    }\\r\\n    return `${path + sep + parameter}=${value}`;\\r\\n  }\\r\\n}\\r\\n\",\"import Configuration from './configuration';\\nimport Util from './util';\\n\\n/**\\n * @classdesc\\n * This class represents MathType Image class. Contains all the logic related\\n * to MathType images manipulation.\\n * All MathType images are generated using the appropriate MathType\\n * integration service: showimage or createimage.\\n *\\n * There are two available image formats:\\n * - svg (default)\\n * - png\\n *\\n * There are two formats for the image src attribute:\\n * - A data-uri scheme containing the URL-encoded SVG or a PNG's base64.\\n * - A link to the showimage service.\\n */\\nexport default class Image {\\n  /**\\n   * Removes data attributes from an image.\\n   * @param {HTMLImageElement} img - Image where remove data attributes.\\n   */\\n  static removeImgDataAttributes(img) {\\n    const attributesToRemove = [];\\n    const { attributes } = img;\\n\\n    Object.keys(attributes).forEach((key) => {\\n      const attribute = attributes[key];\\n      if (attribute.name.indexOf('data-') === 0) {\\n        // Is preferred keep an array and remove after the search\\n        // because when attribute is removed the array of attributes\\n        // is modified.\\n        attributesToRemove.push(attribute.name);\\n      }\\n    });\\n\\n    attributesToRemove.forEach((attribute) => {\\n      img.removeAttribute(attribute);\\n    });\\n  }\\n\\n  /**\\n   * @static\\n   * Clones all MathType image attributes from a HTMLImageElement to another.\\n   * @param {HTMLImageElement} originImg - The original image.\\n   * @param {HTMLImageElement} destImg - The destination image.\\n   */\\n  static clone(originImg, destImg) {\\n    const customEditorAttributeName = Configuration.get('imageCustomEditorName');\\n    if (!originImg.hasAttribute(customEditorAttributeName)) {\\n      destImg.removeAttribute(customEditorAttributeName);\\n    }\\n\\n    const mathmlAttributeName = Configuration.get('imageMathmlAttribute');\\n    const imgAttributes = [\\n      mathmlAttributeName,\\n      customEditorAttributeName,\\n      'alt',\\n      'height',\\n      'width',\\n      'style',\\n      'src',\\n      'role',\\n    ];\\n\\n    imgAttributes.forEach((iterator) => {\\n      const originAttribute = originImg.getAttribute(iterator);\\n      if (originAttribute) {\\n        destImg.setAttribute(iterator, originAttribute);\\n      }\\n    });\\n  }\\n\\n  /**\\n  * Calculates the metrics of a MathType image given the the service response and the image format.\\n  * @param {HTMLImageElement} img - The HTMLImageElement.\\n  * @param {String} uri - The URI generated by the image service: can be a data URI scheme or a URL.\\n  * @param {Boolean} jsonResponse - True the response of the image service is a\\n  * JSON object. False otherwise.\\n  */\\n  static setImgSize(img, uri, jsonResponse) {\\n    let ar;\\n    let base64String;\\n    let bytes;\\n    let svgString;\\n    if (jsonResponse) {\\n      // Cleaning data:image/png;base64.\\n      if (Configuration.get('imageFormat') === 'svg') {\\n        // SVG format.\\n        // If SVG is encoded in base64 we need to convert the base64 bytes into a SVG string.\\n        if (Configuration.get('saveMode') !== 'base64') {\\n          ar = Image.getMetricsFromSvgString(uri);\\n        } else {\\n          base64String = img.src.substr(img.src.indexOf('base64,') + 7, img.src.length);\\n          svgString = '';\\n          bytes = Util.b64ToByteArray(base64String, base64String.length);\\n          for (let i = 0; i < bytes.length; i += 1) {\\n            svgString += String.fromCharCode(bytes[i]);\\n          }\\n          ar = Image.getMetricsFromSvgString(svgString);\\n        }\\n        // PNG format: we store all metrics information in the first 88 bytes.\\n      } else {\\n        base64String = img.src.substr(img.src.indexOf('base64,') + 7, img.src.length);\\n        bytes = Util.b64ToByteArray(base64String, 88);\\n        ar = Image.getMetricsFromBytes(bytes);\\n      }\\n      // Backwards compatibility: we store the metrics into createimage response.\\n    } else {\\n      ar = Util.urlToAssArray(uri);\\n    }\\n    let width = ar.cw;\\n    if (!width) {\\n      return;\\n    }\\n    let height = ar.ch;\\n    let baseline = ar.cb;\\n    const { dpi } = ar;\\n    if (dpi) {\\n      width = width * 96 / dpi;\\n      height = height * 96 / dpi;\\n      baseline = baseline * 96 / dpi;\\n    }\\n    img.width = width;\\n    img.height = height;\\n    img.style.verticalAlign = `-${height - baseline}px`;\\n  }\\n\\n  /**\\n   * Calculates the metrics of an image which has been resized. Is used to restore the original\\n   * metrics of a resized image.\\n   * @param {HTMLImageElement } img - The resized HTMLImageElement.\\n   */\\n  static fixAfterResize(img) {\\n    img.removeAttribute('style');\\n    img.removeAttribute('width');\\n    img.removeAttribute('height');\\n    // In order to avoid resize with max-width css property.\\n    img.style.maxWidth = 'none';\\n    if (img.src.indexOf('data:image') !== -1) {\\n      if (Configuration.get('imageFormat') === 'svg') {\\n        // ...data:image/svg+xml;charset=utf8, = 32.\\n        const svg = decodeURIComponent(img.src.substring(32, img.src.length));\\n        Image.setImgSize(img, svg, true);\\n      } else {\\n        // ...data:image/png;base64, == 22.\\n        const base64 = img.src.substring(22, img.src.length);\\n        Image.setImgSize(img, base64, true);\\n      }\\n    } else {\\n      Image.setImgSize(img, img.src);\\n    }\\n  }\\n\\n  /**\\n   * Returns the metrics (height, width and baseline) contained in a SVG image generated\\n   * by the MathType image service. This image contains as an extra custom attribute:\\n   * the baseline (wrs:baseline).\\n   * @param {String} svgString - The SVG image.\\n   * @return {Array} - The image metrics.\\n   */\\n  static getMetricsFromSvgString(svgString) {\\n    let first = svgString.indexOf('height=\\\"');\\n    let last = svgString.indexOf('\\\"', first + 8, svgString.length);\\n    const height = svgString.substring(first + 8, last);\\n\\n    first = svgString.indexOf('width=\\\"');\\n    last = svgString.indexOf('\\\"', first + 7, svgString.length);\\n    const width = svgString.substring(first + 7, last);\\n\\n    first = svgString.indexOf('wrs:baseline=\\\"');\\n    last = svgString.indexOf('\\\"', first + 14, svgString.length);\\n    const baseline = svgString.substring(first + 14, last);\\n\\n    if (typeof width !== 'undefined') {\\n      const arr = [];\\n      arr.cw = width;\\n      arr.ch = height;\\n      if (typeof baseline !== 'undefined') {\\n        arr.cb = baseline;\\n      }\\n      return arr;\\n    }\\n    return [];\\n  }\\n\\n  /**\\n   * Returns the metrics (width, height, baseline and dpi) contained in a PNG byte array.\\n   * @param  {Array.<Bytes>} bytes - png byte array.\\n   * @return {Array} The png metrics.\\n   */\\n  static getMetricsFromBytes(bytes) {\\n    Util.readBytes(bytes, 0, 8);\\n    let width;\\n    let height;\\n    let typ;\\n    let baseline;\\n    let dpi;\\n    while (bytes.length >= 4) {\\n      typ = Util.readInt32(bytes);\\n      if (typ === 0x49484452) {\\n        width = Util.readInt32(bytes);\\n        height = Util.readInt32(bytes);\\n        // Read 5 bytes.\\n        Util.readInt32(bytes);\\n        Util.readByte(bytes);\\n      } else if (typ === 0x62615345) { // Baseline: 'baSE'.\\n        baseline = Util.readInt32(bytes);\\n      } else if (typ === 0x70485973) { // Dpis: 'pHYs'.\\n        dpi = Util.readInt32(bytes);\\n        dpi = (Math.round(dpi / 39.37));\\n        Util.readInt32(bytes);\\n        Util.readByte(bytes);\\n      }\\n      Util.readInt32(bytes);\\n    }\\n\\n    if (typeof width !== 'undefined') {\\n      const arr = [];\\n      arr.cw = width;\\n      arr.ch = height;\\n      arr.dpi = dpi;\\n      if (baseline) {\\n        arr.cb = baseline;\\n      }\\n\\n      return arr;\\n    }\\n    return [];\\n  }\\n}\\n\",\"import TextCache from './textcache';\\nimport ServiceProvider from './serviceprovider';\\nimport MathML from './mathml';\\nimport StringManager from './stringmanager';\\n\\n/**\\n * @classdesc\\n * This class represents MathType accessible class. Converts MathML to accessible text and manages\\n * the associated client-side cache.\\n */\\nexport default class Accessibility {\\n  /**\\n  * Static property.\\n  * Accessibility cache, each entry contains a MathML and its correspondent accessibility text.\\n  * @type {TextCache}\\n  */\\n  static get cache() {\\n    return Accessibility._cache;\\n  }\\n\\n  /**\\n   * Static property setter.\\n   * Set accessibility cache.\\n   * @param {TextCahe} value - The property value.\\n   * @ignore\\n   */\\n  static set cache(value) {\\n    Accessibility._cache = value;\\n  }\\n\\n  /**\\n   * Converts MathML strings to its accessible text representation.\\n   * @param {String} mathML - MathML to be converted to accessible text.\\n   * @param {String} [language] - Language of the accessible text. 'en' by default.\\n   * @param {Array.<String>} [data] - Parameters to send to mathml2accessible service.\\n   * @return {String} Accessibility text.\\n   */\\n  static mathMLToAccessible(mathML, language, data) {\\n    if (typeof (language) === 'undefined') {\\n      language = 'en';\\n    }\\n    // Check MathML class. If the class is chemistry,\\n    // we add chemistry to data to force accessibility service\\n    // to load chemistry grammar.\\n    if (MathML.containClass(mathML, 'wrs_chemistry')) {\\n      data.mode = 'chemistry';\\n    }\\n    let accessibleText = '';\\n\\n    if (Accessibility.cache.get(mathML)) {\\n      accessibleText = Accessibility.cache.get(mathML);\\n    } else {\\n      data.service = 'mathml2accessible';\\n      data.lang = language;\\n      const accessibleJsonResponse = JSON.parse(ServiceProvider.getService('service', data));\\n      if (accessibleJsonResponse.status !== 'error') {\\n        accessibleText = accessibleJsonResponse.result.text;\\n        Accessibility.cache.populate(mathML, accessibleText);\\n      } else {\\n        accessibleText = StringManager.get('error_convert_accessibility');\\n      }\\n    }\\n\\n    return accessibleText;\\n  }\\n}\\n\\n/**\\n * Contains an instance of TextCache class to manage the JavaScript accessible cache.\\n * Each entry of the cache object contains the MathML and it's correspondent accessibility text.\\n * @private\\n * @type {TextCache}\\n */\\nAccessibility._cache = new TextCache();\\n\",\"import Util from './util';\\r\\nimport Latex from './latex';\\r\\nimport MathML from './mathml';\\r\\nimport Image from './image';\\r\\nimport Accessibility from './accessibility';\\r\\nimport ServiceProvider from './serviceprovider';\\r\\nimport Configuration from './configuration';\\r\\nimport Constants from './constants';\\r\\n// eslint-disable-next-line no-unused-vars\\r\\nimport md5 from './md5';\\r\\n\\r\\n/**\\r\\n * @classdesc\\r\\n * This class represent a MahML parser. Converts MathML into formulas depending on the\\r\\n * image format (SVG, PNG, base64) and the save mode (XML, safeXML, Image) configured\\r\\n * in the backend.\\r\\n */\\r\\nexport default class Parser {\\r\\n  /**\\r\\n   * Converts a MathML string to an img element.\\r\\n   * @param {Document} creator - Document object to call createElement method.\\r\\n   * @param {string} mathml - MathML code\\r\\n   * @param {Object[]} wirisProperties - object containing WIRIS custom properties\\r\\n   * @param {language} language - custom language for accessibility.\\r\\n   * @returns {HTMLImageElement} the formula image corresponding to initial MathML string.\\r\\n   * @static\\r\\n   */\\r\\n  static mathmlToImgObject(creator, mathml, wirisProperties, language) {\\r\\n    const imgObject = creator.createElement('img');\\r\\n    imgObject.align = 'middle';\\r\\n    imgObject.style.maxWidth = 'none';\\r\\n    const data = wirisProperties || {};\\r\\n\\r\\n    data.mml = mathml;\\r\\n    data.lang = language;\\r\\n    // Request metrics of the generated image.\\r\\n    data.metrics = 'true';\\r\\n    data.centerbaseline = 'false';\\r\\n\\r\\n\\r\\n    // Full base64 method (edit & save).\\r\\n    if (Configuration.get('saveMode') === 'base64' && Configuration.get('base64savemode') === 'default') {\\r\\n      data.base64 = true;\\r\\n    }\\r\\n\\r\\n    // Render js params: _wrs_int_wirisProperties contains some js render params.\\r\\n    // Since MathML can support render params, js params should be send only to editor.\\r\\n\\r\\n    imgObject.className = Configuration.get('imageClassName');\\r\\n\\r\\n    if (mathml.indexOf('class=\\\"') !== -1) {\\r\\n      // We check here if the MathML has been created from a customEditor (such chemistry)\\r\\n      // to add custom editor name attribute to img object (if necessary).\\r\\n      let mathmlSubstring = mathml.substring(mathml.indexOf('class=\\\"') + 'class=\\\"'.length, mathml.length);\\r\\n      mathmlSubstring = mathmlSubstring.substring(0, mathmlSubstring.indexOf('\\\"'));\\r\\n      mathmlSubstring = mathmlSubstring.substring(4, mathmlSubstring.length);\\r\\n      imgObject.setAttribute(Configuration.get('imageCustomEditorName'), mathmlSubstring);\\r\\n    }\\r\\n\\r\\n    // Performance enabled.\\r\\n    if (Configuration.get('wirisPluginPerformance') && (Configuration.get('saveMode') === 'xml' || Configuration.get('saveMode') === 'safeXml')) {\\r\\n      let result = JSON.parse(Parser.createShowImageSrc(data, language));\\r\\n      if (result.status === 'warning') {\\r\\n        // POST call.\\r\\n        // if the mathml is malformed, this function will throw an exception.\\r\\n        try {\\r\\n          result = JSON.parse(ServiceProvider.getService('showimage', data));\\r\\n        } catch (e) {\\r\\n          return null;\\r\\n        }\\r\\n      }\\r\\n      ({ result } = result);\\r\\n      if (result.format === 'png') {\\r\\n        imgObject.src = `data:image/png;base64,${result.content}`;\\r\\n      } else {\\r\\n        imgObject.src = `data:image/svg+xml;charset=utf8,${Util.urlEncode(result.content)}`;\\r\\n      }\\r\\n      imgObject.setAttribute(Configuration.get('imageMathmlAttribute'), MathML.safeXmlEncode(mathml));\\r\\n      Image.setImgSize(imgObject, result.content, true);\\r\\n\\r\\n      if (Configuration.get('enableAccessibility')) {\\r\\n        if (typeof result.alt === 'undefined') {\\r\\n          imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\\r\\n        } else {\\r\\n          imgObject.alt = result.alt;\\r\\n        }\\r\\n      }\\r\\n    } else {\\r\\n      const result = Parser.createImageSrc(mathml, data);\\r\\n      imgObject.setAttribute(Configuration.get('imageMathmlAttribute'), MathML.safeXmlEncode(mathml));\\r\\n      imgObject.src = result;\\r\\n      Image.setImgSize(imgObject, result, Configuration.get('saveMode') === 'base64' && Configuration.get('base64savemode') === 'default');\\r\\n      if (Configuration.get('enableAccessibility')) {\\r\\n        imgObject.alt = Accessibility.mathMLToAccessible(mathml, language, data);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    if (typeof Parser.observer !== 'undefined') {\\r\\n      Parser.observer.observe(imgObject);\\r\\n    }\\r\\n\\r\\n    // Role math https://www.w3.org/TR/wai-aria/roles#math.\\r\\n    imgObject.setAttribute('role', 'math');\\r\\n    return imgObject;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the source to showimage service by calling createimage service. The\\r\\n   * output of the createimage service is a URL path pointing to showimage service.\\r\\n   * This method is called when performance is disabled.\\r\\n   * @param {string} mathml - MathML code.\\r\\n   * @param {Object[]} data - data object containing service parameters.\\r\\n   * @returns {string} the showimage path.\\r\\n   */\\r\\n  static createImageSrc(mathml, data) {\\r\\n    // Full base64 method (edit & save).\\r\\n    if (Configuration.get('saveMode') === 'base64' && Configuration.get('base64savemode') === 'default') {\\r\\n      data.base64 = true;\\r\\n    }\\r\\n\\r\\n    let result = ServiceProvider.getService('createimage', data);\\r\\n\\r\\n    if (result.indexOf('@BASE@') !== -1) {\\r\\n      // Replacing '@BASE@' with the base URL of createimage.\\r\\n      const baseParts = ServiceProvider.getServicePath('createimage').split('/');\\r\\n      baseParts.pop();\\r\\n      result = result.split('@BASE@').join(baseParts.join('/'));\\r\\n    }\\r\\n\\r\\n    return result;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses initial HTML code. If the HTML contains data generated by WIRIS,\\r\\n   * this data would be converted as following:\\r\\n   * <pre>\\r\\n   * MathML code: Image containing the corresponding MathML formulas.\\r\\n   * MathML code with LaTeX annotation : LaTeX string.\\r\\n   * </pre>\\r\\n   * @param {string} code - HTML code containing MathML data.\\r\\n   * @param {string} language - language to create image alt text.\\r\\n   * @returns {string} HTML code with the original MathML converted into LaTeX and images.\\r\\n   */\\r\\n  static initParse(code, language) {\\r\\n    /* Note: The code inside this function has been inverted.\\r\\n    If you invert again the code then you cannot use correctly LaTeX\\r\\n    in Moodle.\\r\\n    */\\r\\n    code = Parser.initParseSaveMode(code, language);\\r\\n    return Parser.initParseEditMode(code);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses initial HTML code depending on the save mode. Transforms all MathML\\r\\n   * occurrences for it's correspondent image or LaTeX.\\r\\n   * @param {string} code - HTML code to be parsed\\r\\n   * @param {string} language - language to create image alt text.\\r\\n   * @returns {string} HTML code parsed.\\r\\n   */\\r\\n  static initParseSaveMode(code, language) {\\r\\n    if (Configuration.get('saveMode')) {\\r\\n      // Converting XML to tags.\\r\\n      code = Latex.parseMathmlToLatex(code, Constants.safeXmlCharacters);\\r\\n      code = Latex.parseMathmlToLatex(code, Constants.xmlCharacters);\\r\\n      code = Parser.parseMathmlToImg(code, Constants.safeXmlCharacters, language);\\r\\n      code = Parser.parseMathmlToImg(code, Constants.xmlCharacters, language);\\r\\n      if (Configuration.get('saveMode') === 'base64' && Configuration.get('base64savemode') === 'image') {\\r\\n        code = Parser.codeImgTransform(code, 'base642showimage');\\r\\n      }\\r\\n    }\\r\\n    return code;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses initial HTML code depending on the edit mode.\\r\\n   * If 'latex' parseMode is enabled all MathML containing an annotation with encoding='LaTeX' will\\r\\n   * be converted into a LaTeX string instead of an image.\\r\\n   * @param {string} code - HTML code containing MathML.\\r\\n   * @returns {string} parsed HTML code.\\r\\n   */\\r\\n  static initParseEditMode(code) {\\r\\n    if (Configuration.get('parseModes').indexOf('latex') !== -1) {\\r\\n      const imgList = Util.getElementsByNameFromString(code, 'img', true);\\r\\n      const token = 'encoding=\\\"LaTeX\\\">';\\r\\n      // While replacing images with latex, the indexes of the found images changes\\r\\n      // respecting the original code, so this carry is needed.\\r\\n      let carry = 0;\\r\\n\\r\\n      for (let i = 0; i < imgList.length; i += 1) {\\r\\n        const imgCode = code.substring(imgList[i].start + carry, imgList[i].end + carry);\\r\\n\\r\\n        if (imgCode.indexOf(` class=\\\"${Configuration.get('imageClassName')}\\\"`) !== -1) {\\r\\n          let mathmlStartToken = ` ${Configuration.get('imageMathmlAttribute')}=\\\"`;\\r\\n          let mathmlStart = imgCode.indexOf(mathmlStartToken);\\r\\n\\r\\n          if (mathmlStart === -1) {\\r\\n            mathmlStartToken = ' alt=\\\"';\\r\\n            mathmlStart = imgCode.indexOf(mathmlStartToken);\\r\\n          }\\r\\n\\r\\n          if (mathmlStart !== -1) {\\r\\n            mathmlStart += mathmlStartToken.length;\\r\\n            const mathmlEnd = imgCode.indexOf('\\\"', mathmlStart);\\r\\n            const mathml = MathML.safeXmlDecode(imgCode.substring(mathmlStart, mathmlEnd));\\r\\n            let latexStartPosition = mathml.indexOf(token);\\r\\n\\r\\n            if (latexStartPosition !== -1) {\\r\\n              latexStartPosition += token.length;\\r\\n              const latexEndPosition = mathml.indexOf('</annotation>', latexStartPosition);\\r\\n              const latex = mathml.substring(latexStartPosition, latexEndPosition);\\r\\n\\r\\n              const replaceText = `$$${Util.htmlEntitiesDecode(latex)}$$`;\\r\\n              const start = code.substring(0, imgList[i].start + carry);\\r\\n              const end = code.substring(imgList[i].end + carry);\\r\\n              code = start + replaceText + end;\\r\\n              carry += replaceText.length - (imgList[i].end - imgList[i].start);\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n\\r\\n    return code;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses end HTML code. The end HTML code is HTML code with embedded images\\r\\n   * or LaTeX formulas created with MathType. <br>\\r\\n   * By default this method converts the formula images and LaTeX strings in MathML. <br>\\r\\n   * If image mode is enabled the images will not be converted into MathML. For further information see {@link http://www.wiris.com/plugins/docs/full-mathml-mode}.\\r\\n   * @param {string} code - HTML to be parsed\\r\\n   * @returns {string} the HTML code parsed.\\r\\n   */\\r\\n  static endParse(code) {\\r\\n    // Transform LaTeX ocurrences to MathML elements.\\r\\n    const codeEndParsedEditMode = Parser.endParseEditMode(code);\\r\\n    // Transform img elements to MathML elements.\\r\\n    const codeEndParseSaveMode = Parser.endParseSaveMode(codeEndParsedEditMode);\\r\\n    return codeEndParseSaveMode;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses end HTML code depending on the edit mode.\\r\\n   * - LaTeX is an enabled parse mode, all LaTeX occurrences will be converted into MathML.\\r\\n   * @param {string} code - HTML code to be parsed.\\r\\n   * @returns {string} HTML code parsed.\\r\\n   */\\r\\n  static endParseEditMode(code) {\\r\\n    // Converting LaTeX to images.\\r\\n    if (Configuration.get('parseModes').indexOf('latex') !== -1) {\\r\\n      let output = '';\\r\\n      let endPosition = 0;\\r\\n      let startPosition = code.indexOf('$$');\\r\\n      while (startPosition !== -1) {\\r\\n        output += code.substring(endPosition, startPosition);\\r\\n        endPosition = code.indexOf('$$', startPosition + 2);\\r\\n\\r\\n        if (endPosition !== -1) {\\r\\n          // Before, it was a condition here to execute the next codelines\\r\\n          // 'latex.indexOf('<') == -1'.\\r\\n          // We don't know why it was used, but seems to have a conflict with\\r\\n          // latex formulas that contains '<'.\\r\\n          const latex = code.substring(startPosition + 2, endPosition);\\r\\n          const decodedLatex = Util.htmlEntitiesDecode(latex);\\r\\n          let mathml = Latex.getMathMLFromLatex(decodedLatex, true);\\r\\n          if (!Configuration.get('saveHandTraces')) {\\r\\n            // Remove hand traces.\\r\\n            mathml = MathML.removeAnnotation(mathml, 'application/json');\\r\\n          }\\r\\n          output += mathml;\\r\\n          endPosition += 2;\\r\\n        } else {\\r\\n          output += '$$';\\r\\n          endPosition = startPosition + 2;\\r\\n        }\\r\\n\\r\\n        startPosition = code.indexOf('$$', endPosition);\\r\\n      }\\r\\n\\r\\n      output += code.substring(endPosition, code.length);\\r\\n      code = output;\\r\\n    }\\r\\n\\r\\n    return code;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Parses end HTML code depending on the save mode. Converts all\\r\\n   * images into the element determined by the save mode:\\r\\n   * - xml: Parses images formulas into MathML.\\r\\n   * - safeXml: Parses images formulas into safeMAthML\\r\\n   * - base64: Parses images into base64 images.\\r\\n   * - image: Parse images into images (no parsing)\\r\\n   * @param {string} code - HTML code to be parsed\\r\\n   * @returns {string} HTML code parsed.\\r\\n   */\\r\\n  static endParseSaveMode(code) {\\r\\n    if (Configuration.get('saveMode')) {\\r\\n      if (Configuration.get('saveMode') === 'safeXml') {\\r\\n        code = Parser.codeImgTransform(code, 'img2mathml');\\r\\n      } else if (Configuration.get('saveMode') === 'xml') {\\r\\n        code = Parser.codeImgTransform(code, 'img2mathml');\\r\\n      } else if (Configuration.get('saveMode') === 'base64' && Configuration.get('base64savemode') === 'image') {\\r\\n        code = Parser.codeImgTransform(code, 'img264');\\r\\n      }\\r\\n    }\\r\\n\\r\\n    return code;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the result to call showimage service with the formula md5 as parameter.\\r\\n   *  The result could be:\\r\\n   * - {'status' : warning'} : The image associated to the MathML md5 is not in cache.\\r\\n   * - {'status' : 'ok' ...} : The image associated to the MathML md5 is in cache.\\r\\n   * @param {Object[]} data - object containing showimage service parameters.\\r\\n   * @param {string} language - string containing the language of the formula.\\r\\n   * @returns {Object} JSON object containing showimage response.\\r\\n   */\\r\\n  static createShowImageSrc(data, language) {\\r\\n    let dataMd5 = {};\\r\\n    const renderParams = ['mml', 'color', 'centerbaseline', 'zoom', 'dpi', 'fontSize', 'fontFamily', 'defaultStretchy', 'backgroundColor', 'format'];\\r\\n    renderParams.forEach((param) => {\\r\\n      if (typeof data[param] !== 'undefined') {\\r\\n        dataMd5[param] = data[param];\\r\\n      }\\r\\n    });\\r\\n    // Data variables to get.\\r\\n    const dataObject = {};\\r\\n    Object.keys(data).forEach((key) => {\\r\\n      // We don't need mathml in this request we try to get cached.\\r\\n      // Only need the formula md5 calculated before.\\r\\n      if (key !== 'mml') {\\r\\n        dataObject[key] = data[key];\\r\\n      }\\r\\n    });\\r\\n\\r\\n    dataObject.formula = com.wiris.js.JsPluginTools.md5encode(Util.propertiesToString(dataMd5));\\r\\n    dataObject.lang = (typeof language === 'undefined') ? 'en' : language;\\r\\n    dataObject.version = Configuration.get('version');\\r\\n\\r\\n    const result = ServiceProvider.getService('showimage', Util.httpBuildQuery(dataObject), true);\\r\\n    return result;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Transform html img tags inside a html code to mathml, base64 img tags (i.e with base64 on src)\\r\\n   * or showimage img tags (i.e with showimage.php on src)\\r\\n   * @param  {string} code - HTML code\\r\\n   * @param  {string} mode - base642showimage or img2mathml or img264 transform.\\r\\n   * @returns {string} html - code transformed.\\r\\n   */\\r\\n  static codeImgTransform(code, mode) {\\r\\n    let output = '';\\r\\n    let endPosition = 0;\\r\\n    const pattern = /<img/gi;\\r\\n    const patternLength = pattern.source.length;\\r\\n\\r\\n    while (pattern.test(code)) {\\r\\n      const startPosition = pattern.lastIndex - patternLength;\\r\\n      output += code.substring(endPosition, startPosition);\\r\\n\\r\\n      let i = startPosition + 1;\\r\\n\\r\\n      while (i < code.length && endPosition <= startPosition) {\\r\\n        const character = code.charAt(i);\\r\\n\\r\\n        if (character === '\\\"' || character === '\\\\'') {\\r\\n          const characterNextPosition = code.indexOf(character, i + 1);\\r\\n\\r\\n          if (characterNextPosition === -1) {\\r\\n            i = code.length; // End while.\\r\\n          } else {\\r\\n            i = characterNextPosition;\\r\\n          }\\r\\n        } else if (character === '>') {\\r\\n          endPosition = i + 1;\\r\\n        }\\r\\n\\r\\n        i += 1;\\r\\n      }\\r\\n\\r\\n      if (endPosition < startPosition) { // The img tag is stripped.\\r\\n        output += code.substring(startPosition, code.length);\\r\\n        return output;\\r\\n      }\\r\\n      let imgCode = code.substring(startPosition, endPosition);\\r\\n      const imgObject = Util.createObject(imgCode);\\r\\n      let xmlCode = imgObject.getAttribute(Configuration.get('imageMathmlAttribute'));\\r\\n      let convertToXml;\\r\\n      let convertToSafeXml;\\r\\n\\r\\n      if (mode === 'base642showimage') {\\r\\n        if (xmlCode == null) {\\r\\n          xmlCode = imgObject.getAttribute('alt');\\r\\n        }\\r\\n        xmlCode = MathML.safeXmlDecode(xmlCode);\\r\\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, null, null);\\r\\n        output += Util.createObjectCode(imgCode);\\r\\n      } else if (mode === 'img2mathml') {\\r\\n        if (Configuration.get('saveMode')) {\\r\\n          if (Configuration.get('saveMode') === 'safeXml') {\\r\\n            convertToXml = true;\\r\\n            convertToSafeXml = true;\\r\\n          } else if (Configuration.get('saveMode') === 'xml') {\\r\\n            convertToXml = true;\\r\\n            convertToSafeXml = false;\\r\\n          }\\r\\n        }\\r\\n        output += Util.getWIRISImageOutput(imgCode, convertToXml, convertToSafeXml);\\r\\n      } else if (mode === 'img264') {\\r\\n        if (xmlCode === null) {\\r\\n          xmlCode = imgObject.getAttribute('alt');\\r\\n        }\\r\\n        xmlCode = MathML.safeXmlDecode(xmlCode);\\r\\n\\r\\n        const properties = {};\\r\\n        properties.base64 = 'true';\\r\\n        imgCode = Parser.mathmlToImgObject(document, xmlCode, properties, null);\\r\\n        // Metrics.\\r\\n        Image.setImgSize(imgCode, imgCode.src, true);\\r\\n        output += Util.createObjectCode(imgCode);\\r\\n      }\\r\\n    }\\r\\n    output += code.substring(endPosition, code.length);\\r\\n    return output;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Converts all occurrences of MathML to the corresponding image.\\r\\n   * @param {string} content - string with valid MathML code.\\r\\n   * The MathML code doesn't contain semantics.\\r\\n   * @param {Constants} characters - Constant object containing xmlCharacters\\r\\n   * or safeXmlCharacters relation.\\r\\n   * @param {string} language - a valid language code\\r\\n   * in order to generate formula accessibility.\\r\\n   * @returns {string} The input string with all the MathML\\r\\n   * occurrences replaced by the corresponding image.\\r\\n   */\\r\\n  static parseMathmlToImg(content, characters, language) {\\r\\n    let output = '';\\r\\n    const mathTagBegin = `${characters.tagOpener}math`;\\r\\n    const mathTagEnd = `${characters.tagOpener}/math${characters.tagCloser}`;\\r\\n    let start = content.indexOf(mathTagBegin);\\r\\n    let end = 0;\\r\\n\\r\\n    while (start !== -1) {\\r\\n      output += content.substring(end, start);\\r\\n      // Avoid WIRIS images to be parsed.\\r\\n      const imageMathmlAtrribute = content.indexOf(Configuration.get('imageMathmlAttribute'));\\r\\n      end = content.indexOf(mathTagEnd, start);\\r\\n\\r\\n      if (end === -1) {\\r\\n        end = content.length - 1;\\r\\n      } else if (imageMathmlAtrribute !== -1) {\\r\\n        // First close tag of img attribute\\r\\n        // If a mathmlAttribute exists should be inside a img tag.\\r\\n        end += content.indexOf('/>', start);\\r\\n      } else {\\r\\n        end += mathTagEnd.length;\\r\\n      }\\r\\n\\r\\n      if (!MathML.isMathmlInAttribute(content, start) && imageMathmlAtrribute === -1) {\\r\\n        let mathml = content.substring(start, end);\\r\\n        mathml = (characters.id === Constants.safeXmlCharacters.id)\\r\\n          ? MathML.safeXmlDecode(mathml)\\r\\n          : MathML.mathMLEntities(mathml);\\r\\n        output += Util.createObjectCode(Parser.mathmlToImgObject(document, mathml, null, language));\\r\\n      } else {\\r\\n        output += content.substring(start, end);\\r\\n      }\\r\\n\\r\\n      start = content.indexOf(mathTagBegin, end);\\r\\n    }\\r\\n\\r\\n    output += content.substring(end, content.length);\\r\\n    return output;\\r\\n  }\\r\\n}\\r\\n\\r\\n// Mutation observers to avoid wiris image formulas class be removed.\\r\\nif (typeof MutationObserver !== 'undefined') {\\r\\n  const mutationObserver = new MutationObserver((mutations) => {\\r\\n    mutations.forEach((mutation) => {\\r\\n      if (mutation.oldValue === Configuration.get('imageClassName')\\r\\n        && mutation.attributeName === 'class'\\r\\n        && mutation.target.className.indexOf(Configuration.get('imageClassName')) === -1) {\\r\\n        mutation.target.className = Configuration.get('imageClassName');\\r\\n      }\\r\\n    });\\r\\n  });\\r\\n\\r\\n  Parser.observer = Object.create(mutationObserver);\\r\\n  Parser.observer.Config = { attributes: true, attributeOldValue: true };\\r\\n  // We use own default config.\\r\\n  Parser.observer.observe = function name(target) {\\r\\n    Object.getPrototypeOf(this).observe(target, this.Config);\\r\\n  };\\r\\n}\\r\\n\",\"/* eslint-disable class-methods-use-this */\\n/* eslint-disable no-unused-vars */\\n/* eslint-disable no-extra-semi */\\n\\n// The rules above are disabled because we are implementing\\n// an external interface.\\n\\n\\nexport default class EditorListener {\\n  /**\\n   * @classdesc\\n   * Determines if the content of the\\n   * MathType Editor has changes.\\n   * @implements {EditorListeners}\\n   * @constructs\\n   */\\n  constructor() {\\n    /**\\n     * Indicates if the content of the editor has changed.\\n     * @type {Boolean}\\n     */\\n    this.isContentChanged = false;\\n\\n    /**\\n     * Indicates if the listener should be waiting for changes in the editor.\\n     * @type {Boolean}\\n     */\\n    this.waitingForChanges = false;\\n  }\\n\\n  /**\\n   * Sets {@link EditorListener.isContentChanged} property.\\n   * @param {Boolean} value - The new vlue.\\n   */\\n  setIsContentChanged(value) {\\n    this.isContentChanged = value;\\n  }\\n\\n  /**\\n   * Returns true if the content of the editor has been changed, false otherwise.\\n   * @return {Boolean}\\n   */\\n  getIsContentChanged() {\\n    return this.isContentChanged;\\n  };\\n\\n  /**\\n   * Determines if the EditorListener should wait for any changes.\\n   * @param {Boolean} value - True if the editor should wait for changes, false otherwise.\\n   */\\n  setWaitingForChanges(value) {\\n    this.waitingForChanges = value;\\n  }\\n\\n  /**\\n   * EditorListener method to overwrite.\\n   * @type {JsEditor}\\n   * @ignore\\n   */\\n  caretPositionChanged(_editor) { };\\n\\n  /**\\n   * EditorListener method to overwrite\\n   * @type {JsEditor}\\n   * @ignore\\n   */\\n  clipboardChanged(_editor) { };\\n\\n  /**\\n   * Determines if the content of an editor has been changed.\\n   * @param {JsEditor} editor - editor object.\\n   */\\n  contentChanged(_editor) {\\n    if (this.waitingForChanges === true && this.isContentChanged === false) {\\n      this.isContentChanged = true;\\n    }\\n  }\\n\\n  /**\\n   * EditorListener method to overwrite\\n   * @param {JsEditor} editor - The editor instance.\\n   */\\n  styleChanged(_editor) {\\n  }\\n\\n  /**\\n   * EditorListener method to overwrite\\n   * @param {JsEditor} - The editor instance.\\n   */\\n  transformationReceived(_editor) {\\n  }\\n}\\n\",\"import Configuration from './configuration';\\nimport EditorListener from './editorlistener';\\nimport Listeners from './listeners';\\nimport MathML from './mathml';\\nimport Util from './util';\\n\\nexport default class ContentManager {\\n  /**\\n   * @classdesc\\n   * This class represents a modal dialog, managing the following:\\n   * - The insertion of content into the current instance of the {@link ModalDialog} class.\\n   * - The actions to be done once the modal object has been submitted\\n   *   (submitAction} method).\\n   * - The update of the content when the {@link ModalDialog} class is also updated,\\n   *   for example when ModalDialog is re-opened.\\n   * - The communication between the {@link ModalDialog} class and itself, if the content\\n   *   has been changed (hasChanges} method).\\n   * @constructs\\n   * @param {Object} contentManagerAttributes - Object containing all attributes needed to\\n   * create a new instance.\\n   */\\n  constructor(contentManagerAttributes) {\\n    /**\\n     * An object containing MathType editor parameters. See\\n     * http://docs.wiris.com/en/mathtype/mathtype_web/sdk-api/parameters for further information.\\n     * @type {Object}\\n     */\\n    this.editorAttributes = {};\\n    if ('editorAttributes' in contentManagerAttributes) {\\n      this.editorAttributes = contentManagerAttributes.editorAttributes;\\n    } else {\\n      throw new Error('ContentManager constructor error: editorAttributes property missed.');\\n    }\\n\\n    /**\\n     * CustomEditors instance. Contains the custom editors.\\n     * @type {CustomEditors}\\n     */\\n    this.customEditors = null;\\n    if ('customEditors' in contentManagerAttributes) {\\n      this.customEditors = contentManagerAttributes.customEditors;\\n    }\\n\\n    /**\\n* Environment properties. This object contains data about the integration platform.\\n* @type {Object}\\n* @property {String} editor - Editor name. Usually the HTML editor.\\n* @property {String} mode - Save mode. Xml by default.\\n* @property {String} version - Plugin version.\\n  */\\n    this.environment = {};\\n    if ('environment' in contentManagerAttributes) {\\n      this.environment = contentManagerAttributes.environment;\\n    } else {\\n      throw new Error('ContentManager constructor error: environment property missed');\\n    }\\n\\n    /**\\n      * ContentManager language.\\n      * @type {String}\\n      */\\n    this.language = '';\\n    if ('language' in contentManagerAttributes) {\\n      this.language = contentManagerAttributes.language;\\n    } else {\\n      throw new Error('ContentManager constructor error: language property missed');\\n    }\\n\\n    /**\\n    * {@link EditorListener} instance. Manages the changes inside the editor.\\n    * @type {EditorListener}\\n    */\\n    this.editorListener = new EditorListener();\\n\\n    /**\\n     * MathType editor instance.\\n     * @type {JsEditor}\\n     */\\n    this.editor = null;\\n\\n    /**\\n     * Navigator user agent.\\n     * @type {String}\\n     */\\n    this.ua = navigator.userAgent.toLowerCase();\\n\\n    /**\\n     * Mobile device properties object\\n     * @type {DeviceProperties}\\n     */\\n    this.deviceProperties = {};\\n    this.deviceProperties.isAndroid = this.ua.indexOf('android') > -1;\\n    this.deviceProperties.isIOS = ContentManager.isIOS();\\n  \\n\\n    /**\\n     * Custom editor toolbar.\\n     * @type {String}\\n     */\\n    this.toolbar = null;\\n\\n    /**\\n     * Instance of the {@link ModalDialog} class associated with the current\\n     * {@link ContentManager} instance.\\n     * @type {ModalDialog}\\n     */\\n    this.modalDialogInstance = null;\\n\\n    /**\\n     * ContentManager listeners.\\n     * @type {Listeners}\\n     */\\n    this.listeners = new Listeners();\\n\\n    /**\\n     * MathML associated to the ContentManager instance.\\n     * @type {String}\\n     */\\n    this.mathML = null;\\n\\n    /**\\n     * Indicates if the edited element is a new one or not.\\n     * @type {Boolean}\\n     */\\n    this.isNewElement = true;\\n\\n    /**\\n     * {@link IntegrationModel} instance. Needed to call wrapper methods.\\n     * @type {IntegrationModel}\\n     */\\n    this.integrationModel = null;\\n  }\\n\\n  /**\\n   * Adds a new listener to the current {@link ContentManager} instance.\\n   * @param {Object} listener - The listener to be added.\\n   */\\n  addListener(listener) {\\n    this.listeners.add(listener);\\n  }\\n\\n  /**\\n   * Sets an instance of {@link IntegrationModel} class to the current {@link ContentManager}\\n   * instance.\\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} instance.\\n   */\\n  setIntegrationModel(integrationModel) {\\n    this.integrationModel = integrationModel;\\n  }\\n\\n  /**\\n   * Sets the {@link ModalDialog} instance into the current {@link ContentManager} instance.\\n   * @param {ModalDialog} modalDialogInstance - The {@link ModalDialog} instance\\n   */\\n  setModalDialogInstance(modalDialogInstance) {\\n    this.modalDialogInstance = modalDialogInstance;\\n  }\\n\\n  /**\\n   * Inserts the content into the current {@link ModalDialog} instance updating\\n   * the title and inserting the JavaScript editor.\\n   */\\n  insert() {\\n    // Before insert the editor we update the modal object title to avoid weird render display.\\n    this.updateTitle(this.modalDialogInstance);\\n    this.insertEditor(this.modalDialogInstance);\\n  }\\n\\n  /**\\n   * Inserts MathType editor into the {@link ModalDialog.contentContainer}. It waits until\\n   * editor's JavaScript is loaded.\\n   */\\n  insertEditor() {\\n    if (ContentManager.isEditorLoaded()) {\\n      this.editor = window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes);\\n      this.editor.insertInto(this.modalDialogInstance.contentContainer);\\n      this.editor.focus();\\n      if (this.modalDialogInstance.rtl) {\\n        this.editor.action('rtl');\\n      }\\n      // Setting div in rtl in case of it's activated.\\n      if (this.editor.getEditorModel().isRTL()) {\\n        this.editor.element.style.direction = 'rtl';\\n      }\\n\\n      // Editor listener: this object manages the changes logic of editor.\\n      this.editor.getEditorModel().addEditorListener(this.editorListener);\\n\\n      // iOS events.\\n      if (this.modalDialogInstance.deviceProperties.isIOS) {\\n        setTimeout(function hide() { \\n          // Make sure the modalDialogInstance is available when the timeout is over\\n          // to avoid throw errors and stop execution.\\n          if(this.hasOwnProperty('modalDialogInstance')) this.modalDialogInstance.hideKeyboard(); \\n        }, 400);\\n\\n        const formulaDisplayDiv = document.getElementsByClassName('wrs_formulaDisplay')[0];\\n        Util.addEvent(formulaDisplayDiv, 'focus', this.modalDialogInstance.handleOpenedIosSoftkeyboard);\\n        Util.addEvent(formulaDisplayDiv, 'blur', this.modalDialogInstance.handleClosedIosSoftkeyboard);\\n      }\\n      // Fire onLoad event. Necessary to set the MathML into the editor\\n      // after is loaded.\\n      this.listeners.fire('onLoad', {});\\n    } else {\\n      setTimeout(ContentManager.prototype.insertEditor.bind(this), 100);\\n    }\\n  }\\n\\n  /**\\n   * Initializes the current class by loading MathType script.\\n   */\\n  init() {\\n    if (!ContentManager.isEditorLoaded()) {\\n      this.addEditorAsExternalDependency();\\n    }\\n  }\\n\\n  /**\\n   * Adds script element to the DOM to include editor externally.\\n   */\\n  addEditorAsExternalDependency() {\\n    const script = document.createElement('script');\\n    script.type = 'text/javascript';\\n    let editorUrl = Configuration.get('editorUrl');\\n    // We create an object url for parse url string and work more efficiently.\\n    const anchorElement = document.createElement('a');\\n\\n    ContentManager.setHrefToAnchorElement(anchorElement, editorUrl);\\n    ContentManager.setProtocolToAnchorElement(anchorElement);\\n\\n    editorUrl = ContentManager.getURLFromAnchorElement(anchorElement);\\n\\n    // Load editor URL. We add stats as GET params.\\n    const stats = this.getEditorStats();\\n    script.src = `${editorUrl}?lang=${this.language}&stats-editor=${stats.editor}&stats-mode=${stats.mode}&stats-version=${stats.version}`;\\n\\n    document.getElementsByTagName('head')[0].appendChild(script);\\n  }\\n\\n  /**\\n   * Sets the specified url to the anchor element.\\n   * @param {HTMLAnchorElement} anchorElement - Element where set 'url'.\\n   * @param {String} url - URL to set.\\n   */\\n  static setHrefToAnchorElement(anchorElement, url) {\\n    anchorElement.href = url;\\n  }\\n\\n  /**\\n   * Sets the current protocol to the anchor element.\\n   * @param {HTMLAnchorElement} anchorElement - Element where set its protocol.\\n   */\\n  static setProtocolToAnchorElement(anchorElement) {\\n    // Change to https if necessary.\\n    if (window.location.href.indexOf('https://') === 0) {\\n      // It check if browser is https and configuration is http.\\n      // If this is so, we will replace protocol.\\n      if (anchorElement.protocol === 'http:') {\\n        anchorElement.protocol = 'https:';\\n      }\\n    }\\n  }\\n\\n  /**\\n   * Returns the url of the anchor element adding the current port\\n   * if it is needed.\\n   * @param {HTMLAnchorElement} anchorElement - Element where extract the url.\\n   * @returns {String}\\n   */\\n  static getURLFromAnchorElement(anchorElement) {\\n    // Check protocol and remove port if it's standard.\\n    const removePort = anchorElement.port === '80' || anchorElement.port === '443' || anchorElement.port === '';\\n    return `${anchorElement.protocol}//${anchorElement.hostname}${ removePort ? '' : (':' + anchorElement.port) }${anchorElement.pathname.startsWith('/') ? anchorElement.pathname : ('/' + anchorElement.pathname)}`;\\n  }\\n\\n  /**\\n   * Returns object with editor stats.\\n   *\\n   * @typedef {Object} EditorStatsObject\\n   * @property {string} editor - Editor name.\\n   * @property {string} mode - Current configuration for formula save mode.\\n   * @property {string} version - Current plugins version.\\n   * @returns {EditorStatsObject}\\n   */\\n  getEditorStats() {\\n    // Editor stats. Use environment property to set it.\\n    const stats = {};\\n    if ('editor' in this.environment) {\\n      stats.editor = this.environment.editor;\\n    } else {\\n      stats.editor = 'unknown';\\n    }\\n\\n    if ('mode' in this.environment) {\\n      stats.mode = this.environment.mode;\\n    } else {\\n      stats.mode = Configuration.get('saveMode');\\n    }\\n\\n    if ('version' in this.environment) {\\n      stats.version = this.environment.version;\\n    } else {\\n      stats.version = Configuration.get('version');\\n    }\\n\\n    return stats;\\n  }\\n\\n  /**\\n   * Returns true if device is iOS. Otherwise, false.\\n   * @returns {Boolean}\\n   */\\n  static isIOS() {\\n    return [\\n      'iPad Simulator',\\n      'iPhone Simulator',\\n      'iPod Simulator',\\n      'iPad',\\n      'iPhone',\\n      'iPod'\\n    ].includes(navigator.platform)\\n    // iPad on iOS 13 detection\\n    || (navigator.userAgent.includes(\\\"Mac\\\") && \\\"ontouchend\\\" in document);\\n  }\\n\\n  /**\\n   * Returns true if editor is loaded. Otherwise, false.\\n   * @returns {Boolean}\\n   */\\n  static isEditorLoaded() {\\n    // To know if editor JavaScript is loaded we need to wait until\\n    // window.com.wiris.jsEditor.JsEditor.newInstance is ready.\\n    return (window.com && window.com.wiris && window.com.wiris.jsEditor\\n      && window.com.wiris.jsEditor.JsEditor && window.com.wiris.jsEditor.JsEditor.newInstance);\\n  }\\n\\n  /**\\n  * Sets the {@link ContentManager.editor} initial content.\\n  */\\n  setInitialContent() {\\n    if (!this.isNewElement) {\\n      this.setMathML(this.mathML);\\n    }\\n  }\\n\\n  /**\\n   * Sets a MathML into {@link ContentManager.editor} instance.\\n   * @param {String} mathml - MathML string.\\n   * @param {Boolean} focusDisabled - If true editor don't get focus after the MathML is set.\\n   * False by default.\\n   */\\n  setMathML(mathml, focusDisabled) {\\n    // By default focus is enabled.\\n    if (typeof focusDisabled === 'undefined') {\\n      focusDisabled = false;\\n    }\\n    // Using setMathML method is not a change produced by the user but for the API\\n    // so we set to false the contentChange property of editorListener.\\n    this.editor.setMathMLWithCallback(mathml, () => {\\n      this.editorListener.setWaitingForChanges(true);\\n    });\\n\\n    // We need to wait a little until the callback finish.\\n    setTimeout(() => {\\n      this.editorListener.setIsContentChanged(false);\\n    }, 500);\\n\\n    // In some scenarios - like closing modal object - editor mustn't be focused.\\n    if (!focusDisabled) {\\n      this.onFocus();\\n    }\\n  }\\n\\n  /**\\n   * Sets the focus to the current instance of {@link ContentManager.editor}. Triggered by\\n   * {@link ModalDialog.focus}.\\n   */\\n  onFocus() {\\n    if (typeof this.editor !== 'undefined' && this.editor != null) {\\n      this.editor.focus();\\n    }\\n  }\\n\\n  /**\\n   * Updates the edition area by calling {@link IntegrationModel.updateFormula}.\\n   * Triggered by {@link ModalDialog.submitAction}.\\n   */\\n  submitAction() {\\n    if (!this.editor.isFormulaEmpty()) {\\n      let mathML = this.editor.getMathMLWithSemantics();\\n      // Add class for custom editors.\\n      if (this.customEditors.getActiveEditor() !== null) {\\n        const { toolbar } = this.customEditors.getActiveEditor();\\n        mathML = MathML.addCustomEditorClassAttribute(mathML, toolbar);\\n      } else {\\n        // We need - if exists - the editor name from MathML\\n        // class attribute.\\n        Object.keys(this.customEditors.editors).forEach((key) => {\\n          mathML = MathML.removeCustomEditorClassAttribute(mathML, key);\\n        });\\n      }\\n      const mathmlEntitiesEncoded = MathML.mathMLEntities(mathML);\\n      this.integrationModel.updateFormula(mathmlEntitiesEncoded);\\n    } else {\\n      this.integrationModel.updateFormula(null);\\n    }\\n\\n    this.customEditors.disable();\\n    this.integrationModel.notifyWindowClosed();\\n\\n    // Set disabled focus to prevent lost focus.\\n    this.setEmptyMathML();\\n    this.customEditors.disable();\\n  }\\n\\n  /**\\n   * Sets an empty MathML as {@link ContentManager.editor} content.\\n   */\\n  setEmptyMathML() {\\n    // As second argument we pass.\\n    if (this.deviceProperties.isAndroid || this.deviceProperties.isIOS) {\\n      // We need to set a empty annotation in order to maintain editor in Hand mode.\\n      // Adding dir rtl in case of it's activated.\\n      if (this.editor.getEditorModel().isRTL()) {\\n        this.setMathML('<math dir=\\\"rtl\\\"><semantics><annotation encoding=\\\"application/json\\\">[]</annotation></semantics></math>', true);\\n      } else {\\n        this.setMathML('<math><semantics><annotation encoding=\\\"application/json\\\">[]</annotation></semantics></math>', true);\\n      }\\n    } else if (this.editor.getEditorModel().isRTL()) {\\n      this.setMathML('<math dir=\\\"rtl\\\"/>', true);\\n    } else {\\n      this.setMathML('<math/>', true);\\n    }\\n  }\\n\\n  /**\\n   * Open event. Triggered by {@link ModalDialog.open}. Does the following:\\n   * - Updates the {@link ContentManager.editor} content\\n   *   (with an empty MathML or an existing formula),\\n   * - Updates the {@link ContentManager.editor} toolbar.\\n   * - Recovers the the focus.\\n   */\\n  onOpen() {\\n    if (this.isNewElement) {\\n      this.setEmptyMathML();\\n    } else {\\n      this.setMathML(this.mathML);\\n    }\\n    this.updateToolbar();\\n    this.onFocus();\\n  }\\n\\n  /**\\n   * Sets the correct toolbar depending if exist other custom toolbars\\n   * at the same time (e.g: Chemistry).\\n   */\\n  updateToolbar() {\\n    this.updateTitle(this.modalDialogInstance);\\n    const customEditor = this.customEditors.getActiveEditor();\\n    if (customEditor) {\\n      const toolbar = customEditor.toolbar\\n        ? customEditor.toolbar\\n        : _wrs_int_wirisProperties.toolbar;\\n\\n      if (this.toolbar == null || this.toolbar !== toolbar) {\\n        this.setToolbar(toolbar);\\n      }\\n    } else {\\n      const toolbar = this.getToolbar();\\n      if (this.toolbar == null || this.toolbar !== toolbar) {\\n        this.setToolbar(toolbar);\\n        this.customEditors.disable();\\n      }\\n    }\\n  }\\n\\n  /**\\n   * Updates the current {@link ModalDialog.title}. If a {@link CustomEditors} is enabled\\n   * sets the custom editor title. Otherwise sets the default title.\\n   */\\n  updateTitle() {\\n    const customEditor = this.customEditors.getActiveEditor();\\n    if (customEditor) {\\n      this.modalDialogInstance.setTitle(customEditor.title);\\n    } else {\\n      this.modalDialogInstance.setTitle('MathType');\\n    }\\n  }\\n\\n  /**\\n   * Returns the editor toolbar, depending on the configuration local or server side.\\n   * @returns {String} - Toolbar identifier.\\n   */\\n  getToolbar() {\\n    let toolbar = 'general';\\n    if ('toolbar' in this.editorAttributes) {\\n      ({ toolbar } = this.editorAttributes);\\n    }\\n    // TODO: Change global integration variable for integration custom toolbar.\\n    if (toolbar === 'general') {\\n      // eslint-disable-next-line camelcase\\n      toolbar = (typeof _wrs_int_wirisProperties === 'undefined' || typeof _wrs_int_wirisProperties.toolbar === 'undefined') ? 'general' : _wrs_int_wirisProperties.toolbar;\\n    }\\n\\n    return toolbar;\\n  }\\n\\n  /**\\n   * Sets the current {@link ContentManager.editor} instance toolbar.\\n   * @param {String} toolbar - The toolbar name.\\n   */\\n  setToolbar(toolbar) {\\n    this.toolbar = toolbar;\\n    this.editor.setParams({ toolbar: this.toolbar });\\n  }\\n\\n  /**\\n   * Returns true if the content of the editor has been changed. The logic of the changes\\n   * is delegated to {@link EditorListener} class.\\n   * @returns {Boolean} True if the editor content has been changed. False otherwise.\\n   */\\n  hasChanges() {\\n    return (!this.editor.isFormulaEmpty() && this.editorListener.getIsContentChanged());\\n  }\\n\\n  /**\\n   * Handle keyboard events detected in modal when elements of this class intervene.\\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\\n   */\\n  onKeyDown(keyboardEvent) {\\n    if (keyboardEvent.key !== undefined && keyboardEvent.repeat === false) {\\n      if (keyboardEvent.key === 'Escape' || keyboardEvent.key === 'Esc') { // Code to detect Esc event.\\n        // There should be only one element with class name 'wrs_pressed' at the same time.\\n        let list = document.getElementsByClassName('wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed');\\n        if (list.length === 0) {\\n          list = document.getElementsByClassName('wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed');\\n          if (list.length === 0) {\\n            list = document.getElementsByClassName('wrs_select wrs_pressed');\\n            if (list.length === 0) {\\n              this.modalDialogInstance.cancelAction();\\n              keyboardEvent.stopPropagation();\\n              keyboardEvent.preventDefault();\\n            }\\n          }\\n        }\\n      } else if (keyboardEvent.shiftKey && keyboardEvent.key === 'Tab') { // Code to detect shift Tab event.\\n        if (document.activeElement === this.modalDialogInstance.submitButton) {\\n          // Focus is on OK button.\\n          this.editor.focus();\\n          keyboardEvent.stopPropagation();\\n          keyboardEvent.preventDefault();\\n        } else {\\n          const element = document.querySelector('[title=\\\"Manual\\\"]');\\n          if (document.activeElement === element) {\\n            // Focus is on editor help.\\n            this.modalDialogInstance.cancelButton.focus();\\n            keyboardEvent.stopPropagation();\\n            keyboardEvent.preventDefault();\\n          }\\n        }\\n      } else if (keyboardEvent.key === 'Tab') { // Code to detect Tab event.\\n        if (document.activeElement === this.modalDialogInstance.cancelButton) {\\n          // Focus is on cancel button.\\n          const element = document.querySelector('[title=\\\"Manual\\\"]');\\n          element.focus();\\n          keyboardEvent.stopPropagation();\\n          keyboardEvent.preventDefault();\\n        } else {\\n          // There should be only one element with class name 'wrs_formulaDisplay'.\\n          const element = document.getElementsByClassName('wrs_formulaDisplay')[0];\\n          if (element.getAttribute('class') === 'wrs_formulaDisplay wrs_focused') {\\n            // Focus is on formuladisplay.\\n            this.modalDialogInstance.submitButton.focus();\\n            keyboardEvent.stopPropagation();\\n            keyboardEvent.preventDefault();\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\\n\",\"/**\\n * A custom editor is MathType editor with a different\\n * @typedef {Object} CustomEditor\\n * @property {String} CustomEditor.name - Custom editor name.\\n * @property {String} CustomEditor.toolbar - Custom editor toolbar.\\n * @property {String} CustomEditor.icon - Custom editor icon.\\n * @property {String} CustomEditor.confVariable - Configuration property to manage\\n * the availability of the custom editor.\\n * @property {String} CustomEditor.title - Custom editor modal dialog title.\\n * @property {String} CustomEditor.tooltip - Custom editor icon tooltip.\\n */\\n\\nexport default class CustomEditors {\\n  /**\\n   * @classdesc\\n   * This class represents the MathType custom editors manager.\\n   * A custom editor is MathType editor with a custom  toolbar.\\n   * This class associates a {@link CustomEditor} to:\\n   * - It's own formulas\\n   * - A custom toolbar\\n   * - An icon to open it from a HTML editor.\\n   * - A tooltip for the icon.\\n   * - A global variable to enable or disable it globally.\\n   * @constructs\\n   */\\n  constructor() {\\n    /**\\n     * The custom editors.\\n     * @type {Array.<CustomEditor>}\\n     */\\n\\n    this.editors = [];\\n    /**\\n     * The active editor name.\\n     * @type {String}\\n     */\\n    this.activeEditor = 'default';\\n  }\\n\\n  /**\\n   * Adds a {@link CustomEditor} to editors array.\\n   * @param {String} editorName - The editor name.\\n   * @param {CustomEditor} editorParams - The custom editor parameters.\\n   */\\n  addEditor(editorName, editorParams) {\\n    const customEditor = {};\\n    customEditor.name = editorParams.name;\\n    customEditor.toolbar = editorParams.toolbar;\\n    customEditor.icon = editorParams.icon;\\n    customEditor.confVariable = editorParams.confVariable;\\n    customEditor.title = editorParams.title;\\n    customEditor.tooltip = editorParams.tooltip;\\n    this.editors[editorName] = customEditor;\\n  }\\n\\n  /**\\n   * Enables a {@link CustomEditor}.\\n   * @param {String} customEditorName - The custom editor name.\\n   */\\n  enable(customEditorName) {\\n    this.activeEditor = customEditorName;\\n  }\\n\\n  /**\\n   * Disables a {@link CustomEditor}.\\n   */\\n  disable() {\\n    this.activeEditor = 'default';\\n  }\\n\\n  /**\\n   * Returns the active editor.\\n   * @return {CustomEditor} - A {@link CustomEditor} if a custom editor is enabled. Null otherwise.\\n   */\\n  getActiveEditor() {\\n    if (this.activeEditor !== 'default') {\\n      return this.editors[this.activeEditor];\\n    }\\n    return null;\\n  }\\n}\\n\",\"/**\\n * Represents the configuration properties generated from the frontend (JavaScript variables).\\n * @type {Object}\\n * @property {string} imageClassName - Default MathType formula image class.\\n * @property {string} imageClassName - Default MathType CAS image class.\\n * @ignore\\n */\\nconst jsProperties = {\\n  imageCustomEditorName: 'data-custom-editor',\\n  imageClassName: 'Wirisformula',\\n  CASClassName: 'Wiriscas',\\n};\\nexport default jsProperties;\\n\",\"export default class Event {\\n  /**\\n   * @classdesc\\n   * This class represents a custom event. Events should be fired by the {@link Listener} class.\\n   *\\n   * ```js\\n   *  let customEvent = new Event();\\n   *  customEvent.properties = {};\\n   *\\n   *  let listeners = new Listeners();\\n   *  listeners.newListener(eventName, callback);\\n   *\\n   *  listeners.fire(eventName, customEvent) *\\n   * ```\\n   * @constructs\\n   */\\n  constructor() {\\n    /**\\n     * Indicates if the event should be cancelled.\\n     * @type {Boolean}\\n     */\\n\\n    this.cancelled = false;\\n    /**\\n     * Indicates if the event should be prevented.\\n     * @type {Boolean}\\n     */\\n    this.defaultPrevented = false;\\n  }\\n\\n  /**\\n   * Cancels the event.\\n   */\\n  cancel() {\\n    this.cancelled = true;\\n  }\\n\\n  /**\\n   * Prevents the default action.\\n   */\\n  preventDefault() {\\n    this.defaultPrevented = true;\\n  }\\n}\\n\",\"// Unique ID creation requires a high quality random # generator. In the browser we therefore\\n// require the crypto API and do not support built-in fallback to lower quality random number\\n// generators (like Math.random()).\\nvar getRandomValues;\\nvar rnds8 = new Uint8Array(16);\\nexport default function rng() {\\n  // lazy load so that environments that need to polyfill have a chance to do so\\n  if (!getRandomValues) {\\n    // getRandomValues needs to be invoked in a context where \\\"this\\\" is a Crypto implementation. Also,\\n    // find the complete implementation of crypto (msCrypto) on IE11.\\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\\n\\n    if (!getRandomValues) {\\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\\n    }\\n  }\\n\\n  return getRandomValues(rnds8);\\n}\",\"/**\\n\\n */\\nexport default class PopUpMessage {\\n  /**\\n   * @classdesc\\n   * This class represents a dialog message overlaying a DOM element in order to\\n   * accept / cancel discard changes. The dialog can be closed i.e the overlay disappears\\n   * o canceled. In this last case a callback function should be called.\\n   * @constructs\\n   * @param {Object} popupMessageAttributes - Object containing popup properties.\\n   * @param {HTMLElement} popupMessageAttributes.overlayElement - Element to overlay.\\n   * @param {Object} popupMessageAttributes.callbacks - Contains callback\\n   * methods for close and cancel actions.\\n   * @param {Object} popupMessageAttributes.strings - Contains all the strings needed.\\n   */\\n  constructor(popupMessageAttributes) {\\n    /**\\n     * Element to be overlaid when the popup appears.\\n     */\\n    this.overlayElement = popupMessageAttributes.overlayElement;\\n\\n    this.callbacks = popupMessageAttributes.callbacks;\\n\\n    /**\\n     * HTMLElement element to wrap all HTML elements inside the popupMessage.\\n     */\\n    this.overlayWrapper = this.overlayElement.appendChild(document.createElement('div'));\\n    this.overlayWrapper.setAttribute('class', 'wrs_popupmessage_overlay_envolture');\\n\\n    /**\\n     * HTMLElement to display the popup message, close button and cancel button.\\n     */\\n    this.message = this.overlayWrapper.appendChild(document.createElement('div'));\\n    this.message.id = 'wrs_popupmessage';\\n    this.message.setAttribute('class', 'wrs_popupmessage_panel');\\n    this.message.setAttribute('role', 'dialog');\\n    this.message.setAttribute('aria-describedby', 'description_txt');\\n    const paragraph = document.createElement('p');\\n    const text = document.createTextNode(popupMessageAttributes.strings.message);\\n    paragraph.appendChild(text);\\n    paragraph.id = 'description_txt';\\n    this.message.appendChild(paragraph);\\n\\n    /**\\n     * HTML element overlaying the overlayElement.\\n     */\\n    const overlay = this.overlayWrapper.appendChild(document.createElement('div'));\\n    overlay.setAttribute('class', 'wrs_popupmessage_overlay');\\n    // We create a overlay that close popup message on click in there\\n    overlay.addEventListener('click', this.cancelAction.bind(this));\\n\\n    /**\\n     * HTML element containing cancel and close buttons.\\n     */\\n    this.buttonArea = this.message.appendChild(document.createElement('div'));\\n    this.buttonArea.setAttribute('class', 'wrs_popupmessage_button_area');\\n    this.buttonArea.id = 'wrs_popup_button_area';\\n\\n    // Close button arguments.\\n    const buttonSubmitArguments = {\\n      class: 'wrs_button_accept',\\n      innerHTML: popupMessageAttributes.strings.submitString,\\n      id: 'wrs_popup_accept_button',\\n    };\\n\\n    /**\\n     * Close button arguments.\\n     */\\n    this.closeButton = this.createButton(buttonSubmitArguments, this.closeAction.bind(this));\\n    this.buttonArea.appendChild(this.closeButton);\\n\\n    // Cancel button arguments.\\n    const buttonCancelArguments = {\\n      class: 'wrs_button_cancel',\\n      innerHTML: popupMessageAttributes.strings.cancelString,\\n      id: 'wrs_popup_cancel_button',\\n    };\\n\\n    /**\\n     * Cancel button.\\n     */\\n    this.cancelButton = this.createButton(buttonCancelArguments, this.cancelAction.bind(this));\\n    this.buttonArea.appendChild(this.cancelButton);\\n  }\\n\\n  /**\\n   * This method create a button with arguments and return button dom object\\n   * @param {Object} parameters - An object containing id, class and innerHTML button text.\\n   * @param {String} parameters.id - Button id.\\n   * @param {String} parameters.class - Button class name.\\n   * @param {String} parameters.innerHTML - Button innerHTML text.\\n   * @param {Object} callback- Callback method to call on click event.\\n   * @returns {HTMLElement} HTML button.\\n   */\\n  // eslint-disable-next-line class-methods-use-this\\n  createButton(parameters, callback) {\\n    let element = {};\\n    element = document.createElement('button');\\n    element.setAttribute('id', parameters.id);\\n    element.setAttribute('class', parameters.class);\\n    element.innerHTML = parameters.innerHTML;\\n    element.addEventListener('click', callback);\\n\\n    return element;\\n  }\\n\\n  /**\\n   * Shows the popupmessage containing a message, and two buttons\\n   * to cancel the action or close the modal dialog.\\n   */\\n  show() {\\n    if (this.overlayWrapper.style.display !== 'block') {\\n      // Clear focus with blur for prevent press any key.\\n      document.activeElement.blur();\\n      this.overlayWrapper.style.display = 'block';\\n      this.closeButton.focus();\\n    } else {\\n      this.overlayWrapper.style.display = 'none';\\n      // _wrs_modalWindow.focus(); This throws an error of not existing _wrs_modalWindow\\n    }\\n  }\\n\\n  /**\\n   * This method cancels the popupMessage: the dialog disappears revealing the overlaid element.\\n   * A callback method is called (if defined). For example a method to focus the overlaid element.\\n   */\\n  cancelAction() {\\n    this.overlayWrapper.style.display = 'none';\\n    if (typeof this.callbacks.cancelCallback !== 'undefined') {\\n      this.callbacks.cancelCallback();\\n    }\\n  }\\n\\n  /**\\n   * This method closes the popupMessage: the dialog disappears and the close callback is called.\\n   * For example to close the overlaid element.\\n   */\\n  closeAction() {\\n    this.cancelAction();\\n    if (typeof this.callbacks.closeCallback !== 'undefined') {\\n      this.callbacks.closeCallback();\\n    }\\n  }\\n\\n  /**\\n   * Handle keyboard events detected in modal when elements of this class intervene.\\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\\n   */\\n  onKeyDown(keyboardEvent) {\\n    if (keyboardEvent.key !== undefined) {\\n      // Code to detect Esc event.\\n      if (keyboardEvent.key === 'Escape' || keyboardEvent.key === 'Esc') {\\n        this.cancelAction();\\n        keyboardEvent.stopPropagation();\\n        keyboardEvent.preventDefault();\\n      } else if (keyboardEvent.key === 'Tab') { // Code to detect Tab event.\\n        if (document.activeElement === this.closeButton) {\\n          this.cancelButton.focus();\\n        } else {\\n          this.closeButton.focus();\\n        }\\n        keyboardEvent.stopPropagation();\\n        keyboardEvent.preventDefault();\\n      }\\n    }\\n  }\\n}\\n\",\"export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\",\"import validate from './validate.js';\\n/**\\n * Convert array of 16 byte values to UUID string format of the form:\\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\\n */\\n\\nvar byteToHex = [];\\n\\nfor (var i = 0; i < 256; ++i) {\\n  byteToHex.push((i + 0x100).toString(16).substr(1));\\n}\\n\\nfunction stringify(arr) {\\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\\n  // Note: Be careful editing this code!  It's been tuned for performance\\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\\n  // of the following:\\n  // - One or more input array values don't map to a hex octet (leading to\\n  // \\\"undefined\\\" in the uuid)\\n  // - Invalid input values for the RFC `version` or `variant` fields\\n\\n  if (!validate(uuid)) {\\n    throw TypeError('Stringified UUID is invalid');\\n  }\\n\\n  return uuid;\\n}\\n\\nexport default stringify;\",\"import REGEX from './regex.js';\\n\\nfunction validate(uuid) {\\n  return typeof uuid === 'string' && REGEX.test(uuid);\\n}\\n\\nexport default validate;\",\"import rng from './rng.js';\\nimport stringify from './stringify.js';\\n\\nfunction v4(options, buf, offset) {\\n  options = options || {};\\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\\n\\n  rnds[6] = rnds[6] & 0x0f | 0x40;\\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\\n\\n  if (buf) {\\n    offset = offset || 0;\\n\\n    for (var i = 0; i < 16; ++i) {\\n      buf[offset + i] = rnds[i];\\n    }\\n\\n    return buf;\\n  }\\n\\n  return stringify(rnds);\\n}\\n\\nexport default v4;\",\"import {v4 as createUuid} from 'uuid';\\n\\n/**\\n* @classdesc\\n* Sends and receuives Wiris telemetry data.\\n*/\\nexport default class TelemetryService {\\n  constructor() {\\n    throw new Error('Static class StringManager can not be instantiated.');\\n  }\\n\\n  /**\\n  * Static property.\\n  * The sender uuid..\\n  * @private\\n  * @type {String}\\n  */\\n  static get senderId() {\\n    if (!this._senderId) {\\n\\n      // Look for previous cookie and use that\\n      const cookies = document.cookie.split(';').map(cookie => cookie.trim().split('='));\\n      for (const [ key, value ] of cookies) {\\n        if (key === senderIdCookieName) {\\n          this._senderId = value;\\n          break;\\n        }\\n      }\\n\\n      // No cookie has been previously set\\n      if (!this._senderId) {\\n        this._senderId = TelemetryService.composeUUID();\\n        document.cookie = this.composeCookie(senderIdCookieName, this._senderId, senderIdCookieMaxAge);\\n      }\\n    }\\n    return this._senderId;\\n  }\\n\\n  /**\\n  * Static property.\\n  * The session uuid.\\n  * @private\\n  * @type {String}\\n  */\\n  static get sessionId() {\\n    if (!this._sessionId) {\\n      this._sessionId = TelemetryService.composeUUID();\\n    }\\n    return this._sessionId;\\n  }\\n\\n  /**\\n  * Sends the specified array of messages to the telemetry endpoint.\\n  */\\n  static send(messages) {\\n    const data = {\\n      method: 'POST',\\n      cache: 'no-cache',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        'X-Api-Key': 'CK20op1pOx2LAUjPFP7kB2UPveHZRidG51UJE26m',\\n        'Accept-Version': '1', // TODO\\n      },\\n      body: JSON.stringify(TelemetryService.composeBody(messages)),\\n    };\\n\\n    // DEBUG\\n    // console.log('TelemetryService.send - data:', data);\\n    return fetch(TelemetryService.endpoint, data)\\n      .then(response => response)\\n      .catch((error) => {\\n        // DEBUG\\n        // console.error('TelemetryService.send - error:', error);\\n      });\\n  }\\n\\n  /**\\n   * Composes the 'session' object for the Telemetry Service request call.\\n   */\\n  static get session() {\\n    return {\\n      id: TelemetryService.sessionId,\\n      page: 0,\\n    };\\n  }\\n\\n  /**\\n   * Composes the 'sender' object for the Telemetry Service request call.\\n   */\\n  static get sender() {\\n    return {\\n      // 1. Client related.\\n      id: TelemetryService.senderId,\\n      // This returns 'Linux x86_64'.\\n      // Not as complete as the example 'Ubuntu; Linux x86_64'.\\n      os: navigator.oscpu,\\n      user_agent: window.navigator.userAgent,\\n\\n      // 2. Server related.\\n      domain: window.location.hostname,\\n\\n      // 3. Tech related.\\n      // The deployment key id as defined on the specification.\\n      deployment: TelemetryService.deployment,\\n      // The version of the editor.\\n      editor_version: (WirisPlugin.currentInstance.environment.editorVersion ? WirisPlugin.currentInstance.environment.editorVersion : ''),\\n      // The configured language of the editor.\\n      language: WirisPlugin.currentInstance.language,\\n      // The version of the current javascript package.\\n      product_version: WirisPlugin.currentInstance.version,\\n      backend: (WirisPlugin.currentInstance.serviceProviderProperties.server ? WirisPlugin.currentInstance.serviceProviderProperties.server : ''),\\n\\n      // TODOs:\\n      // 1. Backend version, the server language of the service.\\n      // The possible values are: php, aspx, java or ruby.\\n      // eslint-disable-next-line max-len\\n      // backend_version: (WirisPlugin.currentInstance.environment.backend_version ? WirisPlugin.currentInstance.environment.backend_version : ''), // TODO: next iteration.\\n      // 2. Framework & platform. We can't know this, yet. \\n      // This should be injected from the right package.\\n      // eslint-disable-next-line max-len\\n      // framework: (WirisPlugin.currentInstance.serviceProviderProperties.framework ? WirisPlugin.currentInstance.serviceProviderProperties.framework : ''), // TODO: next iteration.\\n      // eslint-disable-next-line max-len\\n      // platform: (WirisPlugin.currentInstance.serviceProviderProperties.platform ? WirisPlugin.currentInstance.serviceProviderProperties.platform : ''), // TODO: next iteration.\\n      // 3. Product backend version.\\n      // product_backend_version: '7.18.0', // TODO: next iteration.\\n    };\\n  }\\n\\n  /**\\n   * Composes the deployment id key for 'mathtype-web-*'.\\n   * It follows the convention defined at the 'doc/adr/XXX-telemetry-deployment-name-convention'\\n   * TODO: create the 'doc/adr'.\\n   */\\n  static get deployment() {\\n    const { editor } = WirisPlugin.currentInstance.environment;\\n\\n    const prefix = 'mathtype-web-plugin-';\\n    let suffix = '';\\n\\n    if (/Generic/.test(editor)) {\\n      suffix = 'generic';\\n    } else if (/Froala/.test(editor)) {\\n      suffix = 'froala';\\n    } else if (/CKEditor/.test(editor)) {\\n      suffix = 'ckeditor';\\n    } else if (/TinyMCE/.test(editor)) {\\n      suffix = 'tinymce';\\n    }\\n\\n    return `${prefix}${suffix}`;\\n  }\\n\\n  /**\\n  * Given 'messages', composes the Telemetry request body as a JSON.\\n  */\\n  static composeBody(messages) {\\n    const body = {\\n      messages,\\n      sender: TelemetryService.sender,\\n      session: TelemetryService.session,\\n    };\\n    return body;\\n  }\\n\\n  /**\\n  * Helper function that generates a random UUID used to identify both the batch and the sender.\\n  * Wikipedia: A universally unique identifier (UUID) is an identifier standard\\n  * used in software construction. A UUID is simply a 128-bit value.\\n  * The meaning of each bit is defined by any of several variants. For human-readable display,\\n  * many systems use a canonical format using hexadecimal text with inserted hyphen characters.\\n  */\\n  static composeUUID() {\\n    return createUuid();\\n  }\\n\\n  // TODO: generate an anonymous unique sender footprint based on the local configuration\\n  static composeSenderUUID() {\\n    return this.composeUUID();\\n  }\\n\\n  static composeCookie(name, content, maxAge) {\\n    const duration = (maxAge == null) ? '' : `; max-age=${maxAge}`;\\n    return `${name}=${content}${duration}`;\\n  }\\n}\\n\\n/**\\n * Name of the cookie that keeps the sender id.\\n */\\nconst senderIdCookieName = 'wiris_telemetry_mathtype_web_senderid';\\n\\n/**\\n * Time in seconds that the cookie with the sender id should last.\\n * It's set to 10 years since we'd like to never be deleted.\\n */\\nconst senderIdCookieMaxAge = 60 * 60 * 24 * 365 * 10; \\n\\n/**\\n * TelemetryServer\\n * The URL for the telemetry server host is hard-coded.\\n */\\nconst telemetryHost = {\\n  local: 'http://localhost:4000',\\n  production: 'https://telemetry.wiris.net',\\n};\\n\\n/**\\n * Stores the Telemetry endpoint host URL.\\n * @private\\n * @type {String}\\n */\\nTelemetryService.endpoint = telemetryHost.production;\\n\\n/**\\n * Stores the sender uuid.\\n * @private\\n * @type {String}\\n */\\nTelemetryService._senderId = '';\\n\\n/**\\n * Stores the session uuid.\\n * @private\\n * @type {String}\\n */\\nTelemetryService._sessionId = '';\\n\",\"// eslint-disable-next-line no-unused-vars, import/named\\r\\nimport Core, { ReturnObject } from './core.src';\\r\\nimport Image from './image';\\r\\nimport Listeners from './listeners';\\r\\nimport Util from './util';\\r\\nimport Configuration from './configuration';\\r\\nimport ServiceProvider from './serviceprovider';\\r\\n\\r\\n/**\\r\\n * @typedef {Object} IntegrationModelProperties\\r\\n * @property {string} configurationService - Configuration service path.\\r\\n * This parameter is needed to determine all services paths.\\r\\n * @property {HTMLElement} integrationModelProperties.target - HTML target.\\r\\n * @property {string} integrationModelProperties.scriptName - Integration script name.\\r\\n * Usually the name of the integration script.\\r\\n * @property {Object} integrationModelProperties.environment - integration environment properties.\\r\\n * @property {Object} [integrationModelProperties.callbackMethodArguments] - object containing\\r\\n * callback method arguments.\\r\\n * @property {string} [integrationModelProperties.version] - integration version number.\\r\\n * @property {Object} [integrationModelProperties.editorObject] - object containing\\r\\n * the integration editor instance.\\r\\n * @property {boolean} [integrationModelProperties.rtl] - true if the editor is in RTL mode.\\r\\n * false otherwise.\\r\\n * @property {ServiceProviderProperties} [integrationModelProperties.serviceProviderProperties]\\r\\n * - The service parameters.\\r\\n * @property {Object} [integrationModelProperties.integrationParameters]\\r\\n * - Overwritten integration parameters.\\r\\n */\\r\\n\\r\\nexport default class IntegrationModel {\\r\\n  /**\\r\\n   * @classdesc\\r\\n   * This class represents an integration model, allowing the integration script to\\r\\n   * communicate with Core class. Each integration must extend this class.\\r\\n   * @constructs\\r\\n   * @param {IntegrationModelProperties} integrationModelProperties\\r\\n   */\\r\\n  constructor(integrationModelProperties) {\\r\\n    /**\\r\\n     * Language. Needed for accessibility and locales. English by default.\\r\\n     */\\r\\n    this.language = 'en';\\r\\n\\r\\n    /**\\r\\n     * Service parameters\\r\\n     * @type {ServiceProviderProperties}\\r\\n     */\\r\\n    this.serviceProviderProperties = {};\\r\\n    if ('serviceProviderProperties' in integrationModelProperties) {\\r\\n      this.serviceProviderProperties = integrationModelProperties.serviceProviderProperties;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Configuration service path. The integration service is needed by Core class to\\r\\n     * load all the backend configuration into the frontend and also to create the paths\\r\\n     * of all services (all services lives in the same route). Mandatory property.\\r\\n     */\\r\\n    this.configurationService = '';\\r\\n    if ('configurationService' in integrationModelProperties) {\\r\\n      this.serviceProviderProperties.URI = integrationModelProperties.configurationService;\\r\\n      console.warn('Deprecated property configurationService. Use serviceParameters on instead.',\\r\\n        [integrationModelProperties.configurationService]);\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Plugin version. Needed to stats and caching.\\r\\n     * @type {string}\\r\\n     */\\r\\n    this.version = ('version' in integrationModelProperties ? integrationModelProperties.version : '');\\r\\n\\r\\n    /**\\r\\n     * DOM target in which the plugin works. Needed to associate events, insert formulas, etc.\\r\\n     * Mandatory property.\\r\\n     */\\r\\n    this.target = null;\\r\\n    if ('target' in integrationModelProperties) {\\r\\n      this.target = integrationModelProperties.target;\\r\\n    } else {\\r\\n      throw new Error('IntegrationModel constructor error: target property missed.');\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Integration script name. Needed to know the plugin path.\\r\\n     */\\r\\n    if ('scriptName' in integrationModelProperties) {\\r\\n      this.scriptName = integrationModelProperties.scriptName;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Object containing the arguments needed by the callback function.\\r\\n     */\\r\\n    this.callbackMethodArguments = {};\\r\\n    if ('callbackMethodArguments' in integrationModelProperties) {\\r\\n      this.callbackMethodArguments = integrationModelProperties.callbackMethodArguments;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Contains information about the integration environment:\\r\\n     * like the name of the editor, the version, etc.\\r\\n     */\\r\\n    this.environment = {};\\r\\n    if ('environment' in integrationModelProperties) {\\r\\n      this.environment = integrationModelProperties.environment;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Indicates if the DOM target is - or not - and iframe.\\r\\n     */\\r\\n    this.isIframe = false;\\r\\n    if (this.target != null) {\\r\\n      this.isIframe = (this.target.tagName.toUpperCase() === 'IFRAME');\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Instance of the integration editor object. Usually the entry point to access the API\\r\\n     * of a HTML editor.\\r\\n     */\\r\\n    this.editorObject = null;\\r\\n    if ('editorObject' in integrationModelProperties) {\\r\\n      this.editorObject = integrationModelProperties.editorObject;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Specifies if the direction of the text is RTL. false by default.\\r\\n     */\\r\\n    this.rtl = false;\\r\\n    if ('rtl' in integrationModelProperties) {\\r\\n      this.rtl = integrationModelProperties.rtl;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Specifies if the integration model exposes the locale strings. false by default.\\r\\n     */\\r\\n    this.managesLanguage = false;\\r\\n    if ('managesLanguage' in integrationModelProperties) {\\r\\n      this.managesLanguage = integrationModelProperties.managesLanguage;\\r\\n    }\\r\\n\\r\\n    /**\\r\\n     * Indicates if an image is selected. Needed to resize the image to the original size in case\\r\\n     * the image is resized.\\r\\n     * @type {boolean}\\r\\n     */\\r\\n    this.temporalImageResizing = false;\\r\\n\\r\\n    /**\\r\\n     * The Core class instance associated to the integration model.\\r\\n     * @type {Core}\\r\\n     */\\r\\n    this.core = null;\\r\\n\\r\\n    /**\\r\\n     * Integration model listeners.\\r\\n     * @type {Listeners}\\r\\n     */\\r\\n    this.listeners = new Listeners();\\r\\n\\r\\n    // Parameters overwrite.\\r\\n    if ('integrationParameters' in integrationModelProperties) {\\r\\n      IntegrationModel.integrationParameters.forEach((parameter) => {\\r\\n        if (parameter in integrationModelProperties.integrationParameters) {\\r\\n          // Don't add empty parameters.\\r\\n          const value = integrationModelProperties.integrationParameters[parameter];\\r\\n          if (Object.keys(value).length !== 0) {\\r\\n            this[parameter] = value;\\r\\n          }\\r\\n        }\\r\\n      });\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Init function. Usually called from the integration side once the core.js file is loaded.\\r\\n   */\\r\\n  init() {\\r\\n    // Check if language is an object and select the property necessary\\r\\n    this.language = this.getLanguage();\\r\\n\\r\\n    // We need to wait until Core class is loaded ('onLoad' event) before\\r\\n    // call the callback method.\\r\\n    const listener = Listeners.newListener('onLoad', () => {\\r\\n      this.callbackFunction(this.callbackMethodArguments);\\r\\n    });\\r\\n\\r\\n    // Backwards compatibility.\\r\\n    if (this.serviceProviderProperties.URI.indexOf('configuration') !== -1) {\\r\\n      const uri = this.serviceProviderProperties.URI;\\r\\n      const server = ServiceProvider.getServerLanguageFromService(uri);\\r\\n      this.serviceProviderProperties.server = server;\\r\\n      const configurationIndex = this.serviceProviderProperties.URI.indexOf('configuration');\\r\\n      const subsTring = this.serviceProviderProperties.URI.substring(0, configurationIndex);\\r\\n      this.serviceProviderProperties.URI = subsTring;\\r\\n    }\\r\\n\\r\\n    let serviceParametersURI = this.serviceProviderProperties.URI;\\r\\n    serviceParametersURI = serviceParametersURI.indexOf('/') === 0 || serviceParametersURI.indexOf('http') === 0\\r\\n      ? serviceParametersURI\\r\\n      : Util.concatenateUrl(this.getPath(), serviceParametersURI);\\r\\n\\r\\n    this.serviceProviderProperties.URI = serviceParametersURI;\\r\\n\\r\\n    const coreProperties = {};\\r\\n    coreProperties.serviceProviderProperties = this.serviceProviderProperties;\\r\\n    this.setCore(new Core(coreProperties));\\r\\n    this.core.addListener(listener);\\r\\n    this.core.language = this.language;\\r\\n\\r\\n    // Initializing Core class.\\r\\n    this.core.init();\\r\\n    // TODO: Move to Core constructor.\\r\\n    this.core.setEnvironment(this.environment);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the absolute path of the integration script.\\r\\n   * @return {string} - Absolute path for the integration script.\\r\\n   */\\r\\n  getPath() {\\r\\n    if (typeof this.scriptName === 'undefined') {\\r\\n      throw new Error('scriptName property needed for getPath.');\\r\\n    }\\r\\n    const col = document.getElementsByTagName('script');\\r\\n    let path = '';\\r\\n    for (let i = 0; i < col.length; i += 1) {\\r\\n      const j = col[i].src.lastIndexOf(this.scriptName);\\r\\n      if (j >= 0) {\\r\\n        path = col[i].src.substr(0, j - 1);\\r\\n      }\\r\\n    }\\r\\n    return path;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns integration model plugin version\\r\\n   * @param {string} - Plugin version\\r\\n   */\\r\\n  getVersion() {\\r\\n    return this.version;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the language property.\\r\\n   * @param {string} language - language code.\\r\\n   */\\r\\n  setLanguage(language) {\\r\\n    this.language = language;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets a Core instance.\\r\\n   * @param {Core} core - instance of Core class.\\r\\n   */\\r\\n  setCore(core) {\\r\\n    this.core = core;\\r\\n    core.setIntegrationModel(this);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the Core instance.\\r\\n   * @returns {Core} instance of Core class.\\r\\n   */\\r\\n  getCore() {\\r\\n    return this.core;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the object target and updates the iframe property.\\r\\n   * @param {HTMLElement} target - target object.\\r\\n   */\\r\\n  setTarget(target) {\\r\\n    this.target = target;\\r\\n    this.isIframe = (this.target.tagName.toUpperCase() === 'IFRAME');\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the editor object.\\r\\n   * @param {Object} editorObject - The editor object.\\r\\n   */\\r\\n  setEditorObject(editorObject) {\\r\\n    this.editorObject = editorObject;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Opens formula editor to editing a new formula. Can be overwritten in order to make some\\r\\n   * actions from integration part before the formula is edited.\\r\\n   */\\r\\n  openNewFormulaEditor() {\\r\\n    this.core.editionProperties.isNewElement = true;\\r\\n    this.core.openModalDialog(this.target, this.isIframe);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Opens formula editor to editing an existing formula. Can be overwritten in order to make some\\r\\n   * actions from integration part before the formula is edited.\\r\\n   */\\r\\n  openExistingFormulaEditor() {\\r\\n    this.core.editionProperties.isNewElement = false;\\r\\n    this.core.openModalDialog(this.target, this.isIframe);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Wrapper to Core.updateFormula method.\\r\\n   * Transform a MathML into a image formula.\\r\\n   * Then the image formula is inserted in the specified target, creating a new image (new formula)\\r\\n   * or updating an existing one.\\r\\n   * @param {string} mathml - MathML to generate the formula.\\r\\n   * @param {string} editMode - Edit Mode (LaTeX or images).\\r\\n   */\\r\\n  updateFormula(mathml) {\\r\\n    if (this.editorParameters) {\\r\\n      mathml = com.wiris.editor.util.EditorUtils.addAnnotation(mathml, 'application/vnd.wiris.mtweb-params+json', JSON.stringify(this.editorParameters));\\r\\n    }\\r\\n    let focusElement;\\r\\n    let windowTarget;\\r\\n    const wirisProperties = null;\\r\\n\\r\\n    if (this.isIframe) {\\r\\n      focusElement = this.target.contentWindow;\\r\\n      windowTarget = this.target.contentWindow;\\r\\n    } else {\\r\\n      focusElement = this.target;\\r\\n      windowTarget = window;\\r\\n    }\\r\\n\\r\\n    let obj = this.core.beforeUpdateFormula(mathml, wirisProperties);\\r\\n\\r\\n    if (!obj) {\\r\\n      return '';\\r\\n    }\\r\\n\\r\\n    obj = this.insertFormula(focusElement, windowTarget, obj.mathml, obj.wirisProperties);\\r\\n\\r\\n    if (!obj) {\\r\\n      return '';\\r\\n    }\\r\\n\\r\\n    return this.core.afterUpdateFormula(obj.focusElement, obj.windowTarget, obj.node, obj.latex);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Wrapper to Core.insertFormula method.\\r\\n   * Inserts the formula in the specified target, creating\\r\\n   * a new image (new formula) or updating an existing one.\\r\\n   * @param {string} mathml - MathML to generate the formula.\\r\\n   * @param {string} editMode - Edit Mode (LaTeX or images).\\r\\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\\r\\n   */\\r\\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\\r\\n    return this.core.insertFormula(focusElement, windowTarget, mathml, wirisProperties);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the target selection.\\r\\n   * @returns {Selection} target selection.\\r\\n   */\\r\\n  getSelection() {\\r\\n    if (this.isIframe) {\\r\\n      this.target.contentWindow.focus();\\r\\n      return this.target.contentWindow.getSelection();\\r\\n    }\\r\\n    this.target.focus();\\r\\n    return window.getSelection();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Add events to formulas in the DOM target. The events added are the following:\\r\\n   * - doubleClickHandler: handles double click event on formulas by opening an editor\\r\\n   * to edit them.\\r\\n   * - mouseDownHandler: handles mouse down event on formulas by saving the size of the formula\\r\\n   * in case the the formula is resized.\\r\\n   * - mouseUpHandler: handles mouse up event on formulas by restoring the saved formula size\\r\\n   * in case the formula is resized.\\r\\n   */\\r\\n  addEvents() {\\r\\n    const eventTarget = this.isIframe ? this.target.contentWindow.document : this.target;\\r\\n    Util.addElementEvents(\\r\\n      eventTarget,\\r\\n      (element, event) => {\\r\\n        this.doubleClickHandler(element, event);\\r\\n      },\\r\\n      (element, event) => {\\r\\n        this.mousedownHandler(element, event);\\r\\n      },\\r\\n      (element, event) => {\\r\\n        this.mouseupHandler(element, event);\\r\\n      },\\r\\n    );\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Handles a double click on the target element. Opens an editor\\r\\n   * to re-edit the double-clicked formula.\\r\\n   * @param {HTMLElement} element - DOM object target.\\r\\n   */\\r\\n  doubleClickHandler(element) {\\r\\n    if (element.nodeName.toLowerCase() === 'img') {\\r\\n      this.core.getCustomEditors().disable();\\r\\n      const customEditorAttributeName = Configuration.get('imageCustomEditorName');\\r\\n      if (element.hasAttribute(customEditorAttributeName)) {\\r\\n        const customEditor = element.getAttribute(customEditorAttributeName);\\r\\n        this.core.getCustomEditors().enable(customEditor);\\r\\n      }\\r\\n      if (Util.containsClass(element, Configuration.get('imageClassName'))) {\\r\\n        this.core.editionProperties.temporalImage = element;\\r\\n        this.core.editionProperties.isNewElement = true;\\r\\n        this.openExistingFormulaEditor();\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Handles a mouse up event on the target element. Restores the image size to avoid\\r\\n   * resizing formulas.\\r\\n   */\\r\\n  mouseupHandler() {\\r\\n    if (this.temporalImageResizing) {\\r\\n      setTimeout(() => {\\r\\n        Image.fixAfterResize(this.temporalImageResizing);\\r\\n      }, 10);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Handles a mouse down event on the target element. Saves the formula size to avoid\\r\\n   * resizing formulas.\\r\\n   * @param {HTMLElement} element - target element.\\r\\n   */\\r\\n  mousedownHandler(element) {\\r\\n    if (element.nodeName.toLowerCase() === 'img') {\\r\\n      if (Util.containsClass(element, Configuration.get('imageClassName'))) {\\r\\n        this.temporalImageResizing = element;\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the integration language. By default the browser agent. This method\\r\\n   * should be overwritten to obtain the integration language, for example using the\\r\\n   * plugin API of an HTML editor.\\r\\n   * @returns {string} integration language.\\r\\n   */\\r\\n  getLanguage() {\\r\\n    return this.getBrowserLanguage();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the browser language.\\r\\n   * @returns {string} the browser language.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  getBrowserLanguage() {\\r\\n    let language = 'en';\\r\\n    if (navigator.userLanguage) {\\r\\n      language = navigator.userLanguage.substring(0, 2);\\r\\n    } else if (navigator.language) {\\r\\n      language = navigator.language.substring(0, 2);\\r\\n    } else {\\r\\n      language = 'en';\\r\\n    }\\r\\n    return language;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * This function is called once the {@link Core} is loaded. IntegrationModel class\\r\\n   * will fire this method when {@link Core} 'onLoad' event is fired.\\r\\n   * This method should content all the logic to init\\r\\n   * the integration.\\r\\n   */\\r\\n  callbackFunction() {\\r\\n    // It's needed to wait until the integration target is ready. The event is fired\\r\\n    // from the integration side.\\r\\n    const listener = Listeners.newListener('onTargetReady', () => {\\r\\n      this.addEvents(this.target);\\r\\n    });\\r\\n    this.listeners.add(listener);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Function called when the content submits an action.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  notifyWindowClosed() {\\r\\n    // Nothing.\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Wrapper.\\r\\n   * Extracts mathml of a determined text node. This function is used as a wrapper inside core.js\\r\\n   * in order to get mathml from a text node that can contain normal LaTeX or other chosen text.\\r\\n   * @param {string} textNode - text node to extract the MathML.\\r\\n   * @param {int} caretPosition - caret position inside the text node.\\r\\n   * @returns {string} MathML inside the text node.\\r\\n   */\\r\\n\\r\\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\\r\\n  getMathmlFromTextNode(textNode, caretPosition) {}\\r\\n\\r\\n  /**\\r\\n   * Wrapper\\r\\n   * It fills wrs event object of nonLatex with the desired data.\\r\\n   * @param {Object} event - event object.\\r\\n   * @param {Object} window dom window object.\\r\\n   * @param {string} mathml valid mathml.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\\r\\n  fillNonLatexNode(event, window, mathml) {}\\r\\n\\r\\n  /**\\r\\n    Wrapper.\\r\\n   * Returns selected item from the target.\\r\\n   * @param {HTMLElement} target - target element\\r\\n   * @param {boolean} iframe\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\\r\\n  getSelectedItem(target, isIframe) {}\\r\\n\\r\\n  static setTemporalImageToNull() {\\r\\n    // eslint-disable-next-line no-undef\\r\\n    if (WirisPlugin.currentInstance) {\\r\\n      WirisPlugin.currentInstance.core.editionProperties.temporalImage = null; // eslint-disable-line\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\\r\\n// To know if the integration that extends this class implements\\r\\n// wrapper methods, they are set as undefined.\\r\\nIntegrationModel.prototype.getMathmlFromTextNode = undefined;\\r\\nIntegrationModel.prototype.fillNonLatexNode = undefined;\\r\\nIntegrationModel.prototype.getSelectedItem = undefined;\\r\\n\\r\\n/**\\r\\n * An object containing a list with the overwritable class constructor properties.\\r\\n * @type {Object}\\r\\n */\\r\\nIntegrationModel.integrationParameters = ['serviceProviderProperties', 'editorParameters'];\\r\\n\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg3783\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata3789\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs3787\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image3791\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\\\\nvklEQVRYw83Z23GDMBAF0AsNhBIowSVQgjuISnAJKSEdZNOBS6CDOBUkqSC4gs2PyGhAQg92se4M\\\\n4w8bccYW2hVumBmRdAB6ADfopQcw2SOYNoIkAL8APgB8AzgLI0/2S/iy1xkt3B9m9h0dM9/YHxM4\\\\nJ/c4MfPkGX+y763OyYVKgUPQTXAJdC84Bg2CS6Gl4FSoF7wHmgvOhbrgzsW+8L4YJegccrEj749R\\\\ngs7ZXGdz8wbAeNbREcDTzrHvblEgBbAUFACuy6JALJeL0E/P9sbvmBnNojcgAM+oJ58AhrlnWM5Z\\\\nA+C9RmiokakBvIJuNTLSc7hojqY0Mo8EB6Ep2CPBm9BU7BHgKDQHqwlOguZiNcDJ0JLe4FV4iaLY\\\\nJjF16dLqnoob+EdDs8A1QJPBtUCTwDVBo+DaoJvgNvBIR6rDl9wirbA1QIPgVgl6VwHb+dAr7Jkk\\\\nS/Pg3mCkVOslxxV9yBFqSqTA/3N2Utkzye3pftw5OxzQ5tHeddcdzGj3o4VgClUwowgtAVOs3BpF\\\\naA6YUnsDowhNAVNu12UUoVtgCn2+ifxp1wO42Ner4KPR5dJ2tsse2ZLvTQxbVf4AmC2z7WnSvpIA\\\\nAAAASUVORK5CYII=\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg2\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata8\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs6\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image10\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\\\\n2ElEQVRYw9XZoXPCMBTH8S+5KfDzQ29606CH3/SmQTO96aGHHn/F0Himh8eDZSblQknSJH2F0DtE\\\\nQw8+12vyfulr7XY7LuW4qvj+DugD18AC+AE2woa+/mz07y9cF7Y8d7YPDEtjK2AsCB4BvdLYHPi0\\\\nXawioAA3wAfQaQiKHhuFYl1QSbAL6gWrSKgEuArqBKsEaB1wKNQKVsasHybcpRhwLNQED0zsoMbz\\\\nFwJOhWL6Cmzd2e0D14Wi1/k9di2wFNnAEtBifd9jv4GtIPgaeBOCAkzLFayr/6idWSSY6DJ8sHT9\\\\n6VK6zRFqKwo5gQ+grnKbA/gI6gsy5wRboT7sucBOaBX21GAvNAR7KnAlNBTbNDgIGoMtwO/C0Gko\\\\nNBZbN525tk+dJrAj4F4YGxXgVQS019DkCgarM0OjwCoDaDBYZQINAquMoJVglRnUC1YZQp1g1RB0\\\\nJryn65jYJ0HoRGPHguDX8hsZ6VAiGX4eUrJBbHqSArdN7LLBmCcBnpvYWfHWo6E8Wge8Ar7Kj8E4\\\\nARwcnBPBB20BE7uJBMdAU8BH/YvyBAsFp0BjwNZGi201qALXgYaAnR0hX2upAzwDj/p8raFL5I4u\\\\n8ALc6vNfvc+ztq5al9Rh/AfwZZ/LmlMllAAAAABJRU5ErkJggg==\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg3793\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata3799\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs3797\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image3801\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG4SURBVFhHvZnhUYNAEEbRBkwH2oGUkA40FWgJ\\\\nKSEdaAmxA0vQDmIHKSFWgPuAHZkEAnd8y5v5kuNHMm+WY1mSm6qqCiGlZdUspXzxopY9Wu6bpZQf\\\\nSxlRWapwVx9p2dy2CxUHy9ryWx9pKdWyECYcIQshwlGyIBeOlAWpcLQsyISXkAWEX5tlPkvJwnP7\\\\nns1SsnvLS7PMZwlZiShEy8pEIVJWKgpRsnJRiJBNFf2wbCzjfZgRUZi9JYWDxT9bWk6WIXbKym4t\\\\nKRVloObO5oze6ZClWX9a5jyOcOrfmuUkXPRUH/1zVRhZpvsnCxN+jnDqHh0SdQaFu9vg0ZIqrBZ1\\\\neoXP92yKcJSocyHcd4FNEY4WdbrCR1rGrukMF9BWVhZvLZ7U9rS2nH9HVvoq63iFu+RUlOpIuCYL\\\\nCCPIqVjq1A9j5R3aBnMY2kKzMlbZHPQVbVHLhomCUjZUFFSy35ZQUVDIMo+Gi4JCltFwERSy75Y5\\\\n4+VkFLLcKHLHyyRUF1jOeJmMShbChZWy0Df8yFDLgg8/cpCN6I9cdHJhZHmy7X2anAnCtDUZ/j/Y\\\\ng2X2j709MHhTDAFF8QdK9SRpUl2yFgAAAABJRU5ErkJggg==\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg12\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata18\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs16\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image20\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAGMSURBVFhHvdk7TsNAFIVhQ0l6elLDJqCGngXQ\\\\nU7MA6rALahZATQ81C6APrXP/jEaKHD/i8TnzS1eaICF/2I4f4qxt20bYOmaVlrK2Mb8s1Nj3mIu0\\\\nlPYZszlPa1kvMf9pKe02Zq3Gcrhc4JUaSzawA0sWsAtLcrATS1KwG0sycA0sAd6kZXm1sNzVHtOy\\\\nvBpYoK8xV/tPC3JjZVByYqVQcmHlUHJgLVBSY0ugPP7xO5PXYSW2FMr19ytm8sahxD7ElEBzk3c6\\\\nsFysn/afymKPvsXMueh3oblRMNibmPuYZ34wsyWHfqhB8OFpwKvDHLADmusFd8/ZU8FOaO4I3PcF\\\\nmwLXgOYOwVtexdnwdUy3vg2UQPnD2eji+vZsrruHS/eoBEpjWMpgrhi1Dv1gY6fBkuRQmtqzJVmg\\\\npMbaoKTEWqGkwtqhpMBWgZICWwVKCuwpzxKSFNi5T2vFqb5gVcAqLNnBSixZwWos2cBg/9JSmgUM\\\\n9iMt5QFe8tZ8VP6n3WXMHQtxPzHfabm0ptkBwWhpthzMp7YAAAAASUVORK5CYII=\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg3813\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata3819\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs3817\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image3821\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\\\nnUlEQVRYw+3Z0QnCMBSF4T/FATqCG1g3cISO0NE6iiPoCE5gneD40ohPvgkJ/AcC9/EjHELgliT0\\\\nkoGOIlasWLFixYoVK1asWLFixYoVK1bsjxy+5hlYgLEx47ofSEKSJW1nTUJJMgLPDlpwHoCpk8rO\\\\nvgZixf4Zu3Vi3cq+WroBp4ahL+BYa3AB7o1CH7vvc7M1U4N/g2sdSk8bxjfDaMNdr+hmAQAAAABJ\\\\nRU5ErkJggg==\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg32\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata38\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs36\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image40\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\\\npklEQVRYw+3ZLQ4CMRCG4bcbFOvXg99T7FG4BafAw1VALx7dWyy2mIoGgSOZJu/n6p70ZybppFIK\\\\nvWSgo4gVK1asWLFixYoVK1asWLFixYoV+yO7r/UMHIAxiO8FZGBrsUfgDEwBN/QNXIA11S/PW1Bo\\\\nCz4N9ein4Nd1Dyw9PbDR0iVW7J+xudax6HkOtZVdg0MfQE7N0G4GlmANYgNW4A6QepowfgDMXB26\\\\nb1V6LAAAAABJRU5ErkJggg==\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg3823\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata3829\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs3827\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image3831\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAHOSURBVFhH1ZiLUcMwEEQNDcQl0AEuISVABZhO\\\\nUkroICVAB6ECoINQgdmVfR5FlmQrkZzjzezEzsc8NPqcdNd1XfVfuB9ec3NAmv4yiRo5ImzBlm+c\\\\nwZYtEHJCGsT3eSgHxKZFxs/tL+aMkCK8R3yMwu4PcsVmiXBIVDDCvh/miEtMeE5UaEsNMJcN8o64\\\\ng26PvPSXs9S+/zRHQtgtvLRFCb9blZpnYw/9Rb6RR3M3zxtiprFbyKYwipK1+uwlnIkSrbITUaJR\\\\n1itKtMkGRYk2WRZAQbTNBpzWtggrrwnaWja00hk0DrCgsEZZ4hXWKksmwjLAHobkgOv+V3+ZhXHQ\\\\niWxKqXYLKNyILDdqbPKlldASPhA+Mxc7uwatkSOSix1iP//q2APshLBvfJo7hbizgQj/mDtl+KYu\\\\nCj8h7NSqCM2zXJvZwqqEY4uCOuGYLKEwJ3kVzMlyscg5915FTFbdqhaSVbn8+mTV1gmurOqCxpZN\\\\nEeUu9BlZd1obioTkQ7IhPGTjYZuPIoUMK/GUFrX39asuHJTlH3w1d3FCBxCrCUufZX+NCUdPSsAq\\\\nwu4A8wnPiQrFhW1Z4govFRWKCoeOjzjoZF92CdwpZy6AquoPvJRHJxB8bJ8AAAAASUVORK5CYII=\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.76 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.76\\\\\\\"\\\\n   id=\\\\\\\"svg42\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata48\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs46\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image50\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG/SURBVFhH1ZgxUsMwEEUNJRyAGmp6qKGn5xRQ\\\\nQ08NNfRQQw11DpAaanIAWrMv8WaELSlexhLLm/mRnImiF48jr7zVtm3zX9ju2ik5llxLdpdHNg4k\\\\nT5I7yWB8Cdl9yZHkRmIRRpQxOxK+YzC+hKwSnTBBKKoMxpeUBSbkksgRE1V+CJeWhUPJ5ao7ICeq\\\\nrIVryMKJpC88RlTZk1SThVDYIvoluZIsSqyz511SfEg4UxbRdw5qnlmFa9AsCn8hO4aBKHiUjYqC\\\\nN9mkKHiSzYqCJ9lPSVIUPMmySqTudEu8XbOxO90ab7KQFPYoC1Fhr7IwENbagMLCUtXnoCTM1QZW\\\\n3iS3dFT2mRfHvEjuVfZUckFnQh67dgqo1GYqC1MLn3XtZIR/sFcJW2C39FcD18KxpcutcGqddSmc\\\\nuykg/LDq+iAnC/OudUFOVrfLbkjJWvb11YjJuhSFvqxbUQhlXYuCylpE2YXy2SkLlVEgaxVluzyT\\\\nIEutWQ1kKZYtouF2maK4mjCyFN6bJsw9gKgmrNdsbsKNT0qEKsIqC7EJx4gqxYVDWQgntIgqRYXD\\\\nbY3CLpcVgmdPC974BYy3/MgRNM03hR9ubFTHT48AAAAASUVORK5CYII=\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.76\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"import PopUpMessage from './popupmessage';\\r\\nimport Util from './util';\\r\\nimport Configuration from './configuration';\\r\\nimport Listeners from './listeners';\\r\\nimport StringManager from './stringmanager';\\r\\nimport ContentManager from './contentmanager';\\r\\nimport TelemetryService from './telemetry';\\r\\nimport IntegrationModel from './integrationmodel';\\r\\n\\r\\nimport closeIcon from '!!raw-loader!../styles/icons/general/close_icon.svg';  //eslint-disable-line\\r\\nimport closeHoverIcon from '!!raw-loader!../styles/icons/hover/close_icon_h.svg';  //eslint-disable-line\\r\\nimport fullsIcon from '!!raw-loader!../styles/icons/general/fulls_icon.svg';  //eslint-disable-line\\r\\nimport fullsHoverIcon from '!!raw-loader!../styles/icons/hover/fulls_icon_h.svg';  //eslint-disable-line\\r\\nimport minIcon from '!!raw-loader!../styles/icons/general/min_icon.svg';  //eslint-disable-line\\r\\nimport minHoverIcon from '!!raw-loader!../styles/icons/hover/min_icon_h.svg';  //eslint-disable-line\\r\\nimport minsIcon from '!!raw-loader!../styles/icons/general/mins_icon.svg';  //eslint-disable-line\\r\\nimport minsHoverIcon from '!!raw-loader!../styles/icons/hover/mins_icon_h.svg';  //eslint-disable-line\\r\\nimport maxIcon from '!!raw-loader!../styles/icons/general/max_icon.svg';  //eslint-disable-line\\r\\nimport maxHoverIcon from '!!raw-loader!../styles/icons/hover/max_icon_h.svg';  //eslint-disable-line\\r\\n\\r\\n/**\\r\\n * @typedef {Object} DeviceProperties\\r\\n * @property {String} DeviceProperties.orientation - Indicates of the orientation of the device.\\r\\n * @property {Boolean} DeviceProperties.isAndroid - True if the device is Android. False otherwise.\\r\\n * @property {Boolean} DeviceProperties.isIOS - True if the device is iOS. False otherwise.\\r\\n * @property {Boolean} DeviceProperties.isMobile - True if the device is a mobile one.\\r\\n * False otherwise.\\r\\n * @property {Boolean} DeviceProperties.isDesktop - True if the device is a desktop one.\\r\\n * False otherwise.\\r\\n */\\r\\n\\r\\nexport default class ModalDialog {\\r\\n  /**\\r\\n   * @classdesc\\r\\n   * This class represents a modal dialog. The modal dialog admits\\r\\n   * a {@link ContentManager} instance to manage the content of the dialog.\\r\\n   * @constructs\\r\\n   * @param {Object} modalDialogAttributes  - An object containing all modal dialog attributes.\\r\\n   */\\r\\n  constructor(modalDialogAttributes) {\\r\\n    this.attributes = modalDialogAttributes;\\r\\n\\r\\n    // Metrics.\\r\\n    const ua = navigator.userAgent.toLowerCase();\\r\\n    const isAndroid = ua.indexOf('android') > -1;\\r\\n    const isIOS = ContentManager.isIOS();\\r\\n    this.iosSoftkeyboardOpened = false;\\r\\n    this.iosMeasureUnit = ua.indexOf('crios') === -1 ? '%' : 'vh';\\r\\n    this.iosDivHeight = `100%${this.iosMeasureUnit}`;\\r\\n\\r\\n    const deviceWidth = window.outerWidth;\\r\\n    const deviceHeight = window.outerHeight;\\r\\n\\r\\n    const landscape = deviceWidth > deviceHeight;\\r\\n    const portrait = deviceWidth < deviceHeight;\\r\\n\\r\\n    // TODO: Detect isMobile without using editor metrics.\\r\\n    const isLandscape = (landscape && this.attributes.height > deviceHeight);\\r\\n    const isPortrait = portrait && this.attributes.width > deviceWidth;\\r\\n    const isMobile = isLandscape || isPortrait;\\r\\n\\r\\n    // Obtain number of current instance.\\r\\n    this.instanceId = document.getElementsByClassName('wrs_modal_dialogContainer').length;\\r\\n\\r\\n    // Device object properties.\\r\\n\\r\\n    /**\\r\\n     * @type {DeviceProperties}\\r\\n     */\\r\\n    this.deviceProperties = {\\r\\n      orientation: landscape ? 'landscape' : 'portait',\\r\\n      isAndroid,\\r\\n      isIOS,\\r\\n      isMobile,\\r\\n      isDesktop: !isMobile && !isIOS && !isAndroid,\\r\\n    };\\r\\n\\r\\n    this.properties = {\\r\\n      created: false,\\r\\n      state: '',\\r\\n      previousState: '',\\r\\n      position: { bottom: 0, right: 10 },\\r\\n      size: { height: 338, width: 580 },\\r\\n    };\\r\\n\\r\\n    /**\\r\\n     * Object to keep website's style before change it on lock scroll for mobile devices.\\r\\n     * @type {Object}\\r\\n     * @property {String} bodyStylePosition - Previous body style postion.\\r\\n     * @property {String} bodyStyleOverflow - Previous body style overflow.\\r\\n     * @property {String} htmlStyleOverflow - Previous body style overflow.\\r\\n     * @property {String} windowScrollX - Previous window's scroll Y.\\r\\n     * @property {String} windowScrollY - Previous window's scroll X.\\r\\n     */\\r\\n    this.websiteBeforeLockParameters = null;\\r\\n\\r\\n    let attributes = {};\\r\\n    attributes.class = 'wrs_modal_overlay';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    this.overlay = Util.createElement('div', attributes);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_title_bar';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    this.titleBar = Util.createElement('div', attributes);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_title';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    this.title = Util.createElement('div', attributes);\\r\\n    this.title.innerHTML = '';\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_close_button';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    attributes.title = StringManager.get('close');\\r\\n    attributes.style = {};\\r\\n    this.closeDiv = Util.createElement('a', attributes);\\r\\n    this.closeDiv.setAttribute('role', 'button');\\r\\n    // Apply styles and events after the creation as createElement doesn't process them correctly\\r\\n    let generalStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeIcon)})`;\\r\\n    let hoverStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(closeHoverIcon)})`;\\r\\n    this.closeDiv.setAttribute('style', generalStyle);\\r\\n    this.closeDiv.setAttribute('onmouseover', `this.style = \\\"${hoverStyle}\\\";`);\\r\\n    this.closeDiv.setAttribute('onmouseout', `this.style = \\\"${generalStyle}\\\";`);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_stack_button';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    attributes.title = StringManager.get('exit_fullscreen');\\r\\n    this.stackDiv = Util.createElement('a', attributes);\\r\\n    this.stackDiv.setAttribute('role', 'button');\\r\\n    generalStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsIcon)})`;\\r\\n    hoverStyle = `background-size: 10px; background-image: url(data:image/svg+xml;base64,${window.btoa(minsHoverIcon)})`;\\r\\n    this.stackDiv.setAttribute('style', generalStyle);\\r\\n    this.stackDiv.setAttribute('onmouseover', `this.style = \\\"${hoverStyle}\\\";`);\\r\\n    this.stackDiv.setAttribute('onmouseout', `this.style = \\\"${generalStyle}\\\";`);\\r\\n\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_maximize_button';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    attributes.title = StringManager.get('fullscreen');\\r\\n    this.maximizeDiv = Util.createElement('a', attributes);\\r\\n    this.maximizeDiv.setAttribute('role', 'button');\\r\\n    generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsIcon)})`;\\r\\n    hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(fullsHoverIcon)})`;\\r\\n    this.maximizeDiv.setAttribute('style', generalStyle);\\r\\n    this.maximizeDiv.setAttribute('onmouseover', `this.style = \\\"${hoverStyle}\\\";`);\\r\\n    this.maximizeDiv.setAttribute('onmouseout', `this.style = \\\"${generalStyle}\\\";`);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_minimize_button';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    attributes.title = StringManager.get('minimize');\\r\\n    this.minimizeDiv = Util.createElement('a', attributes);\\r\\n    this.minimizeDiv.setAttribute('role', 'button');\\r\\n    generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\\r\\n    hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\\r\\n    this.minimizeDiv.setAttribute('style', generalStyle);\\r\\n    this.minimizeDiv.setAttribute('onmouseover', `this.style = \\\"${hoverStyle}\\\";`);\\r\\n    this.minimizeDiv.setAttribute('onmouseout', `this.style = \\\"${generalStyle}\\\";`);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_dialogContainer';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    attributes.role = 'dialog';\\r\\n    this.container = Util.createElement('div', attributes);\\r\\n    this.container.setAttribute('aria-labeledby', 'wrs_modal_title[0]');\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_wrapper';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    this.wrapper = Util.createElement('div', attributes);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_content_container';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    this.contentContainer = Util.createElement('div', attributes);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_controls';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    this.controls = Util.createElement('div', attributes);\\r\\n\\r\\n    attributes = {};\\r\\n    attributes.class = 'wrs_modal_buttons_container';\\r\\n    attributes.id = this.getElementId(attributes.class);\\r\\n    this.buttonContainer = Util.createElement('div', attributes);\\r\\n\\r\\n    // Buttons: all button must be created using createSubmitButton method.\\r\\n    this.submitButton = this.createSubmitButton(\\r\\n      {\\r\\n        id: this.getElementId('wrs_modal_button_accept'),\\r\\n        class: 'wrs_modal_button_accept',\\r\\n        innerHTML: StringManager.get('accept'),\\r\\n      },\\r\\n      this.submitAction.bind(this),\\r\\n    );\\r\\n\\r\\n    this.cancelButton = this.createSubmitButton(\\r\\n      {\\r\\n        id: this.getElementId('wrs_modal_button_cancel'),\\r\\n        class: 'wrs_modal_button_cancel',\\r\\n        innerHTML: StringManager.get('cancel'),\\r\\n      },\\r\\n      this.cancelAction.bind(this),\\r\\n    );\\r\\n\\r\\n    this.contentManager = null;\\r\\n\\r\\n    // Overlay popup.\\r\\n    const popupStrings = {\\r\\n      cancelString: StringManager.get('cancel'),\\r\\n      submitString: StringManager.get('close'),\\r\\n      message: StringManager.get('close_modal_warning'),\\r\\n    };\\r\\n\\r\\n    const callbacks = {\\r\\n      closeCallback: () => { this.close(); },\\r\\n      cancelCallback: () => { this.focus(); },\\r\\n    };\\r\\n\\r\\n    const popupupProperties = {\\r\\n      overlayElement: this.container,\\r\\n      callbacks,\\r\\n      strings: popupStrings,\\r\\n    };\\r\\n\\r\\n    this.popup = new PopUpMessage(popupupProperties);\\r\\n\\r\\n    /**\\r\\n    * Indicates if directionality of the modal dialog is RTL. false by default.\\r\\n    * @type {Boolean}\\r\\n    */\\r\\n    this.rtl = false;\\r\\n    if ('rtl' in this.attributes) {\\r\\n      this.rtl = this.attributes.rtl;\\r\\n    }\\r\\n\\r\\n    // Event handlers need modal instance context.\\r\\n    this.handleOpenedIosSoftkeyboard = this.handleOpenedIosSoftkeyboard.bind(this);\\r\\n    this.handleClosedIosSoftkeyboard = this.handleClosedIosSoftkeyboard.bind(this);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * This method sets an ContentManager instance to ModalDialog. ContentManager\\r\\n   * manages the logic of ModalDialog content: submit, update, close and changes.\\r\\n   * @param {ContentManager} contentManager - ContentManager instance.\\r\\n   */\\r\\n  setContentManager(contentManager) {\\r\\n    this.contentManager = contentManager;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the modal contentElement object.\\r\\n   * @returns {ContentManager} the instance of the ContentManager class.\\r\\n  */\\r\\n  getContentManager() {\\r\\n    return this.contentManager;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * This method is called when the modal object has been submitted. Calls\\r\\n   * contentElement submitAction method - if exists - and closes the modal\\r\\n   * object. No logic about the content should be placed here,\\r\\n   * contentElement.submitAction is the responsible of the content logic.\\r\\n   */\\r\\n  submitAction() {\\r\\n    if (typeof this.contentManager.submitAction !== 'undefined') {\\r\\n      this.contentManager.submitAction();\\r\\n    }\\r\\n    this.close();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * This method is called when the modal object has been cancelled. If\\r\\n   * contentElement has implemented hasChanges method, a confirm popup\\r\\n   * will be shown if hasChanges returns true.\\r\\n   */\\r\\n  cancelAction() {\\r\\n    if (typeof this.contentManager.hasChanges === 'undefined') {\\r\\n      this.close();\\r\\n    } else if (!this.contentManager.hasChanges()) {\\r\\n      this.close();\\r\\n    } else {\\r\\n      this.showPopUpMessage();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns a button element.\\r\\n   * @param {Object} properties - Input button properties.\\r\\n   * @param {String} properties.class - Input button class.\\r\\n   * @param {String} properties.innerHTML - Input button innerHTML.\\r\\n   * @param {Object} callback - Callback function associated to click event.\\r\\n   * @returns {HTMLButtonElement} The button element.\\r\\n   *\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  createSubmitButton(properties, callback) {\\r\\n    class SubmitButton {\\r\\n      constructor() {\\r\\n        this.element = document.createElement('button');\\r\\n        this.element.id = properties.id;\\r\\n        this.element.className = properties.class;\\r\\n        this.element.innerHTML = properties.innerHTML;\\r\\n        Util.addEvent(this.element, 'click', callback);\\r\\n      }\\r\\n\\r\\n      getElement() {\\r\\n        return this.element;\\r\\n      }\\r\\n    }\\r\\n    return new SubmitButton(properties, callback).getElement();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Creates the modal window object inserting a contentElement object.\\r\\n   */\\r\\n  create() {\\r\\n    /* Modal Window Structure\\r\\n    _____________________________________________________________________________________\\r\\n    |wrs_modal_dialog_Container                                                         |\\r\\n    | _________________________________________________________________________________ |\\r\\n    | |title_bar                          minimize_button  stack_button  close_button | |\\r\\n    | |_______________________________________________________________________________| |\\r\\n    | |wrapper                                                                        | |\\r\\n    | | _____________________________________________________________________________ | |\\r\\n    | | |content                                                                    | | |\\r\\n    | | |                                                                           | | |\\r\\n    | | |                                                                           | | |\\r\\n    | | |___________________________________________________________________________| | |\\r\\n    | | _____________________________________________________________________________ | |\\r\\n    | | |controls                                                                   | | |\\r\\n    | | | ___________________________________                                       | | |\\r\\n    | | | |buttonContainer                  |                                       | | |\\r\\n    | | | | _______________________________ |                                       | | |\\r\\n    | | | | |button_accept | button_cancel| |                                       | | |\\r\\n    | | | |_|_____________ |______________|_|                                       | | |\\r\\n    | | |___________________________________________________________________________| | |\\r\\n    | |_______________________________________________________________________________| |\\r\\n    |___________________________________________________________________________________| */\\r\\n\\r\\n    this.titleBar.appendChild(this.closeDiv);\\r\\n    this.titleBar.appendChild(this.stackDiv);\\r\\n    this.titleBar.appendChild(this.maximizeDiv);\\r\\n    this.titleBar.appendChild(this.minimizeDiv);\\r\\n    this.titleBar.appendChild(this.title);\\r\\n\\r\\n    if (this.deviceProperties.isDesktop) {\\r\\n      this.container.appendChild(this.titleBar);\\r\\n    }\\r\\n\\r\\n    this.wrapper.appendChild(this.contentContainer);\\r\\n    this.wrapper.appendChild(this.controls);\\r\\n\\r\\n    this.controls.appendChild(this.buttonContainer);\\r\\n\\r\\n    this.buttonContainer.appendChild(this.submitButton);\\r\\n    this.buttonContainer.appendChild(this.cancelButton);\\r\\n\\r\\n    this.container.appendChild(this.wrapper);\\r\\n\\r\\n    // Check if browser has scrollBar before modal has modified.\\r\\n    this.recalculateScrollBar();\\r\\n\\r\\n    document.body.appendChild(this.container);\\r\\n    document.body.appendChild(this.overlay);\\r\\n\\r\\n    if (this.deviceProperties.isDesktop) { // Desktop.\\r\\n\\r\\n      this.createModalWindowDesktop();\\r\\n      this.createResizeButtons();\\r\\n\\r\\n      this.addListeners();\\r\\n      // Maximize window only when the configuration is set and the device is not iOS or Android.\\r\\n      if (Configuration.get('modalWindowFullScreen')) {\\r\\n        this.maximize();\\r\\n      }\\r\\n    } else if (this.deviceProperties.isAndroid) {\\r\\n      this.createModalWindowAndroid();\\r\\n    } else if (this.deviceProperties.isIOS) {\\r\\n      this.createModalWindowIos();\\r\\n    }\\r\\n\\r\\n    if (this.contentManager != null) {\\r\\n      this.contentManager.insert(this);\\r\\n    }\\r\\n\\r\\n    this.properties.open = true;\\r\\n    this.properties.created = true;\\r\\n\\r\\n    // Checks language directionality.\\r\\n    if (this.isRTL()) {\\r\\n      this.container.style.right = `${window.innerWidth - this.scrollbarWidth - this.container.offsetWidth}px`;\\r\\n      this.container.className += ' wrs_modal_rtl';\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Creates a button in the modal object to resize it.\\r\\n   */\\r\\n  createResizeButtons() {\\r\\n    // This is a definition of Resize Button Bottom-Right.\\r\\n    this.resizerBR = document.createElement('div');\\r\\n    this.resizerBR.className = 'wrs_bottom_right_resizer';\\r\\n    this.resizerBR.innerHTML = '◢';\\r\\n    // This is a definition of Resize Button Top-Left.\\r\\n    this.resizerTL = document.createElement('div');\\r\\n    this.resizerTL.className = 'wrs_bottom_left_resizer';\\r\\n    // Append resize buttons to modal.\\r\\n    this.container.appendChild(this.resizerBR);\\r\\n    this.titleBar.appendChild(this.resizerTL);\\r\\n    // Add events to resize on click and drag.\\r\\n    Util.addEvent(this.resizerBR, 'mousedown', this.activateResizeStateBR.bind(this));\\r\\n    Util.addEvent(this.resizerTL, 'mousedown', this.activateResizeStateTL.bind(this));\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Initialize variables for Bottom-Right resize button\\r\\n   * @param {MouseEvent} mouseEvent - Mouse event.\\r\\n   */\\r\\n  activateResizeStateBR(mouseEvent) {\\r\\n    this.initializeResizeProperties(mouseEvent, false);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Initialize variables for Top-Left resize button\\r\\n   * @param {MouseEvent} mouseEvent - Mouse event.\\r\\n   */\\r\\n  activateResizeStateTL(mouseEvent) {\\r\\n    this.initializeResizeProperties(mouseEvent, true);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Common method to initialize variables at resize.\\r\\n   * @param {MouseEvent} mouseEvent - Mouse event.\\r\\n   */\\r\\n  initializeResizeProperties(mouseEvent, leftOption) {\\r\\n    // Apply class for disable involuntary select text when drag.\\r\\n    Util.addClass(document.body, 'wrs_noselect');\\r\\n    Util.addClass(this.overlay, 'wrs_overlay_active');\\r\\n    this.resizeDataObject = {\\r\\n      x: this.eventClient(mouseEvent).X,\\r\\n      y: this.eventClient(mouseEvent).Y,\\r\\n    };\\r\\n    // Save Initial state of modal to compare on drag and obtain the difference.\\r\\n    this.initialWidth = parseInt(this.container.style.width, 10);\\r\\n    this.initialHeight = parseInt(this.container.style.height, 10);\\r\\n    if (!leftOption) {\\r\\n      this.initialRight = parseInt(this.container.style.right, 10);\\r\\n      this.initialBottom = parseInt(this.container.style.bottom, 10);\\r\\n    } else {\\r\\n      this.leftScale = true;\\r\\n    }\\r\\n    if (!this.initialRight) {\\r\\n      this.initialRight = 0;\\r\\n    }\\r\\n    if (!this.initialBottom) {\\r\\n      this.initialBottom = 0;\\r\\n    }\\r\\n    // Disable mouse events on editor when we start to drag modal.\\r\\n    document.body.style['user-select'] = 'none';\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * This method opens the modal window, restoring the previous state, position and metrics,\\r\\n   * if exists. By default the modal object opens in stack mode.\\r\\n   */\\r\\n  open() {\\r\\n    // TODO Change the call to telemetry to use events.\\r\\n    try {\\r\\n      TelemetryService.send([{\\r\\n        timestamp: new Date().toJSON(),\\r\\n        topic: '0',\\r\\n        level: 'info',\\r\\n        message: 'HELO telemetry.wiris.net',\\r\\n      }])\\r\\n        .then((response) => {\\r\\n          // TODO: manage retries for codes\\r\\n          // DEBUG\\r\\n          // console.log('modal.open TelemetryService.send - response:', response);\\r\\n        });\\r\\n    } catch (error) {\\r\\n      // DEBUG\\r\\n      // console.log('modal.open TelemetryService.send - error:', error);\\r\\n    }\\r\\n\\r\\n    // Removing close class.\\r\\n    this.removeClass('wrs_closed');\\r\\n    // Hiding keyboard for mobile devices.\\r\\n    const { isIOS } = this.deviceProperties;\\r\\n    const { isAndroid } = this.deviceProperties;\\r\\n    const { isMobile } = this.deviceProperties;\\r\\n    if (isIOS || isAndroid || isMobile) {\\r\\n      // Restore scale to 1.\\r\\n      this.restoreWebsiteScale();\\r\\n      this.lockWebsiteScroll();\\r\\n      // Due to editor wait we need to wait until editor focus.\\r\\n      setTimeout(() => { this.hideKeyboard(); }, 400);\\r\\n    }\\r\\n\\r\\n    // New modal window. He need to create the whole object.\\r\\n    if (!this.properties.created) {\\r\\n      this.create();\\r\\n    } else {\\r\\n      // Previous state closed. Open method can be called even the previous state is open,\\r\\n      // for example updating the content of the modal object.\\r\\n      if (!this.properties.open) {\\r\\n        this.properties.open = true;\\r\\n\\r\\n        // Restoring the previous open state: if the modal object has been closed\\r\\n        // re-open it should preserve the state and the metrics.\\r\\n        if (!this.deviceProperties.isAndroid && !this.deviceProperties.isIOS) {\\r\\n          this.restoreState();\\r\\n        }\\r\\n      }\\r\\n\\r\\n      // Maximize window only when the configuration is set and the device is not iOs or Android.\\r\\n      if (this.deviceProperties.isDesktop && Configuration.get('modalWindowFullScreen')) {\\r\\n        this.maximize();\\r\\n      }\\r\\n\\r\\n      // In iOS we need to recalculate the size of the modal object because\\r\\n      // iOS keyboard is a float div which can overlay the modal object.\\r\\n      if (this.deviceProperties.isIOS) {\\r\\n        this.iosSoftkeyboardOpened = false;\\r\\n        this.setContainerHeight(`${100 + this.iosMeasureUnit}`);\\r\\n      }\\r\\n    }\\r\\n\\r\\n    if (!ContentManager.isEditorLoaded()) {\\r\\n      const listener = Listeners.newListener('onLoad', () => {\\r\\n        this.contentManager.onOpen(this);\\r\\n      });\\r\\n      this.contentManager.addListener(listener);\\r\\n    } else {\\r\\n      this.contentManager.onOpen(this);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Closes modal window and restores viewport header.\\r\\n   */\\r\\n  close() {\\r\\n    // Set temporal image to null to avoid\\r\\n    // opening a existing formula editor when trying to open a new one\\r\\n    IntegrationModel.setTemporalImageToNull();\\r\\n    this.removeClass('wrs_maximized');\\r\\n    this.removeClass('wrs_minimized');\\r\\n    this.removeClass('wrs_stack');\\r\\n    this.addClass('wrs_closed');\\r\\n    this.saveModalProperties();\\r\\n    this.unlockWebsiteScroll();\\r\\n    this.properties.open = false;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the website scale to one.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  restoreWebsiteScale() {\\r\\n    let viewportmeta = document.querySelector('meta[name=viewport]');\\r\\n    // Let the equal symbols in order to search and make meta's final content.\\r\\n    const contentAttrsToUpdate = ['initial-scale=', 'minimum-scale=', 'maximum-scale='];\\r\\n    const contentAttrsValuesToUpdate = ['1.0', '1.0', '1.0'];\\r\\n    const setMetaAttrFunc = (viewportelement, contentAttrs) => {\\r\\n      const contentAttr = viewportelement.getAttribute('content');\\r\\n      // If it exists, we need to maintain old values and put our values.\\r\\n      if (contentAttr) {\\r\\n        const attrArray = contentAttr.split(',');\\r\\n        let finalContentMeta = '';\\r\\n        const oldAttrs = [];\\r\\n        for (let i = 0; i < attrArray.length; i += 1) {\\r\\n          let isAttrToUpdate = false;\\r\\n          let j = 0;\\r\\n          while (!isAttrToUpdate && j < contentAttrs.length) {\\r\\n            if (attrArray[i].indexOf(contentAttrs[j])) {\\r\\n              isAttrToUpdate = true;\\r\\n            }\\r\\n            j += 1;\\r\\n          }\\r\\n\\r\\n          if (!isAttrToUpdate) {\\r\\n            oldAttrs.push(attrArray[i]);\\r\\n          }\\r\\n        }\\r\\n\\r\\n        for (let i = 0; i < contentAttrs.length; i += 1) {\\r\\n          const attr = contentAttrs[i] + contentAttrsValuesToUpdate[i];\\r\\n          finalContentMeta += i === 0 ? attr : `,${attr}`;\\r\\n        }\\r\\n\\r\\n        for (let i = 0; i < oldAttrs.length; i += 1) {\\r\\n          finalContentMeta += `,${oldAttrs[i]}`;\\r\\n        }\\r\\n        viewportelement.setAttribute('content', finalContentMeta);\\r\\n        // It needs to set to empty because setAttribute refresh only when attribute is different.\\r\\n        viewportelement.setAttribute('content', '');\\r\\n        viewportelement.setAttribute('content', contentAttr);\\r\\n      } else {\\r\\n        viewportelement.setAttribute('content', 'initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0');\\r\\n        viewportelement.removeAttribute('content');\\r\\n      }\\r\\n    };\\r\\n\\r\\n    if (!viewportmeta) {\\r\\n      viewportmeta = document.createElement('meta');\\r\\n      document.getElementsByTagName('head')[0].appendChild(viewportmeta);\\r\\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\\r\\n      viewportmeta.remove();\\r\\n    } else {\\r\\n      setMetaAttrFunc(viewportmeta, contentAttrsToUpdate, contentAttrsValuesToUpdate);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Locks website scroll for mobile devices.\\r\\n   */\\r\\n  lockWebsiteScroll() {\\r\\n    this.websiteBeforeLockParameters = {\\r\\n      bodyStylePosition: document.body.style.position ? document.body.style.position : '',\\r\\n      bodyStyleOverflow: document.body.style.overflow ? document.body.style.overflow : '',\\r\\n      htmlStyleOverflow: document.documentElement.style.overflow ? document.documentElement.style.overflow : '',\\r\\n      windowScrollX: window.scrollX,\\r\\n      windowScrollY: window.scrollY,\\r\\n    };\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Unlocks website scroll for mobile devices.\\r\\n   */\\r\\n  unlockWebsiteScroll() {\\r\\n    if (this.websiteBeforeLockParameters) {\\r\\n      document.body.style.position = this.websiteBeforeLockParameters.bodyStylePosition;\\r\\n      document.body.style.overflow = this.websiteBeforeLockParameters.bodyStyleOverflow;\\r\\n      document.documentElement.style.overflow = this.websiteBeforeLockParameters.htmlStyleOverflow;\\r\\n      const { windowScrollX } = this.websiteBeforeLockParameters;\\r\\n      const { windowScrollY } = this.websiteBeforeLockParameters;\\r\\n      window.scrollTo(windowScrollX, windowScrollY);\\r\\n      this.websiteBeforeLockParameters = null;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Util function to known if browser is IE11.\\r\\n   * @returns {Boolean} true if the browser is IE11. false otherwise.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  isIE11() {\\r\\n    if (navigator.userAgent.search('Msie/') >= 0 || navigator.userAgent.search('Trident/') >= 0 || navigator.userAgent.search('Edge/') >= 0) {\\r\\n      return true;\\r\\n    }\\r\\n    return false;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns if the current language type is RTL.\\r\\n   * @return {Boolean} true if current language is RTL. false otherwise.\\r\\n   */\\r\\n  isRTL() {\\r\\n    if (this.attributes.language === 'ar' || this.attributes.language === 'he') {\\r\\n      return true;\\r\\n    }\\r\\n    return this.rtl;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Adds a class to all modal ModalDialog DOM elements.\\r\\n   * @param {String} className - Class name.\\r\\n   */\\r\\n  addClass(className) {\\r\\n    Util.addClass(this.overlay, className);\\r\\n    Util.addClass(this.titleBar, className);\\r\\n    Util.addClass(this.overlay, className);\\r\\n    Util.addClass(this.container, className);\\r\\n    Util.addClass(this.contentContainer, className);\\r\\n    Util.addClass(this.stackDiv, className);\\r\\n    Util.addClass(this.minimizeDiv, className);\\r\\n    Util.addClass(this.maximizeDiv, className);\\r\\n    Util.addClass(this.wrapper, className);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Remove a class from all modal DOM elements.\\r\\n   * @param {String} className - Class name.\\r\\n   */\\r\\n  removeClass(className) {\\r\\n    Util.removeClass(this.overlay, className);\\r\\n    Util.removeClass(this.titleBar, className);\\r\\n    Util.removeClass(this.overlay, className);\\r\\n    Util.removeClass(this.container, className);\\r\\n    Util.removeClass(this.contentContainer, className);\\r\\n    Util.removeClass(this.stackDiv, className);\\r\\n    Util.removeClass(this.minimizeDiv, className);\\r\\n    Util.removeClass(this.maximizeDiv, className);\\r\\n    Util.removeClass(this.wrapper, className);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Create modal dialog for desktop.\\r\\n   */\\r\\n  createModalWindowDesktop() {\\r\\n    this.addClass('wrs_modal_desktop');\\r\\n    this.stack();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Create modal dialog for non android devices.\\r\\n   */\\r\\n  createModalWindowAndroid() {\\r\\n    this.addClass('wrs_modal_android');\\r\\n    window.addEventListener('resize', this.orientationChangeAndroidSoftkeyboard.bind(this));\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Create modal dialog for iOS devices.\\r\\n   */\\r\\n  createModalWindowIos() {\\r\\n    this.addClass('wrs_modal_ios');\\r\\n    // Refresh the size when the orientation is changed.\\r\\n    window.addEventListener('resize', this.orientationChangeIosSoftkeyboard.bind(this));\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Restore previous state, position and size of previous stacked modal dialog.\\r\\n   */\\r\\n  restoreState() {\\r\\n    if (this.properties.state === 'maximized') {\\r\\n      // Reset states for prevent return to stack state.\\r\\n      this.maximize();\\r\\n    } else if (this.properties.state === 'minimized') {\\r\\n      // Reset states for prevent return to stack state.\\r\\n      this.properties.state = this.properties.previousState;\\r\\n      this.properties.previousState = '';\\r\\n      this.minimize();\\r\\n    } else {\\r\\n      this.stack();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Stacks the modal object.\\r\\n   */\\r\\n  stack() {\\r\\n    this.properties.previousState = this.properties.state;\\r\\n    this.properties.state = 'stack';\\r\\n    this.removeClass('wrs_maximized');\\r\\n    this.minimizeDiv.title = StringManager.get('minimize');\\r\\n    this.removeClass('wrs_minimized');\\r\\n    this.addClass('wrs_stack');\\r\\n\\r\\n    // Change maximize/minimize icon to minimize icon\\r\\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\\r\\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\\r\\n    this.minimizeDiv.setAttribute('style', generalStyle);\\r\\n    this.minimizeDiv.setAttribute('onmouseover', `this.style = \\\"${hoverStyle}\\\";`);\\r\\n    this.minimizeDiv.setAttribute('onmouseout', `this.style = \\\"${generalStyle}\\\";`);\\r\\n\\r\\n    this.restoreModalProperties();\\r\\n\\r\\n    if (typeof this.resizerBR !== 'undefined' && typeof this.resizerTL !== 'undefined') {\\r\\n      this.setResizeButtonsVisibility();\\r\\n    }\\r\\n\\r\\n    // Need recalculate position of actual modal because window can was changed in fullscreenmode.\\r\\n    this.recalculateScrollBar();\\r\\n    this.recalculatePosition();\\r\\n    this.recalculateScale();\\r\\n    this.focus();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Minimizes the modal object.\\r\\n   */\\r\\n  minimize() {\\r\\n    // Saving width, height, top and bottom parameters to restore when opening.\\r\\n    this.saveModalProperties();\\r\\n    this.title.style.cursor = 'pointer';\\r\\n    if (this.properties.state === 'minimized' && this.properties.previousState === 'stack') {\\r\\n      this.stack();\\r\\n    } else if (this.properties.state === 'minimized' && this.properties.previousState === 'maximized') {\\r\\n      this.maximize();\\r\\n    } else {\\r\\n      // Setting css to prevent important tag into css style.\\r\\n      this.container.style.height = '30px';\\r\\n      this.container.style.width = '250px';\\r\\n      this.container.style.bottom = '0px';\\r\\n      this.container.style.right = '10px';\\r\\n\\r\\n      this.removeListeners();\\r\\n      this.properties.previousState = this.properties.state;\\r\\n      this.properties.state = 'minimized';\\r\\n      this.setResizeButtonsVisibility();\\r\\n      this.minimizeDiv.title = StringManager.get('maximize');\\r\\n\\r\\n      if (Util.containsClass(this.overlay, 'wrs_stack')) {\\r\\n        this.removeClass('wrs_stack');\\r\\n      } else {\\r\\n        this.removeClass('wrs_maximized');\\r\\n      }\\r\\n      this.addClass('wrs_minimized');\\r\\n\\r\\n      // Change minimize icon to maximize icon\\r\\n      const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxIcon)})`;\\r\\n      const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(maxHoverIcon)})`;\\r\\n      this.minimizeDiv.setAttribute('style', generalStyle);\\r\\n      this.minimizeDiv.setAttribute('onmouseover', `this.style = \\\"${hoverStyle}\\\";`);\\r\\n      this.minimizeDiv.setAttribute('onmouseout', `this.style = \\\"${generalStyle}\\\";`);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Maximizes the modal object.\\r\\n   */\\r\\n  maximize() {\\r\\n    // Saving width, height, top and bottom parameters to restore when openning.\\r\\n    this.saveModalProperties();\\r\\n    if (this.properties.state !== 'maximized') {\\r\\n      this.properties.previousState = this.properties.state;\\r\\n      this.properties.state = 'maximized';\\r\\n    }\\r\\n    // Don't permit resize on maximize mode.\\r\\n    this.setResizeButtonsVisibility();\\r\\n\\r\\n    if (Util.containsClass(this.overlay, 'wrs_minimized')) {\\r\\n      this.minimizeDiv.title = StringManager.get('minimize');\\r\\n      this.removeClass('wrs_minimized');\\r\\n    } else if (Util.containsClass(this.overlay, 'wrs_stack')) {\\r\\n      this.container.style.left = null;\\r\\n      this.container.style.top = null;\\r\\n      this.removeClass('wrs_stack');\\r\\n    }\\r\\n\\r\\n    this.addClass('wrs_maximized');\\r\\n\\r\\n    // Change maximize icon to minimize icon\\r\\n    const generalStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minIcon)})`;\\r\\n    const hoverStyle = `background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,${window.btoa(minHoverIcon)})`;\\r\\n    this.minimizeDiv.setAttribute('style', generalStyle);\\r\\n    this.minimizeDiv.setAttribute('onmouseover', `this.style = \\\"${hoverStyle}\\\";`);\\r\\n    this.minimizeDiv.setAttribute('onmouseout', `this.style = \\\"${generalStyle}\\\";`);\\r\\n\\r\\n    // Set size to 80% screen with a max size.\\r\\n    this.setSize(parseInt(window.innerHeight * 0.8, 10), parseInt(window.innerWidth * 0.8, 10));\\r\\n    if (this.container.clientHeight > 700) {\\r\\n      this.container.style.height = '700px';\\r\\n    }\\r\\n    if (this.container.clientWidth > 1200) {\\r\\n      this.container.style.width = '1200px';\\r\\n    }\\r\\n\\r\\n    // Setting modal position in center on screen.\\r\\n    const { innerHeight } = window;\\r\\n    const { innerWidth } = window;\\r\\n    const { offsetHeight } = this.container;\\r\\n    const { offsetWidth } = this.container;\\r\\n    const bottom = innerHeight / 2 - offsetHeight / 2;\\r\\n    const right = innerWidth / 2 - offsetWidth / 2;\\r\\n\\r\\n    this.setPosition(bottom, right);\\r\\n    this.recalculateScale();\\r\\n    this.recalculatePosition();\\r\\n    this.recalculateSize();\\r\\n    this.focus();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Expand again the modal object from a minimized state.\\r\\n   */\\r\\n  reExpand() {\\r\\n    if (this.properties.state === 'minimized') {\\r\\n      if (this.properties.previousState === 'maximized') {\\r\\n        this.maximize();\\r\\n      } else {\\r\\n        this.stack();\\r\\n      }\\r\\n      this.title.style.cursor = '';\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets modal size.\\r\\n   * @param {Number} height - Height of the ModalDialog\\r\\n   * @param {Number} width - Width of the ModalDialog.\\r\\n   */\\r\\n  setSize(height, width) {\\r\\n    this.container.style.height = `${height}px`;\\r\\n    this.container.style.width = `${width}px`;\\r\\n    this.recalculateSize();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets modal position using bottom and right style attributes.\\r\\n   * @param  {number} bottom - bottom attribute.\\r\\n   * @param  {number} right - right attribute.\\r\\n   */\\r\\n  setPosition(bottom, right) {\\r\\n    this.container.style.bottom = `${bottom}px`;\\r\\n    this.container.style.right = `${right}px`;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Saves position and size parameters of and open ModalDialog. This attributes\\r\\n   * are needed to restore it on re-open.\\r\\n   */\\r\\n  saveModalProperties() {\\r\\n    // Saving values of modal only when modal is in stack state.\\r\\n    if (this.properties.state === 'stack') {\\r\\n      this.properties.position.bottom = parseInt(this.container.style.bottom, 10);\\r\\n      this.properties.position.right = parseInt(this.container.style.right, 10);\\r\\n      this.properties.size.width = parseInt(this.container.style.width, 10);\\r\\n      this.properties.size.height = parseInt(this.container.style.height, 10);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Restore ModalDialog position and size parameters.\\r\\n   */\\r\\n  restoreModalProperties() {\\r\\n    if (this.properties.state === 'stack') {\\r\\n      // Restoring Bottom and Right values from last modal.\\r\\n      this.setPosition(this.properties.position.bottom, this.properties.position.right);\\r\\n      // Restoring Height and Left values from last modal.\\r\\n      this.setSize(this.properties.size.height, this.properties.size.width);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the modal dialog initial size.\\r\\n   */\\r\\n  recalculateSize() {\\r\\n    this.wrapper.style.width = `${this.container.clientWidth - 12}px`;\\r\\n    this.wrapper.style.height = `${this.container.clientHeight - 38}px`;\\r\\n    this.contentContainer.style.height = `${parseInt(this.wrapper.offsetHeight - 50, 10)}px`;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Enable or disable visibility of resize buttons in modal window depend on state.\\r\\n   */\\r\\n  setResizeButtonsVisibility() {\\r\\n    if (this.properties.state === 'stack') {\\r\\n      this.resizerTL.style.visibility = 'visible';\\r\\n      this.resizerBR.style.visibility = 'visible';\\r\\n    } else {\\r\\n      this.resizerTL.style.visibility = 'hidden';\\r\\n      this.resizerBR.style.visibility = 'hidden';\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Makes an object draggable adding mouse and touch events.\\r\\n   */\\r\\n  addListeners() {\\r\\n    // Button events (maximize, minimize, stack and close).\\r\\n    this.maximizeDiv.addEventListener('click', this.maximize.bind(this), true);\\r\\n    this.stackDiv.addEventListener('click', this.stack.bind(this), true);\\r\\n    this.minimizeDiv.addEventListener('click', this.minimize.bind(this), true);\\r\\n    this.closeDiv.addEventListener('click', this.cancelAction.bind(this));\\r\\n    this.title.addEventListener('click', this.reExpand.bind(this));\\r\\n\\r\\n    // Overlay events (close).\\r\\n    this.overlay.addEventListener('click', this.cancelAction.bind(this));\\r\\n\\r\\n    // Mouse events.\\r\\n    Util.addEvent(window, 'mousedown', this.startDrag.bind(this));\\r\\n    Util.addEvent(window, 'mouseup', this.stopDrag.bind(this));\\r\\n    Util.addEvent(window, 'mousemove', this.drag.bind(this));\\r\\n    Util.addEvent(window, 'resize', this.onWindowResize.bind(this));\\r\\n    // Key events.\\r\\n    Util.addEvent(this.container, 'keydown', this.onKeyDown.bind(this));\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Removes draggable events from an object.\\r\\n   */\\r\\n  removeListeners() {\\r\\n    // Mouse events.\\r\\n    Util.removeEvent(window, 'mousedown', this.startDrag);\\r\\n    Util.removeEvent(window, 'mouseup', this.stopDrag);\\r\\n    Util.removeEvent(window, 'mousemove', this.drag);\\r\\n    Util.removeEvent(window, 'resize', this.onWindowResize);\\r\\n    // Key events.\\r\\n    Util.removeEvent(this.container, 'keydown', this.onKeyDown);\\r\\n  }\\r\\n\\r\\n\\r\\n  /**\\r\\n   * Returns mouse or touch coordinates (on touch events ev.ClientX doesn't exists)\\r\\n   * @param {MouseEvent} mouseEvent - Mouse event.\\r\\n   * @return {Object} With the X and Y coordinates.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  eventClient(mouseEvent) {\\r\\n    if (typeof (mouseEvent.clientX) === 'undefined' && mouseEvent.changedTouches) {\\r\\n      const client = {\\r\\n        X: mouseEvent.changedTouches[0].clientX,\\r\\n        Y: mouseEvent.changedTouches[0].clientY,\\r\\n      };\\r\\n      return client;\\r\\n    }\\r\\n    const client = {\\r\\n      X: mouseEvent.clientX,\\r\\n      Y: mouseEvent.clientY,\\r\\n    };\\r\\n    return client;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Start drag function: set the object dragDataObject with the draggable\\r\\n   * object offsets coordinates.\\r\\n   * when drag starts (on touchstart or mousedown events).\\r\\n   * @param {MouseEvent} mouseEvent - Touchstart or mousedown event.\\r\\n   */\\r\\n  startDrag(mouseEvent) {\\r\\n    if (this.properties.state === 'minimized') {\\r\\n      return;\\r\\n    }\\r\\n    if (mouseEvent.target === this.title) {\\r\\n      if (typeof this.dragDataObject === 'undefined' || this.dragDataObject === null) {\\r\\n        // Save first click mouse point on screen.\\r\\n        this.dragDataObject = {\\r\\n          x: this.eventClient(mouseEvent).X,\\r\\n          y: this.eventClient(mouseEvent).Y,\\r\\n        };\\r\\n        // Reset last drag position when start drag.\\r\\n        this.lastDrag = {\\r\\n          x: '0px',\\r\\n          y: '0px',\\r\\n        };\\r\\n        // Init right and bottom values for window modal if it isn't exist.\\r\\n        if (this.container.style.right === '') {\\r\\n          this.container.style.right = '0px';\\r\\n        }\\r\\n        if (this.container.style.bottom === '') {\\r\\n          this.container.style.bottom = '0px';\\r\\n        }\\r\\n\\r\\n        // Needed for IE11 for apply disabled mouse events on editor because\\r\\n        // iexplorer need a dinamic object to apply this property.\\r\\n        if (this.isIE11()) {\\r\\n          // this.iframe.style['position'] = 'relative';\\r\\n        }\\r\\n        // Apply class for disable involuntary select text when drag.\\r\\n        Util.addClass(document.body, 'wrs_noselect');\\r\\n        Util.addClass(this.overlay, 'wrs_overlay_active');\\r\\n        // Obtain screen limits for prevent overflow.\\r\\n        this.limitWindow = this.getLimitWindow();\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Updates dragDataObject with the draggable object coordinates when\\r\\n   * the draggable object is being moved.\\r\\n   * @param {MouseEvent} mouseEvent - The mouse event.\\r\\n   */\\r\\n  drag(mouseEvent) {\\r\\n    if (this.dragDataObject) {\\r\\n      mouseEvent.preventDefault();\\r\\n      // Calculate max and min between actual mouse position and limit of screeen.\\r\\n      // It restric the movement of modal into window.\\r\\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, this.limitWindow.minPointer.y);\\r\\n      limitY = Math.max(this.limitWindow.maxPointer.y, limitY);\\r\\n      let limitX = Math.min(this.eventClient(mouseEvent).X, this.limitWindow.minPointer.x);\\r\\n      limitX = Math.max(this.limitWindow.maxPointer.x, limitX);\\r\\n      // Substract limit with first position to obtain relative pixels increment\\r\\n      // to the anchor point.\\r\\n      const dragX = `${limitX - this.dragDataObject.x}px`;\\r\\n      const dragY = `${limitY - this.dragDataObject.y}px`;\\r\\n      // Save last valid position of modal before window overflow.\\r\\n      this.lastDrag = {\\r\\n        x: dragX,\\r\\n        y: dragY,\\r\\n      };\\r\\n      // This move modal with hadware acceleration.\\r\\n      this.container.style.transform = `translate3d(${dragX},${dragY},0)`;\\r\\n    }\\r\\n    if (this.resizeDataObject) {\\r\\n      const { innerWidth } = window;\\r\\n      const { innerHeight } = window;\\r\\n      let limitX = Math.min(this.eventClient(mouseEvent).X, innerWidth - this.scrollbarWidth - 7);\\r\\n      let limitY = Math.min(this.eventClient(mouseEvent).Y, innerHeight - 7);\\r\\n      if (limitX < 0) {\\r\\n        limitX = 0;\\r\\n      }\\r\\n\\r\\n      if (limitY < 0) {\\r\\n        limitY = 0;\\r\\n      }\\r\\n\\r\\n      let scaleMultiplier;\\r\\n      if (this.leftScale) {\\r\\n        scaleMultiplier = -1;\\r\\n      } else {\\r\\n        scaleMultiplier = 1;\\r\\n      }\\r\\n\\r\\n      this.container.style.width = `${this.initialWidth + scaleMultiplier * (limitX - this.resizeDataObject.x)}px`;\\r\\n      this.container.style.height = `${this.initialHeight + scaleMultiplier * (limitY - this.resizeDataObject.y)}px`;\\r\\n      if (!this.leftScale) {\\r\\n        if (this.resizeDataObject.x - limitX - this.initialWidth < -580) {\\r\\n          this.container.style.right = `${this.initialRight - (limitX - this.resizeDataObject.x)}px`;\\r\\n        } else {\\r\\n          this.container.style.right = `${this.initialRight + this.initialWidth - 580}px`;\\r\\n          this.container.style.width = '580px';\\r\\n        }\\r\\n        if (this.resizeDataObject.y - limitY < this.initialHeight - 338) {\\r\\n          this.container.style.bottom = `${this.initialBottom - (limitY - this.resizeDataObject.y)}px`;\\r\\n        } else {\\r\\n          this.container.style.bottom = `${this.initialBottom + this.initialHeight - 338}px`;\\r\\n          this.container.style.height = '338px';\\r\\n        }\\r\\n      }\\r\\n      this.recalculateScale();\\r\\n      this.recalculatePosition();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the boundaries of actual window to limit modal movement.\\r\\n   * @return {Object} Object containing mouseX and mouseY coordinates of actual mouse on screen.\\r\\n   */\\r\\n  getLimitWindow() {\\r\\n    // Obtain dimensions of window page.\\r\\n    const maxWidth = window.innerWidth;\\r\\n    const maxHeight = window.innerHeight;\\r\\n\\r\\n    // Calculate relative position of mouse point into window.\\r\\n    const { offsetHeight } = this.container;\\r\\n    const contStyleBottom = parseInt(this.container.style.bottom, 10);\\r\\n    const contStyleRight = parseInt(this.container.style.right, 10);\\r\\n\\r\\n    const { pageXOffset } = window;\\r\\n    const dragY = this.dragDataObject.y;\\r\\n    const dragX = this.dragDataObject.x;\\r\\n\\r\\n    const offSetToolbarY = (offsetHeight + contStyleBottom - (maxHeight - (dragY - pageXOffset)));\\r\\n    const offSetToolbarX = maxWidth - this.scrollbarWidth - (dragX - pageXOffset) - contStyleRight;\\r\\n\\r\\n    // Calculate limits with sizes of window, modal and mouse position.\\r\\n    const minPointerY = maxHeight - this.container.offsetHeight + offSetToolbarY;\\r\\n    const maxPointerY = this.title.offsetHeight - (this.title.offsetHeight - offSetToolbarY);\\r\\n    const minPointerX = maxWidth - offSetToolbarX - this.scrollbarWidth;\\r\\n    const maxPointerX = (this.container.offsetWidth - offSetToolbarX);\\r\\n    const minPointer = { x: minPointerX, y: minPointerY };\\r\\n    const maxPointer = { x: maxPointerX, y: maxPointerY };\\r\\n    return { minPointer, maxPointer };\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the scrollbar width size of browser\\r\\n   * @returns {Number} The scrollbar width.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  getScrollBarWidth() {\\r\\n    // Create a paragraph with full width of page.\\r\\n    const inner = document.createElement('p');\\r\\n    inner.style.width = '100%';\\r\\n    inner.style.height = '200px';\\r\\n\\r\\n    // Create a hidden div to compare sizes.\\r\\n    const outer = document.createElement('div');\\r\\n    outer.style.position = 'absolute';\\r\\n    outer.style.top = '0px';\\r\\n    outer.style.left = '0px';\\r\\n    outer.style.visibility = 'hidden';\\r\\n    outer.style.width = '200px';\\r\\n    outer.style.height = '150px';\\r\\n    outer.style.overflow = 'hidden';\\r\\n    outer.appendChild(inner);\\r\\n\\r\\n    document.body.appendChild(outer);\\r\\n    const widthOuter = inner.offsetWidth;\\r\\n\\r\\n    // Change type overflow of paragraph for measure scrollbar.\\r\\n    outer.style.overflow = 'scroll';\\r\\n    let widthInner = inner.offsetWidth;\\r\\n\\r\\n    // If measure is the same, we compare with internal div.\\r\\n    if (widthOuter === widthInner) {\\r\\n      widthInner = outer.clientWidth;\\r\\n    }\\r\\n    document.body.removeChild(outer);\\r\\n\\r\\n    return (widthOuter - widthInner);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Set the dragDataObject to null.\\r\\n   */\\r\\n  stopDrag() {\\r\\n    // Due to we have multiple events that call this function, we need only to execute\\r\\n    // the next modifiers one time,\\r\\n    // when the user stops to drag and dragDataObject is not null (the object to drag is attached).\\r\\n    if (this.dragDataObject || this.resizeDataObject) {\\r\\n      // If modal doesn't change, it's not necessary to set position with interpolation.\\r\\n      this.container.style.transform = '';\\r\\n      if (this.dragDataObject) {\\r\\n        this.container.style.right = `${parseInt(this.container.style.right, 10) - parseInt(this.lastDrag.x, 10)}px`;\\r\\n        this.container.style.bottom = `${parseInt(this.container.style.bottom, 10) - parseInt(this.lastDrag.y, 10)}px`;\\r\\n      }\\r\\n      // We make focus on editor after drag modal windows to prevent lose focus.\\r\\n      this.focus();\\r\\n      // Restore mouse events on iframe.\\r\\n      // this.iframe.style['pointer-events'] = 'auto';\\r\\n      document.body.style['user-select'] = '';\\r\\n      // Restore static state of iframe if we use Internet Explorer.\\r\\n      if (this.isIE11()) {\\r\\n        // this.iframe.style['position'] = null;\\r\\n      }\\r\\n      // Active text select event.\\r\\n      Util.removeClass(document.body, 'wrs_noselect');\\r\\n      Util.removeClass(this.overlay, 'wrs_overlay_active');\\r\\n    }\\r\\n    this.dragDataObject = null;\\r\\n    this.resizeDataObject = null;\\r\\n    this.initialWidth = null;\\r\\n    this.leftScale = null;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Recalculates scale for modal when resize browser window.\\r\\n   */\\r\\n  onWindowResize() {\\r\\n    this.recalculateScrollBar();\\r\\n    this.recalculatePosition();\\r\\n    this.recalculateScale();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Triggers keyboard events:\\r\\n   * - Tab key tab to go to submit button.\\r\\n   * - Esc key to close the modal dialog.\\r\\n   * @param {KeyboardEvent} keyboardEvent - The keyboard event.\\r\\n   */\\r\\n  onKeyDown(keyboardEvent) {\\r\\n    if (keyboardEvent.key !== undefined) {\\r\\n      // Popupmessage is not oppened.\\r\\n      if (this.popup.overlayWrapper.style.display !== 'block') {\\r\\n        // Code to detect Esc event\\r\\n        if (keyboardEvent.key === 'Escape' || keyboardEvent.key === 'Esc') {\\r\\n          if (this.properties.open) {\\r\\n            this.contentManager.onKeyDown(keyboardEvent);\\r\\n          }\\r\\n        } else if (keyboardEvent.shiftKey && keyboardEvent.key === 'Tab') { // Code to detect shift Tab event.\\r\\n          if (document.activeElement === this.cancelButton) {\\r\\n            this.submitButton.focus();\\r\\n            keyboardEvent.stopPropagation();\\r\\n            keyboardEvent.preventDefault();\\r\\n          } else {\\r\\n            this.contentManager.onKeyDown(keyboardEvent);\\r\\n          }\\r\\n        } else if (keyboardEvent.key === 'Tab') { // Code to detect Tab event.\\r\\n          if (document.activeElement === this.submitButton) {\\r\\n            this.cancelButton.focus();\\r\\n            keyboardEvent.stopPropagation();\\r\\n            keyboardEvent.preventDefault();\\r\\n          } else {\\r\\n            this.contentManager.onKeyDown(keyboardEvent);\\r\\n          }\\r\\n        }\\r\\n      } else { // Popupmessage oppened.\\r\\n        this.popup.onKeyDown(keyboardEvent);\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Recalculating position for modal dialog when the browser is resized.\\r\\n   */\\r\\n  recalculatePosition() {\\r\\n    this.container.style.right = `${Math.min(parseInt(this.container.style.right, 10), window.innerWidth - this.scrollbarWidth - this.container.offsetWidth)}px`;\\r\\n    if (parseInt(this.container.style.right, 10) < 0) {\\r\\n      this.container.style.right = '0px';\\r\\n    }\\r\\n    this.container.style.bottom = `${Math.min(parseInt(this.container.style.bottom, 10), window.innerHeight - this.container.offsetHeight)}px`;\\r\\n    if (parseInt(this.container.style.bottom, 10) < 0) {\\r\\n      this.container.style.bottom = '0px';\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Recalculating scale for modal when the browser is resized.\\r\\n   */\\r\\n  recalculateScale() {\\r\\n    let sizeModificated = false;\\r\\n    if (parseInt(this.container.style.width, 10) > 580) {\\r\\n      this.container.style.width = `${Math.min(parseInt(this.container.style.width, 10), window.innerWidth - this.scrollbarWidth)}px`;\\r\\n      sizeModificated = true;\\r\\n    } else {\\r\\n      this.container.style.width = '580px';\\r\\n      sizeModificated = true;\\r\\n    }\\r\\n    if (parseInt(this.container.style.height, 10) > 338) {\\r\\n      this.container.style.height = `${Math.min(parseInt(this.container.style.height, 10), window.innerHeight)}px`;\\r\\n      sizeModificated = true;\\r\\n    } else {\\r\\n      this.container.style.height = '338px';\\r\\n      sizeModificated = true;\\r\\n    }\\r\\n    if (sizeModificated) {\\r\\n      this.recalculateSize();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Recalculating width of browser scroll bar.\\r\\n   */\\r\\n  recalculateScrollBar() {\\r\\n    this.hasScrollBar = window.innerWidth > document.documentElement.clientWidth;\\r\\n    if (this.hasScrollBar) {\\r\\n      this.scrollbarWidth = this.getScrollBarWidth();\\r\\n    } else {\\r\\n      this.scrollbarWidth = 0;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Hide soft keyboards on iOS devices.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  hideKeyboard() {\\r\\n    // iOS keyboard can't be detected or hide directly from JavaScript.\\r\\n    // So, this method simulates that user focus a text input and blur\\r\\n    // the selection.\\r\\n    const inputField = document.createElement('input');\\r\\n    this.container.appendChild(inputField);\\r\\n    inputField.focus();\\r\\n    inputField.blur();\\r\\n    // Is removed to not see it.\\r\\n    inputField.remove();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Focus to contentManager object.\\r\\n   */\\r\\n  focus() {\\r\\n    if (this.contentManager != null && typeof this.contentManager.onFocus !== 'undefined') {\\r\\n      this.contentManager.onFocus();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns true when the device is on portrait mode.\\r\\n   */\\r\\n  // eslint-disable-next-line class-methods-use-this\\r\\n  portraitMode() {\\r\\n    return window.innerHeight > window.innerWidth;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Event handler that change container size when IOS softkeyboard is opened.\\r\\n   */\\r\\n  handleOpenedIosSoftkeyboard() {\\r\\n    if (!this.iosSoftkeyboardOpened && this.iosDivHeight != null && this.iosDivHeight === `100${this.iosMeasureUnit}`) {\\r\\n      if (this.portraitMode()) {\\r\\n        this.setContainerHeight(`63${this.iosMeasureUnit}`);\\r\\n      } else {\\r\\n        this.setContainerHeight(`40${this.iosMeasureUnit}`);\\r\\n      }\\r\\n    }\\r\\n    this.iosSoftkeyboardOpened = true;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Event handler that change container size when IOS softkeyboard is closed.\\r\\n   */\\r\\n  handleClosedIosSoftkeyboard() {\\r\\n    this.iosSoftkeyboardOpened = false;\\r\\n    this.setContainerHeight(`100${this.iosMeasureUnit}`);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Change container sizes when orientation is changed on iOS.\\r\\n   */\\r\\n  orientationChangeIosSoftkeyboard() {\\r\\n    if (this.iosSoftkeyboardOpened) {\\r\\n      if (this.portraitMode()) {\\r\\n        this.setContainerHeight(`63${this.iosMeasureUnit}`);\\r\\n      } else {\\r\\n        this.setContainerHeight(`40${this.iosMeasureUnit}`);\\r\\n      }\\r\\n    } else {\\r\\n      this.setContainerHeight(`100${this.iosMeasureUnit}`);\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Change container sizes when orientation is changed on Android.\\r\\n   */\\r\\n  orientationChangeAndroidSoftkeyboard() {\\r\\n    this.setContainerHeight('100%');\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Set iframe container height.\\r\\n   * @param {Number} height - New height.\\r\\n   */\\r\\n  setContainerHeight(height) {\\r\\n    this.iosDivHeight = height;\\r\\n    this.wrapper.style.height = height;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Check content of editor before close action.\\r\\n   */\\r\\n  showPopUpMessage() {\\r\\n    if (this.properties.state === 'minimized') {\\r\\n      this.stack();\\r\\n    }\\r\\n    this.popup.show();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the tithle of the modal dialog.\\r\\n   * @param {String} title - Modal dialog title.\\r\\n   */\\r\\n  setTitle(title) {\\r\\n    this.title.innerHTML = title;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the id of an element, adding the instance number to\\r\\n   * the element class name:\\r\\n   * className --> className[idNumber]\\r\\n   * @param {String} className - The element class name.\\r\\n   * @returns {String} A string appending the instance id to the className.\\r\\n   */\\r\\n  getElementId(className) {\\r\\n    return `${className}[${this.instanceId}]`;\\r\\n  }\\r\\n}\\r\\n\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.44 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.44\\\\\\\"\\\\n   id=\\\\\\\"svg3803\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata3809\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs3807\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image3811\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\\\nvElEQVRYw+3ZSw0CMRSF4b8T9iAFB4wDkDAWcICEkTA4GAeAA3AADurgsCkbAgsSMrmFczZNd1/a\\\\n3vSVJFFDGipJNdBZaRdAB2wC2TIwAgNAkrQEjsA86GBegDZJGoF18JnfJtVR9idXvaGGGmrod/b6\\\\nV9kD14k9LbD6FDqUM8CU2b2Deo0aaqihhhpqqKGGGhr1hH/wiP469FaBMzflEhc9PZKQ1CtmsqRO\\\\nEunpHbeNNN3A+dFJ/mf6V+gduGPIoUgKLbAAAAAASUVORK5CYII=\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.44\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"export default \\\"<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"UTF-8\\\\\\\" standalone=\\\\\\\"no\\\\\\\"?>\\\\n<svg\\\\n   xmlns:dc=\\\\\\\"http://purl.org/dc/elements/1.1/\\\\\\\"\\\\n   xmlns:cc=\\\\\\\"http://creativecommons.org/ns#\\\\\\\"\\\\n   xmlns:rdf=\\\\\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\\\\\"\\\\n   xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns:xlink=\\\\\\\"http://www.w3.org/1999/xlink\\\\\\\"\\\\n   viewBox=\\\\\\\"0 0 13.44 13.76\\\\\\\"\\\\n   height=\\\\\\\"13.76\\\\\\\"\\\\n   width=\\\\\\\"13.44\\\\\\\"\\\\n   id=\\\\\\\"svg22\\\\\\\"\\\\n   version=\\\\\\\"1.1\\\\\\\">\\\\n  <metadata\\\\n     id=\\\\\\\"metadata28\\\\\\\">\\\\n    <rdf:RDF>\\\\n      <cc:Work\\\\n         rdf:about=\\\\\\\"\\\\\\\">\\\\n        <dc:format>image/svg+xml</dc:format>\\\\n        <dc:type\\\\n           rdf:resource=\\\\\\\"http://purl.org/dc/dcmitype/StillImage\\\\\\\" />\\\\n        <dc:title></dc:title>\\\\n      </cc:Work>\\\\n    </rdf:RDF>\\\\n  </metadata>\\\\n  <defs\\\\n     id=\\\\\\\"defs26\\\\\\\" />\\\\n  <image\\\\n     y=\\\\\\\"0\\\\\\\"\\\\n     x=\\\\\\\"0\\\\\\\"\\\\n     id=\\\\\\\"image30\\\\\\\"\\\\n     xlink:href=\\\\\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\\\nvUlEQVRYw+3ZsQ3CMBCF4d8WFekZgBqWIDUDZACmYBQWYIn0pGYAegZIexROERHRIBTdhXeVy08+\\\\nyT4/JzMjQmWCVBjoarSugK0z3/0degKODjeyBy5Am8ysARrnnT8nM7sCa+fQLgdAAlQ6ngQVVFBB\\\\nfzeUTK6t8VAwU328ztV6QQUVVFBBBRVUUEG9Ds41sJvZs/8GelDrlw7tAjhvmZLo9o6RD4bEGUp+\\\\nX1My/I0T4HN4rrcASf9M/wp9ASNzIKYYz2hAAAAAAElFTkSuQmCC\\\\n\\\\\\\"\\\\n     style=\\\\\\\"image-rendering:optimizeQuality\\\\\\\"\\\\n     preserveAspectRatio=\\\\\\\"none\\\\\\\"\\\\n     height=\\\\\\\"13.76\\\\\\\"\\\\n     width=\\\\\\\"13.44\\\\\\\" />\\\\n</svg>\\\\n\\\"\",\"/* eslint-disable */\\nvar polyfills;\\nexport default polyfills;\\n\\n// Polyfills.\\n/*! http://mths.be/codepointat v0.1.0 by @mathias */\\nif (!String.prototype.codePointAt) {\\n  (function () {\\n    'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\\n    var codePointAt = function (position) {\\n      if (this == null) {\\n        throw TypeError();\\n      }\\n      var string = String(this);\\n      var size = string.length;\\n      // `ToInteger`\\n      var index = position ? Number(position) : 0;\\n      if (index != index) { // better `isNaN`\\n        index = 0;\\n      }\\n      // Account for out-of-bounds indices:\\n      if (index < 0 || index >= size) {\\n        return undefined;\\n      }\\n      // Get the first code unit\\n      var first = string.charCodeAt(index);\\n      var second;\\n      if ( // check if it’s the start of a surrogate pair\\n        first >= 0xD800 && first <= 0xDBFF && // high surrogate\\n        size > index + 1 // there is a next code unit\\n      ) {\\n        second = string.charCodeAt(index + 1);\\n        if (second >= 0xDC00 && second <= 0xDFFF) { // low surrogate\\n          // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\\n          return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\\n        }\\n      }\\n      return first;\\n    };\\n    if (Object.defineProperty) {\\n      Object.defineProperty(String.prototype, 'codePointAt', {\\n        'value': codePointAt,\\n        'configurable': true,\\n        'writable': true\\n      });\\n    } else {\\n      String.prototype.codePointAt = codePointAt;\\n    }\\n  }());\\n}\\n\\n// Object.assign polyfill.\\nif (typeof Object.assign != 'function') {\\n  // Must be writable: true, enumerable: false, configurable: true\\n  Object.defineProperty(Object, \\\"assign\\\", {\\n    value: function assign(target, varArgs) { // .length of function is 2\\n      'use strict';\\n      if (target == null) { // TypeError if undefined or null\\n        throw new TypeError('Cannot convert undefined or null to object');\\n      }\\n\\n      var to = Object(target);\\n\\n      for (var index = 1; index < arguments.length; index++) {\\n        var nextSource = arguments[index];\\n\\n        if (nextSource != null) { // Skip over if undefined or null\\n          for (var nextKey in nextSource) {\\n            // Avoid bugs when hasOwnProperty is shadowed\\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\\n              to[nextKey] = nextSource[nextKey];\\n            }\\n          }\\n        }\\n      }\\n      return to;\\n    },\\n    writable: true,\\n    configurable: true\\n  });\\n}\\n\",\"import Parser from './parser';\\r\\nimport Util from './util';\\r\\nimport StringManager from './stringmanager';\\r\\nimport ContentManager from './contentmanager';\\r\\nimport Latex from './latex';\\r\\nimport MathML from './mathml';\\r\\nimport CustomEditors from './customeditors';\\r\\nimport Configuration from './configuration';\\r\\nimport jsProperties from './jsvariables';\\r\\nimport Event from './event';\\r\\nimport Listeners from './listeners';\\r\\nimport Image from './image';\\r\\nimport ServiceProvider from './serviceprovider';\\r\\nimport ModalDialog from './modal';\\r\\nimport './polyfills';\\r\\nimport '../styles/styles.css';\\r\\n\\r\\n/**\\r\\n * @typedef {Object} CoreProperties\\r\\n * @property {ServiceProviderProperties} serviceProviderProperties\\r\\n * - The ServiceProvider class properties. *\\r\\n */\\r\\nexport default class Core {\\r\\n  /**\\r\\n   * @classdesc\\r\\n   * This class represents MathType integration Core, managing the following:\\r\\n   * - Integration initialization.\\r\\n   * - Event managing.\\r\\n   * - Insertion of formulas into the edit area.\\r\\n   * ```js\\r\\n   *       let core = new Core();\\r\\n   *       core.addListener(listener);\\r\\n   *       core.language = 'en';\\r\\n   *\\r\\n   *       // Initializing Core class.\\r\\n   *       core.init(configurationService);\\r\\n   * ```\\r\\n   * @constructs\\r\\n   * Core constructor.\\r\\n   * @param {CoreProperties}\\r\\n   */\\r\\n  constructor(coreProperties) {\\r\\n    /**\\r\\n     * Language. Needed for accessibility and locales. 'en' by default.\\r\\n     * @type {String}\\r\\n     */\\r\\n    this.language = 'en';\\r\\n\\r\\n    /**\\r\\n     * Edit mode, 'images' by default. Admits the following values:\\r\\n     * - images\\r\\n     * - latex\\r\\n     * @type {String}\\r\\n     */\\r\\n    this.editMode = 'images';\\r\\n\\r\\n    /**\\r\\n     * Modal dialog instance.\\r\\n     * @type {ModalDialog}\\r\\n     */\\r\\n    this.modalDialog = null;\\r\\n\\r\\n    /**\\r\\n     * The instance of {@link CustomEditors}. By default\\r\\n     * the only custom editor is the Chemistry editor.\\r\\n     * @type {CustomEditors}\\r\\n     */\\r\\n    this.customEditors = new CustomEditors();\\r\\n\\r\\n    /**\\r\\n     * Chemistry editor.\\r\\n     * @type {CustomEditor}\\r\\n     */\\r\\n    const chemEditorParams = {\\r\\n      name: 'Chemistry',\\r\\n      toolbar: 'chemistry',\\r\\n      icon: 'chem.png',\\r\\n      confVariable: 'chemEnabled',\\r\\n      title: 'ChemType',\\r\\n      tooltip: 'Insert a chemistry formula - ChemType', // TODO: Localize tooltip.\\r\\n    };\\r\\n\\r\\n    this.customEditors.addEditor('chemistry', chemEditorParams);\\r\\n\\r\\n    /**\\r\\n     * Environment properties. This object contains data about the integration platform.\\r\\n     * @typedef IntegrationEnvironment\\r\\n     * @property {String} IntegrationEnvironment.editor - Editor name. For example the HTML editor.\\r\\n     * @property {String} IntegrationEnvironment.mode - Integration save mode.\\r\\n     * @property {String} IntegrationEnvironment.version - Integration version.\\r\\n     *\\r\\n     */\\r\\n\\r\\n    /**\\r\\n     * The environment properties object.\\r\\n     * @type {IntegrationEnvironment}\\r\\n     */\\r\\n    this.environment = {};\\r\\n\\r\\n    /**\\r\\n     * @typedef EditionProperties\\r\\n     * @property {Boolean} editionProperties.isNewElement - True if the formula is a new one.\\r\\n     * False otherwise.\\r\\n     * @property {HTMLImageElement} editionProperties.temporalImage- The image element.\\r\\n     * Null if the formula is new.\\r\\n     * @property {Range} editionProperties.latexRange - Tha range that contains the LaTeX formula.\\r\\n     * @property {Range} editionProperties.range - The range that contains the image element.\\r\\n     * @property {String} editionProperties.editMode - The edition mode. 'images' by default.\\r\\n     */\\r\\n\\r\\n    /**\\r\\n     * The properties of the current edition process.\\r\\n     * @type {EditionProperties}\\r\\n     */\\r\\n    this.editionProperties = {};\\r\\n\\r\\n    this.editionProperties.isNewElement = true;\\r\\n    this.editionProperties.temporalImage = null;\\r\\n    this.editionProperties.latexRange = null;\\r\\n    this.editionProperties.range = null;\\r\\n\\r\\n    /**\\r\\n     * The {@link IntegrationModel} instance.\\r\\n     * @type {IntegrationModel}\\r\\n     */\\r\\n    this.integrationModel = null;\\r\\n\\r\\n    /**\\r\\n     * The {@link ContentManager} instance.\\r\\n     * @type {ContentManager}\\r\\n     */\\r\\n    this.contentManager = null;\\r\\n\\r\\n    /**\\r\\n     * The current browser.\\r\\n     * @type {String}\\r\\n     */\\r\\n    this.browser = (() => {\\r\\n      const ua = navigator.userAgent;\\r\\n      let browser = 'none';\\r\\n      if (ua.search('Edge/') >= 0) {\\r\\n        browser = 'EDGE';\\r\\n      } else if (ua.search('Chrome/') >= 0) {\\r\\n        browser = 'CHROME';\\r\\n      } else if (ua.search('Trident/') >= 0) {\\r\\n        browser = 'IE';\\r\\n      } else if (ua.search('Firefox/') >= 0) {\\r\\n        browser = 'FIREFOX';\\r\\n      } else if (ua.search('Safari/') >= 0) {\\r\\n        browser = 'SAFARI';\\r\\n      }\\r\\n      return browser;\\r\\n    }\\r\\n    )();\\r\\n\\r\\n    /**\\r\\n     * Plugin listeners.\\r\\n     * @type {Array.<Object>}\\r\\n     */\\r\\n    this.listeners = new Listeners();\\r\\n\\r\\n    /**\\r\\n     * Service provider properties.\\r\\n     * @type {ServiceProviderProperties}\\r\\n     */\\r\\n    this.serviceProviderProperties = {};\\r\\n    if ('serviceProviderProperties' in coreProperties) {\\r\\n      this.serviceProviderProperties = coreProperties.serviceProviderProperties;\\r\\n    } else {\\r\\n      throw new Error('serviceProviderProperties property missing.');\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Static property.\\r\\n   * Core listeners.\\r\\n   * @private\\r\\n   * @type {Listeners}\\r\\n   */\\r\\n  static get globalListeners() {\\r\\n    return Core._globalListeners;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Static property setter.\\r\\n   * Set core listeners.\\r\\n   * @param {Listeners} value - The property value.\\r\\n   * @ignore\\r\\n   */\\r\\n  static set globalListeners(value) {\\r\\n    Core._globalListeners = value;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Core state. Says if it was loaded previously.\\r\\n   * True when Core.init was called. Otherwise, false.\\r\\n   * @private\\r\\n   * @type {Boolean}\\r\\n   */\\r\\n  static get initialized() {\\r\\n    return Core._initialized;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Core state. Says if it was loaded previously.\\r\\n   * @param {Boolean} value - True to say that Core.init was called. Otherwise, false.\\r\\n   * @ignore\\r\\n   */\\r\\n  static set initialized(value) {\\r\\n    Core._initialized = value;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the {@link Core.integrationModel} property.\\r\\n   * @param {IntegrationModel} integrationModel - The {@link IntegrationModel} property.\\r\\n   */\\r\\n  setIntegrationModel(integrationModel) {\\r\\n    this.integrationModel = integrationModel;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the {@link Core.environment} property.\\r\\n   * @param {IntegrationEnvironment} integrationEnvironment -\\r\\n   * The {@link IntegrationEnvironment} object.\\r\\n   */\\r\\n  setEnvironment(integrationEnvironment) {\\r\\n    if ('editor' in integrationEnvironment) {\\r\\n      this.environment.editor = integrationEnvironment.editor;\\r\\n    }\\r\\n    if ('mode' in integrationEnvironment) {\\r\\n      this.environment.mode = integrationEnvironment.mode;\\r\\n    }\\r\\n    if ('version' in integrationEnvironment) {\\r\\n      this.environment.version = integrationEnvironment.version;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the current {@link ModalDialog} instance.\\r\\n   * @returns {ModalDialog} The current {@link ModalDialog} instance.\\r\\n   */\\r\\n  getModalDialog() {\\r\\n    return this.modalDialog;\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Inits the {@link Core} class, doing the following:\\r\\n   * - Calls asynchronously configuration service, retrieving the backend configuration in a JSON.\\r\\n   * - Updates {@link Configuration} class with the previous configuration properties.\\r\\n   * - Updates the {@link ServiceProvider} class using the configuration service path as reference.\\r\\n   * - Loads language strings.\\r\\n   * - Fires onLoad event.\\r\\n   * @param {Object} serviceParameters - Service parameters.\\r\\n   */\\r\\n  init() {\\r\\n    if (!Core.initialized) {\\r\\n      const serviceProviderListener = Listeners.newListener('onInit', () => {\\r\\n        const jsConfiguration = ServiceProvider.getService('configurationjs', '', 'get');\\r\\n        const jsonConfiguration = JSON.parse(jsConfiguration);\\r\\n        Configuration.addConfiguration(jsonConfiguration);\\r\\n        // Adding JavaScript (not backend) configuration variables.\\r\\n        Configuration.addConfiguration(jsProperties);\\r\\n        // Fire 'onLoad' event:\\r\\n        // All integration must listen this event in order to know if the plugin\\r\\n        // has been properly loaded.\\r\\n        StringManager.language = this.language;\\r\\n        this.listeners.fire('onLoad', {});\\r\\n      });\\r\\n\\r\\n      ServiceProvider.addListener(serviceProviderListener);\\r\\n      ServiceProvider.init(this.serviceProviderProperties);\\r\\n\\r\\n      Core.initialized = true;\\r\\n    } else {\\r\\n      // Case when there are more than two editor instances.\\r\\n      // After the first editor all the other editors don't need to load any file or service.\\r\\n      this.listeners.fire('onLoad', {});\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Adds a {@link Listener} to the current instance of the {@link Core} class.\\r\\n   * @param {Listener} listener - The listener object.\\r\\n   */\\r\\n  addListener(listener) {\\r\\n    this.listeners.add(listener);\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Adds the global {@link Listener} instance to {@link Core} class.\\r\\n   * @param {Listener} listener - The event listener to be added.\\r\\n   * @static\\r\\n   */\\r\\n  static addGlobalListener(listener) {\\r\\n    Core.globalListeners.add(listener);\\r\\n  }\\r\\n\\r\\n  beforeUpdateFormula(mathml, wirisProperties) {\\r\\n    /**\\r\\n     * This event is fired before updating the formula.\\r\\n     * @type {Object}\\r\\n     * @property {String} mathml - MathML to be transformed.\\r\\n     * @property {String} editMode - Edit mode.\\r\\n     * @property {Object} wirisProperties - Extra attributes for the formula.\\r\\n     * @property {String} language - Formula language.\\r\\n     */\\r\\n    const beforeUpdateEvent = new Event();\\r\\n\\r\\n    beforeUpdateEvent.mathml = mathml;\\r\\n\\r\\n    // Cloning wirisProperties object\\r\\n    // We don't want wirisProperties object modified.\\r\\n    beforeUpdateEvent.wirisProperties = {};\\r\\n\\r\\n    if (wirisProperties != null) {\\r\\n      Object.keys(wirisProperties).forEach((attr) => {\\r\\n        beforeUpdateEvent.wirisProperties[attr] = wirisProperties[attr];\\r\\n      });\\r\\n    }\\r\\n\\r\\n\\r\\n    // Read only.\\r\\n    beforeUpdateEvent.language = this.language;\\r\\n    beforeUpdateEvent.editMode = this.editMode;\\r\\n\\r\\n    if (this.listeners.fire('onBeforeFormulaInsertion', beforeUpdateEvent)) {\\r\\n      return {};\\r\\n    }\\r\\n\\r\\n    if (Core.globalListeners.fire('onBeforeFormulaInsertion', beforeUpdateEvent)) {\\r\\n      return {};\\r\\n    }\\r\\n\\r\\n    return {\\r\\n      mathml: beforeUpdateEvent.mathml,\\r\\n      wirisProperties: beforeUpdateEvent.wirisProperties,\\r\\n    };\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Converts a MathML into it's correspondent image and inserts the image is\\r\\n   * inserted in a HTMLElement target by creating\\r\\n   * a new image or updating an existing one.\\r\\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the insertion.\\r\\n   * @param {Window} windowTarget - The window element where the editable content is.\\r\\n   * @param {String} mathml - The MathML.\\r\\n   * @param {Array.<Object>} wirisProperties - The extra attributes for the formula.\\r\\n   * @returns {ReturnObject} - Object with the information of the node or latex to insert.\\r\\n   */\\r\\n  insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\\r\\n    /**\\r\\n     * It is the object with the information of the node or latex to insert.\\r\\n     * @typedef ReturnObject\\r\\n     * @property {Node} [node] - The DOM node to insert.\\r\\n     * @property {String} [latex] - The latex to insert.\\r\\n     */\\r\\n    const returnObject = {};\\r\\n\\r\\n    if (!mathml) {\\r\\n      this.insertElementOnSelection(null, focusElement, windowTarget);\\r\\n    } else if (this.editMode === 'latex') {\\r\\n      returnObject.latex = Latex.getLatexFromMathML(mathml);\\r\\n      // this.integrationModel.getNonLatexNode is an integration wrapper\\r\\n      // to have special behaviours for nonLatex.\\r\\n      // Not all the integrations have special behaviours for nonLatex.\\r\\n      if (!!this.integrationModel.fillNonLatexNode && !returnObject.latex) {\\r\\n        const afterUpdateEvent = new Event();\\r\\n        afterUpdateEvent.editMode = this.editMode;\\r\\n        afterUpdateEvent.windowTarget = windowTarget;\\r\\n        afterUpdateEvent.focusElement = focusElement;\\r\\n        afterUpdateEvent.latex = returnObject.latex;\\r\\n        this.integrationModel.fillNonLatexNode(afterUpdateEvent, windowTarget, mathml);\\r\\n      } else {\\r\\n        returnObject.node = windowTarget.document.createTextNode(`$$${returnObject.latex}$$`);\\r\\n      }\\r\\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\\r\\n    } else {\\r\\n      returnObject.node = Parser.mathmlToImgObject(windowTarget.document,\\r\\n        mathml,\\r\\n        wirisProperties, this.language);\\r\\n\\r\\n      this.insertElementOnSelection(returnObject.node, focusElement, windowTarget);\\r\\n    }\\r\\n\\r\\n    return returnObject;\\r\\n  }\\r\\n\\r\\n  afterUpdateFormula(focusElement, windowTarget, node, latex) {\\r\\n    /**\\r\\n     * This event is fired after update the formula.\\r\\n     * @type {Event}\\r\\n     * @param {String} editMode - edit mode.\\r\\n     * @param {Object} windowTarget - target window.\\r\\n     * @param {Object} focusElement - target element to be focused after update.\\r\\n     * @param {String} latex - LaTeX generated by the formula (editMode=latex).\\r\\n     * @param {Object} node - node generated after update the formula (text if LaTeX img otherwise).\\r\\n     */\\r\\n    const afterUpdateEvent = new Event();\\r\\n    afterUpdateEvent.editMode = this.editMode;\\r\\n    afterUpdateEvent.windowTarget = windowTarget;\\r\\n    afterUpdateEvent.focusElement = focusElement;\\r\\n    afterUpdateEvent.node = node;\\r\\n    afterUpdateEvent.latex = latex;\\r\\n\\r\\n    if (this.listeners.fire('onAfterFormulaInsertion', afterUpdateEvent)) {\\r\\n      return {};\\r\\n    }\\r\\n\\r\\n    if (Core.globalListeners.fire('onAfterFormulaInsertion', afterUpdateEvent)) {\\r\\n      return {};\\r\\n    }\\r\\n\\r\\n    return {};\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Sets the caret after a given Node and set the focus to the owner document.\\r\\n   * @param {Node} node - The Node element.\\r\\n   */\\r\\n  placeCaretAfterNode(node) {\\r\\n    this.integrationModel.getSelection();\\r\\n    const nodeDocument = node.ownerDocument;\\r\\n    if (typeof nodeDocument.getSelection !== 'undefined' && !!node.parentElement) {\\r\\n      const range = nodeDocument.createRange();\\r\\n      range.setStartAfter(node);\\r\\n      range.collapse(true);\\r\\n      const selection = nodeDocument.getSelection();\\r\\n      selection.removeAllRanges();\\r\\n      selection.addRange(range);\\r\\n      nodeDocument.body.focus();\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Replaces a Selection object with an HTMLElement.\\r\\n   * @param {HTMLElement} element - The HTMLElement to replace the selection.\\r\\n   * @param {HTMLElement} focusElement - The HTMLElement to be focused after the replace.\\r\\n   * @param {Window} windowTarget - The window target.\\r\\n   */\\r\\n  insertElementOnSelection(element, focusElement, windowTarget) {\\r\\n    if (this.editionProperties.isNewElement) {\\r\\n      if (element) {\\r\\n        if (focusElement.type === 'textarea') {\\r\\n          Util.updateTextArea(focusElement, element.textContent);\\r\\n        } else if (document.selection && document.getSelection === 0) {\\r\\n          let range = windowTarget.document.selection.createRange();\\r\\n          windowTarget.document.execCommand('InsertImage', false, element.src);\\r\\n\\r\\n          if (!('parentElement' in range)) {\\r\\n            windowTarget.document.execCommand('delete', false);\\r\\n            range = windowTarget.document.selection.createRange();\\r\\n            windowTarget.document.execCommand('InsertImage', false, element.src);\\r\\n          }\\r\\n\\r\\n          if ('parentElement' in range) {\\r\\n            const temporalObject = range.parentElement();\\r\\n\\r\\n            if (temporalObject.nodeName.toUpperCase() === 'IMG') {\\r\\n              temporalObject.parentNode.replaceChild(element, temporalObject);\\r\\n            } else {\\r\\n              // IE9 fix: parentNode() does not return the IMG node,\\r\\n              // returns the parent DIV node. In IE < 9, pasteHTML does not work well.\\r\\n              range.pasteHTML(Util.createObjectCode(element));\\r\\n            }\\r\\n          }\\r\\n        } else {\\r\\n          const editorSelection = this.integrationModel.getSelection();\\r\\n          let range = null;\\r\\n          // In IE is needed keep the range due to after focus the modal window\\r\\n          // it can't be retrieved the last selection.\\r\\n          if (this.editionProperties.range) {\\r\\n            ({ range } = this.editionProperties);\\r\\n            this.editionProperties.range = null;\\r\\n          } else {\\r\\n            range = editorSelection.getRangeAt(0);\\r\\n          }\\r\\n\\r\\n          // Delete if something was surrounded.\\r\\n          range.deleteContents();\\r\\n\\r\\n          let node = range.startContainer;\\r\\n          const position = range.startOffset;\\r\\n\\r\\n          if (node.nodeType === 3) { // TEXT_NODE.\\r\\n            node = node.splitText(position);\\r\\n            node.parentNode.insertBefore(element, node);\\r\\n          } else if (node.nodeType === 1) { // ELEMENT_NODE.\\r\\n            node.insertBefore(element, node.childNodes[position]);\\r\\n          }\\r\\n\\r\\n          this.placeCaretAfterNode(element);\\r\\n        }\\r\\n      } else if (focusElement.type === 'textarea') {\\r\\n        focusElement.focus();\\r\\n      } else {\\r\\n        const editorSelection = this.integrationModel.getSelection();\\r\\n        editorSelection.removeAllRanges();\\r\\n\\r\\n        if (this.editionProperties.range) {\\r\\n          const { range } = this.editionProperties;\\r\\n          this.editionProperties.range = null;\\r\\n          editorSelection.addRange(range);\\r\\n        }\\r\\n      }\\r\\n    } else if (this.editionProperties.latexRange) {\\r\\n      if (document.selection && document.getSelection === 0) {\\r\\n        this.editionProperties.isNewElement = true;\\r\\n        this.editionProperties.latexRange.select();\\r\\n        this.insertElementOnSelection(element, focusElement, windowTarget);\\r\\n      } else {\\r\\n        this.editionProperties.latexRange.deleteContents();\\r\\n        this.editionProperties.latexRange.insertNode(element);\\r\\n        this.placeCaretAfterNode(element);\\r\\n      }\\r\\n    } else if (focusElement.type === 'textarea') {\\r\\n      let item;\\r\\n      // Wrapper for some integrations that can have special behaviours to show latex.\\r\\n      if (typeof this.integrationModel.getSelectedItem !== 'undefined') {\\r\\n        item = this.integrationModel.getSelectedItem(focusElement, false);\\r\\n      } else {\\r\\n        item = Util.getSelectedItemOnTextarea(focusElement);\\r\\n      }\\r\\n      Util.updateExistingTextOnTextarea(focusElement,\\r\\n        element.textContent,\\r\\n        item.startPosition,\\r\\n        item.endPosition);\\r\\n    } else {\\r\\n      if (element && element.nodeName.toLowerCase() === 'img') { // Editor empty, formula has been erased on edit.\\r\\n        // There are editors (e.g: CKEditor) that put attributes in images.\\r\\n        // We don't allow that behaviour in our images.\\r\\n        Image.removeImgDataAttributes(this.editionProperties.temporalImage);\\r\\n        // Clone is needed to maintain event references to temporalImage.\\r\\n        Image.clone(element, this.editionProperties.temporalImage);\\r\\n      } else {\\r\\n        this.editionProperties.temporalImage.remove();\\r\\n      }\\r\\n      this.placeCaretAfterNode(this.editionProperties.temporalImage);\\r\\n    }\\r\\n  }\\r\\n\\r\\n\\r\\n  /**\\r\\n   * Opens a modal dialog containing MathType editor..\\r\\n   * @param {HTMLElement} target - The target HTMLElement where formulas should be inserted.\\r\\n   * @param {Boolean} isIframe - True if the target HTMLElement is an iframe. False otherwise.\\r\\n   */\\r\\n  openModalDialog(target, isIframe) {\\r\\n    // Textarea elements don't have normal document ranges. It only accepts latex edit.\\r\\n    this.editMode = 'images';\\r\\n\\r\\n    // In IE is needed keep the range due to after focus the modal window\\r\\n    // it can't be retrieved the last selection.\\r\\n    try {\\r\\n      if (isIframe) {\\r\\n        // Is needed focus the target first.\\r\\n        target.contentWindow.focus();\\r\\n        const selection = target.contentWindow.getSelection();\\r\\n        this.editionProperties.range = selection.getRangeAt(0);\\r\\n      } else {\\r\\n        // Is needed focus the target first.\\r\\n        target.focus();\\r\\n        const selection = getSelection();\\r\\n        this.editionProperties.range = selection.getRangeAt(0);\\r\\n      }\\r\\n    } catch (e) {\\r\\n      this.editionProperties.range = null;\\r\\n    }\\r\\n\\r\\n    if (isIframe === undefined) {\\r\\n      isIframe = true;\\r\\n    }\\r\\n\\r\\n    this.editionProperties.latexRange = null;\\r\\n\\r\\n    if (target) {\\r\\n      let selectedItem;\\r\\n      if (typeof this.integrationModel.getSelectedItem !== 'undefined') {\\r\\n        selectedItem = this.integrationModel.getSelectedItem(target, isIframe);\\r\\n      } else {\\r\\n        selectedItem = Util.getSelectedItem(target, isIframe);\\r\\n      }\\r\\n\\r\\n      // Check LaTeX if and only if the node is a text node (nodeType==3).\\r\\n      if (selectedItem) {\\r\\n        // Case when image was selected and button pressed.\\r\\n        if (!selectedItem.caretPosition && Util.containsClass(selectedItem.node, Configuration.get('imageClassName'))) {\\r\\n          this.editionProperties.temporalImage = selectedItem.node;\\r\\n          this.editionProperties.isNewElement = false;\\r\\n        } else if (selectedItem.node.nodeType === 3) {\\r\\n          // If it's a text node means that editor is working with LaTeX.\\r\\n          if (this.integrationModel.getMathmlFromTextNode) {\\r\\n            // If integration has this function it isn't set range due to we don't\\r\\n            // know if it will be put into a textarea as a text or image.\\r\\n            const mathml = this.integrationModel.getMathmlFromTextNode(\\r\\n              selectedItem.node,\\r\\n              selectedItem.caretPosition,\\r\\n            );\\r\\n            if (mathml) {\\r\\n              this.editMode = 'latex';\\r\\n              this.editionProperties.isNewElement = false;\\r\\n              this.editionProperties.temporalImage = document.createElement('img');\\r\\n              this.editionProperties.temporalImage.setAttribute(\\r\\n                Configuration.get('imageMathmlAttribute'),\\r\\n                MathML.safeXmlEncode(mathml),\\r\\n              );\\r\\n            }\\r\\n          } else {\\r\\n            const latexResult = Latex.getLatexFromTextNode(\\r\\n              selectedItem.node,\\r\\n              selectedItem.caretPosition,\\r\\n            );\\r\\n            if (latexResult) {\\r\\n              const mathml = Latex.getMathMLFromLatex(latexResult.latex);\\r\\n              this.editMode = 'latex';\\r\\n              this.editionProperties.isNewElement = false;\\r\\n              this.editionProperties.temporalImage = document.createElement('img');\\r\\n              this.editionProperties.temporalImage.setAttribute(\\r\\n                Configuration.get('imageMathmlAttribute'),\\r\\n                MathML.safeXmlEncode(mathml),\\r\\n              );\\r\\n              const windowTarget = isIframe ? target.contentWindow : window;\\r\\n\\r\\n              if (target.tagName.toLowerCase() !== 'textarea') {\\r\\n                if (document.selection) {\\r\\n                  let leftOffset = 0;\\r\\n                  let previousNode = latexResult.startNode.previousSibling;\\r\\n\\r\\n                  while (previousNode) {\\r\\n                    leftOffset += Util.getNodeLength(previousNode);\\r\\n                    previousNode = previousNode.previousSibling;\\r\\n                  }\\r\\n\\r\\n                  this.editionProperties.latexRange = windowTarget.document.selection.createRange();\\r\\n                  this.editionProperties.latexRange.moveToElementText(\\r\\n                    latexResult.startNode.parentNode,\\r\\n                  );\\r\\n                  this.editionProperties.latexRange.move(\\r\\n                    'character',\\r\\n                    leftOffset + latexResult.startPosition,\\r\\n                  );\\r\\n                  this.editionProperties.latexRange.moveEnd(\\r\\n                    'character',\\r\\n                    latexResult.latex.length + 4,\\r\\n                  ); // Plus 4 for the '$$' characters.\\r\\n                } else {\\r\\n                  this.editionProperties.latexRange = windowTarget.document.createRange();\\r\\n                  this.editionProperties.latexRange.setStart(\\r\\n                    latexResult.startNode,\\r\\n                    latexResult.startPosition,\\r\\n                  );\\r\\n                  this.editionProperties.latexRange.setEnd(\\r\\n                    latexResult.endNode,\\r\\n                    latexResult.endPosition,\\r\\n                  );\\r\\n                }\\r\\n              }\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n      } else if (target.tagName.toLowerCase() === 'textarea') {\\r\\n        // By default editMode is 'images', but when target is a textarea it needs to be 'latex'.\\r\\n        this.editMode = 'latex';\\r\\n      }\\r\\n    }\\r\\n\\r\\n    // Setting an object with the editor parameters.\\r\\n    // Editor parameters can be customized in several ways:\\r\\n    // 1 - editorAttributes: Contains the default editor attributes,\\r\\n    //  usually the metrics in a comma separated string. Always exists.\\r\\n    // 2 - editorParameters: Object containing custom editor parameters.\\r\\n    // These parameters are defined in the backend. So they affects all integration instances.\\r\\n\\r\\n    // The backend send the default editor attributes in a coma separated\\r\\n    // with the following structure: key1=value1,key2=value2...\\r\\n    const defaultEditorAttributesArray = Configuration.get('editorAttributes').split(', ');\\r\\n    const defaultEditorAttributes = {};\\r\\n    for (let i = 0, len = defaultEditorAttributesArray.length; i < len; i += 1) {\\r\\n      const tempAttribute = defaultEditorAttributesArray[i].split('=');\\r\\n      const key = tempAttribute[0];\\r\\n      const value = tempAttribute[1];\\r\\n      defaultEditorAttributes[key] = value;\\r\\n    }\\r\\n    // Custom editor parameters.\\r\\n    const editorAttributes = {};\\r\\n    // Editor parameters in backend, usually configuration.ini.\\r\\n    const serverEditorParameters = Configuration.get('editorParameters');\\r\\n    // Editor parameters through JavaScript configuration.\\r\\n    const cliendEditorParameters = this.integrationModel.editorParameters;\\r\\n    Object.assign(editorAttributes, defaultEditorAttributes, serverEditorParameters);\\r\\n    Object.assign(editorAttributes, defaultEditorAttributes, cliendEditorParameters);\\r\\n\\r\\n    editorAttributes.language = this.language;\\r\\n    editorAttributes.rtl = this.integrationModel.rtl;\\r\\n\\r\\n    const contentManagerAttributes = {};\\r\\n    contentManagerAttributes.editorAttributes = editorAttributes;\\r\\n    contentManagerAttributes.language = this.language;\\r\\n    contentManagerAttributes.customEditors = this.customEditors;\\r\\n    contentManagerAttributes.environment = this.environment;\\r\\n\\r\\n    if (this.modalDialog == null) {\\r\\n      this.modalDialog = new ModalDialog(editorAttributes);\\r\\n      this.contentManager = new ContentManager(contentManagerAttributes);\\r\\n      // When an instance of ContentManager is created we need to wait until\\r\\n      // the ContentManager is ready by listening 'onLoad' event.\\r\\n      const listener = Listeners.newListener('onLoad', () => {\\r\\n        this.contentManager.isNewElement = this.editionProperties.isNewElement;\\r\\n        if (this.editionProperties.temporalImage != null) {\\r\\n          const mathML = MathML.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(Configuration.get('imageMathmlAttribute')));\\r\\n          this.contentManager.mathML = mathML;\\r\\n        }\\r\\n      });\\r\\n      this.contentManager.addListener(listener);\\r\\n      this.contentManager.init();\\r\\n      this.modalDialog.setContentManager(this.contentManager);\\r\\n      this.contentManager.setModalDialogInstance(this.modalDialog);\\r\\n    } else {\\r\\n      this.contentManager.isNewElement = this.editionProperties.isNewElement;\\r\\n      if (this.editionProperties.temporalImage != null) {\\r\\n        const mathML = MathML.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(Configuration.get('imageMathmlAttribute')));\\r\\n        this.contentManager.mathML = mathML;\\r\\n      }\\r\\n    }\\r\\n    this.contentManager.setIntegrationModel(this.integrationModel);\\r\\n    this.modalDialog.open();\\r\\n  }\\r\\n\\r\\n  /**\\r\\n   * Returns the {@link CustomEditors} instance.\\r\\n   * @return {CustomEditors} The current {@link CustomEditors} instance.\\r\\n   */\\r\\n  getCustomEditors() {\\r\\n    return this.customEditors;\\r\\n  }\\r\\n}\\r\\n\\r\\n/**\\r\\n * Core static listeners.\\r\\n * @type {Listeners}\\r\\n * @private\\r\\n */\\r\\nCore._globalListeners = new Listeners();\\r\\n\\r\\n/**\\r\\n * Resources state. Says if they were loaded or not.\\r\\n * @type {Boolean}\\r\\n * @private\\r\\n */\\r\\nCore._initialized = false;\\r\\n\",\"/* eslint-disable */\\n// This file has backwards compatibility purposes, eslint\\n// is disabled.\\n\\nimport Core from './core.src';\\nimport Parser from './parser';\\nimport Listeners from './listeners';\\n\\nvar backwardsLib;\\nexport default backwardsLib;\\n\\n// Backward compatibility library for public methods previous to version 7.6.0\\n/**\\n * Add a new callback to a MathType listener.\\n * @param {Object} jsonListener - an Object containing listener name and a callback.\\n * @tutorial tutorial\\n * @deprecated Since version 7.6.0. Use Listeners.newListener instead.\\n * @ignore\\n */\\nfunction wrs_addPluginListener(jsonListener) {\\n  // TODO: Add documentation URL + doc example.\\n  console.warn('Deprecated method');\\n  var eventName;\\n  eventName = Object.keys(jsonListener)[0];\\n  var callback;\\n  callback = jsonListener[eventName];\\n  var pluginListener = Listeners.newListener(eventName, callback);\\n  Core.addGlobalListener(pluginListener);\\n}\\n\\n// Expose the method globally.\\nwindow.wrs_addPluginListener = wrs_addPluginListener;\\n\\n/**\\n * Parses initial HTML code. If the HTML contains data generated by WIRIS, this data would be converted as following:\\n * <pre>\\n * MathML code: Image containing the corresponding MathML formulas.\\n * MathML code with LaTeX annotation : LaTeX.\\n * </pre>\\n * @param {string} code - HTML code with data generated by MathType.\\n * @param {string} language - language for the formula.\\n * @return {string} HTML code with the WIRIS data converted into LaTeX and images.\\n * @deprecated Since version 7.6.0. Use Parser.initParse instead.\\n * @ignore\\n */\\nfunction wrs_initParse(code, language) {\\n  console.warn('Deprecated method. Use Parser.endParse instead.');\\n  return Parser.initParse(code, language);\\n}\\n\\n// Expose the method globally.\\nwindow.wrs_initParse = wrs_initParse;\\n\\n\\n/**\\n * Parses end HTML code. The end HTML code is HTML code with embedded images or LaTeX formulas created with MathType. <br>\\n * By default this method converts the formula images and LaTeX strings in MathML. <br>\\n * If image mode is enabled the images will not be converted into MathML. For further information see {@link http://www.wiris.com/plugins/docs/full-mathml-mode}.\\n * @param {string} code - string to be parsed.\\n * @param {Object} wirisProperties - extra attributes for the formula.\\n * @param {string} language - language for the formula.\\n * @return {string}\\n * @deprecated Since version 7.6.0. Use Parser.initParse instead.\\n * @ignore\\n */\\nfunction wrs_endParse(code, wirisProperties, language) {\\n  console.warn('Deprecated method. Use Parser.endParse instead.')\\n  return Parser.endParse(code, wirisProperties, language);\\n}\\n\\n// Expose the method globally.\\nwindow.wrs_endParse = wrs_endParse;\\n\",\"import IntegrationModel, { integrationModelProperties } from '@wiris/mathtype-html-integration-devkit/src/integrationmodel';\\nimport Parser from '@wiris/mathtype-html-integration-devkit/src/parser';\\nimport Util from '@wiris/mathtype-html-integration-devkit/src/util';\\nimport Configuration from '@wiris/mathtype-html-integration-devkit/src/configuration';\\n\\nimport {version as pluginVersion} from './package.json';\\n\\n/**\\n * This property contains all Froala Integration instances.\\n * @type {Object}\\n */\\nexport var instances = {};\\n/**\\n * This property contains the current Froala integration instance,\\n * which is the instance of the active editor.\\n * @class\\n * @type {IntegrationModel}\\n */\\nexport var currentInstance = null;\\n\\n/**\\n * This class represents the MathType integration from CKEditor4.\\n * @extends {IntegrationModel}\\n */\\n\\nexport class CKEditor4Integration extends IntegrationModel {\\n    /**\\n     *\\n     * @param {IntegrationModelProperties}\\n     */\\n    constructor(ckeditorIntegrationModelProperties) {\\n        /**\\n         * CKEditor4 Integration.\\n         *\\n         * @param {IntegrationModelProperties} integrationModelAttributes\\n         */\\n        super(ckeditorIntegrationModelProperties);\\n        /**\\n         * Folder name used for the integration inside CKEditor plugins folder.\\n         */\\n        this.integrationFolderName = 'ckeditor_wiris';\\n    }\\n\\n    /**@inheritdoc */\\n    init() {\\n        super.init();\\n\\n        const editor = this.editorObject;\\n        if ('wiriseditorparameters' in editor.config) {\\n            Configuration.update('editorParameters', editor.config.wiriseditorparameters);\\n        }\\n    }\\n\\n    /**\\n\\t * When no language is set, ckeditor sets the toolbar to user's browser language.\\n     * @inheritdoc\\n     * @returns {String} - The CKEditor instance language.\\n     * @override\\n     */\\n    getLanguage() {\\n        try {\\n            return this.editorParameters.language;\\n        } catch (e) {}\\n        // Returns the CKEDitor instance language.\\n        if (this.editorObject.langCode != null) {\\n            return this.editorObject.langCode;\\n        } else {\\n            return super.getLanguage();\\n        }\\n    }\\n\\n    /**\\n     * @override\\n     */\\n    getPath() {\\n        // Delegates the responsability to get the path to CKEditor.\\n        return this.editorObject.plugins.ckeditor_wiris.path;\\n    }\\n\\n    /**\\n     * Adds callbacks to the following CKEditor listeners:\\n     * - 'focus' - updates the current instance.\\n     * - 'contentDom' - adds 'doubleclick' callback.\\n     * - 'doubleclick' - sets to null data.dialog property to avoid modifications for MathType formulas.\\n     * - 'setData' - parses the data converting MathML into images.\\n     * - 'afterSetData' - adds an observer to MathType formulas to avoid modifications.\\n     * - 'getData' - parses the data converting images into selected save mode (MathML by default).\\n     * - 'mode' - recalculates the active element.\\n     */\\n    addEditorListeners() {\\n        const editor = this.editorObject;\\n\\n        if (typeof editor.config.wirislistenersdisabled == 'undefined' ||\\n            !editor.config.wirislistenersdisabled) {\\n\\n            // First editor parsing.\\n            editor.setData(Parser.initParse(editor.getData()));\\n\\n            // Maintain currentInstance updated.\\n            editor.on('focus', function (event) {\\n                WirisPlugin.currentInstance = WirisPlugin.instances[event.editor.name];\\n            });\\n\\n            editor.on('contentDom', function () {\\n\\n                editor.on('doubleclick', function (event) {\\n\\n                    if (event.data.element.$.nodeName.toLowerCase() == 'img' &&\\n                        Util.containsClass(event.data.element.$, Configuration.get('imageClassName')) ||\\n                        Util.containsClass(event.data.element.$, Configuration.get('CASClassName'))) {\\n\\n                        event.data.dialog = null;\\n                    }\\n\\n                }.bind(this));\\n\\n                this.addEvents();\\n\\n            }.bind(this));\\n\\n\\n            editor.on('setData', function (e) {\\n\\n                e.data.dataValue = Parser.initParse(e.data.dataValue || \\\"\\\");\\n\\n            }.bind(this));\\n\\n            editor.on('afterSetData', function (e) {\\n\\n                if (typeof Parser.observer !== 'undefined') {\\n                    Array.prototype.forEach.call(document.getElementsByClassName('Wirisformula'), function (wirisImages) {\\n\\n                        Parser.observer.observe(wirisImages);\\n\\n                    });\\n                }\\n\\n            }.bind(this));\\n\\n            editor.on('getData', function (e) {\\n\\n                e.data.dataValue = Parser.endParse(e.data.dataValue || \\\"\\\");\\n\\n            }.bind(this));\\n\\n            // When CKEditors changes from WYSIWYG to source element, recalculate 'element' variable is mandatory.\\n            editor.on('mode', function (e) {\\n\\n                this.checkElement();\\n\\n            }.bind(this));\\n\\n            this.checkElement();\\n        }\\n        else {\\n            // CKEditor replaces several times the element element during its execution, so we must assign the events again.\\n            // We need to set a callback function to set 'element' variable inside CKEDITOR.plugins.add scope.\\n            editor.on('instanceReady', function (params) {\\n\\n                this.checkElement();\\n\\n            }.bind(this));\\n\\n            editor.resetDirty();\\n        }\\n    }\\n\\n    /**\\n     * Checks the current container and assign events in case that it doesn't have them.\\n     * CKEditor replaces several times the element element during its execution,\\n     * so we must assign the events again to editor element.\\n     */\\n    checkElement() {\\n        const editor = this.editorObject;\\n        const elem = document.getElementById('cke_contents_' + editor.name) ?\\n            document.getElementById('cke_contents_' + editor.name) :\\n            document.getElementById('cke_' + editor.name);\\n\\n        let newElement;\\n        if (editor.elementMode == CKEDITOR.ELEMENT_MODE_INLINE) {\\n            newElement = editor.container.$;\\n        } else {\\n            newElement = elem.getElementsByTagName('iframe')[0];\\n        }\\n\\n        let _wrs_int_divIframe = false;\\n        if (!newElement) {\\n            // On this case, CKEditor uses a div area instead of and iframe as the editable area. Events must be integrated on the div area.\\n            let dataContainer;\\n            for (let classElementIndex in elem.classList) {\\n                const classElement = elem.classList[classElementIndex];\\n                if (classElement.search('cke_\\\\\\\\d') != -1) {\\n                    dataContainer = classElement;\\n                    break;\\n                }\\n            }\\n            if (dataContainer) {\\n                newElement = document.getElementById(dataContainer + '_contents');\\n                _wrs_int_divIframe = true;\\n                // The events have to be added again\\n                newElement.wirisActive = false;\\n            }\\n        }\\n\\n        // If the element wasn't treated, add the events.\\n        if (!newElement.wirisActive) {\\n            if (editor.elementMode === CKEDITOR.ELEMENT_MODE_INLINE) {\\n                if (newElement.tagName === 'TEXTAREA') {\\n                    // Inline editor from a textarea element. In this case the textarea will be replaced by a div element with inline editing enabled.\\n                    const eventElements = document.getElementsByClassName('cke_textarea_inline');\\n                    Array.prototype.forEach.call(eventElements, function (entry) {\\n\\n                        this.setTarget(entry);\\n                        this.addEvents();\\n\\n                    });\\n                }\\n                else {\\n                    this.setTarget(newElement);\\n                    this.addEvents();\\n                }\\n                // Set the element as treated.\\n                newElement.wirisActive = true;\\n            }\\n            else if (!!newElement.contentWindow || _wrs_int_divIframe) {\\n                this.setTarget(newElement);\\n                this.addEvents();\\n                // Set the element as treated.\\n                newElement.wirisActive = true;\\n            }\\n        }\\n    }\\n\\n    /**\\n     * @inheritdoc\\n     * @param {HTMLElement} element - HTMLElement target.\\n     * @param {MouseEvent} event - Event which trigger the handler.\\n     */\\n    doubleClickHandler(element, event) {\\n        if (element.nodeName.toLowerCase() == 'img') {\\n            if (Util.containsClass(element, Configuration.get('imageClassName'))) {\\n                // Some plugins (image2, image) open a dialog on double click. On formulas\\n                // doubleclick event ends here.\\n                if (typeof event.stopPropagation != 'undefined') { // old I.E compatibility.\\n                    event.stopPropagation();\\n                } else {\\n                    event.returnValue = false;\\n                }\\n                this.core.getCustomEditors().disable();\\n                const customEditorAttr = element.getAttribute(Configuration.get('imageCustomEditorName'));\\n                if (customEditorAttr) {\\n                    this.core.getCustomEditors().enable(customEditorAttr);\\n                }\\n                this.core.editionProperties.temporalImage = element;\\n                this.openExistingFormulaEditor();\\n            }\\n        }\\n    }\\n\\n    /** @inheritdoc */ \\n    insertFormula(focusElement, windowTarget, mathml, wirisProperties) {\\n        // Due to insertFormula adds an image using pure JavaScript functions,\\n        // it is needed notificate to the editorObject that placeholder status\\n        // has to be updated.\\n        const formula = super.insertFormula(focusElement, windowTarget, mathml, wirisProperties);\\n        this.editorObject.fire('change');\\n        return formula;\\n    }\\n\\n\\n    /** @inheritdoc */\\n    getCorePath() {\\n        return CKEDITOR.plugins.getPath(this.integrationFolderName);\\n    }\\n\\n    /** @inheritdoc */\\n    getSelection() {\\n        this.editorObject.editable().$.focus();\\n        return this.editorObject.getSelection().getNative();\\n    }\\n\\n    /** @inheritdoc */\\n    callbackFunction() {\\n        super.callbackFunction();\\n        this.addEditorListeners();\\n    }\\n}\\n\\n(function () {\\n\\n    CKEDITOR.plugins.add('ckeditor_wiris', {\\n        'init': function (editor) {\\n            editor.ui.addButton('ckeditor_wiris_formulaEditor', {\\n\\n                'label': 'Insert a math equation - MathType',\\n                'command': 'ckeditor_wiris_openFormulaEditor',\\n                'icon': CKEDITOR.plugins.getPath('ckeditor_wiris') + './icons/' + 'formula.png'\\n\\n            });\\n\\n            editor.ui.addButton('ckeditor_wiris_formulaEditorChemistry', {\\n\\n                'label': 'Insert a chemistry formula - ChemType',\\n                'command': 'ckeditor_wiris_openFormulaEditorChemistry',\\n                'icon': CKEDITOR.plugins.getPath('ckeditor_wiris') + './icons/' + 'chem.png'\\n\\n            });\\n\\n            // Is needed specify that our images are allowed.\\n            let allowedContent = 'img[align,';\\n            allowedContent += Configuration.get('imageMathmlAttribute');\\n            allowedContent += ',src,alt](!Wirisformula)';\\n\\n            // MathType Editor.\\n            editor.addCommand('ckeditor_wiris_openFormulaEditor', {\\n\\n                'async': false,\\n                'canUndo': true,\\n                'editorFocus': true,\\n                'allowedContent': allowedContent,\\n                'requiredContent': allowedContent,\\n\\n                'exec': (editor) => {\\n                    const ckeditorIntegrationInstance = WirisPlugin.instances[editor.name];\\n                    // Can be that previously custom editor was used. So is needed disable\\n                    // all the editors to avoid wrong behaviours.\\n                    ckeditorIntegrationInstance.core.getCustomEditors().disable();\\n                    ckeditorIntegrationInstance.openNewFormulaEditor();\\n                }\\n\\n            });\\n\\n            // ChemType.\\n            editor.addCommand('ckeditor_wiris_openFormulaEditorChemistry', {\\n\\n                'async': false,\\n                'canUndo': true,\\n                'editorFocus': true,\\n                'allowedContent': allowedContent,\\n                'requiredContent': allowedContent,\\n\\n                'exec': (editor) => {\\n                    const ckeditorIntegrationInstance = WirisPlugin.instances[editor.name];\\n                    ckeditorIntegrationInstance.core.getCustomEditors().enable('chemistry');\\n                    ckeditorIntegrationInstance.openNewFormulaEditor();\\n                }\\n\\n            });\\n\\n            editor.on('instanceReady', function () {\\n\\n                /**\\n                 * Integration model constructor attributes.\\n                 * @type {integrationModelProperties}\\n                 */\\n                let ckeditorIntegrationModelProperties = {};\\n                ckeditorIntegrationModelProperties.editorObject = editor;\\n                // In CKEditor always there is an iframe or a div container. To access, we use the property that\\n                // the container has a class 'cke_wysiwyg_[container type]' where [container type] can be 'frame' or 'div'.\\n                ckeditorIntegrationModelProperties.target = editor.container.$.querySelector('*[class^=cke_wysiwyg]');\\n                ckeditorIntegrationModelProperties.serviceProviderProperties = {};\\n                ckeditorIntegrationModelProperties.serviceProviderProperties.URI = 'integration';\\n                ckeditorIntegrationModelProperties.serviceProviderProperties.server = 'php';\\n                ckeditorIntegrationModelProperties.version = pluginVersion;\\n                ckeditorIntegrationModelProperties.scriptName = \\\"plugin.js\\\";\\n                ckeditorIntegrationModelProperties.environment = {};\\n                ckeditorIntegrationModelProperties.environment.editor = \\\"CKEditor4\\\";\\n                ckeditorIntegrationModelProperties.environment.editorVersion = \\\"4\\\" + '.x';\\n                // Updating integration paths if context path is overwritten by editor javascript configuration.\\n                if ('wiriscontextpath' in editor.config) {\\n                    ckeditorIntegrationModelProperties.configurationService  = editor.config.wiriscontextpath + ckeditorIntegrationModelProperties.configurationService;\\n                    console.warn('Deprecated property wiriscontextpath. Use mathTypeParameters on instead.', editor.config.wiriscontextpath);\\n                }\\n\\n                // Overriding MathType integration parameters.\\n                if ('mathTypeParameters' in editor.config) {\\n                    ckeditorIntegrationModelProperties.integrationParameters = editor.config.mathTypeParameters;\\n                }\\n\\n                const ckeditorIntegrationInstance = new CKEditor4Integration(ckeditorIntegrationModelProperties);\\n                ckeditorIntegrationInstance.init();\\n                ckeditorIntegrationInstance.listeners.fire('onTargetReady', {});\\n                WirisPlugin.instances[editor.name] = ckeditorIntegrationInstance;\\n                WirisPlugin.currentInstance = ckeditorIntegrationInstance;\\n            });\\n        }\\n    });\\n\\n})();\",\"/* eslint-disable no-console */\\r\\n\\r\\nimport ServiceProvider from './serviceprovider';\\r\\n\\r\\nexport default class Test {\\r\\n  static init() {\\r\\n    Test.testServices();\\r\\n  }\\r\\n\\r\\n  static testServices() {\\r\\n    let data;\\r\\n    console.log('Testing configuration service...');\\r\\n    console.log(ServiceProvider.getService('configurationjs', '', 'get'));\\r\\n    console.log('Testing showimage service...');\\r\\n    data = [];\\r\\n    data.mml = '<math xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"><msup><mi>x</mi><mn>2</mn></msup></math>';\\r\\n    console.log(ServiceProvider.getService('showimage', data));\\r\\n    console.log('Testing createimage service...');\\r\\n    data = [];\\r\\n    data.mml = '<math xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"><msup><mi>x</mi><mn>2</mn></msup></math>';\\r\\n    console.log(ServiceProvider.getService('createimage', data, 'post'));\\r\\n    console.log('Testing MathML2Latex service...');\\r\\n    data = [];\\r\\n    data.service = 'mathml2latex';\\r\\n    data.mml = '<math xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"><msup><mi>x</mi><mn>2</mn></msup></math>';\\r\\n    console.log(ServiceProvider.getService('service', data));\\r\\n    console.log('Testing Latex2MathML service...');\\r\\n    data = [];\\r\\n    data.service = 'latex2mathml';\\r\\n    data.latex = 'x^2';\\r\\n    console.log(ServiceProvider.getService('service', data));\\r\\n    console.log('Testing Mathml2Accesible service...');\\r\\n    data = [];\\r\\n    data.service = 'mathml2accessible';\\r\\n    data.mml = '<math xmlns=\\\"http://www.w3.org/1998/Math/MathML\\\"><msup><mi>x</mi><mn>2</mn></msup></math>';\\r\\n    console.log(ServiceProvider.getService('service', data));\\r\\n  }\\r\\n}\\r\\n\",\"import Core from '@wiris/mathtype-html-integration-devkit/src/core.src.js';\\nimport Parser from '@wiris/mathtype-html-integration-devkit/src/parser.js';\\nimport Util from '@wiris/mathtype-html-integration-devkit/src/util.js';\\nimport Image from '@wiris/mathtype-html-integration-devkit/src/image.js';\\nimport Configuration from '@wiris/mathtype-html-integration-devkit/src/configuration.js';\\nimport Listeners from '@wiris/mathtype-html-integration-devkit/src/listeners';\\nimport backwardsLib from '@wiris/mathtype-html-integration-devkit/src/backwardslib.js';\\nimport polyfills from '@wiris/mathtype-html-integration-devkit/src/polyfills.js';\\nimport IntegrationModel from '@wiris/mathtype-html-integration-devkit/src/integrationmodel.js';\\nimport { CKEditor4Integration, instances, currentInstance } from './plugin.src.js';\\nimport Latex from '@wiris/mathtype-html-integration-devkit/src/latex';\\nimport Test from '@wiris/mathtype-html-integration-devkit/src/test';\\n\\n// Expose WirisPlugin variable to the window.\\nwindow.WirisPlugin = {\\n    Core: Core,\\n    Parser: Parser,\\n    Image: Image,\\n    Util: Util,\\n    Configuration: Configuration,\\n    Listeners: Listeners,\\n    IntegrationModel: IntegrationModel,\\n    currentInstance: currentInstance,\\n    instances: instances,\\n    CKEditor4Integration: CKEditor4Integration,\\n    Latex: Latex,\\n    Test: Test\\n}\"]}","code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=8)}([function(e){e.exports=JSON.parse('{\"ar\":{\"latex\":\"LaTeX\",\"cancel\":\"إلغاء\",\"accept\":\"إدراج\",\"manual\":\"الدليل\",\"insert_math\":\"إدراج صيغة رياضية - MathType\",\"insert_chem\":\"إدراج صيغة كيميائية - ChemType\",\"minimize\":\"تصغير\",\"maximize\":\"تكبير\",\"fullscreen\":\"ملء الشاشة\",\"exit_fullscreen\":\"الخروج من ملء الشاشة\",\"close\":\"إغلاق\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"نافذة MathType مشروطة\",\"close_modal_warning\":\"هل تريد المغادرة بالتأكيد؟ ستُفقد التغييرات التي أجريتها.\",\"latex_name_label\":\"صيغة Latex\",\"browser_no_compatible\":\"المستعرض غير متوافق مع تقنية AJAX. الرجاء استخدام أحدث إصدار من Mozilla Firefox.\",\"error_convert_accessibility\":\"حدث خطأ أثناء التحويل من MathML إلى نص قابل للاستخدام.\",\"exception_cross_site\":\"البرمجة النصية للمواقع المشتركة مسموح بها لـ HTTP فقط.\",\"exception_high_surrogate\":\"المركّب المرتفع غير متبوع بمركّب منخفض في fixedCharCodeAt()‎\",\"exception_string_length\":\"سلسلة غير صالحة. يجب أن يكون الطول من مضاعفات العدد 4\",\"exception_key_nonobject\":\"Object.keys مستدعاة على غير كائن\",\"exception_null_or_undefined\":\" هذا فارغ أو غير محدد\",\"exception_not_function\":\" ليست دالة\",\"exception_invalid_date_format\":\"تنسيق تاريخ غير صالح: \",\"exception_casting\":\"لا يمكن الصياغة \",\"exception_casting_to\":\" إلى \"},\"ca\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancel·lar\",\"accept\":\"Inserir\",\"manual\":\"Manual\",\"insert_math\":\"Inserir fórmula matemàtica - MathType\",\"insert_chem\":\"Inserir fórmula química - ChemType\",\"minimize\":\"Minimitza\",\"maximize\":\"Maximitza\",\"fullscreen\":\"Pantalla completa\",\"exit_fullscreen\":\"Sortir de la pantalla complera\",\"close\":\"Tanca\",\"mathtype\":\"MathType\",\"title_modalwindow\":\" Finestra modal de MathType\",\"close_modal_warning\":\"N\\'estàs segur que vols sortir? Es perdran els canvis que has fet.\",\"latex_name_label\":\"Fórmula en Latex\",\"browser_no_compatible\":\"El teu navegador no és compatible amb AJAX. Si us plau, usa la darrera versió de Mozilla Firefox.\",\"error_convert_accessibility\":\"Error en convertir de MathML a text accessible.\",\"exception_cross_site\":\"Els scripts de llocs creuats només estan permesos per HTTP.\",\"exception_high_surrogate\":\"Subrogat alt no seguit de subrogat baix a fixedCharCodeAt()\",\"exception_string_length\":\"Cadena invàlida. La longitud ha de ser un múltiple de 4\",\"exception_key_nonobject\":\"Object.keys anomenat a non-object\",\"exception_null_or_undefined\":\" això és null o no definit\",\"exception_not_function\":\" no és una funció\",\"exception_invalid_date_format\":\"Format de data invàlid : \",\"exception_casting\":\"No es pot emetre \",\"exception_casting_to\":\" a \"},\"cs\":{\"latex\":\"LaTeX\",\"cancel\":\"Storno\",\"accept\":\"Vložit\",\"manual\":\"Příručka\",\"insert_math\":\"Vložit matematický vzorec - MathType\",\"insert_chem\":\"Vložení chemického vzorce – ChemType\",\"minimize\":\"Minimalizovat\",\"maximize\":\"Maximalizovat\",\"fullscreen\":\"Celá obrazovka\",\"exit_fullscreen\":\"Opustit režim celé obrazovky\",\"close\":\"Zavřít\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Modální okno MathType\",\"close_modal_warning\":\"Opravdu chcete okno zavřít? Provedené změny budou ztraceny.\",\"latex_name_label\":\"Vzorec v LaTeXu\",\"browser_no_compatible\":\"Váš prohlížeč nepodporuje technologii AJAX. Použijte nejnovější verzi prohlížeče Mozilla Firefox.\",\"error_convert_accessibility\":\"Při převodu kódu MathML na čitelný text došlo k chybě.\",\"exception_cross_site\":\"Skriptování mezi více servery je povoleno jen v HTTP.\",\"exception_high_surrogate\":\"Ve funkci fixedCharCodeAt() nenásleduje po první části kódu znaku druhá část\",\"exception_string_length\":\"Neplatný řetězec. Délka musí být násobkem 4.\",\"exception_key_nonobject\":\"Funkce Object.keys byla použita pro prvek, který není objektem\",\"exception_null_or_undefined\":\" hodnota je null nebo není definovaná\",\"exception_not_function\":\" není funkce\",\"exception_invalid_date_format\":\"Neplatný formát data: \",\"exception_casting\":\"Nelze přetypovat \",\"exception_casting_to\":\" na \"},\"da\":{\"latex\":\"LaTeX\",\"cancel\":\"Annuller\",\"accept\":\"Indsæt\",\"manual\":\"Brugervejledning\",\"insert_math\":\"Indsæt matematisk formel - MathType\",\"insert_chem\":\"Indsæt en kemisk formel - ChemType\",\"minimize\":\"Minimer\",\"maximize\":\"Maksimer\",\"fullscreen\":\"Fuld skærm\",\"exit_fullscreen\":\"Afslut Fuld skærm\",\"close\":\"Luk\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType-modalvindue\",\"close_modal_warning\":\"Er du sikker på, du vil lukke? Dine ændringer går tabt.\",\"latex_name_label\":\"LaTex-formel\",\"browser_no_compatible\":\"Din browser er ikke kompatibel med AJAX-teknologi. Brug den nyeste version af Mozilla Firefox.\",\"error_convert_accessibility\":\"Fejl under konvertering fra MathML til tilgængelig tekst.\",\"exception_cross_site\":\"Scripts på tværs af websteder er kun tilladt for HTTP.\",\"exception_high_surrogate\":\"Et højt erstatningstegn er ikke fulgt af et lavt erstatningstegn i fixedCharCodeAt()\",\"exception_string_length\":\"Ugyldig streng. Længden skal være et multiplum af 4\",\"exception_key_nonobject\":\"Object.keys kaldet ved ikke-objekt\",\"exception_null_or_undefined\":\" dette er nul eller ikke defineret\",\"exception_not_function\":\" er ikke en funktion\",\"exception_invalid_date_format\":\"Ugyldigt datoformat: \",\"exception_casting\":\"Kan ikke beregne \",\"exception_casting_to\":\" til \"},\"de\":{\"latex\":\"LaTeX\",\"cancel\":\"Abbrechen\",\"accept\":\"Einfügen\",\"manual\":\"Handbuch\",\"insert_math\":\"Mathematische Formel einfügen - MathType\",\"insert_chem\":\"Eine chemische Formel einfügen – ChemType\",\"minimize\":\"Verkleinern\",\"maximize\":\"Vergrößern\",\"fullscreen\":\"Vollbild\",\"exit_fullscreen\":\"Vollbild schließen\",\"close\":\"Schließen\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Modales MathType-Fenster\",\"close_modal_warning\":\"Bist du sicher, dass du das Programm verlassen willst? Alle vorgenommenen Änderungen gehen damit verloren.\",\"latex_name_label\":\"Latex-Formel\",\"browser_no_compatible\":\"Dein Browser ist nicht mit der AJAX-Technologie kompatibel. Verwende bitte die neueste Version von Mozilla Firefox.\",\"error_convert_accessibility\":\"Fehler beim Konvertieren von MathML in barrierefreien Text.\",\"exception_cross_site\":\"Cross-Site-Scripting ist nur bei HTTP zulässig.\",\"exception_high_surrogate\":\"Hoher Ersatz bei bei festerZeichenkodierungbei() nicht von niedrigem Ersatz befolgt.\",\"exception_string_length\":\"Ungültige Zeichenfolge. Länge muss ein Vielfaches von 4 sein.\",\"exception_key_nonobject\":\"Object.keys wurde für ein Nicht-Objekt aufgerufen.\",\"exception_null_or_undefined\":\" Das ist Null oder nicht definiert.\",\"exception_not_function\":\" ist keine Funktion\",\"exception_invalid_date_format\":\"Ungültiges Datumsformat: \",\"exception_casting\":\"Umwandlung nicht möglich \",\"exception_casting_to\":\" zu \"},\"el\":{\"latex\":\"LaTeX\",\"cancel\":\"Άκυρο\",\"accept\":\"Εισαγωγή\",\"manual\":\"Χειροκίνητα\",\"insert_math\":\"Εισαγωγή μαθηματικού τύπου - MathType\",\"insert_chem\":\"Εισαγωγή χημικού τύπου - ChemType\",\"minimize\":\"Ελαχιστοποίηση\",\"maximize\":\"Μεγιστοποίηση\",\"fullscreen\":\"Πλήρης οθόνη\",\"exit_fullscreen\":\"Έξοδος από πλήρη οθόνη\",\"close\":\"Κλείσιμο\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Τροπικό παράθυρο MathType\",\"close_modal_warning\":\"Επιθυμείτε σίγουρα αποχώρηση; Θα χαθούν οι αλλαγές που έχετε κάνει.\",\"latex_name_label\":\"Τύπος LaTeX\",\"browser_no_compatible\":\"Το πρόγραμμα περιήγησής σας δεν είναι συμβατό με την τεχνολογία AJAX. Χρησιμοποιήστε την πιο πρόσφατη έκδοση του Mozilla Firefox.\",\"error_convert_accessibility\":\"Σφάλμα κατά τη μετατροπή από MathML σε προσβάσιμο κείμενο.\",\"exception_cross_site\":\"Το XSS (Cross site scripting) επιτρέπεται μόνο για HTTP.\",\"exception_high_surrogate\":\"Το υψηλό υποκατάστατο δεν ακολουθείται από χαμηλό υποκατάστατο στο fixedCharCodeAt()\",\"exception_string_length\":\"Μη έγκυρη συμβολοσειρά. Το μήκος πρέπει να είναι πολλαπλάσιο του 4\",\"exception_key_nonobject\":\"Έγινε κλήση του Object.keys σε μη αντικείμενο\",\"exception_null_or_undefined\":\" αυτό είναι μηδενικό ή δεν έχει οριστεί\",\"exception_not_function\":\" δεν είναι συνάρτηση\",\"exception_invalid_date_format\":\"Μη έγκυρη μορφή ημερομηνίας: \",\"exception_casting\":\"Δεν είναι δυνατή η μετατροπή \",\"exception_casting_to\":\" σε \"},\"en\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancel\",\"accept\":\"Insert\",\"manual\":\"Manual\",\"insert_math\":\"Insert a math equation - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"es\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"Insertar\",\"manual\":\"Manual\",\"insert_math\":\"Insertar fórmula matemática - MathType\",\"insert_chem\":\"Insertar fórmula química - ChemType\",\"minimize\":\"Minimizar\",\"maximize\":\"Maximizar\",\"fullscreen\":\"Pantalla completa\",\"exit_fullscreen\":\"Salir de pantalla completa\",\"close\":\"Cerrar\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Ventana modal de MathType\",\"close_modal_warning\":\"Seguro que quieres cerrar? Los cambios que has hecho se perderán\",\"latex_name_label\":\"Formula en Latex\",\"browser_no_compatible\":\"Tu navegador no es complatible con AJAX. Por favor, usa la última version de Mozilla Firefox.\",\"error_convert_accessibility\":\"Error conviertiendo una fórmula MathML a texto accesible.\",\"exception_cross_site\":\"Cross site scripting solo está permitido para HTTP.\",\"exception_high_surrogate\":\"Subrogado alto no seguido por subrogado bajo en fixedCharCodeAt()\",\"exception_string_length\":\"Cadena no válida. La longitud debe ser múltiplo de 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" esto es null o no definido\",\"exception_not_function\":\" no es una función\",\"exception_invalid_date_format\":\"Formato de fecha inválido: \",\"exception_casting\":\"No se puede emitir\",\"exception_casting_to\":\" a \"},\"et\":{\"latex\":\"LaTeX\",\"cancel\":\"Loobu\",\"accept\":\"Lisa\",\"manual\":\"Käsiraamat\",\"insert_math\":\"Lisa matemaatiline valem – WIRIS\",\"insert_chem\":\"Lisa keemiline valem – ChemType\",\"minimize\":\"Minimeeri\",\"maximize\":\"Maksimeeri\",\"fullscreen\":\"Täiskuva\",\"exit_fullscreen\":\"Välju täiskuvalt\",\"close\":\"Sule\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType\\'i modaalaken\",\"close_modal_warning\":\"Kas soovite kindlasti lahkuda? Tehtud muudatused lähevad kaduma.\",\"latex_name_label\":\"Latexi valem\",\"browser_no_compatible\":\"Teie brauser ei ühildu AJAXi tehnoloogiaga. Palun kasutage Mozilla Firefoxi uusimat versiooni.\",\"error_convert_accessibility\":\"Tõrge teisendamisel MathML-ist muudetavaks tekstiks.\",\"exception_cross_site\":\"Ristskriptimine on lubatud ainult HTTP kasutamisel.\",\"exception_high_surrogate\":\"Funktsioonis fixedCharCodeAt() ei järgne kõrgemale asendusliikmele madalam asendusliige.\",\"exception_string_length\":\"Vigane string. Pikkus peab olema 4 kordne.\",\"exception_key_nonobject\":\"Protseduur Object.keys kutsuti mitteobjekti korral.\",\"exception_null_or_undefined\":\" see on null või määramata\",\"exception_not_function\":\" ei ole funktsioon\",\"exception_invalid_date_format\":\"Sobimatu kuupäeva kuju: \",\"exception_casting\":\"Esitamine ei õnnestu \",\"exception_casting_to\":\" – \"},\"eu\":{\"latex\":\"LaTeX\",\"cancel\":\"Ezeztatu\",\"accept\":\"Txertatu\",\"manual\":\"Gida\",\"insert_math\":\"Txertatu matematikako formula - MathType\",\"insert_chem\":\"Txertatu formula kimiko bat - ChemType\",\"minimize\":\"Ikonotu\",\"maximize\":\"Maximizatu\",\"fullscreen\":\"Pantaila osoa\",\"exit_fullscreen\":\"Irten pantaila osotik\",\"close\":\"Itxi\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType leiho modala\",\"close_modal_warning\":\"Ziur irten nahi duzula? Egiten dituzun aldaketak galdu egingo dira.\",\"latex_name_label\":\"LaTex Formula\",\"browser_no_compatible\":\"Zure arakatzailea ez da bateragarria AJAX teknologiarekin. Erabili Mozilla Firefoxen azken bertsioa.\",\"error_convert_accessibility\":\"Errorea MathMLtik testu irisgarrira bihurtzean.\",\"exception_cross_site\":\"Gune arteko scriptak HTTPrako soilik onartzen dira.\",\"exception_high_surrogate\":\"Ordezko baxuak ez dio ordezko altuari jarraitzen, hemen: fixedCharCodeAt()\",\"exception_string_length\":\"Kate baliogabea. Luzerak 4ren multiploa izan behar du\",\"exception_key_nonobject\":\"Object.keys deitu zaio objektua ez den zerbaiti\",\"exception_null_or_undefined\":\" nulua edo definitu gabea da\",\"exception_not_function\":\" ez da funtzio bat\",\"exception_invalid_date_format\":\"Data-formatu baliogabea : \",\"exception_casting\":\"Ezin da igorri \",\"exception_casting_to\":\" honi \"},\"fi\":{\"latex\":\"LaTeX\",\"cancel\":\"Peruuta\",\"accept\":\"Lisää\",\"manual\":\"Manual\",\"insert_math\":\"Liitä matemaattinen kaava - MathType\",\"insert_chem\":\"Lisää kemian kaava - ChemType\",\"minimize\":\"Pienennä\",\"maximize\":\"Suurenna\",\"fullscreen\":\"Koko ruutu\",\"exit_fullscreen\":\"Poistu koko ruudun tilasta\",\"close\":\"Sulje\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathTypen modaalinen ikkuna\",\"close_modal_warning\":\"Oletko varma, että haluat poistua? Menetät tekemäsi muutokset.\",\"latex_name_label\":\"Latex-kaava\",\"browser_no_compatible\":\"Selaimesi ei tue AJAX-tekniikkaa. Ole hyvä ja käytä uusinta Firefox-versiota.\",\"error_convert_accessibility\":\"Virhe muunnettaessa MathML:stä tekstiksi.\",\"exception_cross_site\":\"Cross site scripting sallitaan vain HTTP:llä.\",\"exception_high_surrogate\":\"fixedCharCodeAt(): yläsijaismerkkiä ei seurannut alasijaismerkki\",\"exception_string_length\":\"Epäkelpo merkkijono. Pituuden on oltava 4:n kerrannainen\",\"exception_key_nonobject\":\"Object.keys kutsui muuta kuin oliota\",\"exception_null_or_undefined\":\" tämä on null tai ei määritelty\",\"exception_not_function\":\" ei ole funktio\",\"exception_invalid_date_format\":\"Virheellinen päivämäärämuoto : \",\"exception_casting\":\"Ei voida muuntaa tyyppiä \",\"exception_casting_to\":\" tyyppiin \"},\"fr\":{\"latex\":\"LaTeX\",\"cancel\":\"Annuler\",\"accept\":\"Insérer\",\"manual\":\"Manuel\",\"insert_math\":\"Insérer une formule mathématique - MathType\",\"insert_chem\":\"Insérer une formule chimique - ChemType\",\"minimize\":\"Minimiser\",\"maximize\":\"Maximiser\",\"fullscreen\":\"Plein écran\",\"exit_fullscreen\":\"Quitter le plein écran\",\"close\":\"Fermer\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Fenêtre modale MathType\",\"close_modal_warning\":\"Confirmez-vous vouloir fermer ? Les changements effectués seront perdus.\",\"latex_name_label\":\"Formule LaTeX\",\"browser_no_compatible\":\"Votre navigateur n’est pas compatible avec la technologie AJAX. Veuillez utiliser la dernière version de Mozilla Firefox.\",\"error_convert_accessibility\":\"Une erreur de conversion du format MathML en texte accessible est survenue.\",\"exception_cross_site\":\"Le cross-site scripting n’est autorisé que pour HTTP.\",\"exception_high_surrogate\":\"Substitut élevé non suivi d’un substitut inférieur dans fixedCharCodeAt()\",\"exception_string_length\":\"Chaîne non valide. Longueur limitée aux multiples de 4\",\"exception_key_nonobject\":\"Object.keys appelé sur un non-objet\",\"exception_null_or_undefined\":\" nul ou non défini\",\"exception_not_function\":\" n’est pas une fonction\",\"exception_invalid_date_format\":\"Format de date non valide : \",\"exception_casting\":\"Impossible de convertir \",\"exception_casting_to\":\" sur \"},\"gl\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"Inserir\",\"manual\":\"Manual\",\"insert_math\":\"Inserir unha fórmula matemática - MathType\",\"insert_chem\":\"Inserir unha fórmula química - ChemType\",\"minimize\":\"Minimizar\",\"maximize\":\"Maximizar\",\"fullscreen\":\"Pantalla completa\",\"exit_fullscreen\":\"Saír da pantalla completa\",\"close\":\"Pechar\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Ventá modal de MathType\",\"close_modal_warning\":\"Seguro que quere saír? Perderanse os cambios realizados.\",\"latex_name_label\":\"Fórmula Latex\",\"browser_no_compatible\":\"O seu explorador non é compatible coa tecnoloxía AJAX. Use a versión máis recente de Mozilla Firefox.\",\"error_convert_accessibility\":\"Erro ao converter de MathML a texto accesible.\",\"exception_cross_site\":\"Os scripts de sitios só se permiten para HTTP.\",\"exception_high_surrogate\":\"Suplente superior non seguido por suplente inferior en fixedCharCodeAt()\",\"exception_string_length\":\"Cadea non válida. A lonxitude debe ser un múltiplo de 4\",\"exception_key_nonobject\":\"Claves de obxecto chamadas en non obxecto\",\"exception_null_or_undefined\":\" nulo ou non definido\",\"exception_not_function\":\" non é unha función\",\"exception_invalid_date_format\":\"Formato de data non válido: \",\"exception_casting\":\"Non se pode converter \",\"exception_casting_to\":\" a \"},\"he\":{\"latex\":\"LaTeX\",\"cancel\":\"ביטול\",\"accept\":\"הוסף\",\"manual\":\"מדריך\",\"insert_math\":\"הוסף נוסחה מתמטית - MathType\",\"insert_chem\":\"הוספת כתיבה כימית - ChemType\",\"minimize\":\"מזערי\",\"maximize\":\"מרבי\",\"fullscreen\":\"מסך מלא\",\"exit_fullscreen\":\"יציאה ממצב מסך מלא\",\"close\":\"סגירה\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"חלון מודאלי של MathType\",\"close_modal_warning\":\"האם לצאת? שינויים אשר בוצעו ימחקו.\",\"latex_name_label\":\"נוסחת Latex\",\"browser_no_compatible\":\"הדפדפן שלך אינו תואם לטכנולוגיית AJAX. יש להשתמש בגרסה העדכנית ביותר של Mozilla Firefox.\",\"error_convert_accessibility\":\"שגיאה בהמרה מ-MathML לטקסט נגיש.\",\"exception_cross_site\":\"סקריפטינג חוצה-אתרים מורשה עבור HTTP בלבד.\",\"exception_high_surrogate\":\"ערך ממלא מקום גבוה אינו מופיע אחרי ערך ממלא מקום נמוך ב-fixedCharCodeAt()‎\",\"exception_string_length\":\"מחרוזת לא חוקית. האורך חייב להיות כפולה של 4\",\"exception_key_nonobject\":\"בוצעה קריאה אל Object.keys ברכיב שאינו אובייקט\",\"exception_null_or_undefined\":\" הוא Null או לא מוגדר\",\"exception_not_function\":\"איננה פונקציה\",\"exception_invalid_date_format\":\"תסדיר תאריך אינו תקין : \",\"exception_casting\":\"לא ניתן להמיר \",\"exception_casting_to\":\" ל \"},\"hr\":{\"latex\":\"LaTeX\",\"cancel\":\"Poništi\",\"accept\":\"Umetni\",\"manual\":\"Priručnik\",\"insert_math\":\"Umetnite matematičku formulu - MathType\",\"insert_chem\":\"Umetnite kemijsku formulu - ChemType\",\"minimize\":\"Minimiziraj\",\"maximize\":\"Maksimiziraj\",\"fullscreen\":\"Cijeli zaslon\",\"exit_fullscreen\":\"Izlaz iz prikaza na cijelom zaslonu\",\"close\":\"Zatvori\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modalni prozor\",\"close_modal_warning\":\"Sigurno želite zatvoriti? Izgubit će se unesene promjene.\",\"latex_name_label\":\"Latex formula\",\"browser_no_compatible\":\"Vaš preglednik nije kompatibilan s AJAX tehnologijom. Upotrijebite najnoviju verziju Mozilla Firefoxa.\",\"error_convert_accessibility\":\"Pogreška konverzije iz MathML-a u dostupni tekst.\",\"exception_cross_site\":\"Skriptiranje na različitim web-mjestima dopušteno je samo za HTTP.\",\"exception_high_surrogate\":\"Iza visoke zamjene ne slijedi niska zamjena u fixedCharCodeAt()\",\"exception_string_length\":\"Nevažeći niz. Duljina mora biti višekratnik broja 4\",\"exception_key_nonobject\":\"Object.keys pozvano na ne-objekt\",\"exception_null_or_undefined\":\" ovo je nula ili nije definirano\",\"exception_not_function\":\" nije funkcija\",\"exception_invalid_date_format\":\"Nevažeći format datuma : \",\"exception_casting\":\"Ne može se poslati \",\"exception_casting_to\":\" na \"},\"hu\":{\"latex\":\"LaTeX\",\"cancel\":\"Mégsem\",\"accept\":\"Beszúrás\",\"manual\":\"Kézikönyv\",\"insert_math\":\"Matematikai képlet beszúrása - MathType\",\"insert_chem\":\"Kémiai képet beillesztése - ChemType\",\"minimize\":\"Kis méret\",\"maximize\":\"Nagy méret\",\"fullscreen\":\"Teljes képernyő\",\"exit_fullscreen\":\"Teljes képernyő elhagyása\",\"close\":\"Bezárás\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modális ablak\",\"close_modal_warning\":\"Biztosan kilép? A módosítások el fognak veszni.\",\"latex_name_label\":\"Latex képlet\",\"browser_no_compatible\":\"A böngészője nem kompatibilis az AJAX technológiával. Használja a Mozilla Firefox legújabb verzióját.\",\"error_convert_accessibility\":\"Hiba lépett fel a MathML szöveggé történő konvertálása során.\",\"exception_cross_site\":\"Az oldalak közti scriptelés csak HTTP esetén engedélyezett.\",\"exception_high_surrogate\":\"A magas helyettesítő karaktert nem alacsony helyettesítő karakter követi a fixedCharCodeAt() esetében\",\"exception_string_length\":\"Érvénytelen karakterlánc. A hossznak a 4 többszörösének kell lennie\",\"exception_key_nonobject\":\"Az Object.keys egy nem objektumra került meghívásra\",\"exception_null_or_undefined\":\" null vagy nem definiált\",\"exception_not_function\":\" nem függvény\",\"exception_invalid_date_format\":\"Érvénytelen dátumformátum: \",\"exception_casting\":\"Nem alkalmazható \",\"exception_casting_to\":\" erre \"},\"id\":{\"latex\":\"LaTeX\",\"cancel\":\"Membatalkan\",\"accept\":\"Masukkan\",\"manual\":\"Manual\",\"insert_math\":\"Masukkan rumus matematika - MathType\",\"insert_chem\":\"Masukkan rumus kimia - ChemType\",\"minimize\":\"Minikan\",\"maximize\":\"Perbesar\",\"fullscreen\":\"Layar penuh\",\"exit_fullscreen\":\"Keluar layar penuh\",\"close\":\"Tutup\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Jendela modal MathType\",\"close_modal_warning\":\"Anda yakin ingin keluar? Anda akan kehilangan perubahan yang Anda buat.\",\"latex_name_label\":\"Rumus Latex\",\"browser_no_compatible\":\"Penjelajah Anda tidak kompatibel dengan teknologi AJAX. Harap gunakan Mozilla Firefox versi terbaru.\",\"error_convert_accessibility\":\"Kesalahan konversi dari MathML menjadi teks yang dapat diakses.\",\"exception_cross_site\":\"Skrip lintas situs hanya diizinkan untuk HTTP.\",\"exception_high_surrogate\":\"Pengganti tinggi tidak diikuti oleh pengganti rendah di fixedCharCodeAt()\",\"exception_string_length\":\"String tidak valid. Panjang harus kelipatan 4\",\"exception_key_nonobject\":\"Object.keys meminta nonobjek\",\"exception_null_or_undefined\":\" ini tidak berlaku atau tidak didefinisikan\",\"exception_not_function\":\" bukan sebuah fungsi\",\"exception_invalid_date_format\":\"Format tanggal tidak valid : \",\"exception_casting\":\"Tidak dapat mentransmisikan \",\"exception_casting_to\":\" untuk \"},\"it\":{\"latex\":\"LaTeX\",\"cancel\":\"Annulla\",\"accept\":\"Inserisci\",\"manual\":\"Manuale\",\"insert_math\":\"Inserisci una formula matematica - MathType\",\"insert_chem\":\"Inserisci una formula chimica - ChemType\",\"minimize\":\"Riduci a icona\",\"maximize\":\"Ingrandisci\",\"fullscreen\":\"Schermo intero\",\"exit_fullscreen\":\"Esci da schermo intero\",\"close\":\"Chiudi\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Finestra modale di MathType\",\"close_modal_warning\":\"Confermi di voler uscire? Le modifiche effettuate andranno perse.\",\"latex_name_label\":\"Formula LaTeX\",\"browser_no_compatible\":\"Il tuo browser non è compatibile con la tecnologia AJAX. Utilizza la versione più recente di Mozilla Firefox.\",\"error_convert_accessibility\":\"Errore durante la conversione da MathML in testo accessibile.\",\"exception_cross_site\":\"Lo scripting tra siti è consentito solo per HTTP.\",\"exception_high_surrogate\":\"Surrogato alto non seguito da surrogato basso in fixedCharCodeAt()\",\"exception_string_length\":\"Stringa non valida. La lunghezza deve essere un multiplo di 4\",\"exception_key_nonobject\":\"Metodo Object.keys richiamato in un elemento non oggetto\",\"exception_null_or_undefined\":\" questo è un valore null o non definito\",\"exception_not_function\":\" non è una funzione\",\"exception_invalid_date_format\":\"Formato di data non valido: \",\"exception_casting\":\"Impossibile eseguire il cast \",\"exception_casting_to\":\" a \"},\"ja\":{\"latex\":\"LaTeX\",\"cancel\":\"キャンセル\",\"accept\":\"挿入\",\"manual\":\"マニュアル\",\"insert_math\":\"数式を挿入 - MathType\",\"insert_chem\":\"化学式を挿入 - ChemType\",\"minimize\":\"最小化\",\"maximize\":\"最大化\",\"fullscreen\":\"全画面表示\",\"exit_fullscreen\":\"全画面表示を解除\",\"close\":\"閉じる\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType モードウィンドウ\",\"close_modal_warning\":\"このページから移動してもよろしいですか？変更内容は失われます。\",\"latex_name_label\":\"LaTeX 数式\",\"browser_no_compatible\":\"お使いのブラウザは、AJAX 技術と互換性がありません。Mozilla Firefox の最新バージョンをご使用ください。\",\"error_convert_accessibility\":\"MathML からアクセシブルなテキストへの変換中にエラーが発生しました。\",\"exception_cross_site\":\"クロスサイトスクリプティングは、HTTP のみに許可されています。\",\"exception_high_surrogate\":\"fixedCharCodeAt（）で上位サロゲートの後に下位サロゲートがありません\",\"exception_string_length\":\"無効な文字列です。長さは4の倍数である必要があります\",\"exception_key_nonobject\":\"Object.keys が非オブジェクトで呼び出されました\",\"exception_null_or_undefined\":\" null であるか、定義されていません\",\"exception_not_function\":\" は関数ではありません\",\"exception_invalid_date_format\":\"無効な日付形式: \",\"exception_casting\":\"次にキャスト \",\"exception_casting_to\":\" できません \"},\"ko\":{\"latex\":\"LaTeX\",\"cancel\":\"취소\",\"accept\":\"삽입\",\"manual\":\"설명서\",\"insert_math\":\"수학 공식 삽입 - MathType\",\"insert_chem\":\"화학 공식 입력하기 - ChemType\",\"minimize\":\"최소화\",\"maximize\":\"최대화\",\"fullscreen\":\"전체 화면\",\"exit_fullscreen\":\"전체 화면 나가기\",\"close\":\"닫기\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType 모달 창\",\"close_modal_warning\":\"정말로 나가시겠습니까? 변경 사항이 손실됩니다.\",\"latex_name_label\":\"Latex 공식\",\"browser_no_compatible\":\"사용자의 브라우저는 AJAX 기술과 호환되지 않습니다. Mozilla Firefox 최신 버전을 사용하십시오.\",\"error_convert_accessibility\":\"MathML로부터 접근 가능한 텍스트로 오류 변환.\",\"exception_cross_site\":\"사이트 교차 스크립팅은 HTTP 환경에서만 사용할 수 있습니다.\",\"exception_high_surrogate\":\"fixedCharCodeAt()에서는 상위 서러게이트 뒤에 하위 서러게이트가 붙지 않습니다\",\"exception_string_length\":\"유효하지 않은 스트링입니다. 길이는 4의 배수여야 합니다\",\"exception_key_nonobject\":\"Object.keys가 non-object를 요청하였습니다\",\"exception_null_or_undefined\":\" Null값이거나 정의되지 않았습니다\",\"exception_not_function\":\" 함수가 아닙니다\",\"exception_invalid_date_format\":\"유효하지 않은 날짜 포맷 : \",\"exception_casting\":\"캐스팅할 수 없습니다 \",\"exception_casting_to\":\" (으)로 \"},\"nl\":{\"latex\":\"LaTeX\",\"cancel\":\"Annuleren\",\"insert_chem\":\"Een scheikundige formule invoegen - ChemType\",\"minimize\":\"Minimaliseer\",\"maximize\":\"Maximaliseer\",\"fullscreen\":\"Schermvullend\",\"exit_fullscreen\":\"Verlaat volledig scherm\",\"close\":\"Sluit\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Modaal venster MathType\",\"close_modal_warning\":\"Weet je zeker dat je de app wilt sluiten? De gemaakte wijzigingen gaan verloren.\",\"latex_name_label\":\"LaTeX-formule\",\"browser_no_compatible\":\"Je browser is niet compatibel met AJAX-technologie. Gebruik de meest recente versie van Mozilla Firefox.\",\"error_convert_accessibility\":\"Fout bij conversie van MathML naar toegankelijke tekst.\",\"exception_cross_site\":\"Cross-site scripting is alleen toegestaan voor HTTP.\",\"exception_high_surrogate\":\"Hoog surrogaat niet gevolgd door laag surrogaat in fixedCharCodeAt()\",\"exception_string_length\":\"Ongeldige tekenreeks. Lengte moet een veelvoud van 4 zijn\",\"exception_key_nonobject\":\"Object.keys opgeroepen voor niet-object\",\"exception_null_or_undefined\":\" dit is nul of niet gedefinieerd\",\"exception_not_function\":\" is geen functie\",\"exception_invalid_date_format\":\"Ongeldige datumnotatie: \",\"exception_casting\":\"Kan niet weergeven \",\"exception_casting_to\":\" op \"},\"no\":{\"latex\":\"LaTeX\",\"cancel\":\"Avbryt\",\"accept\":\"Set inn\",\"manual\":\"Håndbok\",\"insert_math\":\"Sett inn matematikkformel - MathType\",\"insert_chem\":\"Set inn ein kjemisk formel – ChemType\",\"minimize\":\"Minimer\",\"maximize\":\"Maksimer\",\"fullscreen\":\"Fullskjerm\",\"exit_fullscreen\":\"Avslutt fullskjerm\",\"close\":\"Lukk\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Modalt MathType-vindu\",\"close_modal_warning\":\"Er du sikker på at du vil gå ut? Endringane du har gjort, vil gå tapt.\",\"latex_name_label\":\"LaTeX-formel\",\"browser_no_compatible\":\"Nettlesaren er ikkje kompatibel med AJAX-teknologien. Bruk den nyaste versjonen av Mozilla Firefox.\",\"error_convert_accessibility\":\"Feil under konvertering frå MathML til tilgjengeleg tekst.\",\"exception_cross_site\":\"Skripting på tvers av nettstadar er bere tillaten med HTTP.\",\"exception_high_surrogate\":\"Høgt surrogat er ikkje etterfølgt av lågt surrogat i fixedCharCodeAt()\",\"exception_string_length\":\"Ugyldig streng. Lengda må vera deleleg på 4\",\"exception_key_nonobject\":\"Object.keys kalla på eit ikkje-objekt\",\"exception_null_or_undefined\":\" dette er null eller ikkje definert\",\"exception_not_function\":\" er ikkje ein funksjon\",\"exception_invalid_date_format\":\"Ugyldig datoformat: \",\"exception_casting\":\"Kan ikkje bruka casting \",\"exception_casting_to\":\" til \"},\"nb\":{\"latex\":\"LaTeX\",\"cancel\":\"Avbryt\",\"accept\":\"Insert\",\"manual\":\"Håndbok\",\"insert_math\":\"Sett inn matematikkformel - MathType\",\"insert_chem\":\"Sett inn en kjemisk formel – ChemType\",\"minimize\":\"Minimer\",\"maximize\":\"Maksimer\",\"fullscreen\":\"Fullskjerm\",\"exit_fullscreen\":\"Avslutt fullskjerm\",\"close\":\"Lukk\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Modalt MathType-vindu\",\"close_modal_warning\":\"Er du sikker på at du vil gå ut? Endringene du har gjort, vil gå tapt.\",\"latex_name_label\":\"LaTeX-formel\",\"browser_no_compatible\":\"Nettleseren er ikke kompatibel med AJAX-teknologien. Bruk den nyeste versjonen av Mozilla Firefox.\",\"error_convert_accessibility\":\"Feil under konvertering fra MathML til tilgjengelig tekst.\",\"exception_cross_site\":\"Skripting på tvers av nettsteder er bare tillatt med HTTP.\",\"exception_high_surrogate\":\"Høyt surrogat etterfølges ikke av lavt surrogat i fixedCharCodeAt()\",\"exception_string_length\":\"Ugyldig streng. Lengden må være delelig på 4\",\"exception_key_nonobject\":\"Object.keys kalte på et ikke-objekt\",\"exception_null_or_undefined\":\" dette er null eller ikke definert\",\"exception_not_function\":\" er ikke en funksjon\",\"exception_invalid_date_format\":\"Ugyldig datoformat: \",\"exception_casting\":\"Kan ikke bruke casting \",\"exception_casting_to\":\" til \"},\"nn\":{\"latex\":\"LaTeX\",\"cancel\":\"Avbryt\",\"accept\":\"Set inn\",\"manual\":\"Håndbok\",\"insert_math\":\"Sett inn matematikkformel - MathType\",\"insert_chem\":\"Set inn ein kjemisk formel – ChemType\",\"minimize\":\"Minimer\",\"maximize\":\"Maksimer\",\"fullscreen\":\"Fullskjerm\",\"exit_fullscreen\":\"Avslutt fullskjerm\",\"close\":\"Lukk\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Modalt MathType-vindu\",\"close_modal_warning\":\"Er du sikker på at du vil gå ut? Endringane du har gjort, vil gå tapt.\",\"latex_name_label\":\"LaTeX-formel\",\"browser_no_compatible\":\"Nettlesaren er ikkje kompatibel med AJAX-teknologien. Bruk den nyaste versjonen av Mozilla Firefox.\",\"error_convert_accessibility\":\"Feil under konvertering frå MathML til tilgjengeleg tekst.\",\"exception_cross_site\":\"Skripting på tvers av nettstadar er bere tillaten med HTTP.\",\"exception_high_surrogate\":\"Høgt surrogat er ikkje etterfølgt av lågt surrogat i fixedCharCodeAt()\",\"exception_string_length\":\"Ugyldig streng. Lengda må vera deleleg på 4\",\"exception_key_nonobject\":\"Object.keys kalla på eit ikkje-objekt\",\"exception_null_or_undefined\":\" dette er null eller ikkje definert\",\"exception_not_function\":\" er ikkje ein funksjon\",\"exception_invalid_date_format\":\"Ugyldig datoformat: \",\"exception_casting\":\"Kan ikkje bruka casting \",\"exception_casting_to\":\" til \"},\"pl\":{\"latex\":\"LaTeX\",\"cancel\":\"Anuluj\",\"accept\":\"Wstaw\",\"manual\":\"Instrukcja\",\"insert_math\":\"Wstaw formułę matematyczną - MathType\",\"insert_chem\":\"Wstaw wzór chemiczny — ChemType\",\"minimize\":\"Minimalizuj\",\"maximize\":\"Maksymalizuj\",\"fullscreen\":\"Pełny ekran\",\"exit_fullscreen\":\"Opuść tryb pełnoekranowy\",\"close\":\"Zamknij\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Okno modalne MathType\",\"close_modal_warning\":\"Czy na pewno chcesz zamknąć? Wprowadzone zmiany zostaną utracone.\",\"latex_name_label\":\"Wzór Latex\",\"browser_no_compatible\":\"Twoja przeglądarka jest niezgodna z technologią AJAX Użyj najnowszej wersji Mozilla Firefox.\",\"error_convert_accessibility\":\"Błąd podczas konwertowania z formatu MathML na dostępny tekst.\",\"exception_cross_site\":\"Krzyżowanie skryptów witryny jest dozwolone tylko dla HTTP.\",\"exception_high_surrogate\":\"Brak niskiego surogatu po wysokim surogacie w fixedCharCodeAt()\",\"exception_string_length\":\"Niewłaściwy ciąg znaków. Długość musi być wielokrotnością liczby 4.\",\"exception_key_nonobject\":\"Argumentem wywołanej funkcji Object.key nie jest obiekt.\",\"exception_null_or_undefined\":\" jest zerowy lub niezdefiniowany\",\"exception_not_function\":\" nie jest funkcją\",\"exception_invalid_date_format\":\"Nieprawidłowy format daty: \",\"exception_casting\":\"Nie można rzutować \",\"exception_casting_to\":\" na \"},\"pt\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"Inserir\",\"manual\":\"Manual\",\"insert_math\":\"Inserir fórmula matemática - MathType\",\"insert_chem\":\"Inserir uma fórmula química - ChemType\",\"minimize\":\"Minimizar\",\"maximize\":\"Maximizar\",\"fullscreen\":\"Ecrã completo\",\"exit_fullscreen\":\"Sair do ecrã completo\",\"close\":\"Fechar\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Janela modal do MathType\",\"close_modal_warning\":\"Pretende sair? As alterações efetuadas serão perdidas.\",\"latex_name_label\":\"Fórmula Latex\",\"browser_no_compatible\":\"O seu navegador não é compatível com a tecnologia AJAX. Utilize a versão mais recente do Mozilla Firefox.\",\"error_convert_accessibility\":\"Erro ao converter de MathML para texto acessível.\",\"exception_cross_site\":\"O processamento de scripts em vários sites só é permitido para HTTP.\",\"exception_high_surrogate\":\"Substituto alto não seguido por um substituto baixo em fixedCharCodeAt()\",\"exception_string_length\":\"Cadeia inválida. O comprimento tem de ser um múltiplo de 4\",\"exception_key_nonobject\":\"Object.keys chamou um não-objeto\",\"exception_null_or_undefined\":\" é nulo ou não está definido\",\"exception_not_function\":\" não é uma função\",\"exception_invalid_date_format\":\"Formato de data inválido: \",\"exception_casting\":\"Não é possível adicionar \",\"exception_casting_to\":\" até \"},\"pt_br\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"Inserir\",\"manual\":\"Manual\",\"insert_math\":\"Inserir fórmula matemática - MathType\",\"insert_chem\":\"Insira uma fórmula química - ChemType\",\"minimize\":\"Minimizar\",\"maximize\":\"Maximizar\",\"fullscreen\":\"Tela cheia\",\"exit_fullscreen\":\"Sair de tela cheia\",\"close\":\"Fechar\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Janela modal do MathType\",\"close_modal_warning\":\"Tem certeza de que deseja sair? Todas as alterações serão perdidas.\",\"latex_name_label\":\"Fórmula LaTeX\",\"browser_no_compatible\":\"O navegador não é compatível com a tecnologia AJAX. Use a versão mais recente do Mozilla Firefox.\",\"error_convert_accessibility\":\"Erro ao converter de MathML para texto acessível.\",\"exception_cross_site\":\"O uso de scripts entre sites só é permitido para HTTP.\",\"exception_high_surrogate\":\"High surrogate não seguido de low surrogate em fixedCharCodeAt()\",\"exception_string_length\":\"String inválida. O comprimento deve ser um múltiplo de 4\",\"exception_key_nonobject\":\"Object.keys chamados em não objeto\",\"exception_null_or_undefined\":\" isto é nulo ou não definido\",\"exception_not_function\":\" não é uma função\",\"exception_invalid_date_format\":\"Formato de data inválido: \",\"exception_casting\":\"Não é possível transmitir \",\"exception_casting_to\":\" para \"},\"ro\":{\"latex\":\"LaTeX\",\"cancel\":\"Anulare\",\"accept\":\"Inserați\",\"manual\":\"Ghid\",\"insert_math\":\"Inserați o formulă matematică - MathType\",\"insert_chem\":\"Inserați o formulă chimică - ChemType\",\"minimize\":\"Minimizați\",\"maximize\":\"Maximizați\",\"fullscreen\":\"Afișați pe tot ecranul\",\"exit_fullscreen\":\"Opriți afișarea pe tot ecranul\",\"close\":\"Închideți\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Fereastră modală MathType\",\"close_modal_warning\":\"Sigur doriți să ieșiți? Modificările realizate se vor pierde.\",\"latex_name_label\":\"Formulă Latex\",\"browser_no_compatible\":\"Browserul dvs. nu este compatibil cu tehnologia AJAX. Utilizați cea mai recentă versiune de Mozilla Firefox.\",\"error_convert_accessibility\":\"Eroare la convertirea din MathML în text accesibil.\",\"exception_cross_site\":\"Scriptarea între site‑uri este permisă doar pentru HTTP.\",\"exception_high_surrogate\":\"Surogatul superior nu este urmat de un surogat inferior în fixedCharCodeAt()\",\"exception_string_length\":\"Șir nevalid. Lungimea trebuie să fie multiplu de 4\",\"exception_key_nonobject\":\"Object.keys a apelat un non-obiect\",\"exception_null_or_undefined\":\" este null sau nu este definit\",\"exception_not_function\":\" nu este funcție\",\"exception_invalid_date_format\":\"Format de dată nevalid: \",\"exception_casting\":\"nu se poate difuza \",\"exception_casting_to\":\" către \"},\"ru\":{\"latex\":\"LaTeX\",\"cancel\":\"отмена\",\"accept\":\"Вставка\",\"manual\":\"вручную\",\"insert_math\":\"Вставить математическую формулу: WIRIS\",\"insert_chem\":\"Вставить химическую формулу — ChemType\",\"minimize\":\"Свернуть\",\"maximize\":\"Развернуть\",\"fullscreen\":\"На весь экран\",\"exit_fullscreen\":\"Выйти из полноэкранного режима\",\"close\":\"Закрыть\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"Режимное окно MathType\",\"close_modal_warning\":\"Вы уверены, что хотите выйти? Все внесенные изменения будут утрачены.\",\"latex_name_label\":\"Формула Latex\",\"browser_no_compatible\":\"Ваш браузер несовместим с технологией AJAX. Используйте последнюю версию Mozilla Firefox.\",\"error_convert_accessibility\":\"При преобразовании формулы в текст допустимого формата произошла ошибка.\",\"exception_cross_site\":\"Межсайтовые сценарии доступны только для HTTP.\",\"exception_high_surrogate\":\"Младший символ-заместитель не сопровождает старший символ-заместитель в исправленном методе CharCodeAt()\",\"exception_string_length\":\"Недопустимая строка. Длинна должна быть кратной 4.\",\"exception_key_nonobject\":\"Метод Object.keys вызван не для объекта\",\"exception_null_or_undefined\":\" значение пустое или не определено\",\"exception_not_function\":\" не функция\",\"exception_invalid_date_format\":\"Недопустимый формат даты: \",\"exception_casting\":\"Не удается привести \",\"exception_casting_to\":\" к \"},\"sv\":{\"latex\":\"LaTeX\",\"cancel\":\"Avbryt\",\"accept\":\"Infoga\",\"manual\":\"Bruksanvisning\",\"insert_math\":\"Infoga matematisk formel - MathType\",\"insert_chem\":\"Infoga en kemiformel – ChemType\",\"minimize\":\"Minimera\",\"maximize\":\"Maximera\",\"fullscreen\":\"Helskärm\",\"exit_fullscreen\":\"Stäng helskärm\",\"close\":\"Stäng\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modulfönster\",\"close_modal_warning\":\"Vill du avsluta? Inga ändringar kommer att sparas.\",\"latex_name_label\":\"Latex-formel\",\"browser_no_compatible\":\"Din webbläsare är inte kompatibel med AJAX-teknik. Använd den senaste versionen av Mozilla Firefox.\",\"error_convert_accessibility\":\"Det uppstod ett fel vid konvertering från MathML till åtkomlig text.\",\"exception_cross_site\":\"Skriptkörning över flera sajter är endast tillåtet för HTTP.\",\"exception_high_surrogate\":\"Hög surrogat följs inte av låg surrogat i fixedCharCodeAt()\",\"exception_string_length\":\"Ogiltig sträng. Längden måste vara en multipel av 4\",\"exception_key_nonobject\":\"Object.keys anropade icke-objekt\",\"exception_null_or_undefined\":\" det är null eller inte definierat\",\"exception_not_function\":\" är inte en funktion\",\"exception_invalid_date_format\":\"Ogiltigt datumformat: \",\"exception_casting\":\"Går inte att konvertera \",\"exception_casting_to\":\" till \"},\"tr\":{\"latex\":\"LaTeX\",\"cancel\":\"Vazgeç\",\"accept\":\"Ekle\",\"manual\":\"Kılavuz\",\"insert_math\":\"Matematik formülü ekle - MathType\",\"insert_chem\":\"Kimya formülü ekleyin - ChemType\",\"minimize\":\"Simge Durumuna Küçült\",\"maximize\":\"Ekranı Kapla\",\"fullscreen\":\"Tam Ekran\",\"exit_fullscreen\":\"Tam Ekrandan Çık\",\"close\":\"Kapat\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType kalıcı penceresi\",\"close_modal_warning\":\"Çıkmak istediğinizden emin misiniz? Yaptığınız değişiklikler kaybolacak.\",\"latex_name_label\":\"Latex Formülü\",\"browser_no_compatible\":\"Tarayıcınız AJAX teknolojisiyle uyumlu değil. Lütfen en güncel Mozilla Firefox sürümünü kullanın.\",\"error_convert_accessibility\":\"MathML biçiminden erişilebilir metne dönüştürme hatası.\",\"exception_cross_site\":\"Siteler arası komut dosyası yazma işlemine yalnızca HTTP için izin verilir.\",\"exception_high_surrogate\":\"fixedCharCodeAt() fonksiyonunda üst vekilin ardından alt vekil gelmiyor\",\"exception_string_length\":\"Geçersiz dizgi. Uzunluk, 4\\'ün katlarından biri olmalıdır\",\"exception_key_nonobject\":\"Nesne olmayan öğe üzerinde Object.keys çağrıldı\",\"exception_null_or_undefined\":\" bu değer boş veya tanımlanmamış\",\"exception_not_function\":\" bir fonksiyon değil\",\"exception_invalid_date_format\":\"Geçersiz tarih biçimi: \",\"exception_casting\":\"Tür dönüştürülemiyor \",\"exception_casting_to\":\" hedef: \"},\"zh\":{\"latex\":\"LaTeX\",\"cancel\":\"取消\",\"accept\":\"插入\",\"manual\":\"手册\",\"insert_math\":\"插入数学公式 - MathType\",\"insert_chem\":\"插入化学分子式 - ChemType\",\"minimize\":\"最小化\",\"maximize\":\"最大化\",\"fullscreen\":\"全屏幕\",\"exit_fullscreen\":\"退出全屏幕\",\"close\":\"关闭\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType 模式窗口\",\"close_modal_warning\":\"您确定要离开吗？您所做的修改将丢失。\",\"latex_name_label\":\"Latex 分子式\",\"browser_no_compatible\":\"您的浏览器不兼容 AJAX 技术。请使用最新版 Mozilla Firefox。\",\"error_convert_accessibility\":\"将 MathML 转换为可访问文本时出错。\",\"exception_cross_site\":\"仅 HTTP 允许跨站脚本。\",\"exception_high_surrogate\":\"fixedCharCodeAt() 中的高位代理之后未跟随低位代理\",\"exception_string_length\":\"无效字符串。长度必须是 4 的倍数\",\"exception_key_nonobject\":\"非对象调用了 Object.keys\",\"exception_null_or_undefined\":\" 该值为空或未定义\",\"exception_not_function\":\" 不是一个函数\",\"exception_invalid_date_format\":\"无效日期格式： \",\"exception_casting\":\"无法转换 \",\"exception_casting_to\":\" 为 \"},\"\":{}}')},function(e){e.exports=JSON.parse('{\"a\":\"7.26.0\"}')},function(module,__webpack_exports__,__webpack_require__){\"use strict\";function _typeof(e){return(_typeof=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}var md5,_unused_webpack_default_export=md5;!function(){var HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.dateStr=function(e){var t=e.getMonth()+1,n=e.getDate(),i=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return e.getFullYear()+\"-\"+(t<10?\"0\"+t:\"\"+t)+\"-\"+(n<10?\"0\"+n:\"\"+n)+\" \"+(i<10?\"0\"+i:\"\"+i)+\":\"+(r<10?\"0\"+r:\"\"+r)+\":\"+(a<10?\"0\"+a:\"\"+a)},HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(\":\"),n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:t=e.split(\"-\");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var i=(t=e.split(\" \"))[0].split(\"-\"),r=t[1].split(\":\");return new Date(i[0],i[1]-1,i[2],r[0],r[1],r[2]);default:throw\"Invalid date format : \"+e}},HxOverrides.cca=function(e,t){var n=e.charCodeAt(t);if(n==n)return n},HxOverrides.substr=function(e,t,n){return null!=t&&0!=t&&null!=n&&n<0?\"\":(null==n&&(n=e.length),t<0?(t=e.length+t)<0&&(t=0):n<0&&(n=e.length+n-t),e.substr(t,n))},HxOverrides.remove=function(e,t){for(var n=0,i=e.length;n<i;){if(e[n]==t)return e.splice(n,1),!0;n++}return!1},HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var IntIter=function(e,t){this.min=e,this.max=t};IntIter.__name__=!0,IntIter.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},__class__:IntIter};var Std=function(){};Std.__name__=!0,Std.is=function(e,t){return js.Boot.__instanceof(e,t)},Std.string=function(e){return js.Boot.__string_rec(e,\"\")},Std.int=function(e){return 0|e},Std.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=HxOverrides.cca(e,1)&&88!=HxOverrides.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t},Std.parseFloat=function(e){return parseFloat(e)},Std.random=function(e){return Math.floor(Math.random()*e)};var com=com||{};com.wiris||(com.wiris={}),com.wiris.js||(com.wiris.js={}),com.wiris.js.JsPluginTools=function(){this.tryReady()},com.wiris.js.JsPluginTools.__name__=!0,com.wiris.js.JsPluginTools.main=function(){var e;e=com.wiris.js.JsPluginTools.getInstance(),haxe.Timer.delay($bind(e,e.tryReady),100)},com.wiris.js.JsPluginTools.getInstance=function(){return null==com.wiris.js.JsPluginTools.instance&&(com.wiris.js.JsPluginTools.instance=new com.wiris.js.JsPluginTools),com.wiris.js.JsPluginTools.instance},com.wiris.js.JsPluginTools.bypassEncapsulation=function(){null==window.com&&(window.com={}),null==window.com.wiris&&(window.com.wiris={}),null==window.com.wiris.js&&(window.com.wiris.js={}),null==window.com.wiris.js.JsPluginTools&&(window.com.wiris.js.JsPluginTools=com.wiris.js.JsPluginTools.getInstance())},com.wiris.js.JsPluginTools.prototype={md5encode:function(e){return haxe.Md5.encode(e)},doLoad:function(){this.ready=!0,com.wiris.js.JsPluginTools.instance=this,com.wiris.js.JsPluginTools.bypassEncapsulation()},tryReady:function(){this.ready=!1,js.Lib.document.readyState&&(this.doLoad(),this.ready=!0),this.ready||haxe.Timer.delay($bind(this,this.tryReady),100)},__class__:com.wiris.js.JsPluginTools};var haxe=haxe||{};haxe.Log=function(){},haxe.Log.__name__=!0,haxe.Log.trace=function(e,t){js.Boot.__trace(e,t)},haxe.Log.clear=function(){js.Boot.__clear_trace()},haxe.Md5=function(){},haxe.Md5.__name__=!0,haxe.Md5.encode=function(e){return(new haxe.Md5).doEncode(e)},haxe.Md5.prototype={doEncode:function(e){for(var t=this.str2blks(e),n=1732584193,i=-271733879,r=-1732584194,a=271733878,o=0;o<t.length;){var s=n,l=i,c=r,u=a;0,n=this.ff(n,i,r,a,t[o],7,-680876936),a=this.ff(a,n,i,r,t[o+1],12,-389564586),r=this.ff(r,a,n,i,t[o+2],17,606105819),i=this.ff(i,r,a,n,t[o+3],22,-1044525330),n=this.ff(n,i,r,a,t[o+4],7,-176418897),a=this.ff(a,n,i,r,t[o+5],12,1200080426),r=this.ff(r,a,n,i,t[o+6],17,-1473231341),i=this.ff(i,r,a,n,t[o+7],22,-45705983),n=this.ff(n,i,r,a,t[o+8],7,1770035416),a=this.ff(a,n,i,r,t[o+9],12,-1958414417),r=this.ff(r,a,n,i,t[o+10],17,-42063),i=this.ff(i,r,a,n,t[o+11],22,-1990404162),n=this.ff(n,i,r,a,t[o+12],7,1804603682),a=this.ff(a,n,i,r,t[o+13],12,-40341101),r=this.ff(r,a,n,i,t[o+14],17,-1502002290),i=this.ff(i,r,a,n,t[o+15],22,1236535329),n=this.gg(n,i,r,a,t[o+1],5,-165796510),a=this.gg(a,n,i,r,t[o+6],9,-1069501632),r=this.gg(r,a,n,i,t[o+11],14,643717713),i=this.gg(i,r,a,n,t[o],20,-373897302),n=this.gg(n,i,r,a,t[o+5],5,-701558691),a=this.gg(a,n,i,r,t[o+10],9,38016083),r=this.gg(r,a,n,i,t[o+15],14,-660478335),i=this.gg(i,r,a,n,t[o+4],20,-405537848),n=this.gg(n,i,r,a,t[o+9],5,568446438),a=this.gg(a,n,i,r,t[o+14],9,-1019803690),r=this.gg(r,a,n,i,t[o+3],14,-187363961),i=this.gg(i,r,a,n,t[o+8],20,1163531501),n=this.gg(n,i,r,a,t[o+13],5,-1444681467),a=this.gg(a,n,i,r,t[o+2],9,-51403784),r=this.gg(r,a,n,i,t[o+7],14,1735328473),i=this.gg(i,r,a,n,t[o+12],20,-1926607734),n=this.hh(n,i,r,a,t[o+5],4,-378558),a=this.hh(a,n,i,r,t[o+8],11,-2022574463),r=this.hh(r,a,n,i,t[o+11],16,1839030562),i=this.hh(i,r,a,n,t[o+14],23,-35309556),n=this.hh(n,i,r,a,t[o+1],4,-1530992060),a=this.hh(a,n,i,r,t[o+4],11,1272893353),r=this.hh(r,a,n,i,t[o+7],16,-155497632),i=this.hh(i,r,a,n,t[o+10],23,-1094730640),n=this.hh(n,i,r,a,t[o+13],4,681279174),a=this.hh(a,n,i,r,t[o],11,-358537222),r=this.hh(r,a,n,i,t[o+3],16,-722521979),i=this.hh(i,r,a,n,t[o+6],23,76029189),n=this.hh(n,i,r,a,t[o+9],4,-640364487),a=this.hh(a,n,i,r,t[o+12],11,-421815835),r=this.hh(r,a,n,i,t[o+15],16,530742520),i=this.hh(i,r,a,n,t[o+2],23,-995338651),n=this.ii(n,i,r,a,t[o],6,-198630844),a=this.ii(a,n,i,r,t[o+7],10,1126891415),r=this.ii(r,a,n,i,t[o+14],15,-1416354905),i=this.ii(i,r,a,n,t[o+5],21,-57434055),n=this.ii(n,i,r,a,t[o+12],6,1700485571),a=this.ii(a,n,i,r,t[o+3],10,-1894986606),r=this.ii(r,a,n,i,t[o+10],15,-1051523),i=this.ii(i,r,a,n,t[o+1],21,-2054922799),n=this.ii(n,i,r,a,t[o+8],6,1873313359),a=this.ii(a,n,i,r,t[o+15],10,-30611744),r=this.ii(r,a,n,i,t[o+6],15,-1560198380),i=this.ii(i,r,a,n,t[o+13],21,1309151649),n=this.ii(n,i,r,a,t[o+4],6,-145523070),a=this.ii(a,n,i,r,t[o+11],10,-1120210379),r=this.ii(r,a,n,i,t[o+2],15,718787259),i=this.ii(i,r,a,n,t[o+9],21,-343485551),n=this.addme(n,s),i=this.addme(i,l),r=this.addme(r,c),a=this.addme(a,u),o+=16}return this.rhex(n)+this.rhex(i)+this.rhex(r)+this.rhex(a)},ii:function(e,t,n,i,r,a,o){return this.cmn(this.bitXOR(n,this.bitOR(t,~i)),e,t,r,a,o)},hh:function(e,t,n,i,r,a,o){return this.cmn(this.bitXOR(this.bitXOR(t,n),i),e,t,r,a,o)},gg:function(e,t,n,i,r,a,o){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(n,~i)),e,t,r,a,o)},ff:function(e,t,n,i,r,a,o){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(~t,i)),e,t,r,a,o)},cmn:function(e,t,n,i,r,a){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(i,a)),r),n)},rol:function(e,t){return e<<t|e>>>32-t},str2blks:function(e){for(var t=1+(e.length+8>>6),n=new Array,i=0,r=16*t;i<r;){n[a=i++]=0}for(var a=0;a<e.length;)n[a>>2]|=HxOverrides.cca(e,a)<<(8*e.length+a)%4*8,a++;n[a>>2]|=128<<(8*e.length+a)%4*8;var o=8*e.length,s=16*t-2;return n[s]=255&o,n[s]|=(o>>>8&255)<<8,n[s]|=(o>>>16&255)<<16,n[s]|=(o>>>24&255)<<24,n},rhex:function(e){for(var t=\"\",n=0;n<4;){var i=n++;t+=\"0123456789abcdef\".charAt(e>>8*i+4&15)+\"0123456789abcdef\".charAt(e>>8*i&15)}return t},addme:function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},bitAND:function(e,t){return(e>>>1&t>>>1)<<1|1&e&t},bitXOR:function(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t},bitOR:function(e,t){return(e>>>1|t>>>1)<<1|(1&e|1&t)},__class__:haxe.Md5},haxe.Timer=function(e){var t=this;this.id=window.setInterval(function(){t.run()},e)},haxe.Timer.__name__=!0,haxe.Timer.delay=function(e,t){var n=new haxe.Timer(t);return n.run=function(){n.stop(),e()},n},haxe.Timer.measure=function(e,t){var n=haxe.Timer.stamp(),i=e();return haxe.Log.trace(haxe.Timer.stamp()-n+\"s\",t),i},haxe.Timer.stamp=function(){return(new Date).getTime()/1e3},haxe.Timer.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:haxe.Timer};var js=js||{},$_;function $bind(e,t){var n=function e(){return e.method.apply(e.scope,arguments)};return n.scope=e,n.method=t,n}js.Boot=function(){},js.Boot.__name__=!0,js.Boot.__unhtml=function(e){return e.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\")},js.Boot.__trace=function(e,t){var n,i=null!=t?t.fileName+\":\"+t.lineNumber+\": \":\"\";i+=js.Boot.__string_rec(e,\"\"),\"undefined\"!=typeof document&&null!=(n=document.getElementById(\"haxe:trace\"))?n.innerHTML+=js.Boot.__unhtml(i)+\"<br/>\":\"undefined\"!=typeof console&&null!=console.log&&console.log(i)},js.Boot.__clear_trace=function(){var e=document.getElementById(\"haxe:trace\");null!=e&&(e.innerHTML=\"\")},js.Boot.isClass=function(e){return e.__name__},js.Boot.isEnum=function(e){return e.__ename__},js.Boot.getClass=function(e){return e.__class__},js.Boot.__string_rec=function(e,t){if(null==e)return\"null\";if(t.length>=5)return\"<...>\";var n=_typeof(e);switch(\"function\"==n&&(e.__name__||e.__ename__)&&(n=\"object\"),n){case\"object\":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var i=e[0]+\"(\";t+=\"\\t\";for(var r=2,a=e.length;r<a;){i+=2!=(o=r++)?\",\"+js.Boot.__string_rec(e[o],t):js.Boot.__string_rec(e[o],t)}return i+\")\"}var o,s=e.length;i=\"[\";t+=\"\\t\";for(a=0;a<s;){var l=a++;i+=(l>0?\",\":\"\")+js.Boot.__string_rec(e[l],t)}return i+=\"]\"}var c;try{c=e.toString}catch(e){return\"???\"}if(null!=c&&c!=Object.toString){var u=e.toString();if(\"[object Object]\"!=u)return u}var d=null;i=\"{\\n\";t+=\"\\t\";var m=null!=e.hasOwnProperty;for(var d in e)m&&!e.hasOwnProperty(d)||\"prototype\"!=d&&\"__class__\"!=d&&\"__super__\"!=d&&\"__interfaces__\"!=d&&\"__properties__\"!=d&&(2!=i.length&&(i+=\", \\n\"),i+=t+d+\" : \"+js.Boot.__string_rec(e[d],t));return i+=\"\\n\"+(t=t.substring(1))+\"}\";case\"function\":return\"<function>\";case\"string\":return e;default:return String(e)}},js.Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var i=0,r=n.length;i<r;){var a=n[i++];if(a==t||js.Boot.__interfLoop(a,t))return!0}return js.Boot.__interfLoop(e.__super__,t)},js.Boot.__instanceof=function(e,t){try{if(e instanceof t)return t!=Array||null==e.__enum__;if(js.Boot.__interfLoop(e.__class__,t))return!0}catch(e){if(null==t)return!1}switch(t){case Int:return Math.ceil(e%2147483648)===e;case Float:return\"number\"==typeof e;case Bool:return!0===e||!1===e;case String:return\"string\"==typeof e;case Dynamic:return!0;default:return null!=e&&(t==Class&&null!=e.__name__||(t==Enum&&null!=e.__ename__||e.__enum__==t))}},js.Boot.__cast=function(e,t){if(js.Boot.__instanceof(e,t))return e;throw\"Cannot cast \"+Std.string(e)+\" to \"+Std.string(t)},js.Lib=function(){},js.Lib.__name__=!0,js.Lib.debug=function(){},js.Lib.alert=function(e){alert(js.Boot.__string_rec(e,\"\"))},js.Lib.eval=function(code){return eval(code)},js.Lib.setErrorHandler=function(e){js.Lib.onerror=e},Array.prototype.indexOf&&(HxOverrides.remove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)}),Math.__name__=[\"Math\"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},String.prototype.__class__=String,String.__name__=!0,Array.prototype.__class__=Array,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=[\"Date\"];var Int={__name__:[\"Int\"]},Dynamic={__name__:[\"Dynamic\"]},Float=Number;Float.__name__=[\"Float\"];var Bool=Boolean;Bool.__ename__=[\"Bool\"];var Class={__name__:[\"Class\"]},Enum={},Void={__ename__:[\"Void\"]};\"undefined\"!=typeof document&&(js.Lib.document=document),\"undefined\"!=typeof window&&(js.Lib.window=window,js.Lib.window.onerror=function(e,t,n){var i=js.Lib.onerror;return null!=i&&i(e,[t+\":\"+n])}),com.wiris.js.JsPluginTools.main(),delete Array.prototype.__class__}(),function(){var HxOverrides=function(){};HxOverrides.__name__=!0,HxOverrides.dateStr=function(e){var t=e.getMonth()+1,n=e.getDate(),i=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return e.getFullYear()+\"-\"+(t<10?\"0\"+t:\"\"+t)+\"-\"+(n<10?\"0\"+n:\"\"+n)+\" \"+(i<10?\"0\"+i:\"\"+i)+\":\"+(r<10?\"0\"+r:\"\"+r)+\":\"+(a<10?\"0\"+a:\"\"+a)},HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(\":\"),n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:t=e.split(\"-\");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var i=(t=e.split(\" \"))[0].split(\"-\"),r=t[1].split(\":\");return new Date(i[0],i[1]-1,i[2],r[0],r[1],r[2]);default:throw\"Invalid date format : \"+e}},HxOverrides.cca=function(e,t){var n=e.charCodeAt(t);if(n==n)return n},HxOverrides.substr=function(e,t,n){return null!=t&&0!=t&&null!=n&&n<0?\"\":(null==n&&(n=e.length),t<0?(t=e.length+t)<0&&(t=0):n<0&&(n=e.length+n-t),e.substr(t,n))},HxOverrides.remove=function(e,t){for(var n=0,i=e.length;n<i;){if(e[n]==t)return e.splice(n,1),!0;n++}return!1},HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var IntIter=function(e,t){this.min=e,this.max=t};IntIter.__name__=!0,IntIter.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},__class__:IntIter};var Std=function(){};Std.__name__=!0,Std.is=function(e,t){return js.Boot.__instanceof(e,t)},Std.string=function(e){return js.Boot.__string_rec(e,\"\")},Std.int=function(e){return 0|e},Std.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=HxOverrides.cca(e,1)&&88!=HxOverrides.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t},Std.parseFloat=function(e){return parseFloat(e)},Std.random=function(e){return Math.floor(Math.random()*e)};var com=com||{};com.wiris||(com.wiris={}),com.wiris.js||(com.wiris.js={}),com.wiris.js.JsPluginTools=function(){this.tryReady()},com.wiris.js.JsPluginTools.__name__=!0,com.wiris.js.JsPluginTools.main=function(){var e;e=com.wiris.js.JsPluginTools.getInstance(),haxe.Timer.delay($bind(e,e.tryReady),100)},com.wiris.js.JsPluginTools.getInstance=function(){return null==com.wiris.js.JsPluginTools.instance&&(com.wiris.js.JsPluginTools.instance=new com.wiris.js.JsPluginTools),com.wiris.js.JsPluginTools.instance},com.wiris.js.JsPluginTools.bypassEncapsulation=function(){null==window.com&&(window.com={}),null==window.com.wiris&&(window.com.wiris={}),null==window.com.wiris.js&&(window.com.wiris.js={}),null==window.com.wiris.js.JsPluginTools&&(window.com.wiris.js.JsPluginTools=com.wiris.js.JsPluginTools.getInstance())},com.wiris.js.JsPluginTools.prototype={md5encode:function(e){return haxe.Md5.encode(e)},doLoad:function(){this.ready=!0,com.wiris.js.JsPluginTools.instance=this,com.wiris.js.JsPluginTools.bypassEncapsulation()},tryReady:function(){this.ready=!1,js.Lib.document.readyState&&(this.doLoad(),this.ready=!0),this.ready||haxe.Timer.delay($bind(this,this.tryReady),100)},__class__:com.wiris.js.JsPluginTools};var haxe=haxe||{};haxe.Log=function(){},haxe.Log.__name__=!0,haxe.Log.trace=function(e,t){js.Boot.__trace(e,t)},haxe.Log.clear=function(){js.Boot.__clear_trace()},haxe.Md5=function(){},haxe.Md5.__name__=!0,haxe.Md5.encode=function(e){return(new haxe.Md5).doEncode(e)},haxe.Md5.prototype={doEncode:function(e){for(var t=this.str2blks(e),n=1732584193,i=-271733879,r=-1732584194,a=271733878,o=0;o<t.length;){var s=n,l=i,c=r,u=a;0,n=this.ff(n,i,r,a,t[o],7,-680876936),a=this.ff(a,n,i,r,t[o+1],12,-389564586),r=this.ff(r,a,n,i,t[o+2],17,606105819),i=this.ff(i,r,a,n,t[o+3],22,-1044525330),n=this.ff(n,i,r,a,t[o+4],7,-176418897),a=this.ff(a,n,i,r,t[o+5],12,1200080426),r=this.ff(r,a,n,i,t[o+6],17,-1473231341),i=this.ff(i,r,a,n,t[o+7],22,-45705983),n=this.ff(n,i,r,a,t[o+8],7,1770035416),a=this.ff(a,n,i,r,t[o+9],12,-1958414417),r=this.ff(r,a,n,i,t[o+10],17,-42063),i=this.ff(i,r,a,n,t[o+11],22,-1990404162),n=this.ff(n,i,r,a,t[o+12],7,1804603682),a=this.ff(a,n,i,r,t[o+13],12,-40341101),r=this.ff(r,a,n,i,t[o+14],17,-1502002290),i=this.ff(i,r,a,n,t[o+15],22,1236535329),n=this.gg(n,i,r,a,t[o+1],5,-165796510),a=this.gg(a,n,i,r,t[o+6],9,-1069501632),r=this.gg(r,a,n,i,t[o+11],14,643717713),i=this.gg(i,r,a,n,t[o],20,-373897302),n=this.gg(n,i,r,a,t[o+5],5,-701558691),a=this.gg(a,n,i,r,t[o+10],9,38016083),r=this.gg(r,a,n,i,t[o+15],14,-660478335),i=this.gg(i,r,a,n,t[o+4],20,-405537848),n=this.gg(n,i,r,a,t[o+9],5,568446438),a=this.gg(a,n,i,r,t[o+14],9,-1019803690),r=this.gg(r,a,n,i,t[o+3],14,-187363961),i=this.gg(i,r,a,n,t[o+8],20,1163531501),n=this.gg(n,i,r,a,t[o+13],5,-1444681467),a=this.gg(a,n,i,r,t[o+2],9,-51403784),r=this.gg(r,a,n,i,t[o+7],14,1735328473),i=this.gg(i,r,a,n,t[o+12],20,-1926607734),n=this.hh(n,i,r,a,t[o+5],4,-378558),a=this.hh(a,n,i,r,t[o+8],11,-2022574463),r=this.hh(r,a,n,i,t[o+11],16,1839030562),i=this.hh(i,r,a,n,t[o+14],23,-35309556),n=this.hh(n,i,r,a,t[o+1],4,-1530992060),a=this.hh(a,n,i,r,t[o+4],11,1272893353),r=this.hh(r,a,n,i,t[o+7],16,-155497632),i=this.hh(i,r,a,n,t[o+10],23,-1094730640),n=this.hh(n,i,r,a,t[o+13],4,681279174),a=this.hh(a,n,i,r,t[o],11,-358537222),r=this.hh(r,a,n,i,t[o+3],16,-722521979),i=this.hh(i,r,a,n,t[o+6],23,76029189),n=this.hh(n,i,r,a,t[o+9],4,-640364487),a=this.hh(a,n,i,r,t[o+12],11,-421815835),r=this.hh(r,a,n,i,t[o+15],16,530742520),i=this.hh(i,r,a,n,t[o+2],23,-995338651),n=this.ii(n,i,r,a,t[o],6,-198630844),a=this.ii(a,n,i,r,t[o+7],10,1126891415),r=this.ii(r,a,n,i,t[o+14],15,-1416354905),i=this.ii(i,r,a,n,t[o+5],21,-57434055),n=this.ii(n,i,r,a,t[o+12],6,1700485571),a=this.ii(a,n,i,r,t[o+3],10,-1894986606),r=this.ii(r,a,n,i,t[o+10],15,-1051523),i=this.ii(i,r,a,n,t[o+1],21,-2054922799),n=this.ii(n,i,r,a,t[o+8],6,1873313359),a=this.ii(a,n,i,r,t[o+15],10,-30611744),r=this.ii(r,a,n,i,t[o+6],15,-1560198380),i=this.ii(i,r,a,n,t[o+13],21,1309151649),n=this.ii(n,i,r,a,t[o+4],6,-145523070),a=this.ii(a,n,i,r,t[o+11],10,-1120210379),r=this.ii(r,a,n,i,t[o+2],15,718787259),i=this.ii(i,r,a,n,t[o+9],21,-343485551),n=this.addme(n,s),i=this.addme(i,l),r=this.addme(r,c),a=this.addme(a,u),o+=16}return this.rhex(n)+this.rhex(i)+this.rhex(r)+this.rhex(a)},ii:function(e,t,n,i,r,a,o){return this.cmn(this.bitXOR(n,this.bitOR(t,~i)),e,t,r,a,o)},hh:function(e,t,n,i,r,a,o){return this.cmn(this.bitXOR(this.bitXOR(t,n),i),e,t,r,a,o)},gg:function(e,t,n,i,r,a,o){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(n,~i)),e,t,r,a,o)},ff:function(e,t,n,i,r,a,o){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(~t,i)),e,t,r,a,o)},cmn:function(e,t,n,i,r,a){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(i,a)),r),n)},rol:function(e,t){return e<<t|e>>>32-t},str2blks:function(e){for(var t=1+(e.length+8>>6),n=new Array,i=0,r=16*t;i<r;){n[a=i++]=0}for(var a=0;a<e.length;)n[a>>2]|=HxOverrides.cca(e,a)<<(8*e.length+a)%4*8,a++;n[a>>2]|=128<<(8*e.length+a)%4*8;var o=8*e.length,s=16*t-2;return n[s]=255&o,n[s]|=(o>>>8&255)<<8,n[s]|=(o>>>16&255)<<16,n[s]|=(o>>>24&255)<<24,n},rhex:function(e){for(var t=\"\",n=0;n<4;){var i=n++;t+=\"0123456789abcdef\".charAt(e>>8*i+4&15)+\"0123456789abcdef\".charAt(e>>8*i&15)}return t},addme:function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},bitAND:function(e,t){return(e>>>1&t>>>1)<<1|1&e&t},bitXOR:function(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t},bitOR:function(e,t){return(e>>>1|t>>>1)<<1|(1&e|1&t)},__class__:haxe.Md5},haxe.Timer=function(e){var t=this;this.id=window.setInterval(function(){t.run()},e)},haxe.Timer.__name__=!0,haxe.Timer.delay=function(e,t){var n=new haxe.Timer(t);return n.run=function(){n.stop(),e()},n},haxe.Timer.measure=function(e,t){var n=haxe.Timer.stamp(),i=e();return haxe.Log.trace(haxe.Timer.stamp()-n+\"s\",t),i},haxe.Timer.stamp=function(){return(new Date).getTime()/1e3},haxe.Timer.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:haxe.Timer};var js=js||{},$_;function $bind(e,t){var n=function e(){return e.method.apply(e.scope,arguments)};return n.scope=e,n.method=t,n}js.Boot=function(){},js.Boot.__name__=!0,js.Boot.__unhtml=function(e){return e.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\")},js.Boot.__trace=function(e,t){var n,i=null!=t?t.fileName+\":\"+t.lineNumber+\": \":\"\";i+=js.Boot.__string_rec(e,\"\"),\"undefined\"!=typeof document&&null!=(n=document.getElementById(\"haxe:trace\"))?n.innerHTML+=js.Boot.__unhtml(i)+\"<br/>\":\"undefined\"!=typeof console&&null!=console.log&&console.log(i)},js.Boot.__clear_trace=function(){var e=document.getElementById(\"haxe:trace\");null!=e&&(e.innerHTML=\"\")},js.Boot.isClass=function(e){return e.__name__},js.Boot.isEnum=function(e){return e.__ename__},js.Boot.getClass=function(e){return e.__class__},js.Boot.__string_rec=function(e,t){if(null==e)return\"null\";if(t.length>=5)return\"<...>\";var n=_typeof(e);switch(\"function\"==n&&(e.__name__||e.__ename__)&&(n=\"object\"),n){case\"object\":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var i=e[0]+\"(\";t+=\"\\t\";for(var r=2,a=e.length;r<a;){i+=2!=(o=r++)?\",\"+js.Boot.__string_rec(e[o],t):js.Boot.__string_rec(e[o],t)}return i+\")\"}var o,s=e.length;i=\"[\";t+=\"\\t\";for(a=0;a<s;){var l=a++;i+=(l>0?\",\":\"\")+js.Boot.__string_rec(e[l],t)}return i+=\"]\"}var c;try{c=e.toString}catch(e){return\"???\"}if(null!=c&&c!=Object.toString){var u=e.toString();if(\"[object Object]\"!=u)return u}var d=null;i=\"{\\n\";t+=\"\\t\";var m=null!=e.hasOwnProperty;for(var d in e)m&&!e.hasOwnProperty(d)||\"prototype\"!=d&&\"__class__\"!=d&&\"__super__\"!=d&&\"__interfaces__\"!=d&&\"__properties__\"!=d&&(2!=i.length&&(i+=\", \\n\"),i+=t+d+\" : \"+js.Boot.__string_rec(e[d],t));return i+=\"\\n\"+(t=t.substring(1))+\"}\";case\"function\":return\"<function>\";case\"string\":return e;default:return String(e)}},js.Boot.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var i=0,r=n.length;i<r;){var a=n[i++];if(a==t||js.Boot.__interfLoop(a,t))return!0}return js.Boot.__interfLoop(e.__super__,t)},js.Boot.__instanceof=function(e,t){try{if(e instanceof t)return t!=Array||null==e.__enum__;if(js.Boot.__interfLoop(e.__class__,t))return!0}catch(e){if(null==t)return!1}switch(t){case Int:return Math.ceil(e%2147483648)===e;case Float:return\"number\"==typeof e;case Bool:return!0===e||!1===e;case String:return\"string\"==typeof e;case Dynamic:return!0;default:return null!=e&&(t==Class&&null!=e.__name__||(t==Enum&&null!=e.__ename__||e.__enum__==t))}},js.Boot.__cast=function(e,t){if(js.Boot.__instanceof(e,t))return e;throw\"Cannot cast \"+Std.string(e)+\" to \"+Std.string(t)},js.Lib=function(){},js.Lib.__name__=!0,js.Lib.debug=function(){},js.Lib.alert=function(e){alert(js.Boot.__string_rec(e,\"\"))},js.Lib.eval=function(code){return eval(code)},js.Lib.setErrorHandler=function(e){js.Lib.onerror=e},Array.prototype.indexOf&&(HxOverrides.remove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)}),Math.__name__=[\"Math\"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},String.prototype.__class__=String,String.__name__=!0,Array.prototype.__class__=Array,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__=[\"Date\"];var Int={__name__:[\"Int\"]},Dynamic={__name__:[\"Dynamic\"]},Float=Number;Float.__name__=[\"Float\"];var Bool=Boolean;Bool.__ename__=[\"Bool\"];var Class={__name__:[\"Class\"]},Enum={},Void={__ename__:[\"Void\"]};\"undefined\"!=typeof document&&(js.Lib.document=document),\"undefined\"!=typeof window&&(js.Lib.window=window,js.Lib.window.onerror=function(e,t,n){var i=js.Lib.onerror;return null!=i&&i(e,[t+\":\"+n])}),com.wiris.js.JsPluginTools.main()}(),delete Array.prototype.__class__},function(e,t,n){var i=n(4);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(6)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(5)(!1)).push([e.i,\".wrs_modal_overlay {\\r\\n  position: fixed;\\r\\n  font-family: arial, sans-serif;\\r\\n  top: 0;\\r\\n  right: 0;\\r\\n  left: 0;\\r\\n  bottom: 0;\\r\\n  background: rgba(0, 0, 0, 0.8);\\r\\n  z-index: 999998;\\r\\n  opacity: 0.65;\\r\\n  pointer-events: auto;\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_ios {\\r\\n  visibility: hidden;\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_android {\\r\\n  visibility: hidden;\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_ios.moodle {\\r\\n  position: fixed;\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_stack {\\r\\n  background: rgba(0, 0, 0, 0);\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_maximized {\\r\\n  background: rgba(0, 0, 0, 0.8);\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_minimized {\\r\\n  background: rgba(0, 0, 0, 0);\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_closed {\\r\\n  background: rgba(0, 0, 0, 0);\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.wrs_modal_title {\\r\\n  color: #fff;\\r\\n  padding: 5px 0 5px 10px;\\r\\n  -moz-user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  -ms-user-select: none;\\r\\n  user-select: none;\\r\\n  text-align: left;\\r\\n}\\r\\n\\r\\n.wrs_modal_close_button {\\r\\n  float: right;\\r\\n  cursor: pointer;\\r\\n  color: #fff;\\r\\n  padding: 5px 10px 5px 0;\\r\\n  margin: 10px 7px 0 0;\\r\\n  background-repeat: no-repeat;\\r\\n}\\r\\n\\r\\n.wrs_modal_minimize_button {\\r\\n  float: right;\\r\\n  cursor: pointer;\\r\\n  color: #fff;\\r\\n  padding: 5px 10px 5px 0;\\r\\n  top: inherit;\\r\\n  margin: 10px 7px 0 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_stack_button {\\r\\n  float: right;\\r\\n  cursor: pointer;\\r\\n  color: #fff;\\r\\n  margin: 10px 7px 0 0;\\r\\n  padding: 5px 10px 5px 0;\\r\\n  top: inherit;\\r\\n}\\r\\n\\r\\n.wrs_modal_stack_button.wrs_stack {\\r\\n  visibility: hidden;\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_stack_button.wrs_minimized {\\r\\n  visibility: hidden;\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_maximize_button {\\r\\n  float: right;\\r\\n  cursor: pointer;\\r\\n  color: #fff;\\r\\n  margin: 10px 7px 0 0;\\r\\n  padding: 5px 10px 5px 0;\\r\\n  top: inherit;\\r\\n}\\r\\n\\r\\n.wrs_modal_maximize_button.wrs_maximized {\\r\\n  visibility: hidden;\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_wrapper {\\r\\n  display: block;\\r\\n  margin: 6px;\\r\\n}\\r\\n\\r\\n.wrs_modal_title_bar {\\r\\n  display: block;\\r\\n  background-color: #778e9a;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer {\\r\\n  border: none;\\r\\n  background: #fafafa;\\r\\n  z-index: 999999;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_desktop {\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_maximized {\\r\\n  position: fixed;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized {\\r\\n  position: fixed;\\r\\n  top: inherit;\\r\\n  margin: 0;\\r\\n  margin-right: 10px;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_closed {\\r\\n  visibility: hidden;\\r\\n  display: none;\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n\\r\\n/* Class that exists but hasn't got css properties defined\\r\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized.wrs_drag {} */\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_stack {\\r\\n  position: fixed;\\r\\n  bottom: 0;\\r\\n  right: 0;\\r\\n  box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_drag {\\r\\n  box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_drag {\\r\\n  box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_android {\\r\\n  margin: auto;\\r\\n  position: fixed;\\r\\n  width: 99%;\\r\\n  height: 99%;\\r\\n  overflow: hidden;\\r\\n  transform: translate(50%, -50%);\\r\\n  top: 50%;\\r\\n  right: 50% !important;\\r\\n  position: fixed;\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_ios {\\r\\n  margin: auto;\\r\\n  position: fixed;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  overflow: hidden;\\r\\n  transform: translate(50%, -50%);\\r\\n  top: 50%;\\r\\n  right: 50% !important;\\r\\n  position: fixed;\\r\\n}\\r\\n\\r\\n\\r\\n/* Class that exists but hasn't got css properties defined\\r\\n.wrs_content_container.wrs_maximized {} */\\r\\n\\r\\n.wrs_content_container.wrs_minimized {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n/* .wrs_editor {\\r\\n    flex-grow: 1;\\r\\n} */\\r\\n\\r\\n.wrs_content_container.wrs_modal_android {\\r\\n  width: 100%;\\r\\n  flex-grow: 1;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.wrs_content_container.wrs_modal_android > div:first-child {\\r\\n  flex-grow: 1;\\r\\n}\\r\\n\\r\\n.wrs_content_container.wrs_modal_ios > div:first-child {\\r\\n  flex-grow: 1;\\r\\n}\\r\\n\\r\\n.wrs_content_container.wrs_modal_desktop > div:first-child {\\r\\n  flex-grow: 1;\\r\\n}\\r\\n\\r\\n.wrs_modal_wrapper.wrs_modal_android {\\r\\n  margin: auto;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  height: 100%;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.wrs_content_container.wrs_modal_desktop {\\r\\n  width: 100%;\\r\\n  flex-grow: 1;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.wrs_content_container.wrs_modal_ios {\\r\\n  width: 100%;\\r\\n  flex-grow: 1;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.wrs_modal_wrapper.wrs_modal_ios {\\r\\n  margin: auto;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n  height: 100%;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.wrs_virtual_keyboard {\\r\\n  height: 100%;\\r\\n  width: 100%;\\r\\n  top: 0;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, 0%);\\r\\n}\\r\\n\\r\\n@media all and (orientation: portrait) {\\r\\n  .wrs_modal_dialogContainer.wrs_modal_mobile {\\r\\n    width: 100vmin;\\r\\n    height: 100vmin;\\r\\n    margin: auto;\\r\\n    border-width: 0;\\r\\n  }\\r\\n\\r\\n  .wrs_modal_wrapper.wrs_modal_mobile {\\r\\n    width: 100vmin;\\r\\n    height: 100vmin;\\r\\n    margin: auto;\\r\\n  }\\r\\n}\\r\\n\\r\\n@media all and (orientation: landscape) {\\r\\n  .wrs_modal_dialogContainer.wrs_modal_mobile {\\r\\n    width: 100vmin;\\r\\n    height: 100vmin;\\r\\n    margin: auto;\\r\\n    border-width: 0;\\r\\n  }\\r\\n\\r\\n  .wrs_modal_wrapper.wrs_modal_mobile {\\r\\n    width: 100vmin;\\r\\n    height: 100vmin;\\r\\n    margin: auto;\\r\\n  }\\r\\n}\\r\\n\\r\\n.wrs_modal_dialogContainer.wrs_modal_badStock {\\r\\n  width: 100%;\\r\\n  height: 280px;\\r\\n  margin: 0 auto;\\r\\n  border-width: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_wrapper.wrs_modal_badStock {\\r\\n  width: 100%;\\r\\n  height: 280px;\\r\\n  margin: 0 auto;\\r\\n  border-width: 0;\\r\\n}\\r\\n\\r\\n.wrs_noselect {\\r\\n  -moz-user-select: none;\\r\\n  -khtml-user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  -ms-user-select: none;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.wrs_bottom_right_resizer {\\r\\n  width: 10px;\\r\\n  height: 10px;\\r\\n  color: #778e9a;\\r\\n  position: absolute;\\r\\n  right: 4px;\\r\\n  bottom: 8px;\\r\\n  cursor: se-resize;\\r\\n  -moz-user-select: none;\\r\\n  -webkit-user-select: none;\\r\\n  -ms-user-select: none;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.wrs_bottom_left_resizer {\\r\\n  width: 15px;\\r\\n  height: 15px;\\r\\n  color: #778e9a;\\r\\n  position: absolute;\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  cursor: se-resize;\\r\\n}\\r\\n\\r\\n.wrs_modal_controls {\\r\\n  height: 42px;\\r\\n  margin: 3px 0;\\r\\n  overflow: hidden;\\r\\n  line-height: normal;\\r\\n}\\r\\n\\r\\n.wrs_modal_links {\\r\\n  margin: 10px auto;\\r\\n  margin-bottom: 0;\\r\\n  font-family: arial, sans-serif;\\r\\n  padding: 6px;\\r\\n  display: inline;\\r\\n  float: right;\\r\\n  text-align: right;\\r\\n}\\r\\n\\r\\n.wrs_modal_links > a {\\r\\n  text-decoration: none;\\r\\n  color: #778e9a;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\n.wrs_modal_button_cancel,\\r\\n.wrs_modal_button_cancel:hover,\\r\\n.wrs_modal_button_cancel:visited,\\r\\n.wrs_modal_button_cancel:active,\\r\\n.wrs_modal_button_cancel:focus {\\r\\n  min-width: 80px;\\r\\n  font-size: 14px;\\r\\n  border-radius: 3px;\\r\\n  border: 1px solid #778e9a;\\r\\n  padding: 6px 8px;\\r\\n  margin: 10px auto;\\r\\n  margin-left: 5px;\\r\\n  margin-bottom: 0;\\r\\n  cursor: pointer;\\r\\n  font-family: arial, sans-serif;\\r\\n  background-color: #ddd;\\r\\n  height: 32px;\\r\\n}\\r\\n\\r\\n.wrs_modal_button_accept,\\r\\n.wrs_modal_button_accept:hover,\\r\\n.wrs_modal_button_accept:visited,\\r\\n.wrs_modal_button_accept:active,\\r\\n.wrs_modal_button_accept:focus {\\r\\n  min-width: 80px;\\r\\n  font-size: 14px;\\r\\n  border-radius: 3px;\\r\\n  border: 1px solid #778e9a;\\r\\n  padding: 6px 8px;\\r\\n  margin: 10px auto;\\r\\n  margin-right: 5px;\\r\\n  margin-bottom: 0;\\r\\n  color: #fff;\\r\\n  background: #778e9a;\\r\\n  cursor: pointer;\\r\\n  font-family: arial, sans-serif;\\r\\n  height: 32px;\\r\\n}\\r\\n\\r\\n.wrs_editor_vertical_bar {\\r\\n  height: 20px;\\r\\n  float: right;\\r\\n  background: none;\\r\\n  width: 20px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.wrs_modal_buttons_container {\\r\\n  display: inline;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.wrs_modal_buttons_container.wrs_modalAndroid {\\r\\n  padding-left: 6px;\\r\\n}\\r\\n\\r\\n.wrs_modal_buttons_container.wrs_modalDesktop {\\r\\n  padding-left: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_buttons_container > button {\\r\\n  line-height: normal;\\r\\n  background-image: none;\\r\\n}\\r\\n\\r\\n.wrs_modal_wrapper {\\r\\n  margin: 6px;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.wrs_modal_wrapper.wrs_modal_desktop.wrs_minimized {\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n@media only screen and (max-device-width: 480px) and (orientation: portrait) {\\r\\n  #wrs_modal_wrapper {\\r\\n    width: 140%;\\r\\n  }\\r\\n}\\r\\n\\r\\n.wrs_popupmessage_overlay_envolture {\\r\\n  display: none;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.wrs_popupmessage_overlay {\\r\\n  position: absolute;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  right: 0;\\r\\n  bottom: 0;\\r\\n  background-color: rgba(0, 0, 0, 0.5);\\r\\n  z-index: 4;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.wrs_popupmessage_panel {\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, -50%);\\r\\n  position: absolute;\\r\\n  background: white;\\r\\n  max-width: 500px;\\r\\n  width: 75%;\\r\\n  border-radius: 2px;\\r\\n  padding: 20px;\\r\\n  font-family: sans-serif;\\r\\n  font-size: 15px;\\r\\n  text-align: left;\\r\\n  color: #2e2e2e;\\r\\n  z-index: 5;\\r\\n  max-height: 75%;\\r\\n  overflow: auto;\\r\\n}\\r\\n\\r\\n.wrs_popupmessage_button_area {\\r\\n  margin: 10px 0 0 0;\\r\\n}\\r\\n\\r\\n.wrs_panelContainer * {\\r\\n  border: 0;\\r\\n}\\r\\n\\r\\n.wrs_button_cancel,\\r\\n.wrs_button_cancel:hover,\\r\\n.wrs_button_cancel:visited,\\r\\n.wrs_button_cancel:active,\\r\\n.wrs_button_cancel:focus {\\r\\n  min-width: 80px;\\r\\n  font-size: 14px;\\r\\n  border-radius: 3px;\\r\\n  border: 1px solid #778e9a;\\r\\n  padding: 6px 8px;\\r\\n  margin: 10px auto;\\r\\n  margin-left: 5px;\\r\\n  margin-bottom: 0;\\r\\n  cursor: pointer;\\r\\n  font-family: arial, sans-serif;\\r\\n  background-color: #ddd;\\r\\n  background-image: none;\\r\\n  height: 32px;\\r\\n}\\r\\n\\r\\n.wrs_button_accept,\\r\\n.wrs_button_accept:hover,\\r\\n.wrs_button_accept:visited,\\r\\n.wrs_button_accept:active,\\r\\n.wrs_button_accept:focus {\\r\\n  min-width: 80px;\\r\\n  font-size: 14px;\\r\\n  border-radius: 3px;\\r\\n  border: 1px solid #778e9a;\\r\\n  padding: 6px 8px;\\r\\n  margin: 10px auto;\\r\\n  margin-right: 5px;\\r\\n  margin-bottom: 0;\\r\\n  color: #fff;\\r\\n  background: #778e9a;\\r\\n  cursor: pointer;\\r\\n  font-family: arial, sans-serif;\\r\\n  height: 32px;\\r\\n}\\r\\n\\r\\n.wrs_editor button {\\r\\n  box-shadow: none;\\r\\n}\\r\\n\\r\\n.wrs_editor .wrs_header button {\\r\\n  border-bottom: none;\\r\\n  border-bottom-left-radius: 0;\\r\\n  border-bottom-right-radius: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_overlay.wrs_modal_desktop.wrs_stack.wrs_overlay_active {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n/* Fix selection in drupal style */\\r\\n.wrs_toolbar tr:focus {\\r\\n  background: none;\\r\\n}\\r\\n\\r\\n.wrs_toolbar tr:hover {\\r\\n  background: none;\\r\\n}\\r\\n\\r\\n/* End of fix drupal */\\r\\n.wrs_modal_rtl .wrs_modal_button_cancel {\\r\\n  margin-right: 5px;\\r\\n  margin-left: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_rtl .wrs_modal_button_accept {\\r\\n  margin-right: 0;\\r\\n  margin-left: 5px;\\r\\n}\\r\\n\\r\\n.wrs_modal_rtl .wrs_button_cancel {\\r\\n  margin-right: 5px;\\r\\n  margin-left: 0;\\r\\n}\\r\\n\\r\\n.wrs_modal_rtl .wrs_button_accept {\\r\\n  margin-right: 0;\\r\\n  margin-left: 5px;\\r\\n}\\r\\n\",\"\"])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||\"\",i=e[3];if(!i)return n;if(t&&\"function\"==typeof btoa){var r=function(e){return\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+\" */\"}(i),a=i.sources.map(function(e){return\"/*# sourceURL=\"+i.sourceRoot+e+\" */\"});return[n].concat(a).concat([r]).join(\"\\n\")}return[n].join(\"\\n\")}(t,e);return t[2]?\"@media \"+t[2]+\"{\"+n+\"}\":n}).join(\"\")},t.i=function(e,n){\"string\"==typeof e&&(e=[[null,e,\"\"]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];\"number\"==typeof a&&(i[a]=!0)}for(r=0;r<e.length;r++){var o=e[r];\"number\"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]=\"(\"+o[2]+\") and (\"+n+\")\"),t.push(o))}},t}},function(e,t,n){var i={},r=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),a=function(e){var t={};return function(e,n){if(\"function\"==typeof e)return e();if(void 0===t[e]){var i=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),o=null,s=0,l=[],c=n(7);function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=i[r.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(f(r.parts[o],t))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(f(r.parts[o],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function d(e,t){for(var n=[],i={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(s):n.push(i[o]={id:o,parts:[s]})}return n}function m(e,t){var n=a(e.insertInto);if(!n)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var i=l[l.length-1];if(\"top\"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if(\"bottom\"===e.insertAt)n.appendChild(t);else{if(\"object\"!=typeof e.insertAt||!e.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var r=a(e.insertAt.before,n);n.insertBefore(t,r)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function g(e){var t=document.createElement(\"style\");if(void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return p(t,e.attrs),m(e,t),t}function p(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function f(e,t){var n,i,r,a;if(t.transform&&e.css){if(!(a=\"function\"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var l=s++;n=o||(o=g(t)),i=_.bind(null,n,l,!1),r=_.bind(null,n,l,!0)}else e.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(n=function(e){var t=document.createElement(\"link\");return void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),e.attrs.rel=\"stylesheet\",p(t,e.attrs),m(e,t),t}(t),i=function(e,t,n){var i=n.css,r=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(i=c(i));r&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+\" */\");var o=new Blob([i],{type:\"text/css\"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),r=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute(\"media\",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){h(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(t=t||{}).attrs=\"object\"==typeof t.attrs?t.attrs:{},t.singleton||\"boolean\"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto=\"head\"),t.insertAt||(t.insertAt=\"bottom\");var n=d(e,t);return u(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var o=n[a];(s=i[o.id]).refs--,r.push(s)}e&&u(d(e,t),t);for(a=0;a<r.length;a++){var s;if(0===(s=r[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join(\"\\n\")}}();function _(e,t,n,i){var r=n?\"\":i.css;if(e.styleSheet)e.styleSheet.cssText=v(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t=\"undefined\"!=typeof window&&window.location;if(!t)throw new Error(\"fixUrls requires window.location\");if(!e||\"string\"!=typeof e)return e;var n=t.protocol+\"//\"+t.host,i=n+t.pathname.replace(/\\/[^\\/]*$/,\"/\");return e.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,function(e,t){var r,a=t.trim().replace(/^\"(.*)\"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(a)?e:(r=0===a.indexOf(\"//\")?a:0===a.indexOf(\"/\")?n+a:i+a.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(r)+\")\")})}},function(e,t,n){\"use strict\";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,null,[{key:\"safeXmlCharactersEntities\",get:function(){return{tagOpener:\"&laquo;\",tagCloser:\"&raquo;\",doubleQuote:\"&uml;\",realDoubleQuote:\"&quot;\"}}},{key:\"safeBadBlackboardCharacters\",get:function(){return{ltElement:\"«mo»<«/mo»\",gtElement:\"«mo»>«/mo»\",ampElement:\"«mo»&«/mo»\"}}},{key:\"safeGoodBlackboardCharacters\",get:function(){return{ltElement:\"«mo»§lt;«/mo»\",gtElement:\"«mo»§gt;«/mo»\",ampElement:\"«mo»§amp;«/mo»\"}}},{key:\"xmlCharacters\",get:function(){return{id:\"xmlCharacters\",tagOpener:\"<\",tagCloser:\">\",doubleQuote:'\"',ampersand:\"&\",quote:\"'\"}}},{key:\"safeXmlCharacters\",get:function(){return{id:\"safeXmlCharacters\",tagOpener:\"«\",tagCloser:\"»\",doubleQuote:\"¨\",ampersand:\"§\",quote:\"`\",realDoubleQuote:\"¨\"}}}]),e}();function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,null,[{key:\"isMathmlInAttribute\",value:function(e,t){var n=\"[\\\\s]*(\".concat(\"\\\"[^\\\"]*\\\"|'[^']*'\",\")[\\\\s]*=[\\\\s]*[\\\\w-]+[\\\\s]*\"),i=\"('\".concat(n,\"')*\"),r=\"^\".concat(\"['\\\"][\\\\s]*=[\\\\s]*[\\\\w-]+\").concat(i,\"[\\\\s]+gmi<\"),a=new RegExp(r),o=e.substring(0,t).split(\"\").reverse().join(\"\");return a.test(o)}},{key:\"safeXmlDecode\",value:function(e){var t=r.safeXmlCharactersEntities.tagOpener,n=r.safeXmlCharactersEntities.tagCloser,i=r.safeXmlCharactersEntities.doubleQuote,a=r.safeXmlCharactersEntities.realDoubleQuote;e=(e=(e=(e=e.split(t).join(r.safeXmlCharacters.tagOpener)).split(n).join(r.safeXmlCharacters.tagCloser)).split(i).join(r.safeXmlCharacters.doubleQuote)).split(a).join(r.safeXmlCharacters.realDoubleQuote);var o=r.safeBadBlackboardCharacters.ltElement,s=r.safeBadBlackboardCharacters.gtElement,l=r.safeBadBlackboardCharacters.ampElement;\"_wrs_blackboard\"in window&&window._wrs_blackboard&&(e=(e=(e=e.split(o).join(r.safeGoodBlackboardCharacters.ltElement)).split(s).join(r.safeGoodBlackboardCharacters.gtElement)).split(l).join(r.safeGoodBlackboardCharacters.ampElement)),t=r.safeXmlCharacters.tagOpener,n=r.safeXmlCharacters.tagCloser,i=r.safeXmlCharacters.doubleQuote,a=r.safeXmlCharacters.realDoubleQuote;var c=r.safeXmlCharacters.ampersand,u=r.safeXmlCharacters.quote;e=(e=(e=(e=(e=e.split(t).join(r.xmlCharacters.tagOpener)).split(n).join(r.xmlCharacters.tagCloser)).split(i).join(r.xmlCharacters.doubleQuote)).split(c).join(r.xmlCharacters.ampersand)).split(u).join(r.xmlCharacters.quote);for(var d=\"\",m=null,h=0;h<e.length;h+=1){var g=e.charAt(h);null==m?\"$\"===g?m=\"\":d+=g:\";\"===g?(d+=\"&\".concat(m),m=null):g.match(/([a-zA-Z0-9#._-] | '-')/)?m+=g:(d+=\"$\".concat(m),m=null,h-=1)}return d}},{key:\"safeXmlEncode\",value:function(e){var t=r.xmlCharacters.tagOpener,n=r.xmlCharacters.tagCloser,i=r.xmlCharacters.doubleQuote,a=r.xmlCharacters.ampersand,o=r.xmlCharacters.quote;return e=(e=(e=(e=(e=e.split(t).join(r.safeXmlCharacters.tagOpener)).split(n).join(r.safeXmlCharacters.tagCloser)).split(i).join(r.safeXmlCharacters.doubleQuote)).split(a).join(r.safeXmlCharacters.ampersand)).split(o).join(r.safeXmlCharacters.quote)}},{key:\"mathMLEntities\",value:function(e){for(var t=\"\",n=0;n<e.length;n+=1){var i=e.charAt(n);if(e.codePointAt(n)>128)t+=\"&#\".concat(e.codePointAt(n),\";\"),e.codePointAt(n)>65535&&(n+=1);else if(\"&\"===i){var r=e.indexOf(\";\",n+1);if(r>=0){var a=document.createElement(\"span\");a.innerHTML=e.substring(n,r+1),t+=\"&#\".concat(w.fixedCharCodeAt(a.textContent||a.innerText,0),\";\"),n=r}else t+=i}else t+=i}return t}},{key:\"addCustomEditorClassAttribute\",value:function(e,t){var n=\"\",i=e.indexOf(\"<math\");if(0===i){var r=e.indexOf(\">\");if(-1===e.indexOf(\"class\"))return n=\"\".concat(e.substr(i,r),' class=\"wrs_').concat(t,'\">'),n+=e.substr(r+1,e.length)}return e}},{key:\"removeCustomEditorClassAttribute\",value:function(e,t){return-1===e.indexOf(\"class\")||-1===e.indexOf(\"wrs_\".concat(t))?e:-1!==e.indexOf('class=\"wrs_'.concat(t,'\"'))?e.replace('class=\"wrs_'.concat(t,'\"'),\"\"):e.replace(\"wrs_\".concat(t),\"\")}},{key:\"addAnnotation\",value:function(t,n,i){var r=\"\";if(-1!==t.indexOf(\"<annotation\")){var a=t.indexOf(\"</semantics>\");r=\"\".concat(t.substring(0,a),'<annotation encoding=\"').concat(i,'\">').concat(n,\"</annotation>\").concat(t.substring(a))}else if(e.isEmpty(t)){var o=t.indexOf(\"/>\"),s=t.indexOf(\">\"),l=s===o?o:s;r=\"\".concat(t.substring(0,l),'><semantics><annotation encoding=\"').concat(i,'\">').concat(n,\"</annotation></semantics></math>\")}else{var c=t.indexOf(\">\")+1,u=t.lastIndexOf(\"</math>\"),d=t.substring(c,u);r=\"\".concat(t.substring(0,c),\"<semantics>\").concat(d,'<annotation encoding=\"').concat(i,'\">').concat(n,\"</annotation></semantics></math>\")}return r}},{key:\"removeAnnotation\",value:function(t,n){var i=t,r='<annotation encoding=\"'.concat(n,'\">'),a=t.indexOf(r);if(-1!==a){for(var o=!1,s=t.indexOf(\"<annotation\");-1!==s;)s!==a&&(o=!0),s=t.indexOf(\"<annotation\",s+1);if(o){var l=t.indexOf(\"</annotation>\",a)+\"</annotation>\".length;i=t.substring(0,a)+t.substring(l)}else i=e.removeSemantics(t)}return i}},{key:\"removeSemantics\",value:function(e){var t=e,n=e.indexOf(\"<semantics>\");if(-1!==n){var i=e.indexOf(\"<annotation\",n+\"<semantics>\".length);-1!==i&&(t=e.substring(0,n)+e.substring(n+\"<semantics>\".length,i)+\"</math>\")}return t}},{key:\"removeSemanticsOcurrences\",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.xmlCharacters,n=\"\".concat(t.tagOpener,\"math\"),i=\"\".concat(t.tagOpener,\"/math\").concat(t.tagCloser),a=\"/\".concat(t.tagCloser),o=t.tagCloser,s=\"\".concat(t.tagOpener,\"semantics\").concat(t.tagCloser),l=\"\".concat(t.tagOpener,\"annotation encoding=\"),c=\"\",u=e.indexOf(n),d=0;-1!==u;){c+=e.substring(d,u);var m=e.indexOf(i,u),h=e.indexOf(a,u),g=e.indexOf(o,u);-1!==m?d=m:h===g-1&&(d=h);var p=e.indexOf(s,u);if(-1!==p){var f=e.substring(u,p),v=e.indexOf(l,u);if(-1!==v){var _=p+s.length;c+=f+e.substring(_,v)+i,u=e.indexOf(n,u+n.length),d+=i.length}else d=u,u=e.indexOf(n,u+n.length)}else d=u,u=e.indexOf(n,u+n.length)}return c+=e.substring(d,e.length)}},{key:\"containClass\",value:function(e,t){var n=e.indexOf(\"class\");if(-1===n)return!1;var i=e.indexOf(\">\",n);return-1!==e.substring(n,i).indexOf(t)}},{key:\"isEmpty\",value:function(e){var t=e.indexOf(\">\"),n=e.indexOf(\"/>\"),i=!1;if(-1!==n&&n===t-1&&(i=!0),!i){var r=new RegExp(\"</(.+:)?math>\").exec(e);r&&(i=t+1===r.index)}return i}},{key:\"encodeProperties\",value:function(e){return e.replace(/\\w+=\".*?\"/g,function(e){var t=e.indexOf('\"'),n=e.substring(t+1,e.length-1),i=w.htmlEntities(n);return\"\".concat(e.substring(0,t+1)).concat(i,'\"')})}}]),e}();function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(e,null,[{key:\"addConfiguration\",value:function(t){Object.assign(e.properties,t)}},{key:\"get\",value:function(t){return Object.prototype.hasOwnProperty.call(e.properties,t)?e.properties[t]:!!Object.prototype.hasOwnProperty.call(e.properties,\"_wrs_conf_\")&&e.properties[\"_wrs_conf_\".concat(t)]}},{key:\"set\",value:function(t,n){e.properties[t]=n}},{key:\"update\",value:function(t,n){if(e.get(t)){var i=Object.assign(e.get(t),n);e.set(t,i)}else e.set(t,n)}},{key:\"properties\",get:function(){return e._properties},set:function(t){e._properties=t}}]),e}();function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}l._properties={};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.cache=[]}return function(e,t,n){t&&c(e.prototype,t),n&&c(e,n)}(e,[{key:\"populate\",value:function(e,t){this.cache[e]=t}},{key:\"get\",value:function(e){return!!Object.prototype.hasOwnProperty.call(this.cache,e)&&this.cache[e]}}]),e}();function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.listeners=[]}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(e,[{key:\"add\",value:function(e){this.listeners.push(e)}},{key:\"fire\",value:function(e,t){for(var n=0;n<this.listeners.length&&!t.cancelled;n+=1)this.listeners[n].eventName===e&&this.listeners[n].callback(t);return t.defaultPrevented}}],[{key:\"newListener\",value:function(e,t){var n={};return n.eventName=e,n.callback=t,n}}]),e}();function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(e,null,[{key:\"addListener\",value:function(t){e.listeners.add(t)}},{key:\"fireEvent\",value:function(t,n){e.listeners.fire(t,n)}},{key:\"setServicePath\",value:function(t,n){e.servicePaths[t]=n}},{key:\"getServicePath\",value:function(t){return e.servicePaths[t]}},{key:\"getServerURL\",value:function(){var e=window.location.href.split(\"/\");return\"\".concat(e[0],\"//\").concat(e[2])}},{key:\"init\",value:function(t){e.parameters=t;var n=e.createServiceURI(\"configurationjs\"),i=e.createServiceURI(\"createimage\"),r=e.createServiceURI(\"showimage\"),a=e.createServiceURI(\"getmathml\"),o=e.createServiceURI(\"service\");if(0===e.parameters.URI.indexOf(\"/\")){var s=e.getServerURL();n=s+n,r=s+r,i=s+i,a=s+a,o=s+o}e.setServicePath(\"configurationjs\",n),e.setServicePath(\"showimage\",r),e.setServicePath(\"createimage\",i),e.setServicePath(\"service\",o),e.setServicePath(\"getmathml\",a),e.setServicePath(\"configurationjs\",n),e.listeners.fire(\"onInit\",{})}},{key:\"getUrl\",value:function(e,t){var n=window.location.toString().substr(0,window.location.toString().lastIndexOf(\"/\")+1),i=w.createHttpRequest();return i?(void 0===t||void 0===t?i.open(\"GET\",e,!1):\"/\"===e.substr(0,1)||\"http://\"===e.substr(0,7)||\"https://\"===e.substr(0,8)?i.open(\"POST\",e,!1):i.open(\"POST\",n+e,!1),void 0!==t&&t?(i.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded; charset=UTF-8\"),i.send(w.httpBuildQuery(t))):i.send(null),i.responseText):\"\"}},{key:\"getService\",value:function(t,n,i){var r;if(!0===i){var a=n?\"?\"+n:\"\",o=\"\".concat(e.getServicePath(t)).concat(a);r=e.getUrl(o)}else{var s=e.getServicePath(t);r=e.getUrl(s,n)}return r}},{key:\"getServerLanguageFromService\",value:function(e){return-1!==e.indexOf(\".php\")?\"php\":-1!==e.indexOf(\".aspx\")?\"aspx\":-1!==e.indexOf(\"wirispluginengine\")?\"ruby\":\"java\"}},{key:\"createServiceURI\",value:function(t){var n=e.serverExtension();return w.concatenateUrl(e.parameters.URI,t)+n}},{key:\"serverExtension\",value:function(){return-1!==e.parameters.server.indexOf(\"php\")?\".php\":-1!==e.parameters.server.indexOf(\"aspx\")?\".aspx\":\"\"}},{key:\"listeners\",get:function(){return e._listeners}},{key:\"parameters\",get:function(){return e._parameters},set:function(t){e._parameters=t}},{key:\"servicePaths\",get:function(){return e._servicePaths},set:function(t){e._servicePaths=t}},{key:\"integrationPath\",get:function(){return e._integrationPath},set:function(t){e._integrationPath=t}}]),e}();function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}g._servicePaths={},g._integrationPath=\"\",g._listeners=new m,g._parameters={};var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(e,null,[{key:\"getLatexFromMathML\",value:function(t){var n=o.removeSemantics(t),i=e.cache,r={service:\"mathml2latex\",mml:n},a=JSON.parse(g.getService(\"service\",r)),s=\"\";if(\"ok\"===a.status){s=a.result.text;var l=w.htmlEntities(s),c=o.addAnnotation(t,l,\"LaTeX\");i.populate(s,c)}return s}},{key:\"getMathMLFromLatex\",value:function(t,n){var i=e.cache;if(e.cache.get(t))return e.cache.get(t);var r={service:\"latex2mathml\",latex:t};n&&(r.saveLatex=\"\");var a,s=JSON.parse(g.getService(\"service\",r));if(\"ok\"===s.status){var l=s.result.text;a=-1===(l=l.split(\"\\r\").join(\"\").split(\"\\n\").join(\" \")).indexOf(\"semantics\")&&-1===l.indexOf(\"annotation\")?l=o.addAnnotation(l,t,\"LaTeX\"):l,i.get(t)||i.populate(t,l)}else a=\"$$\".concat(t,\"$$\");return a}},{key:\"parseMathmlToLatex\",value:function(t,n){for(var i,a,s,l=\"\",c=\"\".concat(n.tagOpener,\"math\"),u=\"\".concat(n.tagOpener,\"/math\").concat(n.tagCloser),d=\"\".concat(n.tagOpener,\"annotation encoding=\").concat(n.doubleQuote,\"LaTeX\").concat(n.doubleQuote).concat(n.tagCloser),m=\"\".concat(n.tagOpener,\"/annotation\").concat(n.tagCloser),h=t.indexOf(c),g=0;-1!==h;){if(l+=t.substring(g,h),-1===(g=t.indexOf(u,h))?g=t.length-1:g+=u.length,-1!==(a=(i=t.substring(h,g)).indexOf(d))){a+=d.length,s=i.indexOf(m);var p=i.substring(a,s);n===r.safeXmlCharacters&&(p=o.safeXmlDecode(p)),l+=\"$$\".concat(p,\"$$\"),e.cache.populate(p,i)}else l+=i;h=t.indexOf(c,g)}return l+=t.substring(g,t.length)}},{key:\"getLatexFromTextNode\",value:function(e,t,n){void 0!==n&&null!=n||(n={open:\"$$\",close:\"$$\"});for(var i,r=e;r.previousSibling&&3===r.previousSibling.nodeType;)r=r.previousSibling;function a(e,t,i){for(var r=e.nodeValue.indexOf(i,t);-1===r;){if(!(e=e.nextSibling))return null;r=e.nodeValue?e.nodeValue.indexOf(n.close):-1}return{node:e,position:r}}function o(e,t,n,i){if(e===n)return t<=i;for(;e&&e!==n;)e=e.nextSibling;return e===n}var s,l={node:r,position:0},c=n.open.length;do{if(null==(i=a(l.node,l.position,n.open))||o(e,t,i.node,i.position))return null;if(null==(l=a(i.node,i.position+c,n.close)))return null;l.position+=c}while(o(l.node,l.position,e,t));if(i.node===l.node)s=i.node.nodeValue.substring(i.position+c,l.position-c);else{var u=i.position+c;s=i.node.nodeValue.substring(u,i.node.nodeValue.length);var d=i.node;do{(d=d.nextSibling)===l.node?s+=l.node.nodeValue.substring(0,l.position-c):s+=d.nodeValue?d.nodeValue:\"\"}while(d!==l.node)}return{latex:s,startNode:i.node,startPosition:i.position,endNode:l.node,endPosition:l.position}}},{key:\"cache\",get:function(){return e._cache},set:function(t){e._cache=t}}]),e}();f._cache=new u;var v=n(0);function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),new Error(\"Static class StringManager can not be instantiated.\")}return function(e,t,n){t&&_(e.prototype,t),n&&_(e,n)}(e,null,[{key:\"get\",value:function(e){var t=this.language;return t&&t.length>2&&(t=t.slice(0,2)),this.strings.hasOwnProperty(t)||(console.warn(\"Unknown language \".concat(t,\" set in StringManager.\")),t=\"en\"),this.strings[t].hasOwnProperty(e)?this.strings[t][e]:(console.warn(\"Unknown key \".concat(e,\" for language \").concat(t,\" in StringManager.\")),e)}}]),e}();function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}b.strings=v,b.language=\"en\";var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&y(e.prototype,t),n&&y(e,n)}(e,null,[{key:\"fireEvent\",value:function(e,t){if(document.createEvent){var n=document.createEvent(\"HTMLEvents\");return n.initEvent(t,!0,!0),!e.dispatchEvent(n)}var i=document.createEventObject();return e.fireEvent(\"on\".concat(t),i)}},{key:\"addEvent\",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent(\"on\".concat(t),n)}},{key:\"removeEvent\",value:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!0):e.detachEvent&&e.detachEvent(\"on\".concat(t),n)}},{key:\"addElementEvents\",value:function(t,n,i,r){n&&e.addEvent(t,\"dblclick\",function(e){var t=e||window.event,i=t.srcElement?t.srcElement:t.target;n(i,t)}),i&&e.addEvent(t,\"mousedown\",function(e){var t=e||window.event,n=t.srcElement?t.srcElement:t.target;i(n,t)}),r&&e.addEvent(document,\"mouseup\",function(e){var t=e||window.event,n=t.srcElement?t.srcElement:t.target;r(n,t)})}},{key:\"addClass\",value:function(t,n){e.containsClass(t,n)||(t.className+=\" \".concat(n))}},{key:\"containsClass\",value:function(e,t){if(null==e||!(\"className\"in e))return!1;for(var n=e.className.split(\" \"),i=n.length-1;i>=0;i-=1)if(n[i]===t)return!0;return!1}},{key:\"removeClass\",value:function(e,t){for(var n=\"\",i=e.className.split(\" \"),r=0;r<i.length;r+=1)i[r]!==t&&(n+=\"\".concat(i[r],\" \"));e.className=n.trim()}},{key:\"convertOldXmlinitialtextAttribute\",value:function(e){var t=\"value=\",n=e.indexOf(\"xmlinitialtext\"),i=e.indexOf(t,n),r=e.charAt(i+t.length),a=i+t.length+1,o=e.indexOf(r,a),s=e.substring(a,o),l=s.split(\"«\").join(\"§lt;\");return l=(l=(l=l.split(\"»\").join(\"§gt;\")).split(\"&\").join(\"§\")).split(\"¨\").join(\"§quot;\"),e=e.split(s).join(l)}},{key:\"createElement\",value:function(t,n,i){var r;void 0===n&&(n={}),void 0===i&&(i=document);try{var a=\"<\".concat(t);Object.keys(n).forEach(function(t){a+=\" \".concat(t,'=\"').concat(e.htmlEntities(n[t]),'\"')}),a+=\">\",r=i.createElement(a)}catch(e){r=i.createElement(t),Object.keys(n).forEach(function(e){r.setAttribute(e,n[e])})}return r}},{key:\"createObject\",value:function(t,n){void 0===n&&(n=document),t=(t=(t=(t=t.split(\"<applet \").join('<span wirisObject=\"WirisApplet\" ').split(\"<APPLET \").join('<span wirisObject=\"WirisApplet\" ')).split(\"</applet>\").join(\"</span>\").split(\"</APPLET>\").join(\"</span>\")).split(\"<param \").join('<br wirisObject=\"WirisParam\" ').split(\"<PARAM \").join('<br wirisObject=\"WirisParam\" ')).split(\"</param>\").join(\"</br>\").split(\"</PARAM>\").join(\"</br>\");var i=e.createElement(\"div\",{},n);return i.innerHTML=t,function t(i){if(i.getAttribute&&\"WirisParam\"===i.getAttribute(\"wirisObject\")){for(var r={},a=0;a<i.attributes.length;a+=1)null!==i.attributes[a].nodeValue&&(r[i.attributes[a].nodeName]=i.attributes[a].nodeValue);var o=e.createElement(\"param\",r,n);o.NAME&&(o.name=o.NAME,o.value=o.VALUE),o.removeAttribute(\"wirisObject\"),i.parentNode.replaceChild(o,i)}else if(i.getAttribute&&\"WirisApplet\"===i.getAttribute(\"wirisObject\")){for(var s={},l=0;l<i.attributes.length;l+=1)null!==i.attributes[l].nodeValue&&(s[i.attributes[l].nodeName]=i.attributes[l].nodeValue);var c=e.createElement(\"applet\",s,n);c.removeAttribute(\"wirisObject\");for(var u=0;u<i.childNodes.length;u+=1)t(i.childNodes[u]),\"param\"===i.childNodes[u].nodeName.toLowerCase()&&(c.appendChild(i.childNodes[u]),u-=1);i.parentNode.replaceChild(c,i)}else for(var d=0;d<i.childNodes.length;d+=1)t(i.childNodes[d])}(i),i.firstChild}},{key:\"createObjectCode\",value:function(t){if(void 0===t||null===t)return null;if(1===t.nodeType){for(var n=\"<\".concat(t.tagName),i=0;i<t.attributes.length;i+=1)t.attributes[i].specified&&(n+=\" \".concat(t.attributes[i].name,'=\"').concat(e.htmlEntities(t.attributes[i].value),'\"'));if(t.childNodes.length>0){n+=\">\";for(var r=0;r<t.childNodes.length;r+=1)n+=e.createObject(t.childNodes[r]);n+=\"</\".concat(t.tagName,\">\")}else\"DIV\"===t.nodeName||\"SCRIPT\"===t.nodeName?n+=\"></\".concat(t.tagName,\">\"):n+=\"/>\";return n}return 3===t.nodeType?e.htmlEntities(t.nodeValue):\"\"}},{key:\"concatenateUrl\",value:function(e,t){var n=\"\";return e.indexOf(\"/\")!==e.length&&0!==t.indexOf(\"/\")&&(n=\"/\"),(e+n+t).replace(/([^:]\\/)\\/+/g,\"$1\")}},{key:\"htmlEntities\",value:function(e){return e.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\").split('\"').join(\"&quot;\")}},{key:\"htmlEntitiesDecode\",value:function(e){var t=document.createElement(\"textarea\");return t.innerHTML=e,t.value}},{key:\"createHttpRequest\",value:function(){if(\"file://\"===window.location.toString().substr(0,window.location.toString().lastIndexOf(\"/\")+1).substr(0,7))throw b.get(\"exception_cross_site\");if(\"undefined\"!=typeof XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject(\"Msxml2.XMLHTTP\")}catch(e){try{return new ActiveXObject(\"Microsoft.XMLHTTP\")}catch(e){return null}}}},{key:\"httpBuildQuery\",value:function(t){var n=\"\";return Object.keys(t).forEach(function(i){null!=t[i]&&(n+=\"\".concat(e.urlEncode(i),\"=\").concat(e.urlEncode(t[i]),\"&\"))}),\"&\"===n.substring(n.length-1)&&(n=n.substring(0,n.length-1)),n}},{key:\"propertiesToString\",value:function(t){var n=[];Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&n.push(e)});for(var i=n.length,r=0;r<i;r+=1)for(var a=r+1;a<i;a+=1){var o=n[r],s=n[a];e.compareStrings(o,s)>0&&(n[r]=s,n[a]=o)}for(var l=\"\",c=0;c<i;c+=1){var u=n[c];l+=u,l+=\"=\";var d=t[u];l+=d=(d=(d=(d=d.replace(\"\\\\\",\"\\\\\\\\\")).replace(\"\\n\",\"\\\\n\")).replace(\"\\r\",\"\\\\r\")).replace(\"\\t\",\"\\\\t\"),l+=\"\\n\"}return l}},{key:\"compareStrings\",value:function(t,n){var i,r=t.length,a=n.length,o=r>a?a:r;for(i=0;i<o;i+=1){var s=e.fixedCharCodeAt(t,i)-e.fixedCharCodeAt(n,i);if(0!==s)return s}return t.length-n.length}},{key:\"fixedCharCodeAt\",value:function(e,t){t=t||0;var n,i,r=e.charCodeAt(t);if(r>=55296&&r<=56319){if(n=r,i=e.charCodeAt(t+1),Number.isNaN(i))throw b.get(\"exception_high_surrogate\");return 1024*(n-55296)+(i-56320)+65536}return!(r>=56320&&r<=57343)&&r}},{key:\"urlToAssArray\",value:function(e){var t;if((t=e.indexOf(\"?\"))>0){var n=e.substring(t+1).split(\"&\"),i={};for(t=0;t<n.length;t+=1){var r=n[t].split(\"=\");r.length>1&&(i[r[0]]=decodeURIComponent(r[1].replace(/\\+/g,\" \")))}return i}return{}}},{key:\"urlEncode\",value:function(e){return encodeURIComponent(e)}},{key:\"getWIRISImageOutput\",value:function(t,n,i){var r=e.createObject(t);if(r&&(r.className===l.get(\"imageClassName\")||r.getAttribute(l.get(\"imageMathmlAttribute\")))){if(!n)return t;var a=r.getAttribute(l.get(\"imageMathmlAttribute\")),s=o.safeXmlDecode(a);return l.get(\"saveHandTraces\")||(s=o.removeAnnotation(s,\"application/json\")),null==s&&(s=r.getAttribute(\"alt\")),i?o.safeXmlEncode(s):s}return t}},{key:\"getNodeLength\",value:function(t){if(3===t.nodeType)return t.nodeValue.length;if(1===t.nodeType){var n={IMG:1,BR:1}[t.nodeName.toUpperCase()];void 0===n&&(n=0);for(var i=0;i<t.childNodes.length;i+=1)n+=e.getNodeLength(t.childNodes[i]);return n}return 0}},{key:\"getSelectedItem\",value:function(t,n,i){var r;if(n?(r=t.contentWindow).focus():(r=window,t.focus()),document.selection&&!i){var a=r.document.selection.createRange();if(a.parentElement){if(a.htmlText.length>0)return 0===a.text.length?e.getSelectedItem(t,n,!0):null;r.document.execCommand(\"InsertImage\",!1,\"#\");var o,s,l=a.parentElement();return\"IMG\"!==l.nodeName.toUpperCase()&&(a.pasteHTML('<span id=\"wrs_openEditorWindow_temporalObject\"></span>'),l=r.document.getElementById(\"wrs_openEditorWindow_temporalObject\")),l.nextSibling&&3===l.nextSibling.nodeType?(o=l.nextSibling,s=0):l.previousSibling&&3===l.previousSibling.nodeType?s=(o=l.previousSibling).nodeValue.length:(o=r.document.createTextNode(\"\"),l.parentNode.insertBefore(o,l),s=0),l.parentNode.removeChild(l),{node:o,caretPosition:s}}return a.length>1?null:{node:a.item(0)}}if(r.getSelection){var c,u=r.getSelection();try{c=u.getRangeAt(0)}catch(e){c=r.document.createRange()}var d=c.startContainer;if(3===d.nodeType)return{node:d,caretPosition:c.startOffset};if(d!==c.endContainer)return null;if(1===d.nodeType){var m=c.startOffset;if(d.childNodes[m])return{node:d.childNodes[m]}}}return null}},{key:\"getSelectedItemOnTextarea\",value:function(e){var t=document.createTextNode(e.value),n=f.getLatexFromTextNode(t,e.selectionStart);return null===n?null:{node:t,caretPosition:e.selectionStart,startPosition:n.startPosition,endPosition:n.endPosition}}},{key:\"getElementsByNameFromString\",value:function(e,t,n){var i=[];e=e.toLowerCase(),t=t.toLowerCase();for(var r=e.indexOf(\"<\".concat(t,\" \"));-1!==r;){var a=void 0;a=n?\">\":\"</\".concat(t,\">\");var o=e.indexOf(a,r);-1!==o?(o+=a.length,i.push({start:r,end:o})):o=r+1,r=e.indexOf(\"<\".concat(t,\" \"),o)}return i}},{key:\"decode64\",value:function(e){var t=\"+\".charCodeAt(0),n=\"/\".charCodeAt(0),i=\"0\".charCodeAt(0),r=\"a\".charCodeAt(0),a=\"A\".charCodeAt(0),o=\"-\".charCodeAt(0),s=\"_\".charCodeAt(0),l=e.charCodeAt(0);return l===t||l===o?62:l===n||l===s?63:l<i?-1:l<i+10?l-i+26+26:l<a+26?l-a:l<r+26?l-r+26:null}},{key:\"b64ToByteArray\",value:function(t,n){var i;if(t.length%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var r,a,o,s=[];for(r=n||((a=\"=\"===t.charAt(t.length-2)?2:\"=\"===t.charAt(t.length-1)?1:0)>0?t.length-4:t.length),o=0;o<r;o+=4)i=e.decode64(t.charAt(o))<<18|e.decode64(t.charAt(o+1))<<12|e.decode64(t.charAt(o+2))<<6|e.decode64(t.charAt(o+3)),s.push(i>>16&255),s.push(i>>8&255),s.push(255&i);return a&&(2===a?(i=e.decode64(t.charAt(o))<<2|e.decode64(t.charAt(o+1))>>4,s.push(255&i)):1===a&&(i=e.decode64(t.charAt(o))<<10|e.decode64(t.charAt(o+1))<<4|e.decode64(t.charAt(o+2))>>2,s.push(i>>8&255),s.push(255&i))),s}},{key:\"readInt32\",value:function(e){if(e.length<4)return!1;var t=e.splice(0,4);return t[0]<<24|t[1]<<16|t[2]<<8|t[3]<<0}},{key:\"readByte\",value:function(e){return e.shift()<<0}},{key:\"readBytes\",value:function(e,t,n){return e.splice(t,n)}},{key:\"updateTextArea\",value:function(e,t){if(e&&t)if(e.focus(),null!=e.selectionStart){var n=e.selectionEnd,i=e.value.substring(0,e.selectionStart),r=e.value.substring(n,e.value.length);e.value=i+t+r,e.selectionEnd=n+t.length}else{document.selection.createRange().text=t}}},{key:\"updateExistingTextOnTextarea\",value:function(e,t,n,i){e.focus();var r=e.value.substring(0,n);e.value=r+t+e.value.substring(i,e.value.length),e.selectionEnd=n+t.length}},{key:\"addArgument\",value:function(e,t,n){var i;return i=e.indexOf(\"?\")>0?\"&\":\"?\",\"\".concat(e+i+t,\"=\").concat(n)}}]),e}();function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&x(e.prototype,t),n&&x(e,n)}(e,null,[{key:\"removeImgDataAttributes\",value:function(e){var t=[],n=e.attributes;Object.keys(n).forEach(function(e){var i=n[e];0===i.name.indexOf(\"data-\")&&t.push(i.name)}),t.forEach(function(t){e.removeAttribute(t)})}},{key:\"clone\",value:function(e,t){var n=l.get(\"imageCustomEditorName\");e.hasAttribute(n)||t.removeAttribute(n),[l.get(\"imageMathmlAttribute\"),n,\"alt\",\"height\",\"width\",\"style\",\"src\",\"role\"].forEach(function(n){var i=e.getAttribute(n);i&&t.setAttribute(n,i)})}},{key:\"setImgSize\",value:function(t,n,i){var r,a,o,s;if(i)if(\"svg\"===l.get(\"imageFormat\"))if(\"base64\"!==l.get(\"saveMode\"))r=e.getMetricsFromSvgString(n);else{a=t.src.substr(t.src.indexOf(\"base64,\")+7,t.src.length),s=\"\",o=w.b64ToByteArray(a,a.length);for(var c=0;c<o.length;c+=1)s+=String.fromCharCode(o[c]);r=e.getMetricsFromSvgString(s)}else a=t.src.substr(t.src.indexOf(\"base64,\")+7,t.src.length),o=w.b64ToByteArray(a,88),r=e.getMetricsFromBytes(o);else r=w.urlToAssArray(n);var u=r.cw;if(u){var d=r.ch,m=r.cb,h=r.dpi;h&&(u=96*u/h,d=96*d/h,m=96*m/h),t.width=u,t.height=d,t.style.verticalAlign=\"-\".concat(d-m,\"px\")}}},{key:\"fixAfterResize\",value:function(t){if(t.removeAttribute(\"style\"),t.removeAttribute(\"width\"),t.removeAttribute(\"height\"),t.style.maxWidth=\"none\",-1!==t.src.indexOf(\"data:image\"))if(\"svg\"===l.get(\"imageFormat\")){var n=decodeURIComponent(t.src.substring(32,t.src.length));e.setImgSize(t,n,!0)}else{var i=t.src.substring(22,t.src.length);e.setImgSize(t,i,!0)}else e.setImgSize(t,t.src)}},{key:\"getMetricsFromSvgString\",value:function(e){var t=e.indexOf('height=\"'),n=e.indexOf('\"',t+8,e.length),i=e.substring(t+8,n);t=e.indexOf('width=\"'),n=e.indexOf('\"',t+7,e.length);var r=e.substring(t+7,n);t=e.indexOf('wrs:baseline=\"'),n=e.indexOf('\"',t+14,e.length);var a=e.substring(t+14,n);if(void 0!==r){var o=[];return o.cw=r,o.ch=i,void 0!==a&&(o.cb=a),o}return[]}},{key:\"getMetricsFromBytes\",value:function(e){var t,n,i,r,a;for(w.readBytes(e,0,8);e.length>=4;)1229472850===(i=w.readInt32(e))?(t=w.readInt32(e),n=w.readInt32(e),w.readInt32(e),w.readByte(e)):1650545477===i?r=w.readInt32(e):1883789683===i&&(a=w.readInt32(e),a=Math.round(a/39.37),w.readInt32(e),w.readByte(e)),w.readInt32(e);if(void 0!==t){var o=[];return o.cw=t,o.ch=n,o.dpi=a,r&&(o.cb=r),o}return[]}}]),e}();function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&A(e.prototype,t),n&&A(e,n)}(e,null,[{key:\"mathMLToAccessible\",value:function(t,n,i){void 0===n&&(n=\"en\"),o.containClass(t,\"wrs_chemistry\")&&(i.mode=\"chemistry\");var r=\"\";if(e.cache.get(t))r=e.cache.get(t);else{i.service=\"mathml2accessible\",i.lang=n;var a=JSON.parse(g.getService(\"service\",i));\"error\"!==a.status?(r=a.result.text,e.cache.populate(t,r)):r=b.get(\"error_convert_accessibility\")}return r}},{key:\"cache\",get:function(){return e._cache},set:function(t){e._cache=t}}]),e}();C._cache=new u;n(2);function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&M(e.prototype,t),n&&M(e,n)}(e,null,[{key:\"mathmlToImgObject\",value:function(t,n,i,r){var a=t.createElement(\"img\");a.align=\"middle\",a.style.maxWidth=\"none\";var s=i||{};if(s.mml=n,s.lang=r,s.metrics=\"true\",s.centerbaseline=\"false\",\"base64\"===l.get(\"saveMode\")&&\"default\"===l.get(\"base64savemode\")&&(s.base64=!0),a.className=l.get(\"imageClassName\"),-1!==n.indexOf('class=\"')){var c=n.substring(n.indexOf('class=\"')+'class=\"'.length,n.length);c=(c=c.substring(0,c.indexOf('\"'))).substring(4,c.length),a.setAttribute(l.get(\"imageCustomEditorName\"),c)}if(!l.get(\"wirisPluginPerformance\")||\"xml\"!==l.get(\"saveMode\")&&\"safeXml\"!==l.get(\"saveMode\")){var u=e.createImageSrc(n,s);a.setAttribute(l.get(\"imageMathmlAttribute\"),o.safeXmlEncode(n)),a.src=u,k.setImgSize(a,u,\"base64\"===l.get(\"saveMode\")&&\"default\"===l.get(\"base64savemode\")),l.get(\"enableAccessibility\")&&(a.alt=C.mathMLToAccessible(n,r,s))}else{var d=JSON.parse(e.createShowImageSrc(s,r));if(\"warning\"===d.status)try{d=JSON.parse(g.getService(\"showimage\",s))}catch(e){return null}\"png\"===(d=d.result).format?a.src=\"data:image/png;base64,\".concat(d.content):a.src=\"data:image/svg+xml;charset=utf8,\".concat(w.urlEncode(d.content)),a.setAttribute(l.get(\"imageMathmlAttribute\"),o.safeXmlEncode(n)),k.setImgSize(a,d.content,!0),l.get(\"enableAccessibility\")&&(void 0===d.alt?a.alt=C.mathMLToAccessible(n,r,s):a.alt=d.alt)}return void 0!==e.observer&&e.observer.observe(a),a.setAttribute(\"role\",\"math\"),a}},{key:\"createImageSrc\",value:function(e,t){\"base64\"===l.get(\"saveMode\")&&\"default\"===l.get(\"base64savemode\")&&(t.base64=!0);var n=g.getService(\"createimage\",t);if(-1!==n.indexOf(\"@BASE@\")){var i=g.getServicePath(\"createimage\").split(\"/\");i.pop(),n=n.split(\"@BASE@\").join(i.join(\"/\"))}return n}},{key:\"initParse\",value:function(t,n){return t=e.initParseSaveMode(t,n),e.initParseEditMode(t)}},{key:\"initParseSaveMode\",value:function(t,n){return l.get(\"saveMode\")&&(t=f.parseMathmlToLatex(t,r.safeXmlCharacters),t=f.parseMathmlToLatex(t,r.xmlCharacters),t=e.parseMathmlToImg(t,r.safeXmlCharacters,n),t=e.parseMathmlToImg(t,r.xmlCharacters,n),\"base64\"===l.get(\"saveMode\")&&\"image\"===l.get(\"base64savemode\")&&(t=e.codeImgTransform(t,\"base642showimage\"))),t}},{key:\"initParseEditMode\",value:function(e){if(-1!==l.get(\"parseModes\").indexOf(\"latex\"))for(var t=w.getElementsByNameFromString(e,\"img\",!0),n='encoding=\"LaTeX\">',i=0,r=0;r<t.length;r+=1){var a=e.substring(t[r].start+i,t[r].end+i);if(-1!==a.indexOf(' class=\"'.concat(l.get(\"imageClassName\"),'\"'))){var s=\" \".concat(l.get(\"imageMathmlAttribute\"),'=\"'),c=a.indexOf(s);if(-1===c&&(s=' alt=\"',c=a.indexOf(s)),-1!==c){c+=s.length;var u=a.indexOf('\"',c),d=o.safeXmlDecode(a.substring(c,u)),m=d.indexOf(n);if(-1!==m){m+=n.length;var h=d.indexOf(\"</annotation>\",m),g=d.substring(m,h),p=\"$$\".concat(w.htmlEntitiesDecode(g),\"$$\");e=e.substring(0,t[r].start+i)+p+e.substring(t[r].end+i),i+=p.length-(t[r].end-t[r].start)}}}}return e}},{key:\"endParse\",value:function(t){var n=e.endParseEditMode(t);return e.endParseSaveMode(n)}},{key:\"endParseEditMode\",value:function(e){if(-1!==l.get(\"parseModes\").indexOf(\"latex\")){for(var t=\"\",n=0,i=e.indexOf(\"$$\");-1!==i;){if(t+=e.substring(n,i),-1!==(n=e.indexOf(\"$$\",i+2))){var r=e.substring(i+2,n),a=w.htmlEntitiesDecode(r),s=f.getMathMLFromLatex(a,!0);l.get(\"saveHandTraces\")||(s=o.removeAnnotation(s,\"application/json\")),t+=s,n+=2}else t+=\"$$\",n=i+2;i=e.indexOf(\"$$\",n)}e=t+=e.substring(n,e.length)}return e}},{key:\"endParseSaveMode\",value:function(t){return l.get(\"saveMode\")&&(\"safeXml\"===l.get(\"saveMode\")?t=e.codeImgTransform(t,\"img2mathml\"):\"xml\"===l.get(\"saveMode\")?t=e.codeImgTransform(t,\"img2mathml\"):\"base64\"===l.get(\"saveMode\")&&\"image\"===l.get(\"base64savemode\")&&(t=e.codeImgTransform(t,\"img264\"))),t}},{key:\"createShowImageSrc\",value:function(e,t){var n={};[\"mml\",\"color\",\"centerbaseline\",\"zoom\",\"dpi\",\"fontSize\",\"fontFamily\",\"defaultStretchy\",\"backgroundColor\",\"format\"].forEach(function(t){void 0!==e[t]&&(n[t]=e[t])});var i={};return Object.keys(e).forEach(function(t){\"mml\"!==t&&(i[t]=e[t])}),i.formula=com.wiris.js.JsPluginTools.md5encode(w.propertiesToString(n)),i.lang=void 0===t?\"en\":t,i.version=l.get(\"version\"),g.getService(\"showimage\",w.httpBuildQuery(i),!0)}},{key:\"codeImgTransform\",value:function(t,n){for(var i=\"\",r=0,a=/<img/gi,s=a.source.length;a.test(t);){var c=a.lastIndex-s;i+=t.substring(r,c);for(var u=c+1;u<t.length&&r<=c;){var d=t.charAt(u);if('\"'===d||\"'\"===d){var m=t.indexOf(d,u+1);u=-1===m?t.length:m}else\">\"===d&&(r=u+1);u+=1}if(r<c)return i+=t.substring(c,t.length);var h=t.substring(c,r),g=w.createObject(h),p=g.getAttribute(l.get(\"imageMathmlAttribute\")),f=void 0,v=void 0;if(\"base642showimage\"===n)null==p&&(p=g.getAttribute(\"alt\")),p=o.safeXmlDecode(p),h=e.mathmlToImgObject(document,p,null,null),i+=w.createObjectCode(h);else if(\"img2mathml\"===n)l.get(\"saveMode\")&&(\"safeXml\"===l.get(\"saveMode\")?(f=!0,v=!0):\"xml\"===l.get(\"saveMode\")&&(f=!0,v=!1)),i+=w.getWIRISImageOutput(h,f,v);else if(\"img264\"===n){null===p&&(p=g.getAttribute(\"alt\")),p=o.safeXmlDecode(p);var _={base64:\"true\"};h=e.mathmlToImgObject(document,p,_,null),k.setImgSize(h,h.src,!0),i+=w.createObjectCode(h)}}return i+=t.substring(r,t.length)}},{key:\"parseMathmlToImg\",value:function(t,n,i){for(var a=\"\",s=\"\".concat(n.tagOpener,\"math\"),c=\"\".concat(n.tagOpener,\"/math\").concat(n.tagCloser),u=t.indexOf(s),d=0;-1!==u;){a+=t.substring(d,u);var m=t.indexOf(l.get(\"imageMathmlAttribute\"));if(-1===(d=t.indexOf(c,u))?d=t.length-1:d+=-1!==m?t.indexOf(\"/>\",u):c.length,o.isMathmlInAttribute(t,u)||-1!==m)a+=t.substring(u,d);else{var h=t.substring(u,d);h=n.id===r.safeXmlCharacters.id?o.safeXmlDecode(h):o.mathMLEntities(h),a+=w.createObjectCode(e.mathmlToImgObject(document,h,null,i))}u=t.indexOf(s,d)}return a+=t.substring(d,t.length)}}]),e}();if(\"undefined\"!=typeof MutationObserver){var E=new MutationObserver(function(e){e.forEach(function(e){e.oldValue===l.get(\"imageClassName\")&&\"class\"===e.attributeName&&-1===e.target.className.indexOf(l.get(\"imageClassName\"))&&(e.target.className=l.get(\"imageClassName\"))})});T.observer=Object.create(E),T.observer.Config={attributes:!0,attributeOldValue:!0},T.observer.observe=function(e){Object.getPrototypeOf(this).observe(e,this.Config)}}function j(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.isContentChanged=!1,this.waitingForChanges=!1}return function(e,t,n){t&&j(e.prototype,t),n&&j(e,n)}(e,[{key:\"setIsContentChanged\",value:function(e){this.isContentChanged=e}},{key:\"getIsContentChanged\",value:function(){return this.isContentChanged}},{key:\"setWaitingForChanges\",value:function(e){this.waitingForChanges=e}},{key:\"caretPositionChanged\",value:function(e){}},{key:\"clipboardChanged\",value:function(e){}},{key:\"contentChanged\",value:function(e){!0===this.waitingForChanges&&!1===this.isContentChanged&&(this.isContentChanged=!0)}},{key:\"styleChanged\",value:function(e){}},{key:\"transformationReceived\",value:function(e){}}]),e}();function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var I=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.editorAttributes={},!(\"editorAttributes\"in t))throw new Error(\"ContentManager constructor error: editorAttributes property missed.\");if(this.editorAttributes=t.editorAttributes,this.customEditors=null,\"customEditors\"in t&&(this.customEditors=t.customEditors),this.environment={},!(\"environment\"in t))throw new Error(\"ContentManager constructor error: environment property missed\");if(this.environment=t.environment,this.language=\"\",!(\"language\"in t))throw new Error(\"ContentManager constructor error: language property missed\");this.language=t.language,this.editorListener=new P,this.editor=null,this.ua=navigator.userAgent.toLowerCase(),this.deviceProperties={},this.deviceProperties.isAndroid=this.ua.indexOf(\"android\")>-1,this.deviceProperties.isIOS=e.isIOS(),this.toolbar=null,this.modalDialogInstance=null,this.listeners=new m,this.mathML=null,this.isNewElement=!0,this.integrationModel=null}return function(e,t,n){t&&S(e.prototype,t),n&&S(e,n)}(e,[{key:\"addListener\",value:function(e){this.listeners.add(e)}},{key:\"setIntegrationModel\",value:function(e){this.integrationModel=e}},{key:\"setModalDialogInstance\",value:function(e){this.modalDialogInstance=e}},{key:\"insert\",value:function(){this.updateTitle(this.modalDialogInstance),this.insertEditor(this.modalDialogInstance)}},{key:\"insertEditor\",value:function(){if(e.isEditorLoaded()){if(this.editor=window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes),this.editor.insertInto(this.modalDialogInstance.contentContainer),this.editor.focus(),this.modalDialogInstance.rtl&&this.editor.action(\"rtl\"),this.editor.getEditorModel().isRTL()&&(this.editor.element.style.direction=\"rtl\"),this.editor.getEditorModel().addEditorListener(this.editorListener),this.modalDialogInstance.deviceProperties.isIOS){setTimeout(function(){this.hasOwnProperty(\"modalDialogInstance\")&&this.modalDialogInstance.hideKeyboard()},400);var t=document.getElementsByClassName(\"wrs_formulaDisplay\")[0];w.addEvent(t,\"focus\",this.modalDialogInstance.handleOpenedIosSoftkeyboard),w.addEvent(t,\"blur\",this.modalDialogInstance.handleClosedIosSoftkeyboard)}this.listeners.fire(\"onLoad\",{})}else setTimeout(e.prototype.insertEditor.bind(this),100)}},{key:\"init\",value:function(){e.isEditorLoaded()||this.addEditorAsExternalDependency()}},{key:\"addEditorAsExternalDependency\",value:function(){var t=document.createElement(\"script\");t.type=\"text/javascript\";var n=l.get(\"editorUrl\"),i=document.createElement(\"a\");e.setHrefToAnchorElement(i,n),e.setProtocolToAnchorElement(i),n=e.getURLFromAnchorElement(i);var r=this.getEditorStats();t.src=\"\".concat(n,\"?lang=\").concat(this.language,\"&stats-editor=\").concat(r.editor,\"&stats-mode=\").concat(r.mode,\"&stats-version=\").concat(r.version),document.getElementsByTagName(\"head\")[0].appendChild(t)}},{key:\"getEditorStats\",value:function(){var e={};return\"editor\"in this.environment?e.editor=this.environment.editor:e.editor=\"unknown\",\"mode\"in this.environment?e.mode=this.environment.mode:e.mode=l.get(\"saveMode\"),\"version\"in this.environment?e.version=this.environment.version:e.version=l.get(\"version\"),e}},{key:\"setInitialContent\",value:function(){this.isNewElement||this.setMathML(this.mathML)}},{key:\"setMathML\",value:function(e,t){var n=this;void 0===t&&(t=!1),this.editor.setMathMLWithCallback(e,function(){n.editorListener.setWaitingForChanges(!0)}),setTimeout(function(){n.editorListener.setIsContentChanged(!1)},500),t||this.onFocus()}},{key:\"onFocus\",value:function(){void 0!==this.editor&&null!=this.editor&&this.editor.focus()}},{key:\"submitAction\",value:function(){if(this.editor.isFormulaEmpty())this.integrationModel.updateFormula(null);else{var e=this.editor.getMathMLWithSemantics();if(null!==this.customEditors.getActiveEditor()){var t=this.customEditors.getActiveEditor().toolbar;e=o.addCustomEditorClassAttribute(e,t)}else Object.keys(this.customEditors.editors).forEach(function(t){e=o.removeCustomEditorClassAttribute(e,t)});var n=o.mathMLEntities(e);this.integrationModel.updateFormula(n)}this.customEditors.disable(),this.integrationModel.notifyWindowClosed(),this.setEmptyMathML(),this.customEditors.disable()}},{key:\"setEmptyMathML\",value:function(){this.deviceProperties.isAndroid||this.deviceProperties.isIOS?this.editor.getEditorModel().isRTL()?this.setMathML('<math dir=\"rtl\"><semantics><annotation encoding=\"application/json\">[]</annotation></semantics></math>',!0):this.setMathML('<math><semantics><annotation encoding=\"application/json\">[]</annotation></semantics></math>',!0):this.editor.getEditorModel().isRTL()?this.setMathML('<math dir=\"rtl\"/>',!0):this.setMathML(\"<math/>\",!0)}},{key:\"onOpen\",value:function(){this.isNewElement?this.setEmptyMathML():this.setMathML(this.mathML),this.updateToolbar(),this.onFocus()}},{key:\"updateToolbar\",value:function(){this.updateTitle(this.modalDialogInstance);var e=this.customEditors.getActiveEditor();if(e){var t=e.toolbar?e.toolbar:_wrs_int_wirisProperties.toolbar;null!=this.toolbar&&this.toolbar===t||this.setToolbar(t)}else{var n=this.getToolbar();null!=this.toolbar&&this.toolbar===n||(this.setToolbar(n),this.customEditors.disable())}}},{key:\"updateTitle\",value:function(){var e=this.customEditors.getActiveEditor();e?this.modalDialogInstance.setTitle(e.title):this.modalDialogInstance.setTitle(\"MathType\")}},{key:\"getToolbar\",value:function(){var e=\"general\";return\"toolbar\"in this.editorAttributes&&(e=this.editorAttributes.toolbar),\"general\"===e&&(e=\"undefined\"==typeof _wrs_int_wirisProperties||void 0===_wrs_int_wirisProperties.toolbar?\"general\":_wrs_int_wirisProperties.toolbar),e}},{key:\"setToolbar\",value:function(e){this.toolbar=e,this.editor.setParams({toolbar:this.toolbar})}},{key:\"hasChanges\",value:function(){return!this.editor.isFormulaEmpty()&&this.editorListener.getIsContentChanged()}},{key:\"onKeyDown\",value:function(e){if(void 0!==e.key&&!1===e.repeat)if(\"Escape\"===e.key||\"Esc\"===e.key){var t=document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed\");0===t.length&&0===(t=document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed\")).length&&0===(t=document.getElementsByClassName(\"wrs_select wrs_pressed\")).length&&(this.modalDialogInstance.cancelAction(),e.stopPropagation(),e.preventDefault())}else if(e.shiftKey&&\"Tab\"===e.key)if(document.activeElement===this.modalDialogInstance.submitButton)this.editor.focus(),e.stopPropagation(),e.preventDefault();else{var n=document.querySelector('[title=\"Manual\"]');document.activeElement===n&&(this.modalDialogInstance.cancelButton.focus(),e.stopPropagation(),e.preventDefault())}else if(\"Tab\"===e.key){if(document.activeElement===this.modalDialogInstance.cancelButton)document.querySelector('[title=\"Manual\"]').focus(),e.stopPropagation(),e.preventDefault();else\"wrs_formulaDisplay wrs_focused\"===document.getElementsByClassName(\"wrs_formulaDisplay\")[0].getAttribute(\"class\")&&(this.modalDialogInstance.submitButton.focus(),e.stopPropagation(),e.preventDefault())}}}],[{key:\"setHrefToAnchorElement\",value:function(e,t){e.href=t}},{key:\"setProtocolToAnchorElement\",value:function(e){0===window.location.href.indexOf(\"https://\")&&\"http:\"===e.protocol&&(e.protocol=\"https:\")}},{key:\"getURLFromAnchorElement\",value:function(e){var t=\"80\"===e.port||\"443\"===e.port||\"\"===e.port;return\"\".concat(e.protocol,\"//\").concat(e.hostname).concat(t?\"\":\":\"+e.port).concat(e.pathname.startsWith(\"/\")?e.pathname:\"/\"+e.pathname)}},{key:\"isIOS\",value:function(){return[\"iPad Simulator\",\"iPhone Simulator\",\"iPod Simulator\",\"iPad\",\"iPhone\",\"iPod\"].includes(navigator.platform)||navigator.userAgent.includes(\"Mac\")&&\"ontouchend\"in document}},{key:\"isEditorLoaded\",value:function(){return window.com&&window.com.wiris&&window.com.wiris.jsEditor&&window.com.wiris.jsEditor.JsEditor&&window.com.wiris.jsEditor.JsEditor.newInstance}}]),e}();function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.editors=[],this.activeEditor=\"default\"}return function(e,t,n){t&&O(e.prototype,t),n&&O(e,n)}(e,[{key:\"addEditor\",value:function(e,t){var n={};n.name=t.name,n.toolbar=t.toolbar,n.icon=t.icon,n.confVariable=t.confVariable,n.title=t.title,n.tooltip=t.tooltip,this.editors[e]=n}},{key:\"enable\",value:function(e){this.activeEditor=e}},{key:\"disable\",value:function(){this.activeEditor=\"default\"}},{key:\"getActiveEditor\",value:function(){return\"default\"!==this.activeEditor?this.editors[this.activeEditor]:null}}]),e}(),L={imageCustomEditorName:\"data-custom-editor\",imageClassName:\"Wirisformula\",CASClassName:\"Wiriscas\"};function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.cancelled=!1,this.defaultPrevented=!1}return function(e,t,n){t&&B(e.prototype,t),n&&B(e,n)}(e,[{key:\"cancel\",value:function(){this.cancelled=!0}},{key:\"preventDefault\",value:function(){this.defaultPrevented=!0}}]),e}();function D(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var F,R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.overlayElement=t.overlayElement,this.callbacks=t.callbacks,this.overlayWrapper=this.overlayElement.appendChild(document.createElement(\"div\")),this.overlayWrapper.setAttribute(\"class\",\"wrs_popupmessage_overlay_envolture\"),this.message=this.overlayWrapper.appendChild(document.createElement(\"div\")),this.message.id=\"wrs_popupmessage\",this.message.setAttribute(\"class\",\"wrs_popupmessage_panel\"),this.message.setAttribute(\"role\",\"dialog\"),this.message.setAttribute(\"aria-describedby\",\"description_txt\");var n=document.createElement(\"p\"),i=document.createTextNode(t.strings.message);n.appendChild(i),n.id=\"description_txt\",this.message.appendChild(n);var r=this.overlayWrapper.appendChild(document.createElement(\"div\"));r.setAttribute(\"class\",\"wrs_popupmessage_overlay\"),r.addEventListener(\"click\",this.cancelAction.bind(this)),this.buttonArea=this.message.appendChild(document.createElement(\"div\")),this.buttonArea.setAttribute(\"class\",\"wrs_popupmessage_button_area\"),this.buttonArea.id=\"wrs_popup_button_area\";var a={class:\"wrs_button_accept\",innerHTML:t.strings.submitString,id:\"wrs_popup_accept_button\"};this.closeButton=this.createButton(a,this.closeAction.bind(this)),this.buttonArea.appendChild(this.closeButton);var o={class:\"wrs_button_cancel\",innerHTML:t.strings.cancelString,id:\"wrs_popup_cancel_button\"};this.cancelButton=this.createButton(o,this.cancelAction.bind(this)),this.buttonArea.appendChild(this.cancelButton)}return function(e,t,n){t&&D(e.prototype,t),n&&D(e,n)}(e,[{key:\"createButton\",value:function(e,t){var n={};return(n=document.createElement(\"button\")).setAttribute(\"id\",e.id),n.setAttribute(\"class\",e.class),n.innerHTML=e.innerHTML,n.addEventListener(\"click\",t),n}},{key:\"show\",value:function(){\"block\"!==this.overlayWrapper.style.display?(document.activeElement.blur(),this.overlayWrapper.style.display=\"block\",this.closeButton.focus()):this.overlayWrapper.style.display=\"none\"}},{key:\"cancelAction\",value:function(){this.overlayWrapper.style.display=\"none\",void 0!==this.callbacks.cancelCallback&&this.callbacks.cancelCallback()}},{key:\"closeAction\",value:function(){this.cancelAction(),void 0!==this.callbacks.closeCallback&&this.callbacks.closeCallback()}},{key:\"onKeyDown\",value:function(e){void 0!==e.key&&(\"Escape\"===e.key||\"Esc\"===e.key?(this.cancelAction(),e.stopPropagation(),e.preventDefault()):\"Tab\"===e.key&&(document.activeElement===this.closeButton?this.cancelButton.focus():this.closeButton.focus(),e.stopPropagation(),e.preventDefault()))}}]),e}(),U=new Uint8Array(16);var X=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var H=function(e){return\"string\"==typeof e&&X.test(e)},W=[],V=0;V<256;++V)W.push((V+256).toString(16).substr(1));var J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(W[e[t+0]]+W[e[t+1]]+W[e[t+2]]+W[e[t+3]]+\"-\"+W[e[t+4]]+W[e[t+5]]+\"-\"+W[e[t+6]]+W[e[t+7]]+\"-\"+W[e[t+8]]+W[e[t+9]]+\"-\"+W[e[t+10]]+W[e[t+11]]+W[e[t+12]]+W[e[t+13]]+W[e[t+14]]+W[e[t+15]]).toLowerCase();if(!H(n))throw TypeError(\"Stringified UUID is invalid\");return n};var K=function(e,t,n){var i=(e=e||{}).random||(e.rng||function(){if(!F&&!(F=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return F(U)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return J(i)};function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var q=function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),new Error(\"Static class StringManager can not be instantiated.\")}return function(e,t,n){t&&Q(e.prototype,t),n&&Q(e,n)}(e,null,[{key:\"send\",value:function(t){var n={method:\"POST\",cache:\"no-cache\",headers:{\"Content-Type\":\"application/json\",\"X-Api-Key\":\"CK20op1pOx2LAUjPFP7kB2UPveHZRidG51UJE26m\",\"Accept-Version\":\"1\"},body:JSON.stringify(e.composeBody(t))};return fetch(e.endpoint,n).then(function(e){return e}).catch(function(e){})}},{key:\"composeBody\",value:function(t){return{messages:t,sender:e.sender,session:e.session}}},{key:\"composeUUID\",value:function(){return K()}},{key:\"composeSenderUUID\",value:function(){return this.composeUUID()}},{key:\"composeCookie\",value:function(e,t,n){var i=null==n?\"\":\"; max-age=\".concat(n);return\"\".concat(e,\"=\").concat(t).concat(i)}},{key:\"senderId\",get:function(){if(!this._senderId){var t=document.cookie.split(\";\").map(function(e){return e.trim().split(\"=\")}),n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=Y(a.value,2),l=s[0],c=s[1];if(l===Z){this._senderId=c;break}}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}this._senderId||(this._senderId=e.composeUUID(),document.cookie=this.composeCookie(Z,this._senderId,G))}return this._senderId}},{key:\"sessionId\",get:function(){return this._sessionId||(this._sessionId=e.composeUUID()),this._sessionId}},{key:\"session\",get:function(){return{id:e.sessionId,page:0}}},{key:\"sender\",get:function(){return{id:e.senderId,os:navigator.oscpu,user_agent:window.navigator.userAgent,domain:window.location.hostname,deployment:e.deployment,editor_version:WirisPlugin.currentInstance.environment.editorVersion?WirisPlugin.currentInstance.environment.editorVersion:\"\",language:WirisPlugin.currentInstance.language,product_version:WirisPlugin.currentInstance.version,backend:WirisPlugin.currentInstance.serviceProviderProperties.server?WirisPlugin.currentInstance.serviceProviderProperties.server:\"\"}}},{key:\"deployment\",get:function(){var e=WirisPlugin.currentInstance.environment.editor,t=\"\";return/Generic/.test(e)?t=\"generic\":/Froala/.test(e)?t=\"froala\":/CKEditor/.test(e)?t=\"ckeditor\":/TinyMCE/.test(e)&&(t=\"tinymce\"),\"\".concat(\"mathtype-web-plugin-\").concat(t)}}]),e}(),Z=\"wiris_telemetry_mathtype_web_senderid\",G=31536e4;function $(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}q.endpoint=\"https://telemetry.wiris.net\",q._senderId=\"\",q._sessionId=\"\";var ee=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.language=\"en\",this.serviceProviderProperties={},\"serviceProviderProperties\"in t&&(this.serviceProviderProperties=t.serviceProviderProperties),this.configurationService=\"\",\"configurationService\"in t&&(this.serviceProviderProperties.URI=t.configurationService,console.warn(\"Deprecated property configurationService. Use serviceParameters on instead.\",[t.configurationService])),this.version=\"version\"in t?t.version:\"\",this.target=null,!(\"target\"in t))throw new Error(\"IntegrationModel constructor error: target property missed.\");this.target=t.target,\"scriptName\"in t&&(this.scriptName=t.scriptName),this.callbackMethodArguments={},\"callbackMethodArguments\"in t&&(this.callbackMethodArguments=t.callbackMethodArguments),this.environment={},\"environment\"in t&&(this.environment=t.environment),this.isIframe=!1,null!=this.target&&(this.isIframe=\"IFRAME\"===this.target.tagName.toUpperCase()),this.editorObject=null,\"editorObject\"in t&&(this.editorObject=t.editorObject),this.rtl=!1,\"rtl\"in t&&(this.rtl=t.rtl),this.managesLanguage=!1,\"managesLanguage\"in t&&(this.managesLanguage=t.managesLanguage),this.temporalImageResizing=!1,this.core=null,this.listeners=new m,\"integrationParameters\"in t&&e.integrationParameters.forEach(function(e){if(e in t.integrationParameters){var i=t.integrationParameters[e];0!==Object.keys(i).length&&(n[e]=i)}})}return function(e,t,n){t&&$(e.prototype,t),n&&$(e,n)}(e,[{key:\"init\",value:function(){var e=this;this.language=this.getLanguage();var t=m.newListener(\"onLoad\",function(){e.callbackFunction(e.callbackMethodArguments)});if(-1!==this.serviceProviderProperties.URI.indexOf(\"configuration\")){var n=this.serviceProviderProperties.URI,i=g.getServerLanguageFromService(n);this.serviceProviderProperties.server=i;var r=this.serviceProviderProperties.URI.indexOf(\"configuration\"),a=this.serviceProviderProperties.URI.substring(0,r);this.serviceProviderProperties.URI=a}var o=this.serviceProviderProperties.URI;o=0===o.indexOf(\"/\")||0===o.indexOf(\"http\")?o:w.concatenateUrl(this.getPath(),o),this.serviceProviderProperties.URI=o;var s={};s.serviceProviderProperties=this.serviceProviderProperties,this.setCore(new ge(s)),this.core.addListener(t),this.core.language=this.language,this.core.init(),this.core.setEnvironment(this.environment)}},{key:\"getPath\",value:function(){if(void 0===this.scriptName)throw new Error(\"scriptName property needed for getPath.\");for(var e=document.getElementsByTagName(\"script\"),t=\"\",n=0;n<e.length;n+=1){var i=e[n].src.lastIndexOf(this.scriptName);i>=0&&(t=e[n].src.substr(0,i-1))}return t}},{key:\"getVersion\",value:function(){return this.version}},{key:\"setLanguage\",value:function(e){this.language=e}},{key:\"setCore\",value:function(e){this.core=e,e.setIntegrationModel(this)}},{key:\"getCore\",value:function(){return this.core}},{key:\"setTarget\",value:function(e){this.target=e,this.isIframe=\"IFRAME\"===this.target.tagName.toUpperCase()}},{key:\"setEditorObject\",value:function(e){this.editorObject=e}},{key:\"openNewFormulaEditor\",value:function(){this.core.editionProperties.isNewElement=!0,this.core.openModalDialog(this.target,this.isIframe)}},{key:\"openExistingFormulaEditor\",value:function(){this.core.editionProperties.isNewElement=!1,this.core.openModalDialog(this.target,this.isIframe)}},{key:\"updateFormula\",value:function(e){var t,n;this.editorParameters&&(e=com.wiris.editor.util.EditorUtils.addAnnotation(e,\"application/vnd.wiris.mtweb-params+json\",JSON.stringify(this.editorParameters)));this.isIframe?(t=this.target.contentWindow,n=this.target.contentWindow):(t=this.target,n=window);var i=this.core.beforeUpdateFormula(e,null);return i&&(i=this.insertFormula(t,n,i.mathml,i.wirisProperties))?this.core.afterUpdateFormula(i.focusElement,i.windowTarget,i.node,i.latex):\"\"}},{key:\"insertFormula\",value:function(e,t,n,i){return this.core.insertFormula(e,t,n,i)}},{key:\"getSelection\",value:function(){return this.isIframe?(this.target.contentWindow.focus(),this.target.contentWindow.getSelection()):(this.target.focus(),window.getSelection())}},{key:\"addEvents\",value:function(){var e=this,t=this.isIframe?this.target.contentWindow.document:this.target;w.addElementEvents(t,function(t,n){e.doubleClickHandler(t,n)},function(t,n){e.mousedownHandler(t,n)},function(t,n){e.mouseupHandler(t,n)})}},{key:\"doubleClickHandler\",value:function(e){if(\"img\"===e.nodeName.toLowerCase()){this.core.getCustomEditors().disable();var t=l.get(\"imageCustomEditorName\");if(e.hasAttribute(t)){var n=e.getAttribute(t);this.core.getCustomEditors().enable(n)}w.containsClass(e,l.get(\"imageClassName\"))&&(this.core.editionProperties.temporalImage=e,this.core.editionProperties.isNewElement=!0,this.openExistingFormulaEditor())}}},{key:\"mouseupHandler\",value:function(){var e=this;this.temporalImageResizing&&setTimeout(function(){k.fixAfterResize(e.temporalImageResizing)},10)}},{key:\"mousedownHandler\",value:function(e){\"img\"===e.nodeName.toLowerCase()&&w.containsClass(e,l.get(\"imageClassName\"))&&(this.temporalImageResizing=e)}},{key:\"getLanguage\",value:function(){return this.getBrowserLanguage()}},{key:\"getBrowserLanguage\",value:function(){return navigator.userLanguage?navigator.userLanguage.substring(0,2):navigator.language?navigator.language.substring(0,2):\"en\"}},{key:\"callbackFunction\",value:function(){var e=this,t=m.newListener(\"onTargetReady\",function(){e.addEvents(e.target)});this.listeners.add(t)}},{key:\"notifyWindowClosed\",value:function(){}},{key:\"getMathmlFromTextNode\",value:function(e,t){}},{key:\"fillNonLatexNode\",value:function(e,t,n){}},{key:\"getSelectedItem\",value:function(e,t){}}],[{key:\"setTemporalImageToNull\",value:function(){WirisPlugin.currentInstance&&(WirisPlugin.currentInstance.core.editionProperties.temporalImage=null)}}]),e}();ee.prototype.getMathmlFromTextNode=void 0,ee.prototype.fillNonLatexNode=void 0,ee.prototype.getSelectedItem=void 0,ee.integrationParameters=[\"serviceProviderProperties\",\"editorParameters\"];var te='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3783\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3789\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3787\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3791\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\\nvklEQVRYw83Z23GDMBAF0AsNhBIowSVQgjuISnAJKSEdZNOBS6CDOBUkqSC4gs2PyGhAQg92se4M\\n4w8bccYW2hVumBmRdAB6ADfopQcw2SOYNoIkAL8APgB8AzgLI0/2S/iy1xkt3B9m9h0dM9/YHxM4\\nJ/c4MfPkGX+y763OyYVKgUPQTXAJdC84Bg2CS6Gl4FSoF7wHmgvOhbrgzsW+8L4YJegccrEj749R\\ngs7ZXGdz8wbAeNbREcDTzrHvblEgBbAUFACuy6JALJeL0E/P9sbvmBnNojcgAM+oJ58AhrlnWM5Z\\nA+C9RmiokakBvIJuNTLSc7hojqY0Mo8EB6Ep2CPBm9BU7BHgKDQHqwlOguZiNcDJ0JLe4FV4iaLY\\nJjF16dLqnoob+EdDs8A1QJPBtUCTwDVBo+DaoJvgNvBIR6rDl9wirbA1QIPgVgl6VwHb+dAr7Jkk\\nS/Pg3mCkVOslxxV9yBFqSqTA/3N2Utkzye3pftw5OxzQ5tHeddcdzGj3o4VgClUwowgtAVOs3BpF\\naA6YUnsDowhNAVNu12UUoVtgCn2+ifxp1wO42Ner4KPR5dJ2tsse2ZLvTQxbVf4AmC2z7WnSvpIA\\nAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n',ne='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg2\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata8\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs6\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image10\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\\n2ElEQVRYw9XZoXPCMBTH8S+5KfDzQ29606CH3/SmQTO96aGHHn/F0Himh8eDZSblQknSJH2F0DtE\\nQw8+12vyfulr7XY7LuW4qvj+DugD18AC+AE2woa+/mz07y9cF7Y8d7YPDEtjK2AsCB4BvdLYHPi0\\nXawioAA3wAfQaQiKHhuFYl1QSbAL6gWrSKgEuArqBKsEaB1wKNQKVsasHybcpRhwLNQED0zsoMbz\\nFwJOhWL6Cmzd2e0D14Wi1/k9di2wFNnAEtBifd9jv4GtIPgaeBOCAkzLFayr/6idWSSY6DJ8sHT9\\n6VK6zRFqKwo5gQ+grnKbA/gI6gsy5wRboT7sucBOaBX21GAvNAR7KnAlNBTbNDgIGoMtwO/C0Gko\\nNBZbN525tk+dJrAj4F4YGxXgVQS019DkCgarM0OjwCoDaDBYZQINAquMoJVglRnUC1YZQp1g1RB0\\nJryn65jYJ0HoRGPHguDX8hsZ6VAiGX4eUrJBbHqSArdN7LLBmCcBnpvYWfHWo6E8Wge8Ar7Kj8E4\\nARwcnBPBB20BE7uJBMdAU8BH/YvyBAsFp0BjwNZGi201qALXgYaAnR0hX2upAzwDj/p8raFL5I4u\\n8ALc6vNfvc+ztq5al9Rh/AfwZZ/LmlMllAAAAABJRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n',ie='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3793\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3799\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3797\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3801\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG4SURBVFhHvZnhUYNAEEbRBkwH2oGUkA40FWgJ\\nKSEdaAmxA0vQDmIHKSFWgPuAHZkEAnd8y5v5kuNHMm+WY1mSm6qqCiGlZdUspXzxopY9Wu6bpZQf\\nSxlRWapwVx9p2dy2CxUHy9ryWx9pKdWyECYcIQshwlGyIBeOlAWpcLQsyISXkAWEX5tlPkvJwnP7\\nns1SsnvLS7PMZwlZiShEy8pEIVJWKgpRsnJRiJBNFf2wbCzjfZgRUZi9JYWDxT9bWk6WIXbKym4t\\nKRVloObO5oze6ZClWX9a5jyOcOrfmuUkXPRUH/1zVRhZpvsnCxN+jnDqHh0SdQaFu9vg0ZIqrBZ1\\neoXP92yKcJSocyHcd4FNEY4WdbrCR1rGrukMF9BWVhZvLZ7U9rS2nH9HVvoq63iFu+RUlOpIuCYL\\nCCPIqVjq1A9j5R3aBnMY2kKzMlbZHPQVbVHLhomCUjZUFFSy35ZQUVDIMo+Gi4JCltFwERSy75Y5\\n4+VkFLLcKHLHyyRUF1jOeJmMShbChZWy0Df8yFDLgg8/cpCN6I9cdHJhZHmy7X2anAnCtDUZ/j/Y\\ng2X2j709MHhTDAFF8QdK9SRpUl2yFgAAAABJRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n',re='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg12\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata18\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs16\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image20\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAGMSURBVFhHvdk7TsNAFIVhQ0l6elLDJqCGngXQ\\nU7MA6rALahZATQ81C6APrXP/jEaKHD/i8TnzS1eaICF/2I4f4qxt20bYOmaVlrK2Mb8s1Nj3mIu0\\nlPYZszlPa1kvMf9pKe02Zq3Gcrhc4JUaSzawA0sWsAtLcrATS1KwG0sycA0sAd6kZXm1sNzVHtOy\\nvBpYoK8xV/tPC3JjZVByYqVQcmHlUHJgLVBSY0ugPP7xO5PXYSW2FMr19ytm8sahxD7ElEBzk3c6\\nsFysn/afymKPvsXMueh3oblRMNibmPuYZ34wsyWHfqhB8OFpwKvDHLADmusFd8/ZU8FOaO4I3PcF\\nmwLXgOYOwVtexdnwdUy3vg2UQPnD2eji+vZsrruHS/eoBEpjWMpgrhi1Dv1gY6fBkuRQmtqzJVmg\\npMbaoKTEWqGkwtqhpMBWgZICWwVKCuwpzxKSFNi5T2vFqb5gVcAqLNnBSixZwWos2cBg/9JSmgUM\\n9iMt5QFe8tZ8VP6n3WXMHQtxPzHfabm0ptkBwWhpthzMp7YAAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n',ae='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3813\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3819\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3817\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3821\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\nnUlEQVRYw+3Z0QnCMBSF4T/FATqCG1g3cISO0NE6iiPoCE5gneD40ohPvgkJ/AcC9/EjHELgliT0\\nkoGOIlasWLFixYoVK1asWLFixYoVK1bsjxy+5hlYgLEx47ofSEKSJW1nTUJJMgLPDlpwHoCpk8rO\\nvgZixf4Zu3Vi3cq+WroBp4ahL+BYa3AB7o1CH7vvc7M1U4N/g2sdSk8bxjfDaMNdr+hmAQAAAABJ\\nRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n',oe='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg32\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata38\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs36\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image40\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\npklEQVRYw+3ZLQ4CMRCG4bcbFOvXg99T7FG4BafAw1VALx7dWyy2mIoGgSOZJu/n6p70ZybppFIK\\nvWSgo4gVK1asWLFixYoVK1asWLFixYoV+yO7r/UMHIAxiO8FZGBrsUfgDEwBN/QNXIA11S/PW1Bo\\nCz4N9ein4Nd1Dyw9PbDR0iVW7J+xudax6HkOtZVdg0MfQE7N0G4GlmANYgNW4A6QepowfgDMXB26\\nb1V6LAAAAABJRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n',se='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3823\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3829\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3827\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3831\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAHOSURBVFhH1ZiLUcMwEEQNDcQl0AEuISVABZhO\\nUkroICVAB6ECoINQgdmVfR5FlmQrkZzjzezEzsc8NPqcdNd1XfVfuB9ec3NAmv4yiRo5ImzBlm+c\\nwZYtEHJCGsT3eSgHxKZFxs/tL+aMkCK8R3yMwu4PcsVmiXBIVDDCvh/miEtMeE5UaEsNMJcN8o64\\ng26PvPSXs9S+/zRHQtgtvLRFCb9blZpnYw/9Rb6RR3M3zxtiprFbyKYwipK1+uwlnIkSrbITUaJR\\n1itKtMkGRYk2WRZAQbTNBpzWtggrrwnaWja00hk0DrCgsEZZ4hXWKksmwjLAHobkgOv+V3+ZhXHQ\\niWxKqXYLKNyILDdqbPKlldASPhA+Mxc7uwatkSOSix1iP//q2APshLBvfJo7hbizgQj/mDtl+KYu\\nCj8h7NSqCM2zXJvZwqqEY4uCOuGYLKEwJ3kVzMlyscg5915FTFbdqhaSVbn8+mTV1gmurOqCxpZN\\nEeUu9BlZd1obioTkQ7IhPGTjYZuPIoUMK/GUFrX39asuHJTlH3w1d3FCBxCrCUufZX+NCUdPSsAq\\nwu4A8wnPiQrFhW1Z4govFRWKCoeOjzjoZF92CdwpZy6AquoPvJRHJxB8bJ8AAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n',le='<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg42\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata48\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs46\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image50\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG/SURBVFhH1ZgxUsMwEEUNJRyAGmp6qKGn5xRQ\\nQ08NNfRQQw11DpAaanIAWrMv8WaELSlexhLLm/mRnImiF48jr7zVtm3zX9ju2ik5llxLdpdHNg4k\\nT5I7yWB8Cdl9yZHkRmIRRpQxOxK+YzC+hKwSnTBBKKoMxpeUBSbkksgRE1V+CJeWhUPJ5ao7ICeq\\nrIVryMKJpC88RlTZk1SThVDYIvoluZIsSqyz511SfEg4UxbRdw5qnlmFa9AsCn8hO4aBKHiUjYqC\\nN9mkKHiSzYqCJ9lPSVIUPMmySqTudEu8XbOxO90ab7KQFPYoC1Fhr7IwENbagMLCUtXnoCTM1QZW\\n3iS3dFT2mRfHvEjuVfZUckFnQh67dgqo1GYqC1MLn3XtZIR/sFcJW2C39FcD18KxpcutcGqddSmc\\nuykg/LDq+iAnC/OudUFOVrfLbkjJWvb11YjJuhSFvqxbUQhlXYuCylpE2YXy2SkLlVEgaxVluzyT\\nIEutWQ1kKZYtouF2maK4mjCyFN6bJsw9gKgmrNdsbsKNT0qEKsIqC7EJx4gqxYVDWQgntIgqRYXD\\nbY3CLpcVgmdPC974BYy3/MgRNM03hR9ubFTHT48AAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';function ce(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function de(e,t,n){return t&&ue(e.prototype,t),n&&ue(e,n),e}var me=function(){function e(t){var n=this;ce(this,e),this.attributes=t;var i=navigator.userAgent.toLowerCase(),r=i.indexOf(\"android\")>-1,a=I.isIOS();this.iosSoftkeyboardOpened=!1,this.iosMeasureUnit=-1===i.indexOf(\"crios\")?\"%\":\"vh\",this.iosDivHeight=\"100%\".concat(this.iosMeasureUnit);var o=window.outerWidth,s=window.outerHeight,l=o>s,c=o<s,u=l&&this.attributes.height>s,d=c&&this.attributes.width>o,m=u||d;this.instanceId=document.getElementsByClassName(\"wrs_modal_dialogContainer\").length,this.deviceProperties={orientation:l?\"landscape\":\"portait\",isAndroid:r,isIOS:a,isMobile:m,isDesktop:!m&&!a&&!r},this.properties={created:!1,state:\"\",previousState:\"\",position:{bottom:0,right:10},size:{height:338,width:580}},this.websiteBeforeLockParameters=null;var h={class:\"wrs_modal_overlay\"};h.id=this.getElementId(h.class),this.overlay=w.createElement(\"div\",h),(h={}).class=\"wrs_modal_title_bar\",h.id=this.getElementId(h.class),this.titleBar=w.createElement(\"div\",h),(h={}).class=\"wrs_modal_title\",h.id=this.getElementId(h.class),this.title=w.createElement(\"div\",h),this.title.innerHTML=\"\",(h={}).class=\"wrs_modal_close_button\",h.id=this.getElementId(h.class),h.title=b.get(\"close\"),h.style={},this.closeDiv=w.createElement(\"a\",h),this.closeDiv.setAttribute(\"role\",\"button\");var g=\"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(te),\")\"),p=\"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(ne),\")\");this.closeDiv.setAttribute(\"style\",g),this.closeDiv.setAttribute(\"onmouseover\",'this.style = \"'.concat(p,'\";')),this.closeDiv.setAttribute(\"onmouseout\",'this.style = \"'.concat(g,'\";')),(h={}).class=\"wrs_modal_stack_button\",h.id=this.getElementId(h.class),h.title=b.get(\"exit_fullscreen\"),this.stackDiv=w.createElement(\"a\",h),this.stackDiv.setAttribute(\"role\",\"button\"),g=\"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(se),\")\"),p=\"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(le),\")\"),this.stackDiv.setAttribute(\"style\",g),this.stackDiv.setAttribute(\"onmouseover\",'this.style = \"'.concat(p,'\";')),this.stackDiv.setAttribute(\"onmouseout\",'this.style = \"'.concat(g,'\";')),(h={}).class=\"wrs_modal_maximize_button\",h.id=this.getElementId(h.class),h.title=b.get(\"fullscreen\"),this.maximizeDiv=w.createElement(\"a\",h),this.maximizeDiv.setAttribute(\"role\",\"button\"),g=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(ie),\")\"),p=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(re),\")\"),this.maximizeDiv.setAttribute(\"style\",g),this.maximizeDiv.setAttribute(\"onmouseover\",'this.style = \"'.concat(p,'\";')),this.maximizeDiv.setAttribute(\"onmouseout\",'this.style = \"'.concat(g,'\";')),(h={}).class=\"wrs_modal_minimize_button\",h.id=this.getElementId(h.class),h.title=b.get(\"minimize\"),this.minimizeDiv=w.createElement(\"a\",h),this.minimizeDiv.setAttribute(\"role\",\"button\"),g=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(ae),\")\"),p=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(oe),\")\"),this.minimizeDiv.setAttribute(\"style\",g),this.minimizeDiv.setAttribute(\"onmouseover\",'this.style = \"'.concat(p,'\";')),this.minimizeDiv.setAttribute(\"onmouseout\",'this.style = \"'.concat(g,'\";')),(h={}).class=\"wrs_modal_dialogContainer\",h.id=this.getElementId(h.class),h.role=\"dialog\",this.container=w.createElement(\"div\",h),this.container.setAttribute(\"aria-labeledby\",\"wrs_modal_title[0]\"),(h={}).class=\"wrs_modal_wrapper\",h.id=this.getElementId(h.class),this.wrapper=w.createElement(\"div\",h),(h={}).class=\"wrs_content_container\",h.id=this.getElementId(h.class),this.contentContainer=w.createElement(\"div\",h),(h={}).class=\"wrs_modal_controls\",h.id=this.getElementId(h.class),this.controls=w.createElement(\"div\",h),(h={}).class=\"wrs_modal_buttons_container\",h.id=this.getElementId(h.class),this.buttonContainer=w.createElement(\"div\",h),this.submitButton=this.createSubmitButton({id:this.getElementId(\"wrs_modal_button_accept\"),class:\"wrs_modal_button_accept\",innerHTML:b.get(\"accept\")},this.submitAction.bind(this)),this.cancelButton=this.createSubmitButton({id:this.getElementId(\"wrs_modal_button_cancel\"),class:\"wrs_modal_button_cancel\",innerHTML:b.get(\"cancel\")},this.cancelAction.bind(this)),this.contentManager=null;var f={cancelString:b.get(\"cancel\"),submitString:b.get(\"close\"),message:b.get(\"close_modal_warning\")},v={closeCallback:function(){n.close()},cancelCallback:function(){n.focus()}},_={overlayElement:this.container,callbacks:v,strings:f};this.popup=new R(_),this.rtl=!1,\"rtl\"in this.attributes&&(this.rtl=this.attributes.rtl),this.handleOpenedIosSoftkeyboard=this.handleOpenedIosSoftkeyboard.bind(this),this.handleClosedIosSoftkeyboard=this.handleClosedIosSoftkeyboard.bind(this)}return de(e,[{key:\"setContentManager\",value:function(e){this.contentManager=e}},{key:\"getContentManager\",value:function(){return this.contentManager}},{key:\"submitAction\",value:function(){void 0!==this.contentManager.submitAction&&this.contentManager.submitAction(),this.close()}},{key:\"cancelAction\",value:function(){void 0===this.contentManager.hasChanges?this.close():this.contentManager.hasChanges()?this.showPopUpMessage():this.close()}},{key:\"createSubmitButton\",value:function(e,t){return new(function(){function n(){ce(this,n),this.element=document.createElement(\"button\"),this.element.id=e.id,this.element.className=e.class,this.element.innerHTML=e.innerHTML,w.addEvent(this.element,\"click\",t)}return de(n,[{key:\"getElement\",value:function(){return this.element}}]),n}())(e,t).getElement()}},{key:\"create\",value:function(){this.titleBar.appendChild(this.closeDiv),this.titleBar.appendChild(this.stackDiv),this.titleBar.appendChild(this.maximizeDiv),this.titleBar.appendChild(this.minimizeDiv),this.titleBar.appendChild(this.title),this.deviceProperties.isDesktop&&this.container.appendChild(this.titleBar),this.wrapper.appendChild(this.contentContainer),this.wrapper.appendChild(this.controls),this.controls.appendChild(this.buttonContainer),this.buttonContainer.appendChild(this.submitButton),this.buttonContainer.appendChild(this.cancelButton),this.container.appendChild(this.wrapper),this.recalculateScrollBar(),document.body.appendChild(this.container),document.body.appendChild(this.overlay),this.deviceProperties.isDesktop?(this.createModalWindowDesktop(),this.createResizeButtons(),this.addListeners(),l.get(\"modalWindowFullScreen\")&&this.maximize()):this.deviceProperties.isAndroid?this.createModalWindowAndroid():this.deviceProperties.isIOS&&this.createModalWindowIos(),null!=this.contentManager&&this.contentManager.insert(this),this.properties.open=!0,this.properties.created=!0,this.isRTL()&&(this.container.style.right=\"\".concat(window.innerWidth-this.scrollbarWidth-this.container.offsetWidth,\"px\"),this.container.className+=\" wrs_modal_rtl\")}},{key:\"createResizeButtons\",value:function(){this.resizerBR=document.createElement(\"div\"),this.resizerBR.className=\"wrs_bottom_right_resizer\",this.resizerBR.innerHTML=\"◢\",this.resizerTL=document.createElement(\"div\"),this.resizerTL.className=\"wrs_bottom_left_resizer\",this.container.appendChild(this.resizerBR),this.titleBar.appendChild(this.resizerTL),w.addEvent(this.resizerBR,\"mousedown\",this.activateResizeStateBR.bind(this)),w.addEvent(this.resizerTL,\"mousedown\",this.activateResizeStateTL.bind(this))}},{key:\"activateResizeStateBR\",value:function(e){this.initializeResizeProperties(e,!1)}},{key:\"activateResizeStateTL\",value:function(e){this.initializeResizeProperties(e,!0)}},{key:\"initializeResizeProperties\",value:function(e,t){w.addClass(document.body,\"wrs_noselect\"),w.addClass(this.overlay,\"wrs_overlay_active\"),this.resizeDataObject={x:this.eventClient(e).X,y:this.eventClient(e).Y},this.initialWidth=parseInt(this.container.style.width,10),this.initialHeight=parseInt(this.container.style.height,10),t?this.leftScale=!0:(this.initialRight=parseInt(this.container.style.right,10),this.initialBottom=parseInt(this.container.style.bottom,10)),this.initialRight||(this.initialRight=0),this.initialBottom||(this.initialBottom=0),document.body.style[\"user-select\"]=\"none\"}},{key:\"open\",value:function(){var e=this;try{q.send([{timestamp:(new Date).toJSON(),topic:\"0\",level:\"info\",message:\"HELO telemetry.wiris.net\"}]).then(function(e){})}catch(e){}this.removeClass(\"wrs_closed\");var t=this.deviceProperties.isIOS,n=this.deviceProperties.isAndroid,i=this.deviceProperties.isMobile;if((t||n||i)&&(this.restoreWebsiteScale(),this.lockWebsiteScroll(),setTimeout(function(){e.hideKeyboard()},400)),this.properties.created?(this.properties.open||(this.properties.open=!0,this.deviceProperties.isAndroid||this.deviceProperties.isIOS||this.restoreState()),this.deviceProperties.isDesktop&&l.get(\"modalWindowFullScreen\")&&this.maximize(),this.deviceProperties.isIOS&&(this.iosSoftkeyboardOpened=!1,this.setContainerHeight(\"\".concat(100+this.iosMeasureUnit)))):this.create(),I.isEditorLoaded())this.contentManager.onOpen(this);else{var r=m.newListener(\"onLoad\",function(){e.contentManager.onOpen(e)});this.contentManager.addListener(r)}}},{key:\"close\",value:function(){ee.setTemporalImageToNull(),this.removeClass(\"wrs_maximized\"),this.removeClass(\"wrs_minimized\"),this.removeClass(\"wrs_stack\"),this.addClass(\"wrs_closed\"),this.saveModalProperties(),this.unlockWebsiteScroll(),this.properties.open=!1}},{key:\"restoreWebsiteScale\",value:function(){var e=document.querySelector(\"meta[name=viewport]\"),t=[\"initial-scale=\",\"minimum-scale=\",\"maximum-scale=\"],n=[\"1.0\",\"1.0\",\"1.0\"],i=function(e,t){var i=e.getAttribute(\"content\");if(i){for(var r=i.split(\",\"),a=\"\",o=[],s=0;s<r.length;s+=1){for(var l=!1,c=0;!l&&c<t.length;)r[s].indexOf(t[c])&&(l=!0),c+=1;l||o.push(r[s])}for(var u=0;u<t.length;u+=1){var d=t[u]+n[u];a+=0===u?d:\",\".concat(d)}for(var m=0;m<o.length;m+=1)a+=\",\".concat(o[m]);e.setAttribute(\"content\",a),e.setAttribute(\"content\",\"\"),e.setAttribute(\"content\",i)}else e.setAttribute(\"content\",\"initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0\"),e.removeAttribute(\"content\")};e?i(e,t):(e=document.createElement(\"meta\"),document.getElementsByTagName(\"head\")[0].appendChild(e),i(e,t),e.remove())}},{key:\"lockWebsiteScroll\",value:function(){this.websiteBeforeLockParameters={bodyStylePosition:document.body.style.position?document.body.style.position:\"\",bodyStyleOverflow:document.body.style.overflow?document.body.style.overflow:\"\",htmlStyleOverflow:document.documentElement.style.overflow?document.documentElement.style.overflow:\"\",windowScrollX:window.scrollX,windowScrollY:window.scrollY}}},{key:\"unlockWebsiteScroll\",value:function(){if(this.websiteBeforeLockParameters){document.body.style.position=this.websiteBeforeLockParameters.bodyStylePosition,document.body.style.overflow=this.websiteBeforeLockParameters.bodyStyleOverflow,document.documentElement.style.overflow=this.websiteBeforeLockParameters.htmlStyleOverflow;var e=this.websiteBeforeLockParameters.windowScrollX,t=this.websiteBeforeLockParameters.windowScrollY;window.scrollTo(e,t),this.websiteBeforeLockParameters=null}}},{key:\"isIE11\",value:function(){return navigator.userAgent.search(\"Msie/\")>=0||navigator.userAgent.search(\"Trident/\")>=0||navigator.userAgent.search(\"Edge/\")>=0}},{key:\"isRTL\",value:function(){return\"ar\"===this.attributes.language||\"he\"===this.attributes.language||this.rtl}},{key:\"addClass\",value:function(e){w.addClass(this.overlay,e),w.addClass(this.titleBar,e),w.addClass(this.overlay,e),w.addClass(this.container,e),w.addClass(this.contentContainer,e),w.addClass(this.stackDiv,e),w.addClass(this.minimizeDiv,e),w.addClass(this.maximizeDiv,e),w.addClass(this.wrapper,e)}},{key:\"removeClass\",value:function(e){w.removeClass(this.overlay,e),w.removeClass(this.titleBar,e),w.removeClass(this.overlay,e),w.removeClass(this.container,e),w.removeClass(this.contentContainer,e),w.removeClass(this.stackDiv,e),w.removeClass(this.minimizeDiv,e),w.removeClass(this.maximizeDiv,e),w.removeClass(this.wrapper,e)}},{key:\"createModalWindowDesktop\",value:function(){this.addClass(\"wrs_modal_desktop\"),this.stack()}},{key:\"createModalWindowAndroid\",value:function(){this.addClass(\"wrs_modal_android\"),window.addEventListener(\"resize\",this.orientationChangeAndroidSoftkeyboard.bind(this))}},{key:\"createModalWindowIos\",value:function(){this.addClass(\"wrs_modal_ios\"),window.addEventListener(\"resize\",this.orientationChangeIosSoftkeyboard.bind(this))}},{key:\"restoreState\",value:function(){\"maximized\"===this.properties.state?this.maximize():\"minimized\"===this.properties.state?(this.properties.state=this.properties.previousState,this.properties.previousState=\"\",this.minimize()):this.stack()}},{key:\"stack\",value:function(){this.properties.previousState=this.properties.state,this.properties.state=\"stack\",this.removeClass(\"wrs_maximized\"),this.minimizeDiv.title=b.get(\"minimize\"),this.removeClass(\"wrs_minimized\"),this.addClass(\"wrs_stack\");var e=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(ae),\")\"),t=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(oe),\")\");this.minimizeDiv.setAttribute(\"style\",e),this.minimizeDiv.setAttribute(\"onmouseover\",'this.style = \"'.concat(t,'\";')),this.minimizeDiv.setAttribute(\"onmouseout\",'this.style = \"'.concat(e,'\";')),this.restoreModalProperties(),void 0!==this.resizerBR&&void 0!==this.resizerTL&&this.setResizeButtonsVisibility(),this.recalculateScrollBar(),this.recalculatePosition(),this.recalculateScale(),this.focus()}},{key:\"minimize\",value:function(){if(this.saveModalProperties(),this.title.style.cursor=\"pointer\",\"minimized\"===this.properties.state&&\"stack\"===this.properties.previousState)this.stack();else if(\"minimized\"===this.properties.state&&\"maximized\"===this.properties.previousState)this.maximize();else{this.container.style.height=\"30px\",this.container.style.width=\"250px\",this.container.style.bottom=\"0px\",this.container.style.right=\"10px\",this.removeListeners(),this.properties.previousState=this.properties.state,this.properties.state=\"minimized\",this.setResizeButtonsVisibility(),this.minimizeDiv.title=b.get(\"maximize\"),w.containsClass(this.overlay,\"wrs_stack\")?this.removeClass(\"wrs_stack\"):this.removeClass(\"wrs_maximized\"),this.addClass(\"wrs_minimized\");var e=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.44 13.76\"\\n   height=\"13.76\"\\n   width=\"13.44\"\\n   id=\"svg3803\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3809\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3807\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3811\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\nvElEQVRYw+3ZSw0CMRSF4b8T9iAFB4wDkDAWcICEkTA4GAeAA3AADurgsCkbAgsSMrmFczZNd1/a\\n3vSVJFFDGipJNdBZaRdAB2wC2TIwAgNAkrQEjsA86GBegDZJGoF18JnfJtVR9idXvaGGGmrod/b6\\nV9kD14k9LbD6FDqUM8CU2b2Deo0aaqihhhpqqKGGGhr1hH/wiP469FaBMzflEhc9PZKQ1CtmsqRO\\nEunpHbeNNN3A+dFJ/mf6V+gduGPIoUgKLbAAAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.44\" />\\n</svg>\\n'),\")\"),t=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.44 13.76\"\\n   height=\"13.76\"\\n   width=\"13.44\"\\n   id=\"svg22\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata28\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs26\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image30\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\nvUlEQVRYw+3ZsQ3CMBCF4d8WFekZgBqWIDUDZACmYBQWYIn0pGYAegZIexROERHRIBTdhXeVy08+\\nyT4/JzMjQmWCVBjoarSugK0z3/0degKODjeyBy5Am8ysARrnnT8nM7sCa+fQLgdAAlQ6ngQVVFBB\\nfzeUTK6t8VAwU328ztV6QQUVVFBBBRVUUEG9Ds41sJvZs/8GelDrlw7tAjhvmZLo9o6RD4bEGUp+\\nX1My/I0T4HN4rrcASf9M/wp9ASNzIKYYz2hAAAAAAElFTkSuQmCC\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.44\" />\\n</svg>\\n'),\")\");this.minimizeDiv.setAttribute(\"style\",e),this.minimizeDiv.setAttribute(\"onmouseover\",'this.style = \"'.concat(t,'\";')),this.minimizeDiv.setAttribute(\"onmouseout\",'this.style = \"'.concat(e,'\";'))}}},{key:\"maximize\",value:function(){this.saveModalProperties(),\"maximized\"!==this.properties.state&&(this.properties.previousState=this.properties.state,this.properties.state=\"maximized\"),this.setResizeButtonsVisibility(),w.containsClass(this.overlay,\"wrs_minimized\")?(this.minimizeDiv.title=b.get(\"minimize\"),this.removeClass(\"wrs_minimized\")):w.containsClass(this.overlay,\"wrs_stack\")&&(this.container.style.left=null,this.container.style.top=null,this.removeClass(\"wrs_stack\")),this.addClass(\"wrs_maximized\");var e=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(ae),\")\"),t=\"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(oe),\")\");this.minimizeDiv.setAttribute(\"style\",e),this.minimizeDiv.setAttribute(\"onmouseover\",'this.style = \"'.concat(t,'\";')),this.minimizeDiv.setAttribute(\"onmouseout\",'this.style = \"'.concat(e,'\";')),this.setSize(parseInt(.8*window.innerHeight,10),parseInt(.8*window.innerWidth,10)),this.container.clientHeight>700&&(this.container.style.height=\"700px\"),this.container.clientWidth>1200&&(this.container.style.width=\"1200px\");var n=window.innerHeight,i=window.innerWidth,r=n/2-this.container.offsetHeight/2,a=i/2-this.container.offsetWidth/2;this.setPosition(r,a),this.recalculateScale(),this.recalculatePosition(),this.recalculateSize(),this.focus()}},{key:\"reExpand\",value:function(){\"minimized\"===this.properties.state&&(\"maximized\"===this.properties.previousState?this.maximize():this.stack(),this.title.style.cursor=\"\")}},{key:\"setSize\",value:function(e,t){this.container.style.height=\"\".concat(e,\"px\"),this.container.style.width=\"\".concat(t,\"px\"),this.recalculateSize()}},{key:\"setPosition\",value:function(e,t){this.container.style.bottom=\"\".concat(e,\"px\"),this.container.style.right=\"\".concat(t,\"px\")}},{key:\"saveModalProperties\",value:function(){\"stack\"===this.properties.state&&(this.properties.position.bottom=parseInt(this.container.style.bottom,10),this.properties.position.right=parseInt(this.container.style.right,10),this.properties.size.width=parseInt(this.container.style.width,10),this.properties.size.height=parseInt(this.container.style.height,10))}},{key:\"restoreModalProperties\",value:function(){\"stack\"===this.properties.state&&(this.setPosition(this.properties.position.bottom,this.properties.position.right),this.setSize(this.properties.size.height,this.properties.size.width))}},{key:\"recalculateSize\",value:function(){this.wrapper.style.width=\"\".concat(this.container.clientWidth-12,\"px\"),this.wrapper.style.height=\"\".concat(this.container.clientHeight-38,\"px\"),this.contentContainer.style.height=\"\".concat(parseInt(this.wrapper.offsetHeight-50,10),\"px\")}},{key:\"setResizeButtonsVisibility\",value:function(){\"stack\"===this.properties.state?(this.resizerTL.style.visibility=\"visible\",this.resizerBR.style.visibility=\"visible\"):(this.resizerTL.style.visibility=\"hidden\",this.resizerBR.style.visibility=\"hidden\")}},{key:\"addListeners\",value:function(){this.maximizeDiv.addEventListener(\"click\",this.maximize.bind(this),!0),this.stackDiv.addEventListener(\"click\",this.stack.bind(this),!0),this.minimizeDiv.addEventListener(\"click\",this.minimize.bind(this),!0),this.closeDiv.addEventListener(\"click\",this.cancelAction.bind(this)),this.title.addEventListener(\"click\",this.reExpand.bind(this)),this.overlay.addEventListener(\"click\",this.cancelAction.bind(this)),w.addEvent(window,\"mousedown\",this.startDrag.bind(this)),w.addEvent(window,\"mouseup\",this.stopDrag.bind(this)),w.addEvent(window,\"mousemove\",this.drag.bind(this)),w.addEvent(window,\"resize\",this.onWindowResize.bind(this)),w.addEvent(this.container,\"keydown\",this.onKeyDown.bind(this))}},{key:\"removeListeners\",value:function(){w.removeEvent(window,\"mousedown\",this.startDrag),w.removeEvent(window,\"mouseup\",this.stopDrag),w.removeEvent(window,\"mousemove\",this.drag),w.removeEvent(window,\"resize\",this.onWindowResize),w.removeEvent(this.container,\"keydown\",this.onKeyDown)}},{key:\"eventClient\",value:function(e){return void 0===e.clientX&&e.changedTouches?{X:e.changedTouches[0].clientX,Y:e.changedTouches[0].clientY}:{X:e.clientX,Y:e.clientY}}},{key:\"startDrag\",value:function(e){\"minimized\"!==this.properties.state&&e.target===this.title&&(void 0!==this.dragDataObject&&null!==this.dragDataObject||(this.dragDataObject={x:this.eventClient(e).X,y:this.eventClient(e).Y},this.lastDrag={x:\"0px\",y:\"0px\"},\"\"===this.container.style.right&&(this.container.style.right=\"0px\"),\"\"===this.container.style.bottom&&(this.container.style.bottom=\"0px\"),this.isIE11(),w.addClass(document.body,\"wrs_noselect\"),w.addClass(this.overlay,\"wrs_overlay_active\"),this.limitWindow=this.getLimitWindow()))}},{key:\"drag\",value:function(e){if(this.dragDataObject){e.preventDefault();var t=Math.min(this.eventClient(e).Y,this.limitWindow.minPointer.y);t=Math.max(this.limitWindow.maxPointer.y,t);var n=Math.min(this.eventClient(e).X,this.limitWindow.minPointer.x);n=Math.max(this.limitWindow.maxPointer.x,n);var i=\"\".concat(n-this.dragDataObject.x,\"px\"),r=\"\".concat(t-this.dragDataObject.y,\"px\");this.lastDrag={x:i,y:r},this.container.style.transform=\"translate3d(\".concat(i,\",\").concat(r,\",0)\")}if(this.resizeDataObject){var a,o=window.innerWidth,s=window.innerHeight,l=Math.min(this.eventClient(e).X,o-this.scrollbarWidth-7),c=Math.min(this.eventClient(e).Y,s-7);l<0&&(l=0),c<0&&(c=0),a=this.leftScale?-1:1,this.container.style.width=\"\".concat(this.initialWidth+a*(l-this.resizeDataObject.x),\"px\"),this.container.style.height=\"\".concat(this.initialHeight+a*(c-this.resizeDataObject.y),\"px\"),this.leftScale||(this.resizeDataObject.x-l-this.initialWidth<-580?this.container.style.right=\"\".concat(this.initialRight-(l-this.resizeDataObject.x),\"px\"):(this.container.style.right=\"\".concat(this.initialRight+this.initialWidth-580,\"px\"),this.container.style.width=\"580px\"),this.resizeDataObject.y-c<this.initialHeight-338?this.container.style.bottom=\"\".concat(this.initialBottom-(c-this.resizeDataObject.y),\"px\"):(this.container.style.bottom=\"\".concat(this.initialBottom+this.initialHeight-338,\"px\"),this.container.style.height=\"338px\")),this.recalculateScale(),this.recalculatePosition()}}},{key:\"getLimitWindow\",value:function(){var e=window.innerWidth,t=window.innerHeight,n=this.container.offsetHeight,i=parseInt(this.container.style.bottom,10),r=parseInt(this.container.style.right,10),a=window.pageXOffset,o=this.dragDataObject.y,s=this.dragDataObject.x,l=n+i-(t-(o-a)),c=e-this.scrollbarWidth-(s-a)-r,u=t-this.container.offsetHeight+l,d=this.title.offsetHeight-(this.title.offsetHeight-l);return{minPointer:{x:e-c-this.scrollbarWidth,y:u},maxPointer:{x:this.container.offsetWidth-c,y:d}}}},{key:\"getScrollBarWidth\",value:function(){var e=document.createElement(\"p\");e.style.width=\"100%\",e.style.height=\"200px\";var t=document.createElement(\"div\");t.style.position=\"absolute\",t.style.top=\"0px\",t.style.left=\"0px\",t.style.visibility=\"hidden\",t.style.width=\"200px\",t.style.height=\"150px\",t.style.overflow=\"hidden\",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth;t.style.overflow=\"scroll\";var i=e.offsetWidth;return n===i&&(i=t.clientWidth),document.body.removeChild(t),n-i}},{key:\"stopDrag\",value:function(){(this.dragDataObject||this.resizeDataObject)&&(this.container.style.transform=\"\",this.dragDataObject&&(this.container.style.right=\"\".concat(parseInt(this.container.style.right,10)-parseInt(this.lastDrag.x,10),\"px\"),this.container.style.bottom=\"\".concat(parseInt(this.container.style.bottom,10)-parseInt(this.lastDrag.y,10),\"px\")),this.focus(),document.body.style[\"user-select\"]=\"\",this.isIE11(),w.removeClass(document.body,\"wrs_noselect\"),w.removeClass(this.overlay,\"wrs_overlay_active\")),this.dragDataObject=null,this.resizeDataObject=null,this.initialWidth=null,this.leftScale=null}},{key:\"onWindowResize\",value:function(){this.recalculateScrollBar(),this.recalculatePosition(),this.recalculateScale()}},{key:\"onKeyDown\",value:function(e){void 0!==e.key&&(\"block\"!==this.popup.overlayWrapper.style.display?\"Escape\"===e.key||\"Esc\"===e.key?this.properties.open&&this.contentManager.onKeyDown(e):e.shiftKey&&\"Tab\"===e.key?document.activeElement===this.cancelButton?(this.submitButton.focus(),e.stopPropagation(),e.preventDefault()):this.contentManager.onKeyDown(e):\"Tab\"===e.key&&(document.activeElement===this.submitButton?(this.cancelButton.focus(),e.stopPropagation(),e.preventDefault()):this.contentManager.onKeyDown(e)):this.popup.onKeyDown(e))}},{key:\"recalculatePosition\",value:function(){this.container.style.right=\"\".concat(Math.min(parseInt(this.container.style.right,10),window.innerWidth-this.scrollbarWidth-this.container.offsetWidth),\"px\"),parseInt(this.container.style.right,10)<0&&(this.container.style.right=\"0px\"),this.container.style.bottom=\"\".concat(Math.min(parseInt(this.container.style.bottom,10),window.innerHeight-this.container.offsetHeight),\"px\"),parseInt(this.container.style.bottom,10)<0&&(this.container.style.bottom=\"0px\")}},{key:\"recalculateScale\",value:function(){var e=!1;parseInt(this.container.style.width,10)>580?(this.container.style.width=\"\".concat(Math.min(parseInt(this.container.style.width,10),window.innerWidth-this.scrollbarWidth),\"px\"),e=!0):(this.container.style.width=\"580px\",e=!0),parseInt(this.container.style.height,10)>338?(this.container.style.height=\"\".concat(Math.min(parseInt(this.container.style.height,10),window.innerHeight),\"px\"),e=!0):(this.container.style.height=\"338px\",e=!0),e&&this.recalculateSize()}},{key:\"recalculateScrollBar\",value:function(){this.hasScrollBar=window.innerWidth>document.documentElement.clientWidth,this.hasScrollBar?this.scrollbarWidth=this.getScrollBarWidth():this.scrollbarWidth=0}},{key:\"hideKeyboard\",value:function(){var e=document.createElement(\"input\");this.container.appendChild(e),e.focus(),e.blur(),e.remove()}},{key:\"focus\",value:function(){null!=this.contentManager&&void 0!==this.contentManager.onFocus&&this.contentManager.onFocus()}},{key:\"portraitMode\",value:function(){return window.innerHeight>window.innerWidth}},{key:\"handleOpenedIosSoftkeyboard\",value:function(){this.iosSoftkeyboardOpened||null==this.iosDivHeight||this.iosDivHeight!==\"100\".concat(this.iosMeasureUnit)||(this.portraitMode()?this.setContainerHeight(\"63\".concat(this.iosMeasureUnit)):this.setContainerHeight(\"40\".concat(this.iosMeasureUnit))),this.iosSoftkeyboardOpened=!0}},{key:\"handleClosedIosSoftkeyboard\",value:function(){this.iosSoftkeyboardOpened=!1,this.setContainerHeight(\"100\".concat(this.iosMeasureUnit))}},{key:\"orientationChangeIosSoftkeyboard\",value:function(){this.iosSoftkeyboardOpened?this.portraitMode()?this.setContainerHeight(\"63\".concat(this.iosMeasureUnit)):this.setContainerHeight(\"40\".concat(this.iosMeasureUnit)):this.setContainerHeight(\"100\".concat(this.iosMeasureUnit))}},{key:\"orientationChangeAndroidSoftkeyboard\",value:function(){this.setContainerHeight(\"100%\")}},{key:\"setContainerHeight\",value:function(e){this.iosDivHeight=e,this.wrapper.style.height=e}},{key:\"showPopUpMessage\",value:function(){\"minimized\"===this.properties.state&&this.stack(),this.popup.show()}},{key:\"setTitle\",value:function(e){this.title.innerHTML=e}},{key:\"getElementId\",value:function(e){return\"\".concat(e,\"[\").concat(this.instanceId,\"]\")}}]),e}();\n/*! http://mths.be/codepointat v0.1.0 by @mathias */\nString.prototype.codePointAt||function(){var e=function(e){if(null==this)throw TypeError();var t=String(this),n=t.length,i=e?Number(e):0;if(i!=i&&(i=0),!(i<0||i>=n)){var r,a=t.charCodeAt(i);return a>=55296&&a<=56319&&n>i+1&&(r=t.charCodeAt(i+1))>=56320&&r<=57343?1024*(a-55296)+r-56320+65536:a}};Object.defineProperty?Object.defineProperty(String.prototype,\"codePointAt\",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}(),\"function\"!=typeof Object.assign&&Object.defineProperty(Object,\"assign\",{value:function(e,t){if(null==e)throw new TypeError(\"Cannot convert undefined or null to object\");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0});n(3);function he(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ge=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.language=\"en\",this.editMode=\"images\",this.modalDialog=null,this.customEditors=new z;if(this.customEditors.addEditor(\"chemistry\",{name:\"Chemistry\",toolbar:\"chemistry\",icon:\"chem.png\",confVariable:\"chemEnabled\",title:\"ChemType\",tooltip:\"Insert a chemistry formula - ChemType\"}),this.environment={},this.editionProperties={},this.editionProperties.isNewElement=!0,this.editionProperties.temporalImage=null,this.editionProperties.latexRange=null,this.editionProperties.range=null,this.integrationModel=null,this.contentManager=null,this.browser=function(){var e=navigator.userAgent,t=\"none\";return e.search(\"Edge/\")>=0?t=\"EDGE\":e.search(\"Chrome/\")>=0?t=\"CHROME\":e.search(\"Trident/\")>=0?t=\"IE\":e.search(\"Firefox/\")>=0?t=\"FIREFOX\":e.search(\"Safari/\")>=0&&(t=\"SAFARI\"),t}(),this.listeners=new m,this.serviceProviderProperties={},!(\"serviceProviderProperties\"in t))throw new Error(\"serviceProviderProperties property missing.\");this.serviceProviderProperties=t.serviceProviderProperties}return function(e,t,n){t&&he(e.prototype,t),n&&he(e,n)}(e,[{key:\"setIntegrationModel\",value:function(e){this.integrationModel=e}},{key:\"setEnvironment\",value:function(e){\"editor\"in e&&(this.environment.editor=e.editor),\"mode\"in e&&(this.environment.mode=e.mode),\"version\"in e&&(this.environment.version=e.version)}},{key:\"getModalDialog\",value:function(){return this.modalDialog}},{key:\"init\",value:function(){var t=this;if(e.initialized)this.listeners.fire(\"onLoad\",{});else{var n=m.newListener(\"onInit\",function(){var e=g.getService(\"configurationjs\",\"\",\"get\"),n=JSON.parse(e);l.addConfiguration(n),l.addConfiguration(L),b.language=t.language,t.listeners.fire(\"onLoad\",{})});g.addListener(n),g.init(this.serviceProviderProperties),e.initialized=!0}}},{key:\"addListener\",value:function(e){this.listeners.add(e)}},{key:\"beforeUpdateFormula\",value:function(t,n){var i=new N;return i.mathml=t,i.wirisProperties={},null!=n&&Object.keys(n).forEach(function(e){i.wirisProperties[e]=n[e]}),i.language=this.language,i.editMode=this.editMode,this.listeners.fire(\"onBeforeFormulaInsertion\",i)?{}:e.globalListeners.fire(\"onBeforeFormulaInsertion\",i)?{}:{mathml:i.mathml,wirisProperties:i.wirisProperties}}},{key:\"insertFormula\",value:function(e,t,n,i){var r={};if(n)if(\"latex\"===this.editMode){if(r.latex=f.getLatexFromMathML(n),this.integrationModel.fillNonLatexNode&&!r.latex){var a=new N;a.editMode=this.editMode,a.windowTarget=t,a.focusElement=e,a.latex=r.latex,this.integrationModel.fillNonLatexNode(a,t,n)}else r.node=t.document.createTextNode(\"$$\".concat(r.latex,\"$$\"));this.insertElementOnSelection(r.node,e,t)}else r.node=T.mathmlToImgObject(t.document,n,i,this.language),this.insertElementOnSelection(r.node,e,t);else this.insertElementOnSelection(null,e,t);return r}},{key:\"afterUpdateFormula\",value:function(t,n,i,r){var a=new N;return a.editMode=this.editMode,a.windowTarget=n,a.focusElement=t,a.node=i,a.latex=r,this.listeners.fire(\"onAfterFormulaInsertion\",a)?{}:(e.globalListeners.fire(\"onAfterFormulaInsertion\",a),{})}},{key:\"placeCaretAfterNode\",value:function(e){this.integrationModel.getSelection();var t=e.ownerDocument;if(void 0!==t.getSelection&&e.parentElement){var n=t.createRange();n.setStartAfter(e),n.collapse(!0);var i=t.getSelection();i.removeAllRanges(),i.addRange(n),t.body.focus()}}},{key:\"insertElementOnSelection\",value:function(e,t,n){if(this.editionProperties.isNewElement)if(e)if(\"textarea\"===t.type)w.updateTextArea(t,e.textContent);else if(document.selection&&0===document.getSelection){var i=n.document.selection.createRange();if(n.document.execCommand(\"InsertImage\",!1,e.src),\"parentElement\"in i||(n.document.execCommand(\"delete\",!1),i=n.document.selection.createRange(),n.document.execCommand(\"InsertImage\",!1,e.src)),\"parentElement\"in i){var r=i.parentElement();\"IMG\"===r.nodeName.toUpperCase()?r.parentNode.replaceChild(e,r):i.pasteHTML(w.createObjectCode(e))}}else{var a=this.integrationModel.getSelection(),o=null;this.editionProperties.range?(o=this.editionProperties.range,this.editionProperties.range=null):o=a.getRangeAt(0),o.deleteContents();var s=o.startContainer,l=o.startOffset;3===s.nodeType?(s=s.splitText(l)).parentNode.insertBefore(e,s):1===s.nodeType&&s.insertBefore(e,s.childNodes[l]),this.placeCaretAfterNode(e)}else if(\"textarea\"===t.type)t.focus();else{var c=this.integrationModel.getSelection();if(c.removeAllRanges(),this.editionProperties.range){var u=this.editionProperties.range;this.editionProperties.range=null,c.addRange(u)}}else if(this.editionProperties.latexRange)document.selection&&0===document.getSelection?(this.editionProperties.isNewElement=!0,this.editionProperties.latexRange.select(),this.insertElementOnSelection(e,t,n)):(this.editionProperties.latexRange.deleteContents(),this.editionProperties.latexRange.insertNode(e),this.placeCaretAfterNode(e));else if(\"textarea\"===t.type){var d;d=void 0!==this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(t,!1):w.getSelectedItemOnTextarea(t),w.updateExistingTextOnTextarea(t,e.textContent,d.startPosition,d.endPosition)}else e&&\"img\"===e.nodeName.toLowerCase()?(k.removeImgDataAttributes(this.editionProperties.temporalImage),k.clone(e,this.editionProperties.temporalImage)):this.editionProperties.temporalImage.remove(),this.placeCaretAfterNode(this.editionProperties.temporalImage)}},{key:\"openModalDialog\",value:function(e,t){var n,i=this;this.editMode=\"images\";try{if(t){e.contentWindow.focus();var r=e.contentWindow.getSelection();this.editionProperties.range=r.getRangeAt(0)}else{e.focus();var a=getSelection();this.editionProperties.range=a.getRangeAt(0)}}catch(e){this.editionProperties.range=null}if(void 0===t&&(t=!0),this.editionProperties.latexRange=null,e)if(n=void 0!==this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(e,t):w.getSelectedItem(e,t)){if(!n.caretPosition&&w.containsClass(n.node,l.get(\"imageClassName\")))this.editionProperties.temporalImage=n.node,this.editionProperties.isNewElement=!1;else if(3===n.node.nodeType)if(this.integrationModel.getMathmlFromTextNode){var s=this.integrationModel.getMathmlFromTextNode(n.node,n.caretPosition);s&&(this.editMode=\"latex\",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement(\"img\"),this.editionProperties.temporalImage.setAttribute(l.get(\"imageMathmlAttribute\"),o.safeXmlEncode(s)))}else{var c=f.getLatexFromTextNode(n.node,n.caretPosition);if(c){var u=f.getMathMLFromLatex(c.latex);this.editMode=\"latex\",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement(\"img\"),this.editionProperties.temporalImage.setAttribute(l.get(\"imageMathmlAttribute\"),o.safeXmlEncode(u));var d=t?e.contentWindow:window;if(\"textarea\"!==e.tagName.toLowerCase())if(document.selection){for(var h=0,g=c.startNode.previousSibling;g;)h+=w.getNodeLength(g),g=g.previousSibling;this.editionProperties.latexRange=d.document.selection.createRange(),this.editionProperties.latexRange.moveToElementText(c.startNode.parentNode),this.editionProperties.latexRange.move(\"character\",h+c.startPosition),this.editionProperties.latexRange.moveEnd(\"character\",c.latex.length+4)}else this.editionProperties.latexRange=d.document.createRange(),this.editionProperties.latexRange.setStart(c.startNode,c.startPosition),this.editionProperties.latexRange.setEnd(c.endNode,c.endPosition)}}}else\"textarea\"===e.tagName.toLowerCase()&&(this.editMode=\"latex\");for(var p=l.get(\"editorAttributes\").split(\", \"),v={},_=0,b=p.length;_<b;_+=1){var y=p[_].split(\"=\"),x=y[0],k=y[1];v[x]=k}var A={},C=l.get(\"editorParameters\"),M=this.integrationModel.editorParameters;Object.assign(A,v,C),Object.assign(A,v,M),A.language=this.language,A.rtl=this.integrationModel.rtl;var T={};if(T.editorAttributes=A,T.language=this.language,T.customEditors=this.customEditors,T.environment=this.environment,null==this.modalDialog){this.modalDialog=new me(A),this.contentManager=new I(T);var E=m.newListener(\"onLoad\",function(){if(i.contentManager.isNewElement=i.editionProperties.isNewElement,null!=i.editionProperties.temporalImage){var e=o.safeXmlDecode(i.editionProperties.temporalImage.getAttribute(l.get(\"imageMathmlAttribute\")));i.contentManager.mathML=e}});this.contentManager.addListener(E),this.contentManager.init(),this.modalDialog.setContentManager(this.contentManager),this.contentManager.setModalDialogInstance(this.modalDialog)}else if(this.contentManager.isNewElement=this.editionProperties.isNewElement,null!=this.editionProperties.temporalImage){var j=o.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(l.get(\"imageMathmlAttribute\")));this.contentManager.mathML=j}this.contentManager.setIntegrationModel(this.integrationModel),this.modalDialog.open()}},{key:\"getCustomEditors\",value:function(){return this.customEditors}}],[{key:\"addGlobalListener\",value:function(t){e.globalListeners.add(t)}},{key:\"globalListeners\",get:function(){return e._globalListeners},set:function(t){e._globalListeners=t}},{key:\"initialized\",get:function(){return e._initialized},set:function(t){e._initialized=t}}]),e}();ge._globalListeners=new m,ge._initialized=!1;window.wrs_addPluginListener=function(e){var t,n;console.warn(\"Deprecated method\"),n=e[t=Object.keys(e)[0]];var i=m.newListener(t,n);ge.addGlobalListener(i)},window.wrs_initParse=function(e,t){return console.warn(\"Deprecated method. Use Parser.endParse instead.\"),T.initParse(e,t)},window.wrs_endParse=function(e,t,n){return console.warn(\"Deprecated method. Use Parser.endParse instead.\"),T.endParse(e,t,n)};var pe=n(1);function fe(e){return(fe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _e(e,t,n){return(_e=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=we(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){return function(){var t,n=we(e);if(function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var i=we(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return function(e,t){if(t&&(\"object\"===fe(t)||\"function\"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}(this,t)}}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(n,ee);var t=ye(n);function n(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,n),(i=t.call(this,e)).integrationFolderName=\"ckeditor_wiris\",i}return function(e,t,n){t&&ve(e.prototype,t),n&&ve(e,n)}(n,[{key:\"init\",value:function(){_e(we(n.prototype),\"init\",this).call(this);var e=this.editorObject;\"wiriseditorparameters\"in e.config&&l.update(\"editorParameters\",e.config.wiriseditorparameters)}},{key:\"getLanguage\",value:function(){try{return this.editorParameters.language}catch(e){}return null!=this.editorObject.langCode?this.editorObject.langCode:_e(we(n.prototype),\"getLanguage\",this).call(this)}},{key:\"getPath\",value:function(){return this.editorObject.plugins.ckeditor_wiris.path}},{key:\"addEditorListeners\",value:function(){var e=this.editorObject;void 0!==e.config.wirislistenersdisabled&&e.config.wirislistenersdisabled?(e.on(\"instanceReady\",function(e){this.checkElement()}.bind(this)),e.resetDirty()):(e.setData(T.initParse(e.getData())),e.on(\"focus\",function(e){WirisPlugin.currentInstance=WirisPlugin.instances[e.editor.name]}),e.on(\"contentDom\",function(){e.on(\"doubleclick\",function(e){(\"img\"==e.data.element.$.nodeName.toLowerCase()&&w.containsClass(e.data.element.$,l.get(\"imageClassName\"))||w.containsClass(e.data.element.$,l.get(\"CASClassName\")))&&(e.data.dialog=null)}.bind(this)),this.addEvents()}.bind(this)),e.on(\"setData\",function(e){e.data.dataValue=T.initParse(e.data.dataValue||\"\")}.bind(this)),e.on(\"afterSetData\",function(e){void 0!==T.observer&&Array.prototype.forEach.call(document.getElementsByClassName(\"Wirisformula\"),function(e){T.observer.observe(e)})}.bind(this)),e.on(\"getData\",function(e){e.data.dataValue=T.endParse(e.data.dataValue||\"\")}.bind(this)),e.on(\"mode\",function(e){this.checkElement()}.bind(this)),this.checkElement())}},{key:\"checkElement\",value:function(){var e,t=this.editorObject,n=document.getElementById(\"cke_contents_\"+t.name)?document.getElementById(\"cke_contents_\"+t.name):document.getElementById(\"cke_\"+t.name),i=!1;if(!(e=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.container.$:n.getElementsByTagName(\"iframe\")[0])){var r;for(var a in n.classList){var o=n.classList[a];if(-1!=o.search(\"cke_\\\\d\")){r=o;break}}r&&(i=!0,(e=document.getElementById(r+\"_contents\")).wirisActive=!1)}if(!e.wirisActive)if(t.elementMode===CKEDITOR.ELEMENT_MODE_INLINE){if(\"TEXTAREA\"===e.tagName){var s=document.getElementsByClassName(\"cke_textarea_inline\");Array.prototype.forEach.call(s,function(e){this.setTarget(e),this.addEvents()})}else this.setTarget(e),this.addEvents();e.wirisActive=!0}else(e.contentWindow||i)&&(this.setTarget(e),this.addEvents(),e.wirisActive=!0)}},{key:\"doubleClickHandler\",value:function(e,t){if(\"img\"==e.nodeName.toLowerCase()&&w.containsClass(e,l.get(\"imageClassName\"))){void 0!==t.stopPropagation?t.stopPropagation():t.returnValue=!1,this.core.getCustomEditors().disable();var n=e.getAttribute(l.get(\"imageCustomEditorName\"));n&&this.core.getCustomEditors().enable(n),this.core.editionProperties.temporalImage=e,this.openExistingFormulaEditor()}}},{key:\"insertFormula\",value:function(e,t,i,r){var a=_e(we(n.prototype),\"insertFormula\",this).call(this,e,t,i,r);return this.editorObject.fire(\"change\"),a}},{key:\"getCorePath\",value:function(){return CKEDITOR.plugins.getPath(this.integrationFolderName)}},{key:\"getSelection\",value:function(){return this.editorObject.editable().$.focus(),this.editorObject.getSelection().getNative()}},{key:\"callbackFunction\",value:function(){_e(we(n.prototype),\"callbackFunction\",this).call(this),this.addEditorListeners()}}]),n}();function ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}CKEDITOR.plugins.add(\"ckeditor_wiris\",{init:function(e){e.ui.addButton(\"ckeditor_wiris_formulaEditor\",{label:\"Insert a math equation - MathType\",command:\"ckeditor_wiris_openFormulaEditor\",icon:CKEDITOR.plugins.getPath(\"ckeditor_wiris\")+\"./icons/formula.png\"}),e.ui.addButton(\"ckeditor_wiris_formulaEditorChemistry\",{label:\"Insert a chemistry formula - ChemType\",command:\"ckeditor_wiris_openFormulaEditorChemistry\",icon:CKEDITOR.plugins.getPath(\"ckeditor_wiris\")+\"./icons/chem.png\"});var t=\"img[align,\";t+=l.get(\"imageMathmlAttribute\"),t+=\",src,alt](!Wirisformula)\",e.addCommand(\"ckeditor_wiris_openFormulaEditor\",{async:!1,canUndo:!0,editorFocus:!0,allowedContent:t,requiredContent:t,exec:function(e){var t=WirisPlugin.instances[e.name];t.core.getCustomEditors().disable(),t.openNewFormulaEditor()}}),e.addCommand(\"ckeditor_wiris_openFormulaEditorChemistry\",{async:!1,canUndo:!0,editorFocus:!0,allowedContent:t,requiredContent:t,exec:function(e){var t=WirisPlugin.instances[e.name];t.core.getCustomEditors().enable(\"chemistry\"),t.openNewFormulaEditor()}}),e.on(\"instanceReady\",function(){var t={};t.editorObject=e,t.target=e.container.$.querySelector(\"*[class^=cke_wysiwyg]\"),t.serviceProviderProperties={},t.serviceProviderProperties.URI=\"integration\",t.serviceProviderProperties.server=\"php\",t.version=pe.a,t.scriptName=\"plugin.js\",t.environment={},t.environment.editor=\"CKEditor4\",t.environment.editorVersion=\"4.x\",\"wiriscontextpath\"in e.config&&(t.configurationService=e.config.wiriscontextpath+t.configurationService,console.warn(\"Deprecated property wiriscontextpath. Use mathTypeParameters on instead.\",e.config.wiriscontextpath)),\"mathTypeParameters\"in e.config&&(t.integrationParameters=e.config.mathTypeParameters);var n=new xe(t);n.init(),n.listeners.fire(\"onTargetReady\",{}),WirisPlugin.instances[e.name]=n,WirisPlugin.currentInstance=n})}});var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return function(e,t,n){t&&ke(e.prototype,t),n&&ke(e,n)}(e,null,[{key:\"init\",value:function(){e.testServices()}},{key:\"testServices\",value:function(){var e;console.log(\"Testing configuration service...\"),console.log(g.getService(\"configurationjs\",\"\",\"get\")),console.log(\"Testing showimage service...\"),(e=[]).mml='<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>x</mi><mn>2</mn></msup></math>',console.log(g.getService(\"showimage\",e)),console.log(\"Testing createimage service...\"),(e=[]).mml='<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>x</mi><mn>2</mn></msup></math>',console.log(g.getService(\"createimage\",e,\"post\")),console.log(\"Testing MathML2Latex service...\"),(e=[]).service=\"mathml2latex\",e.mml='<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>x</mi><mn>2</mn></msup></math>',console.log(g.getService(\"service\",e)),console.log(\"Testing Latex2MathML service...\"),(e=[]).service=\"latex2mathml\",e.latex=\"x^2\",console.log(g.getService(\"service\",e)),console.log(\"Testing Mathml2Accesible service...\"),(e=[]).service=\"mathml2accessible\",e.mml='<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>x</mi><mn>2</mn></msup></math>',console.log(g.getService(\"service\",e))}}]),e}();window.WirisPlugin={Core:ge,Parser:T,Image:k,Util:w,Configuration:l,Listeners:m,IntegrationModel:ee,currentInstance:null,instances:{},CKEditor4Integration:xe,Latex:f,Test:Ae}}]);","extractedComments":[]}